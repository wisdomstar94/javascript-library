(()=>{var oe=Object.create;var Vt=Object.defineProperty;var le=Object.getOwnPropertyDescriptor;var ce=Object.getOwnPropertyNames;var he=Object.getPrototypeOf,de=Object.prototype.hasOwnProperty;var ue=($,p,H)=>p in $?Vt($,p,{enumerable:!0,configurable:!0,writable:!0,value:H}):$[p]=H;var Xt=($=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy($,{get:(p,H)=>(typeof require!="undefined"?require:p)[H]}):$)(function($){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+$+'" is not supported')});var Rt=($,p)=>()=>(p||$((p={exports:{}}).exports,p),p.exports);var fe=($,p,H,c)=>{if(p&&typeof p=="object"||typeof p=="function")for(let K of ce(p))!de.call($,K)&&K!==H&&Vt($,K,{get:()=>p[K],enumerable:!(c=le(p,K))||c.enumerable});return $};var Qt=($,p,H)=>(H=$!=null?oe(he($)):{},fe(p||!$||!$.__esModule?Vt(H,"default",{value:$,enumerable:!0}):H,$));var Bt=($,p,H)=>(ue($,typeof p!="symbol"?p+"":p,H),H),zt=($,p,H)=>{if(!p.has($))throw TypeError("Cannot "+H)};var ut=($,p,H)=>(zt($,p,"read from private field"),H?H.call($):p.get($)),xt=($,p,H)=>{if(p.has($))throw TypeError("Cannot add the same private member more than once");p instanceof WeakSet?p.add($):p.set($,H)},Pt=($,p,H,c)=>(zt($,p,"write to private field"),c?c.call($,H):p.set($,H),H),Zt=($,p,H,c)=>({set _(K){Pt($,p,K,H)},get _(){return ut($,p,c)}}),It=($,p,H)=>(zt($,p,"access private method"),H);var $t=Rt(()=>{});var te=Rt(()=>{});var ee=Rt(()=>{});var ne=Rt(()=>{});var se=Rt(()=>{});var ie=Rt(()=>{});var Jt=Rt((exports,module)=>{(function(p,H){typeof exports=="object"&&typeof module=="object"?module.exports=H():typeof define=="function"&&define.amd?define("pdfjs-dist/build/pdf",[],H):typeof exports=="object"?exports["pdfjs-dist/build/pdf"]=H():p["pdfjs-dist/build/pdf"]=p.pdfjsLib=H()})(exports,()=>(()=>{"use strict";var __webpack_modules__=[,($,p,H)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.VerbosityLevel=p.Util=p.UnknownErrorException=p.UnexpectedResponseException=p.UNSUPPORTED_FEATURES=p.TextRenderingMode=p.StreamType=p.RenderingIntentFlag=p.PermissionFlag=p.PasswordResponses=p.PasswordException=p.PageActionEventType=p.OPS=p.MissingPDFException=p.InvalidPDFException=p.ImageKind=p.IDENTITY_MATRIX=p.FormatError=p.FontType=p.FeatureTest=p.FONT_IDENTITY_MATRIX=p.DocumentActionEventType=p.CMapCompressionType=p.BaseException=p.AnnotationType=p.AnnotationStateModelType=p.AnnotationReviewState=p.AnnotationReplyType=p.AnnotationMode=p.AnnotationMarkedState=p.AnnotationFlag=p.AnnotationFieldFlag=p.AnnotationBorderStyleType=p.AnnotationActionEventType=p.AbortException=void 0,p.arrayByteLength=D,p.arraysToBytes=M,p.assert=Y,p.bytesToString=f,p.createPromiseCapability=Et,p.createValidAbsoluteUrl=lt,p.escapeString=it,p.getModificationDate=yt,p.getVerbosityLevel=W,p.info=z,p.isArrayBuffer=St,p.isArrayEqual=Tt,p.isAscii=bt,p.objectFromMap=B,p.objectSize=j,p.setVerbosityLevel=X,p.shadow=st,p.string32=L,p.stringToBytes=E,p.stringToPDFString=ct,p.stringToUTF16BEString=_t,p.stringToUTF8String=ft,p.unreachable=Z,p.utf8StringToString=mt,p.warn=J,H(2);let c=[1,0,0,1,0,0];p.IDENTITY_MATRIX=c;let K=[.001,0,0,.001,0,0];p.FONT_IDENTITY_MATRIX=K;let q={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};p.RenderingIntentFlag=q;let G={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};p.AnnotationMode=G;let U={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};p.PermissionFlag=U;let F={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};p.TextRenderingMode=F;let m={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};p.ImageKind=m;let x={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};p.AnnotationType=x;let k={MARKED:"Marked",REVIEW:"Review"};p.AnnotationStateModelType=k;let R={MARKED:"Marked",UNMARKED:"Unmarked"};p.AnnotationMarkedState=R;let A={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};p.AnnotationReviewState=A;let o={GROUP:"Group",REPLY:"R"};p.AnnotationReplyType=o;let u={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};p.AnnotationFlag=u;let r={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};p.AnnotationFieldFlag=r;let g={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};p.AnnotationBorderStyleType=g;let b={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};p.AnnotationActionEventType=b;let y={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};p.DocumentActionEventType=y;let S={O:"PageOpen",C:"PageClose"};p.PageActionEventType=S;let e={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};p.StreamType=e;let a={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};p.FontType=a;let _={ERRORS:0,WARNINGS:1,INFOS:5};p.VerbosityLevel=_;let T={NONE:0,BINARY:1,STREAM:2};p.CMapCompressionType=T;let C={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};p.OPS=C;let P={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};p.UNSUPPORTED_FEATURES=P;let w={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};p.PasswordResponses=w;let I=_.WARNINGS;function X(V){Number.isInteger(V)&&(I=V)}function W(){return I}function z(V){I>=_.INFOS&&console.log(`Info: ${V}`)}function J(V){I>=_.WARNINGS&&console.log(`Warning: ${V}`)}function Z(V){throw new Error(V)}function Y(V,O){V||Z(O)}function et(V){if(!V)return!1;switch(V.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function lt(V,O=null,N=null){if(!V)return null;try{if(N&&typeof V=="string"){if(N.addDefaultProtocol&&V.startsWith("www.")){let dt=V.match(/\./g);dt&&dt.length>=2&&(V=`http://${V}`)}if(N.tryConvertEncoding)try{V=ft(V)}catch(dt){}}let at=O?new URL(V,O):new URL(V);if(et(at))return at}catch(at){}return null}function st(V,O,N){return Object.defineProperty(V,O,{value:N,enumerable:!0,configurable:!0,writable:!1}),N}let v=function(){function O(N,at){this.constructor===O&&Z("Cannot initialize BaseException."),this.message=N,this.name=at}return O.prototype=new Error,O.constructor=O,O}();p.BaseException=v;class l extends v{constructor(O,N){super(O,"PasswordException"),this.code=N}}p.PasswordException=l;class s extends v{constructor(O,N){super(O,"UnknownErrorException"),this.details=N}}p.UnknownErrorException=s;class t extends v{constructor(O){super(O,"InvalidPDFException")}}p.InvalidPDFException=t;class n extends v{constructor(O){super(O,"MissingPDFException")}}p.MissingPDFException=n;class i extends v{constructor(O,N){super(O,"UnexpectedResponseException"),this.status=N}}p.UnexpectedResponseException=i;class d extends v{constructor(O){super(O,"FormatError")}}p.FormatError=d;class h extends v{constructor(O){super(O,"AbortException")}}p.AbortException=h;function f(V){(typeof V!="object"||V===null||V.length===void 0)&&Z("Invalid argument for bytesToString");let O=V.length,N=8192;if(O<N)return String.fromCharCode.apply(null,V);let at=[];for(let dt=0;dt<O;dt+=N){let gt=Math.min(dt+N,O),pt=V.subarray(dt,gt);at.push(String.fromCharCode.apply(null,pt))}return at.join("")}function E(V){typeof V!="string"&&Z("Invalid argument for stringToBytes");let O=V.length,N=new Uint8Array(O);for(let at=0;at<O;++at)N[at]=V.charCodeAt(at)&255;return N}function D(V){if(V.length!==void 0)return V.length;if(V.byteLength!==void 0)return V.byteLength;Z("Invalid argument for arrayByteLength")}function M(V){let O=V.length;if(O===1&&V[0]instanceof Uint8Array)return V[0];let N=0;for(let gt=0;gt<O;gt++)N+=D(V[gt]);let at=0,dt=new Uint8Array(N);for(let gt=0;gt<O;gt++){let pt=V[gt];pt instanceof Uint8Array||(typeof pt=="string"?pt=E(pt):pt=new Uint8Array(pt));let wt=pt.byteLength;dt.set(pt,at),at+=wt}return dt}function L(V){return String.fromCharCode(V>>24&255,V>>16&255,V>>8&255,V&255)}function j(V){return Object.keys(V).length}function B(V){let O=Object.create(null);for(let[N,at]of V)O[N]=at;return O}function Q(){let V=new Uint8Array(4);return V[0]=1,new Uint32Array(V.buffer,0,1)[0]===1}function nt(){try{return new Function(""),!0}catch(V){return!1}}class rt{static get isLittleEndian(){return st(this,"isLittleEndian",Q())}static get isEvalSupported(){return st(this,"isEvalSupported",nt())}static get isOffscreenCanvasSupported(){return st(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}p.FeatureTest=rt;let ot=[...Array(256).keys()].map(V=>V.toString(16).padStart(2,"0"));class tt{static makeHexColor(O,N,at){return`#${ot[O]}${ot[N]}${ot[at]}`}static scaleMinMax(O,N){let at;O[0]?(O[0]<0&&(at=N[0],N[0]=N[1],N[1]=at),N[0]*=O[0],N[1]*=O[0],O[3]<0&&(at=N[2],N[2]=N[3],N[3]=at),N[2]*=O[3],N[3]*=O[3]):(at=N[0],N[0]=N[2],N[2]=at,at=N[1],N[1]=N[3],N[3]=at,O[1]<0&&(at=N[2],N[2]=N[3],N[3]=at),N[2]*=O[1],N[3]*=O[1],O[2]<0&&(at=N[0],N[0]=N[1],N[1]=at),N[0]*=O[2],N[1]*=O[2]),N[0]+=O[4],N[1]+=O[4],N[2]+=O[5],N[3]+=O[5]}static transform(O,N){return[O[0]*N[0]+O[2]*N[1],O[1]*N[0]+O[3]*N[1],O[0]*N[2]+O[2]*N[3],O[1]*N[2]+O[3]*N[3],O[0]*N[4]+O[2]*N[5]+O[4],O[1]*N[4]+O[3]*N[5]+O[5]]}static applyTransform(O,N){let at=O[0]*N[0]+O[1]*N[2]+N[4],dt=O[0]*N[1]+O[1]*N[3]+N[5];return[at,dt]}static applyInverseTransform(O,N){let at=N[0]*N[3]-N[1]*N[2],dt=(O[0]*N[3]-O[1]*N[2]+N[2]*N[5]-N[4]*N[3])/at,gt=(-O[0]*N[1]+O[1]*N[0]+N[4]*N[1]-N[5]*N[0])/at;return[dt,gt]}static getAxialAlignedBoundingBox(O,N){let at=tt.applyTransform(O,N),dt=tt.applyTransform(O.slice(2,4),N),gt=tt.applyTransform([O[0],O[3]],N),pt=tt.applyTransform([O[2],O[1]],N);return[Math.min(at[0],dt[0],gt[0],pt[0]),Math.min(at[1],dt[1],gt[1],pt[1]),Math.max(at[0],dt[0],gt[0],pt[0]),Math.max(at[1],dt[1],gt[1],pt[1])]}static inverseTransform(O){let N=O[0]*O[3]-O[1]*O[2];return[O[3]/N,-O[1]/N,-O[2]/N,O[0]/N,(O[2]*O[5]-O[4]*O[3])/N,(O[4]*O[1]-O[5]*O[0])/N]}static apply3dTransform(O,N){return[O[0]*N[0]+O[1]*N[1]+O[2]*N[2],O[3]*N[0]+O[4]*N[1]+O[5]*N[2],O[6]*N[0]+O[7]*N[1]+O[8]*N[2]]}static singularValueDecompose2dScale(O){let N=[O[0],O[2],O[1],O[3]],at=O[0]*N[0]+O[1]*N[2],dt=O[0]*N[1]+O[1]*N[3],gt=O[2]*N[0]+O[3]*N[2],pt=O[2]*N[1]+O[3]*N[3],wt=(at+pt)/2,Mt=Math.sqrt((at+pt)**2-4*(at*pt-gt*dt))/2,Ft=wt+Mt||1,Ct=wt-Mt||1;return[Math.sqrt(Ft),Math.sqrt(Ct)]}static normalizeRect(O){let N=O.slice(0);return O[0]>O[2]&&(N[0]=O[2],N[2]=O[0]),O[1]>O[3]&&(N[1]=O[3],N[3]=O[1]),N}static intersect(O,N){let at=Math.max(Math.min(O[0],O[2]),Math.min(N[0],N[2])),dt=Math.min(Math.max(O[0],O[2]),Math.max(N[0],N[2]));if(at>dt)return null;let gt=Math.max(Math.min(O[1],O[3]),Math.min(N[1],N[3])),pt=Math.min(Math.max(O[1],O[3]),Math.max(N[1],N[3]));return gt>pt?null:[at,gt,dt,pt]}static bezierBoundingBox(O,N,at,dt,gt,pt,wt,Mt){let Ft=[],Ct=[[],[]],Ot,kt,Nt,At,jt,Ut,qt,Gt;for(let Ht=0;Ht<2;++Ht){if(Ht===0?(kt=6*O-12*at+6*gt,Ot=-3*O+9*at-9*gt+3*wt,Nt=3*at-3*O):(kt=6*N-12*dt+6*pt,Ot=-3*N+9*dt-9*pt+3*Mt,Nt=3*dt-3*N),Math.abs(Ot)<1e-12){if(Math.abs(kt)<1e-12)continue;At=-Nt/kt,0<At&&At<1&&Ft.push(At);continue}qt=kt*kt-4*Nt*Ot,Gt=Math.sqrt(qt),!(qt<0)&&(jt=(-kt+Gt)/(2*Ot),0<jt&&jt<1&&Ft.push(jt),Ut=(-kt-Gt)/(2*Ot),0<Ut&&Ut<1&&Ft.push(Ut))}let Dt=Ft.length,vt,Lt=Dt;for(;Dt--;)At=Ft[Dt],vt=1-At,Ct[0][Dt]=vt*vt*vt*O+3*vt*vt*At*at+3*vt*At*At*gt+At*At*At*wt,Ct[1][Dt]=vt*vt*vt*N+3*vt*vt*At*dt+3*vt*At*At*pt+At*At*At*Mt;return Ct[0][Lt]=O,Ct[1][Lt]=N,Ct[0][Lt+1]=wt,Ct[1][Lt+1]=Mt,Ct[0].length=Ct[1].length=Lt+2,[Math.min(...Ct[0]),Math.min(...Ct[1]),Math.max(...Ct[0]),Math.max(...Ct[1])]}}p.Util=tt;let ht=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ct(V){if(V[0]>="\xEF"){let N;if(V[0]==="\xFE"&&V[1]==="\xFF"?N="utf-16be":V[0]==="\xFF"&&V[1]==="\xFE"?N="utf-16le":V[0]==="\xEF"&&V[1]==="\xBB"&&V[2]==="\xBF"&&(N="utf-8"),N)try{let at=new TextDecoder(N,{fatal:!0}),dt=E(V);return at.decode(dt)}catch(at){J(`stringToPDFString: "${at}".`)}}let O=[];for(let N=0,at=V.length;N<at;N++){let dt=ht[V.charCodeAt(N)];O.push(dt?String.fromCharCode(dt):V.charAt(N))}return O.join("")}function it(V){return V.replace(/([()\\\n\r])/g,O=>O===`
`?"\\n":O==="\r"?"\\r":`\\${O}`)}function bt(V){return/^[\x00-\x7F]*$/.test(V)}function _t(V){let O=["\xFE\xFF"];for(let N=0,at=V.length;N<at;N++){let dt=V.charCodeAt(N);O.push(String.fromCharCode(dt>>8&255),String.fromCharCode(dt&255))}return O.join("")}function ft(V){return decodeURIComponent(escape(V))}function mt(V){return unescape(encodeURIComponent(V))}function St(V){return typeof V=="object"&&V!==null&&V.byteLength!==void 0}function Tt(V,O){if(V.length!==O.length)return!1;for(let N=0,at=V.length;N<at;N++)if(V[N]!==O[N])return!1;return!0}function yt(V=new Date){return[V.getUTCFullYear().toString(),(V.getUTCMonth()+1).toString().padStart(2,"0"),V.getUTCDate().toString().padStart(2,"0"),V.getUTCHours().toString().padStart(2,"0"),V.getUTCMinutes().toString().padStart(2,"0"),V.getUTCSeconds().toString().padStart(2,"0")].join("")}function Et(){let V=Object.create(null),O=!1;return Object.defineProperty(V,"settled",{get(){return O}}),V.promise=new Promise(function(N,at){V.resolve=function(dt){O=!0,N(dt)},V.reject=function(dt){O=!0,at(dt)}}),V}},($,p,H)=>{var c=H(3)},($,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.isNodeJS=void 0;let H=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");p.isNodeJS=H},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var $,H,c,K,q,G,U,F,m,Yt,k;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(13),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(14),_metadata=__w_pdfjs_require__(15),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_xfa_text=__w_pdfjs_require__(18);let DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){let{NodeCanvasFactory:A,NodeCMapReaderFactory:o,NodeStandardFontDataFactory:u}=__w_pdfjs_require__(19);exports.DefaultCanvasFactory=DefaultCanvasFactory=A,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=o,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=u}let createPDFNetworkStream;function setPDFNetworkStreamFactory(A){createPDFNetworkStream=A}function getDocument(A){let o=new PDFDocumentLoadingTask,u;if(typeof A=="string"||A instanceof URL)u={url:A};else if((0,_util.isArrayBuffer)(A))u={data:A};else if(A instanceof PDFDataRangeTransport)u={range:A};else{if(typeof A!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!A.url&&!A.data&&!A.range)throw new Error("Invalid parameter object: need either .data, .range or .url");u=A}let r=Object.create(null),g=null,b=null;for(let S in u){let e=u[S];switch(S){case"url":if(typeof window<"u")try{r[S]=new URL(e,window.location).href;continue}catch(a){(0,_util.warn)(`Cannot create valid URL: "${a}".`)}else if(typeof e=="string"||e instanceof URL){r[S]=e.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":g=e;continue;case"worker":b=e;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&e instanceof Buffer)r[S]=new Uint8Array(e);else{if(e instanceof Uint8Array)break;if(typeof e=="string")r[S]=(0,_util.stringToBytes)(e);else if(typeof e=="object"&&e!==null&&!isNaN(e.length))r[S]=new Uint8Array(e);else if((0,_util.isArrayBuffer)(e))r[S]=new Uint8Array(e);else throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.")}continue}r[S]=e}if(r.CMapReaderFactory=r.CMapReaderFactory||DefaultCMapReaderFactory,r.StandardFontDataFactory=r.StandardFontDataFactory||DefaultStandardFontDataFactory,r.ignoreErrors=r.stopAtErrors!==!0,r.fontExtraProperties=r.fontExtraProperties===!0,r.pdfBug=r.pdfBug===!0,r.enableXfa=r.enableXfa===!0,(!Number.isInteger(r.rangeChunkSize)||r.rangeChunkSize<1)&&(r.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof r.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(r.docBaseUrl))&&(r.docBaseUrl=null),(!Number.isInteger(r.maxImageSize)||r.maxImageSize<-1)&&(r.maxImageSize=-1),typeof r.cMapUrl!="string"&&(r.cMapUrl=null),typeof r.standardFontDataUrl!="string"&&(r.standardFontDataUrl=null),typeof r.useWorkerFetch!="boolean"&&(r.useWorkerFetch=r.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&r.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof r.isEvalSupported!="boolean"&&(r.isEvalSupported=!0),typeof r.disableFontFace!="boolean"&&(r.disableFontFace=_is_node.isNodeJS),typeof r.useSystemFonts!="boolean"&&(r.useSystemFonts=!_is_node.isNodeJS&&!r.disableFontFace),(typeof r.ownerDocument!="object"||r.ownerDocument===null)&&(r.ownerDocument=globalThis.document),typeof r.disableRange!="boolean"&&(r.disableRange=!1),typeof r.disableStream!="boolean"&&(r.disableStream=!1),typeof r.disableAutoFetch!="boolean"&&(r.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(r.verbosity),!b){let S={verbosity:r.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};b=S.port?PDFWorker.fromPort(S):new PDFWorker(S),o._worker=b}let y=o.docId;return b.promise.then(function(){if(o.destroyed)throw new Error("Loading aborted");let S=_fetchDocument(b,r,g,y),e=new Promise(function(a){let _;g?_=new _transport_stream.PDFDataTransportStream({length:r.length,initialData:r.initialData,progressiveDone:r.progressiveDone,contentDispositionFilename:r.contentDispositionFilename,disableRange:r.disableRange,disableStream:r.disableStream},g):r.data||(_=createPDFNetworkStream({url:r.url,length:r.length,httpHeaders:r.httpHeaders,withCredentials:r.withCredentials,rangeChunkSize:r.rangeChunkSize,disableRange:r.disableRange,disableStream:r.disableStream})),a(_)});return Promise.all([S,e]).then(function([a,_]){if(o.destroyed)throw new Error("Loading aborted");let T=new _message_handler.MessageHandler(y,a,b.port),C=new WorkerTransport(T,o,_,r);o._transport=C,T.send("Ready",null)})}).catch(o._capability.reject),o}async function _fetchDocument(A,o,u,r){if(A.destroyed)throw new Error("Worker was destroyed");u&&(o.length=u.length,o.initialData=u.initialData,o.progressiveDone=u.progressiveDone,o.contentDispositionFilename=u.contentDispositionFilename);let g=await A.messageHandler.sendWithPromise("GetDocRequest",{docId:r,apiVersion:"2.14.305",source:{data:o.data,url:o.url,password:o.password,disableAutoFetch:o.disableAutoFetch,rangeChunkSize:o.rangeChunkSize,length:o.length},maxImageSize:o.maxImageSize,disableFontFace:o.disableFontFace,docBaseUrl:o.docBaseUrl,ignoreErrors:o.ignoreErrors,isEvalSupported:o.isEvalSupported,fontExtraProperties:o.fontExtraProperties,enableXfa:o.enableXfa,useSystemFonts:o.useSystemFonts,cMapUrl:o.useWorkerFetch?o.cMapUrl:null,standardFontDataUrl:o.useWorkerFetch?o.standardFontDataUrl:null});if(A.destroyed)throw new Error("Worker was destroyed");return g}let p=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${Zt(p,$)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var o;this.destroyed=!0,await((o=this._transport)==null?void 0:o.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}},PDFDocumentLoadingTask=p;$=new WeakMap,xt(PDFDocumentLoadingTask,$,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(o,u,r=!1,g=null){this.length=o,this.initialData=u,this.progressiveDone=r,this.contentDispositionFilename=g,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(o){this._rangeListeners.push(o)}addProgressListener(o){this._progressListeners.push(o)}addProgressiveReadListener(o){this._progressiveReadListeners.push(o)}addProgressiveDoneListener(o){this._progressiveDoneListeners.push(o)}onDataRange(o,u){for(let r of this._rangeListeners)r(o,u)}onDataProgress(o,u){this._readyCapability.promise.then(()=>{for(let r of this._progressListeners)r(o,u)})}onDataProgressiveRead(o){this._readyCapability.promise.then(()=>{for(let u of this._progressiveReadListeners)u(o)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let o of this._progressiveDoneListeners)o()})}transportReady(){this._readyCapability.resolve()}requestDataRange(o,u){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(o,u){this._pdfInfo=o,this._transport=u,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(o){return this._transport.getPage(o)}getPageIndex(o){return this._transport.getPageIndex(o)}getDestinations(){return this._transport.getDestinations()}getDestination(o){return this._transport.getDestination(o)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(o=!1){return this._transport.startCleanup(o||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(o,u,r,g,b=!1){this._pageIndex=o,this._pageInfo=u,this._ownerDocument=g,this._transport=r,this._stats=b?new _display_utils.StatTimer:null,this._pdfBug=b,this.commonObjs=r.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:o,rotation:u=this.rotate,offsetX:r=0,offsetY:g=0,dontFlip:b=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:o,rotation:u,offsetX:r,offsetY:g,dontFlip:b})}getAnnotations({intent:o="display"}={}){let u=this._transport.getRenderingIntent(o),r=this._annotationPromises.get(u.cacheKey);return r||(r=this._transport.getAnnotations(this._pageIndex,u.renderingIntent),this._annotationPromises.set(u.cacheKey,r),r=r.then(g=>{for(let b of g)b.titleObj!==void 0&&Object.defineProperty(b,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),b.titleObj.str}}),b.contentsObj!==void 0&&Object.defineProperty(b,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),b.contentsObj.str}});return g})),r}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var o;return((o=this._transport._htmlForXfa)==null?void 0:o.children[this._pageIndex])||null}render({canvasContext:o,viewport:u,intent:r="display",annotationMode:g=_util.AnnotationMode.ENABLE,transform:b=null,imageLayer:y=null,canvasFactory:S=null,background:e=null,optionalContentConfigPromise:a=null,annotationCanvasMap:_=null,pageColors:T=null}){var J,Z;((J=arguments[0])==null?void 0:J.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&g===_util.AnnotationMode.ENABLE&&(g=_util.AnnotationMode.ENABLE_FORMS)),((Z=arguments[0])==null?void 0:Z.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&g===_util.AnnotationMode.ENABLE&&(g=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");let C=this._transport.getRenderingIntent(r,g);this.pendingCleanup=!1,a||(a=this._transport.getOptionalContentConfig());let P=this._intentStates.get(C.cacheKey);P||(P=Object.create(null),this._intentStates.set(C.cacheKey,P)),P.streamReaderCancelTimeout&&(clearTimeout(P.streamReaderCancelTimeout),P.streamReaderCancelTimeout=null);let w=S||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),I=!!(C.renderingIntent&_util.RenderingIntentFlag.PRINT);P.displayReadyCapability||(P.displayReadyCapability=(0,_util.createPromiseCapability)(),P.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(C));let X=Y=>{P.renderTasks.delete(W),(this.cleanupAfterRender||I)&&(this.pendingCleanup=!0),this._tryCleanup(),Y?(W.capability.reject(Y),this._abortOperatorList({intentState:P,reason:Y instanceof Error?Y:new Error(Y)})):W.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},W=new InternalRenderTask({callback:X,params:{canvasContext:o,viewport:u,transform:b,imageLayer:y,background:e},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:_,operatorList:P.operatorList,pageIndex:this._pageIndex,canvasFactory:w,useRequestAnimationFrame:!I,pdfBug:this._pdfBug,pageColors:T});(P.renderTasks||(P.renderTasks=new Set)).add(W);let z=W.task;return Promise.all([P.displayReadyCapability.promise,a]).then(([Y,et])=>{if(this.pendingCleanup){X();return}this._stats&&this._stats.time("Rendering"),W.initializeGraphics({transparency:Y,optionalContentConfig:et}),W.operatorListChanged()}).catch(X),z}getOperatorList({intent:o="display",annotationMode:u=_util.AnnotationMode.ENABLE}={}){function r(){b.operatorList.lastChunk&&(b.opListReadCapability.resolve(b.operatorList),b.renderTasks.delete(y))}let g=this._transport.getRenderingIntent(o,u,!0),b=this._intentStates.get(g.cacheKey);b||(b=Object.create(null),this._intentStates.set(g.cacheKey,b));let y;return b.opListReadCapability||(y=Object.create(null),y.operatorListChanged=r,b.opListReadCapability=(0,_util.createPromiseCapability)(),(b.renderTasks||(b.renderTasks=new Set)).add(y),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(g)),b.opListReadCapability.promise}streamTextContent({disableCombineTextItems:o=!1,includeMarkedContent:u=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:o!==!0,includeMarkedContent:u===!0},{highWaterMark:100,size(g){return g.items.length}})}getTextContent(o={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>_xfa_text.XfaText.textContent(r));let u=this.streamTextContent(o);return new Promise(function(r,g){function b(){y.read().then(function({value:e,done:a}){if(a){r(S);return}Object.assign(S.styles,e.styles),S.items.push(...e.items),b()},g)}let y=u.getReader(),S={items:[],styles:Object.create(null)};b()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;let o=[];for(let u of this._intentStates.values())if(this._abortOperatorList({intentState:u,reason:new Error("Page was destroyed."),force:!0}),!u.opListReadCapability)for(let r of u.renderTasks)o.push(r.completed),r.cancel();this.objs.clear();for(let u of this._bitmaps)u.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(o)}cleanup(o=!1){return this.pendingCleanup=!0,this._tryCleanup(o)}_tryCleanup(o=!1){if(!this.pendingCleanup)return!1;for(let{renderTasks:u,operatorList:r}of this._intentStates.values())if(u.size>0||!r.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,o&&this._stats&&(this._stats=new _display_utils.StatTimer);for(let u of this._bitmaps)u.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(o,u){let r=this._intentStates.get(u);!r||(this._stats&&this._stats.timeEnd("Page Request"),r.displayReadyCapability&&r.displayReadyCapability.resolve(o))}_renderPageChunk(o,u){for(let r=0,g=o.length;r<g;r++)u.operatorList.fnArray.push(o.fnArray[r]),u.operatorList.argsArray.push(o.argsArray[r]);u.operatorList.lastChunk=o.lastChunk;for(let r of u.renderTasks)r.operatorListChanged();o.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:o,cacheKey:u}){let g=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:o,cacheKey:u,annotationStorage:o&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),b=this._intentStates.get(u);b.streamReader=g;let y=()=>{g.read().then(({value:S,done:e})=>{if(e){b.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(S,b),y())},S=>{if(b.streamReader=null,!this._transport.destroyed){if(b.operatorList){b.operatorList.lastChunk=!0;for(let e of b.renderTasks)e.operatorListChanged();this._tryCleanup()}if(b.displayReadyCapability)b.displayReadyCapability.reject(S);else if(b.opListReadCapability)b.opListReadCapability.reject(S);else throw S}})};y()}_abortOperatorList({intentState:o,reason:u,force:r=!1}){if(!!o.streamReader){if(!r){if(o.renderTasks.size>0)return;if(u instanceof _display_utils.RenderingCancelledException){o.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:o,reason:u,force:!0}),o.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(o.streamReader.cancel(new _util.AbortException(u.message)).catch(()=>{}),o.streamReader=null,!this._transport.destroyed){for(let[g,b]of this._intentStates)if(b===o){this._intentStates.delete(g);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(o,u){let r={data:structuredClone(o,u)};this._deferred.then(()=>{for(let g of this._listeners)g.call(this,r)})}addEventListener(o,u){this._listeners.push(u)}removeEventListener(o,u){let r=this._listeners.indexOf(u);this._listeners.splice(r,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;let PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof Xt=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){let A=(H=document==null?void 0:document.currentScript)==null?void 0:H.src;A&&(PDFWorkerUtil.fallbackWorkerSrc=A.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(A,o){let u;try{if(u=new URL(A),!u.origin||u.origin==="null")return!1}catch(g){return!1}let r=new URL(o,u);return u.origin===r.origin},PDFWorkerUtil.createCDNWrapper=function(A){let o=`importScripts("${A}");`;return URL.createObjectURL(new Blob([o]))}}let _PDFWorker=class{constructor({name:A=null,port:o=null,verbosity:u=(0,_util.getVerbosityLevel)()}={}){if(o&&ut(_PDFWorker,c).has(o))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=A,this.destroyed=!1,this.verbosity=u,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,o){ut(_PDFWorker,c).set(o,this),this._initializeFromPort(o);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(A){this._port=A,this._messageHandler=new _message_handler.MessageHandler("main","worker",A),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker<"u"&&!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let A=_PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,A)||(A=PDFWorkerUtil.createCDNWrapper(new URL(A,window.location).href));let o=new Worker(A),u=new _message_handler.MessageHandler("main","worker",o),r=()=>{o.removeEventListener("error",g),u.destroy(),o.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},g=()=>{this._webWorker||r()};o.addEventListener("error",g),u.on("test",y=>{if(o.removeEventListener("error",g),this.destroyed){r();return}y?(this._messageHandler=u,this._port=o,this._webWorker=o,this._readyCapability.resolve(),u.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),u.destroy(),o.terminate())}),u.on("ready",y=>{if(o.removeEventListener("error",g),this.destroyed){r();return}try{b()}catch(S){this._setupFakeWorker()}});let b=()=>{let y=new Uint8Array;u.send("test",y,[y.buffer])};b();return}catch(o){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(A=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}let o=new LoopbackPort;this._port=o;let u=`fake${PDFWorkerUtil.fakeWorkerId++}`,r=new _message_handler.MessageHandler(u+"_worker",u,o);A.setup(r,o);let g=new _message_handler.MessageHandler(u,u+"_worker",o);this._messageHandler=g,this._readyCapability.resolve(),g.send("configure",{verbosity:this.verbosity})}).catch(A=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${A.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),ut(_PDFWorker,c).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(A){if(!(A!=null&&A.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return ut(this,c).has(A.port)?ut(this,c).get(A.port):new _PDFWorker(A)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var A;try{return((A=globalThis.pdfjsWorker)==null?void 0:A.WorkerMessageHandler)||null}catch(o){return null}}static get _setupFakeWorkerGlobal(){let loader=async()=>{let mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof Xt=="function"){let worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}},PDFWorker=_PDFWorker;c=new WeakMap,xt(PDFWorker,c,new WeakMap),exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(o,u,r,g){xt(this,K,null);xt(this,q,new Map);xt(this,G,new Map);xt(this,U,null);this.messageHandler=o,this.loadingTask=u,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:u.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:g.ownerDocument,styleElement:g.styleElement}),this._params=g,g.useWorkerFetch||(this.CMapReaderFactory=new g.CMapReaderFactory({baseUrl:g.cMapUrl,isCompressed:g.cMapPacked}),this.StandardFontDataFactory=new g.StandardFontDataFactory({baseUrl:g.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return ut(this,K)}getRenderingIntent(o,u=_util.AnnotationMode.ENABLE,r=!1){let g=_util.RenderingIntentFlag.DISPLAY,b="";switch(o){case"any":g=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":g=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${o}`)}switch(u){case _util.AnnotationMode.DISABLE:g+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:g+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:g+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,b=this.annotationStorage.hash;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${u}`)}return r&&(g+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:g,cacheKey:`${g}_${b}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));let o=[];for(let r of ut(this,q).values())o.push(r._destroy());ut(this,q).clear(),ut(this,G).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let u=this.messageHandler.sendWithPromise("Terminate",null);return o.push(u),Promise.all(o).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),Pt(this,U,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:o,loadingTask:u}=this;o.on("GetReader",(r,g)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=b=>{this._lastProgress={loaded:b.loaded,total:b.total}},g.onPull=()=>{this._fullReader.read().then(function({value:b,done:y}){if(y){g.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(b),"GetReader - expected an ArrayBuffer."),g.enqueue(new Uint8Array(b),1,[b])}).catch(b=>{g.error(b)})},g.onCancel=b=>{this._fullReader.cancel(b),g.ready.catch(y=>{if(!this.destroyed)throw y})}}),o.on("ReaderHeadersReady",r=>{let g=(0,_util.createPromiseCapability)(),b=this._fullReader;return b.headersReady.then(()=>{var y;(!b.isStreamingSupported||!b.isRangeSupported)&&(this._lastProgress&&((y=u.onProgress)==null||y.call(u,this._lastProgress)),b.onProgress=S=>{var e;(e=u.onProgress)==null||e.call(u,{loaded:S.loaded,total:S.total})}),g.resolve({isStreamingSupported:b.isStreamingSupported,isRangeSupported:b.isRangeSupported,contentLength:b.contentLength})},g.reject),g.promise}),o.on("GetRangeReader",(r,g)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let b=this._networkStream.getRangeReader(r.begin,r.end);if(!b){g.close();return}g.onPull=()=>{b.read().then(function({value:y,done:S}){if(S){g.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(y),"GetRangeReader - expected an ArrayBuffer."),g.enqueue(new Uint8Array(y),1,[y])}).catch(y=>{g.error(y)})},g.onCancel=y=>{b.cancel(y),g.ready.catch(S=>{if(!this.destroyed)throw S})}}),o.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,u._capability.resolve(new PDFDocumentProxy(r,this))}),o.on("DocException",function(r){let g;switch(r.name){case"PasswordException":g=new _util.PasswordException(r.message,r.code);break;case"InvalidPDFException":g=new _util.InvalidPDFException(r.message);break;case"MissingPDFException":g=new _util.MissingPDFException(r.message);break;case"UnexpectedResponseException":g=new _util.UnexpectedResponseException(r.message,r.status);break;case"UnknownErrorException":g=new _util.UnknownErrorException(r.message,r.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}u._capability.reject(g)}),o.on("PasswordRequest",r=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),u.onPassword){let g=b=>{b instanceof Error?this._passwordCapability.reject(b):this._passwordCapability.resolve({password:b})};try{u.onPassword(g,r.code)}catch(b){this._passwordCapability.reject(b)}}else this._passwordCapability.reject(new _util.PasswordException(r.message,r.code));return this._passwordCapability.promise}),o.on("DataLoaded",r=>{var g;(g=u.onProgress)==null||g.call(u,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),o.on("StartRenderPage",r=>{if(this.destroyed)return;ut(this,q).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),o.on("commonobj",([r,g,b])=>{var y;if(!this.destroyed&&!this.commonObjs.has(r))switch(g){case"Font":let S=this._params;if("error"in b){let _=b.error;(0,_util.warn)(`Error during font loading: ${_}`),this.commonObjs.resolve(r,_);break}let e=null;S.pdfBug&&((y=globalThis.FontInspector)==null?void 0:y.enabled)&&(e={registerFont(_,T){globalThis.FontInspector.fontAdded(_,T)}});let a=new _font_loader.FontFaceObject(b,{isEvalSupported:S.isEvalSupported,disableFontFace:S.disableFontFace,ignoreErrors:S.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:e});this.fontLoader.bind(a).catch(_=>o.sendWithPromise("FontFallback",{id:r})).finally(()=>{!S.fontExtraProperties&&a.data&&(a.data=null),this.commonObjs.resolve(r,a)});break;case"FontPath":case"Image":this.commonObjs.resolve(r,b);break;default:throw new Error(`Got unknown common object type ${g}`)}}),o.on("obj",([r,g,b,y])=>{var e;if(this.destroyed)return;let S=ut(this,q).get(g);if(!S.objs.has(r))switch(b){case"Image":S.objs.resolve(r,y);let a=8e6;if(y){let _;if(y.bitmap){let{bitmap:T,width:C,height:P}=y;_=C*P*4,S._bitmaps.add(T)}else _=((e=y.data)==null?void 0:e.length)||0;_>a&&(S.cleanupAfterRender=!0)}break;case"Pattern":S.objs.resolve(r,y);break;default:throw new Error(`Got unknown object type ${b}`)}}),o.on("DocProgress",r=>{var g;this.destroyed||(g=u.onProgress)==null||g.call(u,{loaded:r.loaded,total:r.total})}),o.on("DocStats",r=>{this.destroyed||Pt(this,K,Object.freeze({streamTypes:Object.freeze(r.streamTypes),fontTypes:Object.freeze(r.fontTypes)}))}),o.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),o.on("FetchBuiltInCMap",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),o.on("FetchStandardFontData",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:o}){var u,r;this.destroyed||(r=(u=this.loadingTask).onUnsupportedFeature)==null||r.call(u,o)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(o){if(!Number.isInteger(o)||o<=0||o>this._numPages)return Promise.reject(new Error("Invalid page request."));let u=o-1,r=ut(this,G).get(u);if(r)return r;let g=this.messageHandler.sendWithPromise("GetPage",{pageIndex:u}).then(b=>{if(this.destroyed)throw new Error("Transport destroyed");let y=new PDFPageProxy(u,b,this,this._params.ownerDocument,this._params.pdfBug);return ut(this,q).set(u,y),y});return ut(this,G).set(u,g),g}getPageIndex(o){return typeof o!="object"||o===null||!Number.isInteger(o.num)||o.num<0||!Number.isInteger(o.gen)||o.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:o.num,gen:o.gen})}getAnnotations(o,u){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:o,intent:u})}saveDocument(){var o,u;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(u=(o=this._fullReader)==null?void 0:o.filename)!=null?u:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(o){return typeof o!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:o})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(o){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:o})}getStructTree(o){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:o})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(o=>new _optional_content_config.OptionalContentConfig(o))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return ut(this,U)||Pt(this,U,this.messageHandler.sendWithPromise("GetMetadata",null).then(o=>{var u,r,g,b;return{info:o[0],metadata:o[1]?new _metadata.Metadata(o[1]):null,contentDispositionFilename:(r=(u=this._fullReader)==null?void 0:u.filename)!=null?r:null,contentLength:(b=(g=this._fullReader)==null?void 0:g.contentLength)!=null?b:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(o=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(let u of ut(this,q).values())if(!u.cleanup())throw new Error(`startCleanup: Page ${u.pageNumber} is currently rendering.`);this.commonObjs.clear(),o||this.fontLoader.clear(),Pt(this,U,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){let o=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:o.disableAutoFetch,enableXfa:o.enableXfa})}}K=new WeakMap,q=new WeakMap,G=new WeakMap,U=new WeakMap;class PDFObjects{constructor(){xt(this,m);xt(this,F,Object.create(null))}get(o,u=null){if(u){let g=It(this,m,Yt).call(this,o);return g.capability.promise.then(()=>u(g.data)),null}let r=ut(this,F)[o];if(!(r!=null&&r.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${o}.`);return r.data}has(o){let u=ut(this,F)[o];return(u==null?void 0:u.capability.settled)||!1}resolve(o,u=null){let r=It(this,m,Yt).call(this,o);r.data=u,r.capability.resolve()}clear(){Pt(this,F,Object.create(null))}}F=new WeakMap,m=new WeakSet,Yt=function(o){let u=ut(this,F)[o];return u||(ut(this,F)[o]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(o){this._internalRenderTask=o,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;let R=class{constructor({callback:o,params:u,objs:r,commonObjs:g,annotationCanvasMap:b,operatorList:y,pageIndex:S,canvasFactory:e,useRequestAnimationFrame:a=!1,pdfBug:_=!1,pageColors:T=null}){this.callback=o,this.params=u,this.objs=r,this.commonObjs=g,this.annotationCanvasMap=b,this.operatorListIdx=null,this.operatorList=y,this._pageIndex=S,this.canvasFactory=e,this._pdfBug=_,this.pageColors=T,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=a===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=u.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:o=!1,optionalContentConfig:u}){var e;if(this.cancelled)return;if(this._canvas){if(ut(R,k).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ut(R,k).add(this._canvas)}this._pdfBug&&((e=globalThis.StepperManager)==null?void 0:e.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:r,viewport:g,transform:b,imageLayer:y,background:S}=this.params;this.gfx=new _canvas.CanvasGraphics(r,this.commonObjs,this.objs,this.canvasFactory,y,u,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:b,viewport:g,transparency:o,background:S}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(o=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&ut(R,k).delete(this._canvas),this.callback(o||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&ut(R,k).delete(this._canvas),this.callback())))}},InternalRenderTask=R;k=new WeakMap,xt(InternalRenderTask,k,new WeakSet);let version="2.14.305";exports.version=version;let build="eaaa8b4ad";exports.build=build},($,p,H)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.StatTimer=p.RenderingCancelledException=p.PixelsPerInch=p.PageViewport=p.PDFDateString=p.DOMStandardFontDataFactory=p.DOMSVGFactory=p.DOMCanvasFactory=p.DOMCMapReaderFactory=void 0,p.deprecated=e,p.getFilenameFromUrl=r,p.getPdfFilenameFromUrl=g,p.getXfaPageViewport=T,p.isDataScheme=o,p.isPdfFile=u,p.isValidFetchUrl=y,p.loadScript=S;var c=H(6),K=H(1);let q="http://www.w3.org/2000/svg",C=class{},G=C;Bt(G,"CSS",96),Bt(G,"PDF",72),Bt(G,"PDF_TO_CSS_UNITS",C.CSS/C.PDF),p.PixelsPerInch=G;class U extends c.BaseCanvasFactory{constructor({ownerDocument:w=globalThis.document}={}){super(),this._document=w}_createCanvas(w,I){let X=this._document.createElement("canvas");return X.width=w,X.height=I,X}}p.DOMCanvasFactory=U;async function F(P,w=!1){if(y(P,document.baseURI)){let I=await fetch(P);if(!I.ok)throw new Error(I.statusText);return w?new Uint8Array(await I.arrayBuffer()):(0,K.stringToBytes)(await I.text())}return new Promise((I,X)=>{let W=new XMLHttpRequest;W.open("GET",P,!0),w&&(W.responseType="arraybuffer"),W.onreadystatechange=()=>{if(W.readyState===XMLHttpRequest.DONE){if(W.status===200||W.status===0){let z;if(w&&W.response?z=new Uint8Array(W.response):!w&&W.responseText&&(z=(0,K.stringToBytes)(W.responseText)),z){I(z);return}}X(new Error(W.statusText))}},W.send(null)})}class m extends c.BaseCMapReaderFactory{_fetchData(w,I){return F(w,this.isCompressed).then(X=>({cMapData:X,compressionType:I}))}}p.DOMCMapReaderFactory=m;class x extends c.BaseStandardFontDataFactory{_fetchData(w){return F(w,!0)}}p.DOMStandardFontDataFactory=x;class k extends c.BaseSVGFactory{_createSVG(w){return document.createElementNS(q,w)}}p.DOMSVGFactory=k;class R{constructor({viewBox:w,scale:I,rotation:X,offsetX:W=0,offsetY:z=0,dontFlip:J=!1}){this.viewBox=w,this.scale=I,this.rotation=X,this.offsetX=W,this.offsetY=z;let Z=(w[2]+w[0])/2,Y=(w[3]+w[1])/2,et,lt,st,v;switch(X%=360,X<0&&(X+=360),X){case 180:et=-1,lt=0,st=0,v=1;break;case 90:et=0,lt=1,st=1,v=0;break;case 270:et=0,lt=-1,st=-1,v=0;break;case 0:et=1,lt=0,st=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}J&&(st=-st,v=-v);let l,s,t,n;et===0?(l=Math.abs(Y-w[1])*I+W,s=Math.abs(Z-w[0])*I+z,t=Math.abs(w[3]-w[1])*I,n=Math.abs(w[2]-w[0])*I):(l=Math.abs(Z-w[0])*I+W,s=Math.abs(Y-w[1])*I+z,t=Math.abs(w[2]-w[0])*I,n=Math.abs(w[3]-w[1])*I),this.transform=[et*I,lt*I,st*I,v*I,l-et*I*Z-st*I*Y,s-lt*I*Z-v*I*Y],this.width=t,this.height=n}clone({scale:w=this.scale,rotation:I=this.rotation,offsetX:X=this.offsetX,offsetY:W=this.offsetY,dontFlip:z=!1}={}){return new R({viewBox:this.viewBox.slice(),scale:w,rotation:I,offsetX:X,offsetY:W,dontFlip:z})}convertToViewportPoint(w,I){return K.Util.applyTransform([w,I],this.transform)}convertToViewportRectangle(w){let I=K.Util.applyTransform([w[0],w[1]],this.transform),X=K.Util.applyTransform([w[2],w[3]],this.transform);return[I[0],I[1],X[0],X[1]]}convertToPdfPoint(w,I){return K.Util.applyInverseTransform([w,I],this.transform)}}p.PageViewport=R;class A extends K.BaseException{constructor(w,I){super(w,"RenderingCancelledException"),this.type=I}}p.RenderingCancelledException=A;function o(P){let w=P.length,I=0;for(;I<w&&P[I].trim()==="";)I++;return P.substring(I,I+5).toLowerCase()==="data:"}function u(P){return typeof P=="string"&&/\.pdf$/i.test(P)}function r(P){let w=P.indexOf("#"),I=P.indexOf("?"),X=Math.min(w>0?w:P.length,I>0?I:P.length);return P.substring(P.lastIndexOf("/",X)+1,X)}function g(P,w="document.pdf"){if(typeof P!="string")return w;if(o(P))return(0,K.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),w;let I=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,X=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,W=I.exec(P),z=X.exec(W[1])||X.exec(W[2])||X.exec(W[3]);if(z&&(z=z[0],z.includes("%")))try{z=X.exec(decodeURIComponent(z))[0]}catch(J){}return z||w}class b{constructor(){this.started=Object.create(null),this.times=[]}time(w){w in this.started&&(0,K.warn)(`Timer is already running for ${w}`),this.started[w]=Date.now()}timeEnd(w){w in this.started||(0,K.warn)(`Timer has not been started for ${w}`),this.times.push({name:w,start:this.started[w],end:Date.now()}),delete this.started[w]}toString(){let w=[],I=0;for(let X of this.times){let W=X.name;W.length>I&&(I=W.length)}for(let X of this.times){let W=X.end-X.start;w.push(`${X.name.padEnd(I)} ${W}ms
`)}return w.join("")}}p.StatTimer=b;function y(P,w){try{let{protocol:I}=w?new URL(P,w):new URL(P);return I==="http:"||I==="https:"}catch(I){return!1}}function S(P,w=!1){return new Promise((I,X)=>{let W=document.createElement("script");W.src=P,W.onload=function(z){w&&W.remove(),I(z)},W.onerror=function(){X(new Error(`Cannot load script at: ${W.src}`))},(document.head||document.documentElement).appendChild(W)})}function e(P){console.log("Deprecated API usage: "+P)}let a;class _{static toDateObject(w){if(!w||typeof w!="string")return null;a||(a=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));let I=a.exec(w);if(!I)return null;let X=parseInt(I[1],10),W=parseInt(I[2],10);W=W>=1&&W<=12?W-1:0;let z=parseInt(I[3],10);z=z>=1&&z<=31?z:1;let J=parseInt(I[4],10);J=J>=0&&J<=23?J:0;let Z=parseInt(I[5],10);Z=Z>=0&&Z<=59?Z:0;let Y=parseInt(I[6],10);Y=Y>=0&&Y<=59?Y:0;let et=I[7]||"Z",lt=parseInt(I[8],10);lt=lt>=0&&lt<=23?lt:0;let st=parseInt(I[9],10)||0;return st=st>=0&&st<=59?st:0,et==="-"?(J+=lt,Z+=st):et==="+"&&(J-=lt,Z-=st),new Date(Date.UTC(X,W,z,J,Z,Y))}}p.PDFDateString=_;function T(P,{scale:w=1,rotation:I=0}){let{width:X,height:W}=P.attributes.style,z=[0,0,parseInt(X),parseInt(W)];return new R({viewBox:z,scale:w,rotation:I})}},($,p,H)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BaseStandardFontDataFactory=p.BaseSVGFactory=p.BaseCanvasFactory=p.BaseCMapReaderFactory=void 0;var c=H(1);class K{constructor(){this.constructor===K&&(0,c.unreachable)("Cannot initialize BaseCanvasFactory.")}create(m,x){if(m<=0||x<=0)throw new Error("Invalid canvas size");let k=this._createCanvas(m,x);return{canvas:k,context:k.getContext("2d")}}reset(m,x,k){if(!m.canvas)throw new Error("Canvas is not specified");if(x<=0||k<=0)throw new Error("Invalid canvas size");m.canvas.width=x,m.canvas.height=k}destroy(m){if(!m.canvas)throw new Error("Canvas is not specified");m.canvas.width=0,m.canvas.height=0,m.canvas=null,m.context=null}_createCanvas(m,x){(0,c.unreachable)("Abstract method `_createCanvas` called.")}}p.BaseCanvasFactory=K;class q{constructor({baseUrl:m=null,isCompressed:x=!1}){this.constructor===q&&(0,c.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=m,this.isCompressed=x}async fetch({name:m}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!m)throw new Error("CMap name must be specified.");let x=this.baseUrl+m+(this.isCompressed?".bcmap":""),k=this.isCompressed?c.CMapCompressionType.BINARY:c.CMapCompressionType.NONE;return this._fetchData(x,k).catch(R=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${x}`)})}_fetchData(m,x){(0,c.unreachable)("Abstract method `_fetchData` called.")}}p.BaseCMapReaderFactory=q;class G{constructor({baseUrl:m=null}){this.constructor===G&&(0,c.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=m}async fetch({filename:m}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!m)throw new Error("Font filename must be specified.");let x=`${this.baseUrl}${m}`;return this._fetchData(x).catch(k=>{throw new Error(`Unable to load font data at: ${x}`)})}_fetchData(m){(0,c.unreachable)("Abstract method `_fetchData` called.")}}p.BaseStandardFontDataFactory=G;class U{constructor(){this.constructor===U&&(0,c.unreachable)("Cannot initialize BaseSVGFactory.")}create(m,x){if(m<=0||x<=0)throw new Error("Invalid SVG dimensions");let k=this._createSVG("svg:svg");return k.setAttribute("version","1.1"),k.setAttribute("width",`${m}px`),k.setAttribute("height",`${x}px`),k.setAttribute("preserveAspectRatio","none"),k.setAttribute("viewBox",`0 0 ${m} ${x}`),k}createElement(m){if(typeof m!="string")throw new Error("Invalid SVG element type");return this._createSVG(m)}_createSVG(m){(0,c.unreachable)("Abstract method `_createSVG` called.")}}p.BaseSVGFactory=U},($,p,H)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.FontLoader=p.FontFaceObject=void 0;var c=H(1);class K{constructor({docId:F,onUnsupportedFeature:m,ownerDocument:x=globalThis.document,styleElement:k=null}){this.constructor===K&&(0,c.unreachable)("Cannot initialize BaseFontLoader."),this.docId=F,this._onUnsupportedFeature=m,this._document=x,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(F){this.nativeFontFaces.push(F),this._document.fonts.add(F)}insertRule(F){let m=this.styleElement;m||(m=this.styleElement=this._document.createElement("style"),m.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(m));let x=m.sheet;x.insertRule(F,x.cssRules.length)}clear(){for(let F of this.nativeFontFaces)this._document.fonts.delete(F);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(F){if(F.attached||F.missingFile)return;if(F.attached=!0,this.isFontLoadingAPISupported){let x=F.createNativeFontFace();if(x){this.addNativeFontFace(x);try{await x.loaded}catch(k){throw this._onUnsupportedFeature({featureId:c.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,c.warn)(`Failed to load font '${x.family}': '${k}'.`),F.disableFontFace=!0,k}}return}let m=F.createFontFaceRule();if(m){if(this.insertRule(m),this.isSyncFontLoadingSupported)return;await new Promise(x=>{let k=this._queueLoadingCallback(x);this._prepareFontLoadEvent([m],[F],k)})}}_queueLoadingCallback(F){(0,c.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var m;let F=!!((m=this._document)!=null&&m.fonts);return(0,c.shadow)(this,"isFontLoadingAPISupported",F)}get isSyncFontLoadingSupported(){(0,c.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,c.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(F,m,x){(0,c.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let q;p.FontLoader=q,p.FontLoader=q=class extends K{constructor(F){super(F),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let F=!1;if(typeof navigator>"u")F=!0;else{let m=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(m==null?void 0:m[1])>=14&&(F=!0)}return(0,c.shadow)(this,"isSyncFontLoadingSupported",F)}_queueLoadingCallback(F){function m(){for((0,c.assert)(!k.done,"completeRequest() cannot be called twice."),k.done=!0;x.requests.length>0&&x.requests[0].done;){let R=x.requests.shift();setTimeout(R.callback,0)}}let x=this.loadingContext,k={id:`pdfjs-font-loading-${x.nextRequestId++}`,done:!1,complete:m,callback:F};return x.requests.push(k),k}get _loadTestFont(){let F=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,c.shadow)(this,"_loadTestFont",F())}_prepareFontLoadEvent(F,m,x){function k(X,W){return X.charCodeAt(W)<<24|X.charCodeAt(W+1)<<16|X.charCodeAt(W+2)<<8|X.charCodeAt(W+3)&255}function R(X,W,z,J){let Z=X.substring(0,W),Y=X.substring(W+z);return Z+J+Y}let A,o,u=this._document.createElement("canvas");u.width=1,u.height=1;let r=u.getContext("2d"),g=0;function b(X,W){if(g++,g>30){(0,c.warn)("Load test font never loaded."),W();return}if(r.font="30px "+X,r.fillText(".",0,20),r.getImageData(0,0,1,1).data[3]>0){W();return}setTimeout(b.bind(null,X,W))}let y=`lt${Date.now()}${this.loadTestFontId++}`,S=this._loadTestFont;S=R(S,976,y.length,y);let a=16,_=1482184792,T=k(S,a);for(A=0,o=y.length-3;A<o;A+=4)T=T-_+k(y,A)|0;A<y.length&&(T=T-_+k(y+"XXX",A)|0),S=R(S,a,4,(0,c.string32)(T));let C=`url(data:font/opentype;base64,${btoa(S)});`,P=`@font-face {font-family:"${y}";src:${C}}`;this.insertRule(P);let w=[];for(let X of m)w.push(X.loadedName);w.push(y);let I=this._document.createElement("div");I.style.visibility="hidden",I.style.width=I.style.height="10px",I.style.position="absolute",I.style.top=I.style.left="0px";for(let X of w){let W=this._document.createElement("span");W.textContent="Hi",W.style.fontFamily=X,I.appendChild(W)}this._document.body.appendChild(I),b(y,()=>{I.remove(),x.complete()})}};class G{constructor(F,{isEvalSupported:m=!0,disableFontFace:x=!1,ignoreErrors:k=!1,onUnsupportedFeature:R,fontRegistry:A=null}){this.compiledGlyphs=Object.create(null);for(let o in F)this[o]=F[o];this.isEvalSupported=m!==!1,this.disableFontFace=x===!0,this.ignoreErrors=k===!0,this._onUnsupportedFeature=R,this.fontRegistry=A}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let F;if(!this.cssFontInfo)F=new FontFace(this.loadedName,this.data,{});else{let m={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(m.style=`oblique ${this.cssFontInfo.italicAngle}deg`),F=new FontFace(this.cssFontInfo.fontFamily,this.data,m)}return this.fontRegistry&&this.fontRegistry.registerFont(this),F}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let F=(0,c.bytesToString)(this.data),m=`url(data:${this.mimetype};base64,${btoa(F)});`,x;if(!this.cssFontInfo)x=`@font-face {font-family:"${this.loadedName}";src:${m}}`;else{let k=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(k+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),x=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${k}src:${m}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,m),x}getPathGenerator(F,m){if(this.compiledGlyphs[m]!==void 0)return this.compiledGlyphs[m];let x;try{x=F.get(this.loadedName+"_path_"+m)}catch(k){if(!this.ignoreErrors)throw k;return this._onUnsupportedFeature({featureId:c.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,c.warn)(`getPathGenerator - ignoring character: "${k}".`),this.compiledGlyphs[m]=function(R,A){}}if(this.isEvalSupported&&c.FeatureTest.isEvalSupported){let k=[];for(let R of x){let A=R.args!==void 0?R.args.join(","):"";k.push("c.",R.cmd,"(",A,`);
`)}return this.compiledGlyphs[m]=new Function("c","size",k.join(""))}return this.compiledGlyphs[m]=function(k,R){for(let A of x)A.cmd==="scale"&&(A.args=[R,-R]),k[A.cmd].apply(k,A.args)}}}p.FontFaceObject=G},($,p,H)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.AnnotationStorage=void 0;var c=H(9),K=H(1);class q{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(U,F){let m=this._storage.get(U);return m===void 0?F:Object.assign(F,m)}getRawValue(U){return this._storage.get(U)}setValue(U,F){let m=this._storage.get(U),x=!1;if(m!==void 0)for(let[k,R]of Object.entries(F))m[k]!==R&&(x=!0,m[k]=R);else x=!0,this._storage.set(U,F);x&&this._setModified()}getAll(){return this._storage.size>0?(0,K.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get hash(){let U=new c.MurmurHash3_64;for(let[F,m]of this._storage)U.update(`${F}:${JSON.stringify(m)}`);return U.hexdigest()}}p.AnnotationStorage=q},($,p,H)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MurmurHash3_64=void 0;var c=H(1);let K=3285377520,q=4294901760,G=65535;class U{constructor(m){this.h1=m?m&4294967295:K,this.h2=m?m&4294967295:K}update(m){let x,k;if(typeof m=="string"){x=new Uint8Array(m.length*2),k=0;for(let _=0,T=m.length;_<T;_++){let C=m.charCodeAt(_);C<=255?x[k++]=C:(x[k++]=C>>>8,x[k++]=C&255)}}else if((0,c.isArrayBuffer)(m))x=m.slice(),k=x.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");let R=k>>2,A=k-R*4,o=new Uint32Array(x.buffer,0,R),u=0,r=0,g=this.h1,b=this.h2,y=3432918353,S=461845907,e=y&G,a=S&G;for(let _=0;_<R;_++)_&1?(u=o[_],u=u*y&q|u*e&G,u=u<<15|u>>>17,u=u*S&q|u*a&G,g^=u,g=g<<13|g>>>19,g=g*5+3864292196):(r=o[_],r=r*y&q|r*e&G,r=r<<15|r>>>17,r=r*S&q|r*a&G,b^=r,b=b<<13|b>>>19,b=b*5+3864292196);switch(u=0,A){case 3:u^=x[R*4+2]<<16;case 2:u^=x[R*4+1]<<8;case 1:u^=x[R*4],u=u*y&q|u*e&G,u=u<<15|u>>>17,u=u*S&q|u*a&G,R&1?g^=u:b^=u}this.h1=g,this.h2=b}hexdigest(){let m=this.h1,x=this.h2;m^=x>>>1,m=m*3981806797&q|m*36045&G,x=x*4283543511&q|((x<<16|m>>>16)*2950163797&q)>>>16,m^=x>>>1,m=m*444984403&q|m*60499&G,x=x*3301882366&q|((x<<16|m>>>16)*3120437893&q)>>>16,m^=x>>>1;let k=(m>>>0).toString(16),R=(x>>>0).toString(16);return k.padStart(8,"0")+R.padStart(8,"0")}}p.MurmurHash3_64=U},($,p,H)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.CanvasGraphics=void 0;var c=H(1),K=H(11),q=H(12),G=H(3),U=H(5);let F=16,m=100,x=4096,k=15,R=10,A=!0,o=1e3,u=16,r=1.000001;function g(v,l){if(v._removeMirroring)throw new Error("Context is already forwarding operations.");v.__originalSave=v.save,v.__originalRestore=v.restore,v.__originalRotate=v.rotate,v.__originalScale=v.scale,v.__originalTranslate=v.translate,v.__originalTransform=v.transform,v.__originalSetTransform=v.setTransform,v.__originalResetTransform=v.resetTransform,v.__originalClip=v.clip,v.__originalMoveTo=v.moveTo,v.__originalLineTo=v.lineTo,v.__originalBezierCurveTo=v.bezierCurveTo,v.__originalRect=v.rect,v.__originalClosePath=v.closePath,v.__originalBeginPath=v.beginPath,v._removeMirroring=()=>{v.save=v.__originalSave,v.restore=v.__originalRestore,v.rotate=v.__originalRotate,v.scale=v.__originalScale,v.translate=v.__originalTranslate,v.transform=v.__originalTransform,v.setTransform=v.__originalSetTransform,v.resetTransform=v.__originalResetTransform,v.clip=v.__originalClip,v.moveTo=v.__originalMoveTo,v.lineTo=v.__originalLineTo,v.bezierCurveTo=v.__originalBezierCurveTo,v.rect=v.__originalRect,v.closePath=v.__originalClosePath,v.beginPath=v.__originalBeginPath,delete v._removeMirroring},v.save=function(){l.save(),this.__originalSave()},v.restore=function(){l.restore(),this.__originalRestore()},v.translate=function(t,n){l.translate(t,n),this.__originalTranslate(t,n)},v.scale=function(t,n){l.scale(t,n),this.__originalScale(t,n)},v.transform=function(t,n,i,d,h,f){l.transform(t,n,i,d,h,f),this.__originalTransform(t,n,i,d,h,f)},v.setTransform=function(t,n,i,d,h,f){l.setTransform(t,n,i,d,h,f),this.__originalSetTransform(t,n,i,d,h,f)},v.resetTransform=function(){l.resetTransform(),this.__originalResetTransform()},v.rotate=function(t){l.rotate(t),this.__originalRotate(t)},v.clip=function(t){l.clip(t),this.__originalClip(t)},v.moveTo=function(s,t){l.moveTo(s,t),this.__originalMoveTo(s,t)},v.lineTo=function(s,t){l.lineTo(s,t),this.__originalLineTo(s,t)},v.bezierCurveTo=function(s,t,n,i,d,h){l.bezierCurveTo(s,t,n,i,d,h),this.__originalBezierCurveTo(s,t,n,i,d,h)},v.rect=function(s,t,n,i){l.rect(s,t,n,i),this.__originalRect(s,t,n,i)},v.closePath=function(){l.closePath(),this.__originalClosePath()},v.beginPath=function(){l.beginPath(),this.__originalBeginPath()}}function b(v){if(v._transformStack&&(v._transformStack=[]),!v.mozCurrentTransform){v._originalSave=v.save,v._originalRestore=v.restore,v._originalRotate=v.rotate,v._originalScale=v.scale,v._originalTranslate=v.translate,v._originalTransform=v.transform,v._originalSetTransform=v.setTransform,v._originalResetTransform=v.resetTransform,v._transformMatrix=v._transformMatrix||[1,0,0,1,0,0],v._transformStack=[];try{let l=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(v),"lineWidth");v._setLineWidth=l.set,v._getLineWidth=l.get,Object.defineProperty(v,"lineWidth",{set:function(t){this._setLineWidth(t*r)},get:function(){return this._getLineWidth()}})}catch(l){}Object.defineProperty(v,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(v,"mozCurrentTransformInverse",{get:function(){let[s,t,n,i,d,h]=this._transformMatrix,f=s*i-t*n,E=t*n-s*i;return[i/f,t/E,n/E,s/f,(i*d-n*h)/E,(t*d-s*h)/f]}}),v.save=function(){let s=this._transformMatrix;this._transformStack.push(s),this._transformMatrix=s.slice(0,6),this._originalSave()},v.restore=function(){this._transformStack.length===0&&(0,c.warn)("Tried to restore a ctx when the stack was already empty.");let s=this._transformStack.pop();s&&(this._transformMatrix=s,this._originalRestore())},v.translate=function(s,t){let n=this._transformMatrix;n[4]=n[0]*s+n[2]*t+n[4],n[5]=n[1]*s+n[3]*t+n[5],this._originalTranslate(s,t)},v.scale=function(s,t){let n=this._transformMatrix;n[0]*=s,n[1]*=s,n[2]*=t,n[3]*=t,this._originalScale(s,t)},v.transform=function(s,t,n,i,d,h){let f=this._transformMatrix;this._transformMatrix=[f[0]*s+f[2]*t,f[1]*s+f[3]*t,f[0]*n+f[2]*i,f[1]*n+f[3]*i,f[0]*d+f[2]*h+f[4],f[1]*d+f[3]*h+f[5]],v._originalTransform(s,t,n,i,d,h)},v.setTransform=function(s,t,n,i,d,h){this._transformMatrix=[s,t,n,i,d,h],v._originalSetTransform(s,t,n,i,d,h)},v.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],v._originalResetTransform()},v.rotate=function(s){let t=Math.cos(s),n=Math.sin(s),i=this._transformMatrix;this._transformMatrix=[i[0]*t+i[2]*n,i[1]*t+i[3]*n,i[0]*-n+i[2]*t,i[1]*-n+i[3]*t,i[4],i[5]],this._originalRotate(s)}}}class y{constructor(l){this.canvasFactory=l,this.cache=Object.create(null)}getCanvas(l,s,t,n){let i;return this.cache[l]!==void 0?(i=this.cache[l],this.canvasFactory.reset(i,s,t),i.context.setTransform(1,0,0,1,0,0)):(i=this.canvasFactory.create(s,t),this.cache[l]=i),n&&b(i.context),i}delete(l){delete this.cache[l]}clear(){for(let l in this.cache){let s=this.cache[l];this.canvasFactory.destroy(s),delete this.cache[l]}}}function S(v,l,s,t,n,i,d,h,f,E){let[D,M,L,j,B,Q]=v.mozCurrentTransform;if(M===0&&L===0){let ot=d*D+B,tt=Math.round(ot),ht=h*j+Q,ct=Math.round(ht),it=(d+f)*D+B,bt=Math.abs(Math.round(it)-tt)||1,_t=(h+E)*j+Q,ft=Math.abs(Math.round(_t)-ct)||1;return v.setTransform(Math.sign(D),0,0,Math.sign(j),tt,ct),v.drawImage(l,s,t,n,i,0,0,bt,ft),v.setTransform(D,M,L,j,B,Q),[bt,ft]}if(D===0&&j===0){let ot=h*L+B,tt=Math.round(ot),ht=d*M+Q,ct=Math.round(ht),it=(h+E)*L+B,bt=Math.abs(Math.round(it)-tt)||1,_t=(d+f)*M+Q,ft=Math.abs(Math.round(_t)-ct)||1;return v.setTransform(0,Math.sign(M),Math.sign(L),0,tt,ct),v.drawImage(l,s,t,n,i,0,0,ft,bt),v.setTransform(D,M,L,j,B,Q),[ft,bt]}v.drawImage(l,s,t,n,i,d,h,f,E);let nt=Math.hypot(D,M),rt=Math.hypot(L,j);return[nt*f,rt*E]}function e(v){let{width:l,height:s}=v;if(!A||l>o||s>o)return null;let t=1e3,n=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),i=l+1,d=new Uint8Array(i*(s+1)),h,f,E,D=l+7&-8,M=new Uint8Array(D*s),L=0;for(let tt of v.data){let ht=128;for(;ht>0;)M[L++]=tt&ht?0:255,ht>>=1}let j=0;for(L=0,M[L]!==0&&(d[0]=1,++j),f=1;f<l;f++)M[L]!==M[L+1]&&(d[f]=M[L]?2:1,++j),L++;for(M[L]!==0&&(d[f]=2,++j),h=1;h<s;h++){L=h*D,E=h*i,M[L-D]!==M[L]&&(d[E]=M[L]?1:8,++j);let tt=(M[L]?4:0)+(M[L-D]?8:0);for(f=1;f<l;f++)tt=(tt>>2)+(M[L+1]?4:0)+(M[L-D+1]?8:0),n[tt]&&(d[E+f]=n[tt],++j),L++;if(M[L-D]!==M[L]&&(d[E+f]=M[L]?2:4,++j),j>t)return null}for(L=D*(s-1),E=h*i,M[L]!==0&&(d[E]=8,++j),f=1;f<l;f++)M[L]!==M[L+1]&&(d[E+f]=M[L]?4:8,++j),L++;if(M[L]!==0&&(d[E+f]=4,++j),j>t)return null;let B=new Int32Array([0,i,-1,0,-i,0,0,0,1]),Q,nt,rt;for(G.isNodeJS?nt=[]:Q=new Path2D,h=0;j&&h<=s;h++){let tt=h*i,ht=tt+l;for(;tt<ht&&!d[tt];)tt++;if(tt===ht)continue;Q?Q.moveTo(tt%i,h):rt=[tt%i,h];let ct=tt,it=d[tt];do{let bt=B[it];do tt+=bt;while(!d[tt]);let _t=d[tt];_t!==5&&_t!==10?(it=_t,d[tt]=0):(it=_t&51*it>>4,d[tt]&=it>>2|it<<2),Q?Q.lineTo(tt%i,tt/i|0):rt.push(tt%i,tt/i|0),d[tt]||--j}while(ct!==tt);Q||nt.push(rt),--h}return M=null,d=null,function(tt){if(tt.save(),tt.scale(1/l,-1/s),tt.translate(0,-s),Q)tt.fill(Q);else{tt.beginPath();for(let ht of nt){tt.moveTo(ht[0],ht[1]);for(let ct=2,it=ht.length;ct<it;ct+=2)tt.lineTo(ht[ct],ht[ct+1])}tt.fill()}tt.beginPath(),tt.restore()}}class a{constructor(l,s){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=c.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=c.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=c.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,l,s])}clone(){let l=Object.create(this);return l.clipBox=this.clipBox.slice(),l}setCurrentPoint(l,s){this.x=l,this.y=s}updatePathMinMax(l,s,t){[s,t]=c.Util.applyTransform([s,t],l),this.minX=Math.min(this.minX,s),this.minY=Math.min(this.minY,t),this.maxX=Math.max(this.maxX,s),this.maxY=Math.max(this.maxY,t)}updateRectMinMax(l,s){let t=c.Util.applyTransform(s,l),n=c.Util.applyTransform(s.slice(2),l);this.minX=Math.min(this.minX,t[0],n[0]),this.minY=Math.min(this.minY,t[1],n[1]),this.maxX=Math.max(this.maxX,t[0],n[0]),this.maxY=Math.max(this.maxY,t[1],n[1])}updateScalingPathMinMax(l,s){c.Util.scaleMinMax(l,s),this.minX=Math.min(this.minX,s[0]),this.maxX=Math.max(this.maxX,s[1]),this.minY=Math.min(this.minY,s[2]),this.maxY=Math.max(this.maxY,s[3])}updateCurvePathMinMax(l,s,t,n,i,d,h,f,E,D){let M=c.Util.bezierBoundingBox(s,t,n,i,d,h,f,E);if(D){D[0]=Math.min(D[0],M[0],M[2]),D[1]=Math.max(D[1],M[0],M[2]),D[2]=Math.min(D[2],M[1],M[3]),D[3]=Math.max(D[3],M[1],M[3]);return}this.updateRectMinMax(l,M)}getPathBoundingBox(l=K.PathType.FILL,s=null){let t=[this.minX,this.minY,this.maxX,this.maxY];if(l===K.PathType.STROKE){s||(0,c.unreachable)("Stroke bounding box must include transform.");let n=c.Util.singularValueDecompose2dScale(s),i=n[0]*this.lineWidth/2,d=n[1]*this.lineWidth/2;t[0]-=i,t[1]-=d,t[2]+=i,t[3]+=d}return t}updateClipFromPath(){let l=c.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(l||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(l){this.clipBox=l,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(l=K.PathType.FILL,s=null){return c.Util.intersect(this.clipBox,this.getPathBoundingBox(l,s))}}function _(v,l,s=null){if(typeof ImageData<"u"&&l instanceof ImageData){v.putImageData(l,0,0);return}let t=l.height,n=l.width,i=t%u,d=(t-i)/u,h=i===0?d:d+1,f=v.createImageData(n,u),E=0,D,M=l.data,L=f.data,j,B,Q,nt,rt,ot,tt,ht;if(s)switch(s.length){case 1:rt=s[0],ot=s[0],tt=s[0],ht=s[0];break;case 4:rt=s[0],ot=s[1],tt=s[2],ht=s[3];break}if(l.kind===c.ImageKind.GRAYSCALE_1BPP){let ct=M.byteLength,it=new Uint32Array(L.buffer,0,L.byteLength>>2),bt=it.length,_t=n+7>>3,ft=4294967295,mt=c.FeatureTest.isLittleEndian?4278190080:255;for(ht&&ht[0]===255&&ht[255]===0&&([ft,mt]=[mt,ft]),j=0;j<h;j++){for(Q=j<d?u:i,D=0,B=0;B<Q;B++){let St=ct-E,Tt=0,yt=St>_t?n:St*8-7,Et=yt&-8,V=0,O=0;for(;Tt<Et;Tt+=8)O=M[E++],it[D++]=O&128?ft:mt,it[D++]=O&64?ft:mt,it[D++]=O&32?ft:mt,it[D++]=O&16?ft:mt,it[D++]=O&8?ft:mt,it[D++]=O&4?ft:mt,it[D++]=O&2?ft:mt,it[D++]=O&1?ft:mt;for(;Tt<yt;Tt++)V===0&&(O=M[E++],V=128),it[D++]=O&V?ft:mt,V>>=1}for(;D<bt;)it[D++]=0;v.putImageData(f,0,j*u)}}else if(l.kind===c.ImageKind.RGBA_32BPP){let ct=!!(rt||ot||tt);for(B=0,nt=n*u*4,j=0;j<d;j++){if(L.set(M.subarray(E,E+nt)),E+=nt,ct)for(let it=0;it<nt;it+=4)rt&&(L[it+0]=rt[L[it+0]]),ot&&(L[it+1]=ot[L[it+1]]),tt&&(L[it+2]=tt[L[it+2]]);v.putImageData(f,0,B),B+=u}if(j<h){if(nt=n*i*4,L.set(M.subarray(E,E+nt)),ct)for(let it=0;it<nt;it+=4)rt&&(L[it+0]=rt[L[it+0]]),ot&&(L[it+1]=ot[L[it+1]]),tt&&(L[it+2]=tt[L[it+2]]);v.putImageData(f,0,B)}}else if(l.kind===c.ImageKind.RGB_24BPP){let ct=!!(rt||ot||tt);for(Q=u,nt=n*Q,j=0;j<h;j++){for(j>=d&&(Q=i,nt=n*Q),D=0,B=nt;B--;)L[D++]=M[E++],L[D++]=M[E++],L[D++]=M[E++],L[D++]=255;if(ct)for(let it=0;it<D;it+=4)rt&&(L[it+0]=rt[L[it+0]]),ot&&(L[it+1]=ot[L[it+1]]),tt&&(L[it+2]=tt[L[it+2]]);v.putImageData(f,0,j*u)}}else throw new Error(`bad image kind: ${l.kind}`)}function T(v,l){if(l.bitmap){v.drawImage(l.bitmap,0,0);return}let s=l.height,t=l.width,n=s%u,i=(s-n)/u,d=n===0?i:i+1,h=v.createImageData(t,u),f=0,E=l.data,D=h.data;for(let M=0;M<d;M++){let L=M<i?u:n;({srcPos:f}=(0,q.applyMaskImageData)({src:E,srcPos:f,dest:D,width:t,height:L})),v.putImageData(h,0,M*u)}}function C(v,l){let s=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let t=0,n=s.length;t<n;t++){let i=s[t];v[i]!==void 0&&(l[i]=v[i])}v.setLineDash!==void 0&&(l.setLineDash(v.getLineDash()),l.lineDashOffset=v.lineDashOffset)}function P(v,l){v.strokeStyle=v.fillStyle=l||"#000000",v.fillRule="nonzero",v.globalAlpha=1,v.lineWidth=1,v.lineCap="butt",v.lineJoin="miter",v.miterLimit=10,v.globalCompositeOperation="source-over",v.font="10px sans-serif",v.setLineDash!==void 0&&(v.setLineDash([]),v.lineDashOffset=0)}function w(v,l,s,t){let n=v.length;for(let i=3;i<n;i+=4){let d=v[i];if(d===0)v[i-3]=l,v[i-2]=s,v[i-1]=t;else if(d<255){let h=255-d;v[i-3]=v[i-3]*d+l*h>>8,v[i-2]=v[i-2]*d+s*h>>8,v[i-1]=v[i-1]*d+t*h>>8}}}function I(v,l,s){let t=v.length,n=1/255;for(let i=3;i<t;i+=4){let d=s?s[v[i]]:v[i];l[i]=l[i]*d*n|0}}function X(v,l,s){let t=v.length;for(let n=3;n<t;n+=4){let i=v[n-3]*77+v[n-2]*152+v[n-1]*28;l[n]=s?l[n]*s[i>>8]>>8:l[n]*i>>16}}function W(v,l,s,t,n,i,d,h,f,E,D){let M=!!i,L=M?i[0]:0,j=M?i[1]:0,B=M?i[2]:0,Q;n==="Luminosity"?Q=X:Q=I;let rt=Math.min(t,Math.ceil(1048576/s));for(let ot=0;ot<t;ot+=rt){let tt=Math.min(rt,t-ot),ht=v.getImageData(h-E,ot+(f-D),s,tt),ct=l.getImageData(h,ot+f,s,tt);M&&w(ht.data,L,j,B),Q(ht.data,ct.data,d),l.putImageData(ct,h,ot+f)}}function z(v,l,s,t){let n=t[0],i=t[1],d=t[2]-n,h=t[3]-i;d===0||h===0||(W(l.context,s,d,h,l.subtype,l.backdrop,l.transferMap,n,i,l.offsetX,l.offsetY),v.save(),v.globalAlpha=1,v.globalCompositeOperation="source-over",v.setTransform(1,0,0,1,0,0),v.drawImage(s.canvas,0,0),v.restore())}function J(v,l){let s=c.Util.singularValueDecompose2dScale(v);s[0]=Math.fround(s[0]),s[1]=Math.fround(s[1]);let t=Math.fround((globalThis.devicePixelRatio||1)*U.PixelsPerInch.PDF_TO_CSS_UNITS);return l!==void 0?l:s[0]<=t||s[1]<=t}let Z=["butt","round","square"],Y=["miter","round","bevel"],et={},lt={};class st{constructor(l,s,t,n,i,d,h,f){this.ctx=l,this.current=new a(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=s,this.objs=t,this.canvasFactory=n,this.imageLayer=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=d,this.cachedCanvases=new y(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(f==null?void 0:f.background)||null,this.foregroundColor=(f==null?void 0:f.foreground)||null,l&&b(l),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(l,s=null){return typeof l=="string"?l.startsWith("g_")?this.commonObjs.get(l):this.objs.get(l):s}beginDrawing({transform:l,viewport:s,transparency:t=!1,background:n=null}){let i=this.ctx.canvas.width,d=this.ctx.canvas.height,h=n||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;let f=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;let E=this.backgroundColor=this.ctx.fillStyle,D=!0,M=h;if(this.ctx.fillStyle=h,M=this.ctx.fillStyle,D=typeof M=="string"&&/^#[0-9A-Fa-f]{6}$/.test(M),f==="#000000"&&E==="#ffffff"||f===E||!D)this.foregroundColor=this.backgroundColor=null;else{let L=parseInt(M.slice(1),16),j=(L&&16711680)>>16,B=(L&&65280)>>8,Q=L&&255,nt=ot=>(ot/=255,ot<=.03928?ot/12.92:((ot+.055)/1.055)**2.4),rt=Math.round(.2126*nt(j)+.7152*nt(B)+.0722*nt(Q));this.selectColor=(ot,tt,ht)=>{let ct=.2126*nt(ot)+.7152*nt(tt)+.0722*nt(ht);return Math.round(ct)===rt?E:f}}}if(this.ctx.fillStyle=this.backgroundColor||h,this.ctx.fillRect(0,0,i,d),this.ctx.restore(),t){let f=this.cachedCanvases.getCanvas("transparent",i,d,!0);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),P(this.ctx,this.foregroundColor),l&&(this.ctx.transform.apply(this.ctx,l),this.outputScaleX=l[0],this.outputScaleY=l[0]),this.ctx.transform.apply(this.ctx,s.transform),this.viewportScale=s.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(l,s,t,n){let i=l.argsArray,d=l.fnArray,h=s||0,f=i.length;if(f===h)return h;let E=f-h>R&&typeof t=="function",D=E?Date.now()+k:0,M=0,L=this.commonObjs,j=this.objs,B;for(;;){if(n!==void 0&&h===n.nextBreakPoint)return n.breakIt(h,t),h;if(B=d[h],B!==c.OPS.dependency)this[B].apply(this,i[h]);else for(let Q of i[h]){let nt=Q.startsWith("g_")?L:j;if(!nt.has(Q))return nt.get(Q,t),h}if(h++,h===f)return h;if(E&&++M>R){if(Date.now()>D)return t(),h;M=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let l of this._cachedBitmapsMap.values()){for(let s of l.values())typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement&&(s.width=s.height=0);l.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(l,s){let t=l.width,n=l.height,i=Math.max(Math.hypot(s[0],s[1]),1),d=Math.max(Math.hypot(s[2],s[3]),1),h=t,f=n,E="prescale1",D,M;for(;i>2&&h>1||d>2&&f>1;){let L=h,j=f;i>2&&h>1&&(L=Math.ceil(h/2),i/=h/L),d>2&&f>1&&(j=Math.ceil(f/2),d/=f/j),D=this.cachedCanvases.getCanvas(E,L,j,!1),M=D.context,M.clearRect(0,0,L,j),M.drawImage(l,0,0,h,f,0,0,L,j),l=D.canvas,h=L,f=j,E=E==="prescale1"?"prescale2":"prescale1"}return{img:l,paintWidth:h,paintHeight:f}}_createMaskCanvas(l){let s=this.ctx,{width:t,height:n}=l,i=this.current.fillColor,d=this.current.patternFill,h=s.mozCurrentTransform,f,E,D,M;if((l.bitmap||l.data)&&l.count>1){let bt=l.bitmap||l.data.buffer,_t=h.slice(0,4);E=JSON.stringify(d?_t:[_t,i]),f=this._cachedBitmapsMap.get(bt),f||(f=new Map,this._cachedBitmapsMap.set(bt,f));let ft=f.get(E);if(ft&&!d){let mt=Math.round(Math.min(h[0],h[2])+h[4]),St=Math.round(Math.min(h[1],h[3])+h[5]);return{canvas:ft,offsetX:mt,offsetY:St}}D=ft}D||(M=this.cachedCanvases.getCanvas("maskCanvas",t,n,!1),T(M.context,l));let L=c.Util.transform(h,[1/t,0,0,-1/n,0,0]);L=c.Util.transform(L,[1,0,0,1,0,-n]);let j=c.Util.applyTransform([0,0],L),B=c.Util.applyTransform([t,n],L),Q=c.Util.normalizeRect([j[0],j[1],B[0],B[1]]),nt=Math.round(Q[2]-Q[0])||1,rt=Math.round(Q[3]-Q[1])||1,ot=this.cachedCanvases.getCanvas("fillCanvas",nt,rt,!0),tt=ot.context,ht=Math.min(j[0],B[0]),ct=Math.min(j[1],B[1]);tt.translate(-ht,-ct),tt.transform.apply(tt,L),D||(D=this._scaleImage(M.canvas,tt.mozCurrentTransformInverse),D=D.img,f&&d&&f.set(E,D)),tt.imageSmoothingEnabled=J(tt.mozCurrentTransform,l.interpolate),S(tt,D,0,0,D.width,D.height,0,0,t,n),tt.globalCompositeOperation="source-in";let it=c.Util.transform(tt.mozCurrentTransformInverse,[1,0,0,1,-ht,-ct]);return tt.fillStyle=d?i.getPattern(s,this,it,K.PathType.FILL):i,tt.fillRect(0,0,t,n),f&&!d&&(this.cachedCanvases.delete("fillCanvas"),f.set(E,ot.canvas)),{canvas:ot.canvas,offsetX:Math.round(ht),offsetY:Math.round(ct)}}setLineWidth(l){l!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=l,this.ctx.lineWidth=l}setLineCap(l){this.ctx.lineCap=Z[l]}setLineJoin(l){this.ctx.lineJoin=Y[l]}setMiterLimit(l){this.ctx.miterLimit=l}setDash(l,s){let t=this.ctx;t.setLineDash!==void 0&&(t.setLineDash(l),t.lineDashOffset=s)}setRenderingIntent(l){}setFlatness(l){}setGState(l){for(let s=0,t=l.length;s<t;s++){let n=l[s],i=n[0],d=n[1];switch(i){case"LW":this.setLineWidth(d);break;case"LC":this.setLineCap(d);break;case"LJ":this.setLineJoin(d);break;case"ML":this.setMiterLimit(d);break;case"D":this.setDash(d[0],d[1]);break;case"RI":this.setRenderingIntent(d);break;case"FL":this.setFlatness(d);break;case"Font":this.setFont(d[0],d[1]);break;case"CA":this.current.strokeAlpha=n[1];break;case"ca":this.current.fillAlpha=n[1],this.ctx.globalAlpha=n[1];break;case"BM":this.ctx.globalCompositeOperation=d;break;case"SMask":this.current.activeSMask=d?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=d}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let l=this.inSMaskMode;this.current.activeSMask&&!l?this.beginSMaskMode():!this.current.activeSMask&&l&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let l=this.ctx.canvas.width,s=this.ctx.canvas.height,t="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(t,l,s,!0);this.suspendedCtx=this.ctx,this.ctx=n.context;let i=this.ctx;i.setTransform.apply(i,this.suspendedCtx.mozCurrentTransform),C(this.suspendedCtx,i),g(i,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),C(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(l){if(!this.current.activeSMask)return;l?(l[0]=Math.floor(l[0]),l[1]=Math.floor(l[1]),l[2]=Math.ceil(l[2]),l[3]=Math.ceil(l[3])):l=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let s=this.current.activeSMask,t=this.suspendedCtx;z(t,s,this.ctx,l),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(C(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let l=this.current;this.stateStack.push(l),this.current=l.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),C(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(l,s,t,n,i,d){this.ctx.transform(l,s,t,n,i,d),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(l,s,t){let n=this.ctx,i=this.current,d=i.x,h=i.y,f,E,D=n.mozCurrentTransform,M=D[0]===0&&D[3]===0||D[1]===0&&D[2]===0,L=M?t.slice(0):null;for(let j=0,B=0,Q=l.length;j<Q;j++)switch(l[j]|0){case c.OPS.rectangle:d=s[B++],h=s[B++];let nt=s[B++],rt=s[B++],ot=d+nt,tt=h+rt;n.moveTo(d,h),nt===0||rt===0?n.lineTo(ot,tt):(n.lineTo(ot,h),n.lineTo(ot,tt),n.lineTo(d,tt)),M||i.updateRectMinMax(D,[d,h,ot,tt]),n.closePath();break;case c.OPS.moveTo:d=s[B++],h=s[B++],n.moveTo(d,h),M||i.updatePathMinMax(D,d,h);break;case c.OPS.lineTo:d=s[B++],h=s[B++],n.lineTo(d,h),M||i.updatePathMinMax(D,d,h);break;case c.OPS.curveTo:f=d,E=h,d=s[B+4],h=s[B+5],n.bezierCurveTo(s[B],s[B+1],s[B+2],s[B+3],d,h),i.updateCurvePathMinMax(D,f,E,s[B],s[B+1],s[B+2],s[B+3],d,h,L),B+=6;break;case c.OPS.curveTo2:f=d,E=h,n.bezierCurveTo(d,h,s[B],s[B+1],s[B+2],s[B+3]),i.updateCurvePathMinMax(D,f,E,d,h,s[B],s[B+1],s[B+2],s[B+3],L),d=s[B+2],h=s[B+3],B+=4;break;case c.OPS.curveTo3:f=d,E=h,d=s[B+2],h=s[B+3],n.bezierCurveTo(s[B],s[B+1],d,h,d,h),i.updateCurvePathMinMax(D,f,E,s[B],s[B+1],d,h,d,h,L),B+=4;break;case c.OPS.closePath:n.closePath();break}M&&i.updateScalingPathMinMax(D,L),i.setCurrentPoint(d,h)}closePath(){this.ctx.closePath()}stroke(l){l=typeof l<"u"?l:!0;let s=this.ctx,t=this.current.strokeColor;s.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof t=="object"&&(t==null?void 0:t.getPattern)?(s.save(),s.strokeStyle=t.getPattern(s,this,s.mozCurrentTransformInverse,K.PathType.STROKE),this.rescaleAndStroke(!1),s.restore()):this.rescaleAndStroke(!0)),l&&this.consumePath(this.current.getClippedPathBoundingBox()),s.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(l){l=typeof l<"u"?l:!0;let s=this.ctx,t=this.current.fillColor,n=this.current.patternFill,i=!1;n&&(s.save(),s.fillStyle=t.getPattern(s,this,s.mozCurrentTransformInverse,K.PathType.FILL),i=!0);let d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(s.fill("evenodd"),this.pendingEOFill=!1):s.fill()),i&&s.restore(),l&&this.consumePath(d)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=et}eoClip(){this.pendingClip=lt}beginText(){this.current.textMatrix=c.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let l=this.pendingTextPaths,s=this.ctx;if(l===void 0){s.beginPath();return}s.save(),s.beginPath();for(let t=0;t<l.length;t++){let n=l[t];s.setTransform.apply(s,n.transform),s.translate(n.x,n.y),n.addToPath(s,n.fontSize)}s.restore(),s.clip(),s.beginPath(),delete this.pendingTextPaths}setCharSpacing(l){this.current.charSpacing=l}setWordSpacing(l){this.current.wordSpacing=l}setHScale(l){this.current.textHScale=l/100}setLeading(l){this.current.leading=-l}setFont(l,s){let t=this.commonObjs.get(l),n=this.current;if(!t)throw new Error(`Can't find font for ${l}`);if(n.fontMatrix=t.fontMatrix||c.FONT_IDENTITY_MATRIX,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&(0,c.warn)("Invalid font matrix for font "+l),s<0?(s=-s,n.fontDirection=-1):n.fontDirection=1,this.current.font=t,this.current.fontSize=s,t.isType3Font)return;let i=t.loadedName||"sans-serif",d="normal";t.black?d="900":t.bold&&(d="bold");let h=t.italic?"italic":"normal",f=`"${i}", ${t.fallbackName}`,E=s;s<F?E=F:s>m&&(E=m),this.current.fontSizeScale=s/E,this.ctx.font=`${h} ${d} ${E}px ${f}`}setTextRenderingMode(l){this.current.textRenderingMode=l}setTextRise(l){this.current.textRise=l}moveText(l,s){this.current.x=this.current.lineX+=l,this.current.y=this.current.lineY+=s}setLeadingMoveText(l,s){this.setLeading(-s),this.moveText(l,s)}setTextMatrix(l,s,t,n,i,d){this.current.textMatrix=[l,s,t,n,i,d],this.current.textMatrixScale=Math.hypot(l,s),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(l,s,t,n){let i=this.ctx,d=this.current,h=d.font,f=d.textRenderingMode,E=d.fontSize/d.fontSizeScale,D=f&c.TextRenderingMode.FILL_STROKE_MASK,M=!!(f&c.TextRenderingMode.ADD_TO_PATH_FLAG),L=d.patternFill&&!h.missingFile,j;(h.disableFontFace||M||L)&&(j=h.getPathGenerator(this.commonObjs,l)),h.disableFontFace||L?(i.save(),i.translate(s,t),i.beginPath(),j(i,E),n&&i.setTransform.apply(i,n),(D===c.TextRenderingMode.FILL||D===c.TextRenderingMode.FILL_STROKE)&&i.fill(),(D===c.TextRenderingMode.STROKE||D===c.TextRenderingMode.FILL_STROKE)&&i.stroke(),i.restore()):((D===c.TextRenderingMode.FILL||D===c.TextRenderingMode.FILL_STROKE)&&i.fillText(l,s,t),(D===c.TextRenderingMode.STROKE||D===c.TextRenderingMode.FILL_STROKE)&&i.strokeText(l,s,t)),M&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:i.mozCurrentTransform,x:s,y:t,fontSize:E,addToPath:j})}get isFontSubpixelAAEnabled(){let{context:l}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1);l.scale(1.5,1),l.fillText("I",0,10);let s=l.getImageData(0,0,10,10).data,t=!1;for(let n=3;n<s.length;n+=4)if(s[n]>0&&s[n]<255){t=!0;break}return(0,c.shadow)(this,"isFontSubpixelAAEnabled",t)}showText(l){let s=this.current,t=s.font;if(t.isType3Font)return this.showType3Text(l);let n=s.fontSize;if(n===0)return;let i=this.ctx,d=s.fontSizeScale,h=s.charSpacing,f=s.wordSpacing,E=s.fontDirection,D=s.textHScale*E,M=l.length,L=t.vertical,j=L?1:-1,B=t.defaultVMetrics,Q=n*s.fontMatrix[0],nt=s.textRenderingMode===c.TextRenderingMode.FILL&&!t.disableFontFace&&!s.patternFill;i.save(),i.transform.apply(i,s.textMatrix),i.translate(s.x,s.y+s.textRise),E>0?i.scale(D,-1):i.scale(D,1);let rt;if(s.patternFill){i.save();let it=s.fillColor.getPattern(i,this,i.mozCurrentTransformInverse,K.PathType.FILL);rt=i.mozCurrentTransform,i.restore(),i.fillStyle=it}let ot=s.lineWidth,tt=s.textMatrixScale;if(tt===0||ot===0){let it=s.textRenderingMode&c.TextRenderingMode.FILL_STROKE_MASK;(it===c.TextRenderingMode.STROKE||it===c.TextRenderingMode.FILL_STROKE)&&(ot=this.getSinglePixelWidth())}else ot/=tt;d!==1&&(i.scale(d,d),ot/=d),i.lineWidth=ot;let ht=0,ct;for(ct=0;ct<M;++ct){let it=l[ct];if(typeof it=="number"){ht+=j*it*n/1e3;continue}let bt=!1,_t=(it.isSpace?f:0)+h,ft=it.fontChar,mt=it.accent,St,Tt,yt=it.width;if(L){let V=it.vmetric||B,O=-(it.vmetric?V[1]:yt*.5)*Q,N=V[2]*Q;yt=V?-V[0]:yt,St=O/d,Tt=(ht+N)/d}else St=ht/d,Tt=0;if(t.remeasure&&yt>0){let V=i.measureText(ft).width*1e3/n*d;if(yt<V&&this.isFontSubpixelAAEnabled){let O=yt/V;bt=!0,i.save(),i.scale(O,1),St/=O}else yt!==V&&(St+=(yt-V)/2e3*n/d)}if(this.contentVisible&&(it.isInFont||t.missingFile)){if(nt&&!mt)i.fillText(ft,St,Tt);else if(this.paintChar(ft,St,Tt,rt),mt){let V=St+n*mt.offset.x/d,O=Tt-n*mt.offset.y/d;this.paintChar(mt.fontChar,V,O,rt)}}let Et;L?Et=yt*Q-_t*E:Et=yt*Q+_t*E,ht+=Et,bt&&i.restore()}L?s.y-=ht:s.x+=ht*D,i.restore(),this.compose()}showType3Text(l){let s=this.ctx,t=this.current,n=t.font,i=t.fontSize,d=t.fontDirection,h=n.vertical?1:-1,f=t.charSpacing,E=t.wordSpacing,D=t.textHScale*d,M=t.fontMatrix||c.FONT_IDENTITY_MATRIX,L=l.length,j=t.textRenderingMode===c.TextRenderingMode.INVISIBLE,B,Q,nt,rt;if(!(j||i===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,s.save(),s.transform.apply(s,t.textMatrix),s.translate(t.x,t.y),s.scale(D,d),B=0;B<L;++B){if(Q=l[B],typeof Q=="number"){rt=h*Q*i/1e3,this.ctx.translate(rt,0),t.x+=rt*D;continue}let ot=(Q.isSpace?E:0)+f,tt=n.charProcOperatorList[Q.operatorListId];if(!tt){(0,c.warn)(`Type3 character "${Q.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Q,this.save(),s.scale(i,i),s.transform.apply(s,M),this.executeOperatorList(tt),this.restore()),nt=c.Util.applyTransform([Q.width,0],M)[0]*i+ot,s.translate(nt,0),t.x+=nt*D}s.restore(),this.processingType3=null}}setCharWidth(l,s){}setCharWidthAndBounds(l,s,t,n,i,d){this.ctx.rect(t,n,i-t,d-n),this.ctx.clip(),this.endPath()}getColorN_Pattern(l){let s;if(l[0]==="TilingPattern"){let t=l[1],n=this.baseTransform||this.ctx.mozCurrentTransform.slice(),i={createCanvasGraphics:d=>new st(d,this.commonObjs,this.objs,this.canvasFactory)};s=new K.TilingPattern(l,t,this.ctx,i,n)}else s=this._getPattern(l[1],l[2]);return s}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(l,s,t){var i;let n=((i=this.selectColor)==null?void 0:i.call(this,l,s,t))||c.Util.makeHexColor(l,s,t);this.ctx.strokeStyle=n,this.current.strokeColor=n}setFillRGBColor(l,s,t){var i;let n=((i=this.selectColor)==null?void 0:i.call(this,l,s,t))||c.Util.makeHexColor(l,s,t);this.ctx.fillStyle=n,this.current.fillColor=n,this.current.patternFill=!1}_getPattern(l,s=null){let t;return this.cachedPatterns.has(l)?t=this.cachedPatterns.get(l):(t=(0,K.getShadingPattern)(this.objs.get(l)),this.cachedPatterns.set(l,t)),s&&(t.matrix=s),t}shadingFill(l){if(!this.contentVisible)return;let s=this.ctx;this.save();let t=this._getPattern(l);s.fillStyle=t.getPattern(s,this,s.mozCurrentTransformInverse,K.PathType.SHADING);let n=s.mozCurrentTransformInverse;if(n){let i=s.canvas,d=i.width,h=i.height,f=c.Util.applyTransform([0,0],n),E=c.Util.applyTransform([0,h],n),D=c.Util.applyTransform([d,0],n),M=c.Util.applyTransform([d,h],n),L=Math.min(f[0],E[0],D[0],M[0]),j=Math.min(f[1],E[1],D[1],M[1]),B=Math.max(f[0],E[0],D[0],M[0]),Q=Math.max(f[1],E[1],D[1],M[1]);this.ctx.fillRect(L,j,B-L,Q-j)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,c.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,c.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(l,s){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(l)&&l.length===6&&this.transform.apply(this,l),this.baseTransform=this.ctx.mozCurrentTransform,s)){let t=s[2]-s[0],n=s[3]-s[1];this.ctx.rect(s[0],s[1],t,n),this.current.updateRectMinMax(this.ctx.mozCurrentTransform,s),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(l){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let s=this.ctx;l.isolated||(0,c.info)("TODO: Support non-isolated groups."),l.knockout&&(0,c.warn)("Knockout groups not supported.");let t=s.mozCurrentTransform;if(l.matrix&&s.transform.apply(s,l.matrix),!l.bbox)throw new Error("Bounding box is required.");let n=c.Util.getAxialAlignedBoundingBox(l.bbox,s.mozCurrentTransform),i=[0,0,s.canvas.width,s.canvas.height];n=c.Util.intersect(n,i)||[0,0,0,0];let d=Math.floor(n[0]),h=Math.floor(n[1]),f=Math.max(Math.ceil(n[2])-d,1),E=Math.max(Math.ceil(n[3])-h,1),D=1,M=1;f>x&&(D=f/x,f=x),E>x&&(M=E/x,E=x),this.current.startNewPathAndClipBox([0,0,f,E]);let L="groupAt"+this.groupLevel;l.smask&&(L+="_smask_"+this.smaskCounter++%2);let j=this.cachedCanvases.getCanvas(L,f,E,!0),B=j.context;B.scale(1/D,1/M),B.translate(-d,-h),B.transform.apply(B,t),l.smask?this.smaskStack.push({canvas:j.canvas,context:B,offsetX:d,offsetY:h,scaleX:D,scaleY:M,subtype:l.smask.subtype,backdrop:l.smask.backdrop,transferMap:l.smask.transferMap||null,startTransformInverse:null}):(s.setTransform(1,0,0,1,0,0),s.translate(d,h),s.scale(D,M),s.save()),C(s,B),this.ctx=B,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(l){if(!this.contentVisible)return;this.groupLevel--;let s=this.ctx,t=this.groupStack.pop();if(this.ctx=t,this.ctx.imageSmoothingEnabled=!1,l.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let n=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,n);let i=c.Util.getAxialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],n);this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(l,s,t,n,i){if(this.save(),Array.isArray(s)&&s.length===4){let d=s[2]-s[0],h=s[3]-s[1];if(i&&this.annotationCanvasMap){t=t.slice(),t[4]-=s[0],t[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=d,s[3]=h;let[f,E]=c.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:D}=this,M=Math.ceil(d*this.outputScaleX*D),L=Math.ceil(h*this.outputScaleY*D);this.annotationCanvas=this.canvasFactory.create(M,L);let{canvas:j,context:B}=this.annotationCanvas,Q=`var(--zoom-factor) * ${U.PixelsPerInch.PDF_TO_CSS_UNITS}`;j.style.width=`calc(${d}px * ${Q})`,j.style.height=`calc(${h}px * ${Q})`,this.annotationCanvasMap.set(l,j),this.annotationCanvas.savedCtx=this.ctx,this.ctx=B,this.ctx.setTransform(f,0,0,-E,0,h*E),b(this.ctx),P(this.ctx,this.foregroundColor)}else P(this.ctx,this.foregroundColor),this.ctx.rect(s[0],s[1],d,h),this.ctx.clip(),this.endPath()}this.current=new a(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,t),this.transform.apply(this,n)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(l){if(!this.contentVisible)return;let s=l.count;l=this.getObject(l.data,l),l.count=s;let t=this.ctx,n=this.processingType3;if(n&&(n.compiled===void 0&&(n.compiled=e(l)),n.compiled)){n.compiled(t);return}let i=this._createMaskCanvas(l),d=i.canvas;t.save(),t.setTransform(1,0,0,1,0,0),t.drawImage(d,i.offsetX,i.offsetY),t.restore(),this.compose()}paintImageMaskXObjectRepeat(l,s,t=0,n=0,i,d){if(!this.contentVisible)return;l=this.getObject(l.data,l);let h=this.ctx;h.save();let f=h.mozCurrentTransform;h.transform(s,t,n,i,0,0);let E=this._createMaskCanvas(l);h.setTransform(1,0,0,1,0,0);for(let D=0,M=d.length;D<M;D+=2){let L=c.Util.transform(f,[s,t,n,i,d[D],d[D+1]]),[j,B]=c.Util.applyTransform([0,0],L);h.drawImage(E.canvas,j,B)}h.restore(),this.compose()}paintImageMaskXObjectGroup(l){if(!this.contentVisible)return;let s=this.ctx,t=this.current.fillColor,n=this.current.patternFill;for(let i=0,d=l.length;i<d;i++){let h=l[i],f=h.width,E=h.height,D=this.cachedCanvases.getCanvas("maskCanvas",f,E,!1),M=D.context;M.save(),T(M,h),M.globalCompositeOperation="source-in",M.fillStyle=n?t.getPattern(M,this,s.mozCurrentTransformInverse,K.PathType.FILL):t,M.fillRect(0,0,f,E),M.restore(),s.save(),s.transform.apply(s,h.transform),s.scale(1,-1),S(s,D.canvas,0,0,f,E,0,-1,1,1),s.restore()}this.compose()}paintImageXObject(l){if(!this.contentVisible)return;let s=this.getObject(l);if(!s){(0,c.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(s)}paintImageXObjectRepeat(l,s,t,n){if(!this.contentVisible)return;let i=this.getObject(l);if(!i){(0,c.warn)("Dependent image isn't ready yet");return}let d=i.width,h=i.height,f=[];for(let E=0,D=n.length;E<D;E+=2)f.push({transform:[s,0,0,t,n[E],n[E+1]],x:0,y:0,w:d,h});this.paintInlineImageXObjectGroup(i,f)}paintInlineImageXObject(l){if(!this.contentVisible)return;let s=l.width,t=l.height,n=this.ctx;this.save(),n.scale(1/s,-1/t);let i;if(typeof HTMLElement=="function"&&l instanceof HTMLElement||!l.data)i=l;else{let E=this.cachedCanvases.getCanvas("inlineImage",s,t,!1),D=E.context;_(D,l,this.current.transferMaps),i=E.canvas}let d=this._scaleImage(i,n.mozCurrentTransformInverse);n.imageSmoothingEnabled=J(n.mozCurrentTransform,l.interpolate);let[h,f]=S(n,d.img,0,0,d.paintWidth,d.paintHeight,0,-t,s,t);if(this.imageLayer){let E=this.getCanvasPosition(0,-t);this.imageLayer.appendImage({imgData:l,left:E[0],top:E[1],width:h,height:f})}this.compose(),this.restore()}paintInlineImageXObjectGroup(l,s){if(!this.contentVisible)return;let t=this.ctx,n=l.width,i=l.height,d=this.cachedCanvases.getCanvas("inlineImage",n,i,!1),h=d.context;_(h,l,this.current.transferMaps);for(let f=0,E=s.length;f<E;f++){let D=s[f];if(t.save(),t.transform.apply(t,D.transform),t.scale(1,-1),S(t,d.canvas,D.x,D.y,D.w,D.h,0,-1,1,1),this.imageLayer){let M=this.getCanvasPosition(D.x,D.y);this.imageLayer.appendImage({imgData:l,left:M[0],top:M[1],width:n,height:i})}t.restore()}this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(l){}markPointProps(l,s){}beginMarkedContent(l){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(l,s){l==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(l){let s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(l);let t=this.ctx;this.pendingClip&&(s||(this.pendingClip===lt?t.clip("evenodd"):t.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),t.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let l=this.ctx.mozCurrentTransform;if(l[1]===0&&l[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(l[0]),Math.abs(l[3]));else{let s=Math.abs(l[0]*l[3]-l[2]*l[1]),t=Math.hypot(l[0],l[2]),n=Math.hypot(l[1],l[3]);this._cachedGetSinglePixelWidth=Math.max(t,n)/s}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){let{lineWidth:l}=this.current,s=this.ctx.mozCurrentTransform,t,n;if(s[1]===0&&s[2]===0){let i=Math.abs(s[0]),d=Math.abs(s[3]);if(l===0)t=1/i,n=1/d;else{let h=i*l,f=d*l;t=h<1?1/h:1,n=f<1?1/f:1}}else{let i=Math.abs(s[0]*s[3]-s[2]*s[1]),d=Math.hypot(s[0],s[1]),h=Math.hypot(s[2],s[3]);if(l===0)t=h/i,n=d/i;else{let f=l*i;t=h>f?h/f:1,n=d>f?d/f:1}}this._cachedScaleForStroking=[t,n]}return this._cachedScaleForStroking}rescaleAndStroke(l){let{ctx:s}=this,{lineWidth:t}=this.current,[n,i]=this.getScaleForStroking();if(s.lineWidth=t||1,n===1&&i===1){s.stroke();return}let d,h,f;l&&(d=s.mozCurrentTransform.slice(),h=s.getLineDash().slice(),f=s.lineDashOffset),s.scale(n,i);let E=Math.max(n,i);s.setLineDash(s.getLineDash().map(D=>D/E)),s.lineDashOffset/=E,s.stroke(),l&&(s.setTransform(...d),s.setLineDash(h),s.lineDashOffset=f)}getCanvasPosition(l,s){let t=this.ctx.mozCurrentTransform;return[t[0]*l+t[2]*s+t[4],t[1]*l+t[3]*s+t[5]]}isContentVisible(){for(let l=this.markedContentStack.length-1;l>=0;l--)if(!this.markedContentStack[l].visible)return!1;return!0}}p.CanvasGraphics=st;for(let v in c.OPS)st.prototype[v]!==void 0&&(st.prototype[c.OPS[v]]=st.prototype[v])},($,p,H)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.TilingPattern=p.PathType=void 0,p.getShadingPattern=A;var c=H(1),K=H(3);let q={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};p.PathType=q;function G(r,g){if(!g||K.isNodeJS)return;let b=g[2]-g[0],y=g[3]-g[1],S=new Path2D;S.rect(g[0],g[1],b,y),r.clip(S)}class U{constructor(){this.constructor===U&&(0,c.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,c.unreachable)("Abstract method `getPattern` called.")}}class F extends U{constructor(g){super(),this._type=g[1],this._bbox=g[2],this._colorStops=g[3],this._p0=g[4],this._p1=g[5],this._r0=g[6],this._r1=g[7],this.matrix=null}_createGradient(g){let b;this._type==="axial"?b=g.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(b=g.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(let y of this._colorStops)b.addColorStop(y[0],y[1]);return b}getPattern(g,b,y,S){let e;if(S===q.STROKE||S===q.FILL){let a=b.current.getClippedPathBoundingBox(S,g.mozCurrentTransform)||[0,0,0,0],_=Math.ceil(a[2]-a[0])||1,T=Math.ceil(a[3]-a[1])||1,C=b.cachedCanvases.getCanvas("pattern",_,T,!0),P=C.context;P.clearRect(0,0,P.canvas.width,P.canvas.height),P.beginPath(),P.rect(0,0,P.canvas.width,P.canvas.height),P.translate(-a[0],-a[1]),y=c.Util.transform(y,[1,0,0,1,a[0],a[1]]),P.transform.apply(P,b.baseTransform),this.matrix&&P.transform.apply(P,this.matrix),G(P,this._bbox),P.fillStyle=this._createGradient(P),P.fill(),e=g.createPattern(C.canvas,"no-repeat");let w=new DOMMatrix(y);try{e.setTransform(w)}catch(I){(0,c.warn)(`RadialAxialShadingPattern.getPattern: "${I==null?void 0:I.message}".`)}}else G(g,this._bbox),e=this._createGradient(g);return e}}function m(r,g,b,y,S,e,a,_){let T=g.coords,C=g.colors,P=r.data,w=r.width*4,I;T[b+1]>T[y+1]&&(I=b,b=y,y=I,I=e,e=a,a=I),T[y+1]>T[S+1]&&(I=y,y=S,S=I,I=a,a=_,_=I),T[b+1]>T[y+1]&&(I=b,b=y,y=I,I=e,e=a,a=I);let X=(T[b]+g.offsetX)*g.scaleX,W=(T[b+1]+g.offsetY)*g.scaleY,z=(T[y]+g.offsetX)*g.scaleX,J=(T[y+1]+g.offsetY)*g.scaleY,Z=(T[S]+g.offsetX)*g.scaleX,Y=(T[S+1]+g.offsetY)*g.scaleY;if(W>=Y)return;let et=C[e],lt=C[e+1],st=C[e+2],v=C[a],l=C[a+1],s=C[a+2],t=C[_],n=C[_+1],i=C[_+2],d=Math.round(W),h=Math.round(Y),f,E,D,M,L,j,B,Q;for(let nt=d;nt<=h;nt++){if(nt<J){let ct;nt<W?ct=0:ct=(W-nt)/(W-J),f=X-(X-z)*ct,E=et-(et-v)*ct,D=lt-(lt-l)*ct,M=st-(st-s)*ct}else{let ct;nt>Y?ct=1:J===Y?ct=0:ct=(J-nt)/(J-Y),f=z-(z-Z)*ct,E=v-(v-t)*ct,D=l-(l-n)*ct,M=s-(s-i)*ct}let rt;nt<W?rt=0:nt>Y?rt=1:rt=(W-nt)/(W-Y),L=X-(X-Z)*rt,j=et-(et-t)*rt,B=lt-(lt-n)*rt,Q=st-(st-i)*rt;let ot=Math.round(Math.min(f,L)),tt=Math.round(Math.max(f,L)),ht=w*nt+ot*4;for(let ct=ot;ct<=tt;ct++)rt=(f-ct)/(f-L),rt<0?rt=0:rt>1&&(rt=1),P[ht++]=E-(E-j)*rt|0,P[ht++]=D-(D-B)*rt|0,P[ht++]=M-(M-Q)*rt|0,P[ht++]=255}}function x(r,g,b){let y=g.coords,S=g.colors,e,a;switch(g.type){case"lattice":let _=g.verticesPerRow,T=Math.floor(y.length/_)-1,C=_-1;for(e=0;e<T;e++){let P=e*_;for(let w=0;w<C;w++,P++)m(r,b,y[P],y[P+1],y[P+_],S[P],S[P+1],S[P+_]),m(r,b,y[P+_+1],y[P+1],y[P+_],S[P+_+1],S[P+1],S[P+_])}break;case"triangles":for(e=0,a=y.length;e<a;e+=3)m(r,b,y[e],y[e+1],y[e+2],S[e],S[e+1],S[e+2]);break;default:throw new Error("illegal figure")}}class k extends U{constructor(g){super(),this._coords=g[2],this._colors=g[3],this._figures=g[4],this._bounds=g[5],this._bbox=g[7],this._background=g[8],this.matrix=null}_createMeshCanvas(g,b,y){let _=Math.floor(this._bounds[0]),T=Math.floor(this._bounds[1]),C=Math.ceil(this._bounds[2])-_,P=Math.ceil(this._bounds[3])-T,w=Math.min(Math.ceil(Math.abs(C*g[0]*1.1)),3e3),I=Math.min(Math.ceil(Math.abs(P*g[1]*1.1)),3e3),X=C/w,W=P/I,z={coords:this._coords,colors:this._colors,offsetX:-_,offsetY:-T,scaleX:1/X,scaleY:1/W},J=w+2*2,Z=I+2*2,Y=y.getCanvas("mesh",J,Z,!1),et=Y.context,lt=et.createImageData(w,I);if(b){let v=lt.data;for(let l=0,s=v.length;l<s;l+=4)v[l]=b[0],v[l+1]=b[1],v[l+2]=b[2],v[l+3]=255}for(let v of this._figures)x(lt,v,z);return et.putImageData(lt,2,2),{canvas:Y.canvas,offsetX:_-2*X,offsetY:T-2*W,scaleX:X,scaleY:W}}getPattern(g,b,y,S){G(g,this._bbox);let e;if(S===q.SHADING)e=c.Util.singularValueDecompose2dScale(g.mozCurrentTransform);else if(e=c.Util.singularValueDecompose2dScale(b.baseTransform),this.matrix){let _=c.Util.singularValueDecompose2dScale(this.matrix);e=[e[0]*_[0],e[1]*_[1]]}let a=this._createMeshCanvas(e,S===q.SHADING?null:this._background,b.cachedCanvases);return S!==q.SHADING&&(g.setTransform.apply(g,b.baseTransform),this.matrix&&g.transform.apply(g,this.matrix)),g.translate(a.offsetX,a.offsetY),g.scale(a.scaleX,a.scaleY),g.createPattern(a.canvas,"no-repeat")}}class R extends U{getPattern(){return"hotpink"}}function A(r){switch(r[0]){case"RadialAxial":return new F(r);case"Mesh":return new k(r);case"Dummy":return new R}throw new Error(`Unknown IR type: ${r[0]}`)}let o={COLORED:1,UNCOLORED:2};class u{static get MAX_PATTERN_SIZE(){return(0,c.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(g,b,y,S,e){this.operatorList=g[2],this.matrix=g[3]||[1,0,0,1,0,0],this.bbox=g[4],this.xstep=g[5],this.ystep=g[6],this.paintType=g[7],this.tilingType=g[8],this.color=b,this.ctx=y,this.canvasGraphicsFactory=S,this.baseTransform=e}createPatternCanvas(g){let b=this.operatorList,y=this.bbox,S=this.xstep,e=this.ystep,a=this.paintType,_=this.tilingType,T=this.color,C=this.canvasGraphicsFactory;(0,c.info)("TilingType: "+_);let P=y[0],w=y[1],I=y[2],X=y[3],W=c.Util.singularValueDecompose2dScale(this.matrix),z=c.Util.singularValueDecompose2dScale(this.baseTransform),J=[W[0]*z[0],W[1]*z[1]],Z=this.getSizeAndScale(S,this.ctx.canvas.width,J[0]),Y=this.getSizeAndScale(e,this.ctx.canvas.height,J[1]),et=g.cachedCanvases.getCanvas("pattern",Z.size,Y.size,!0),lt=et.context,st=C.createCanvasGraphics(lt);st.groupLevel=g.groupLevel,this.setFillAndStrokeStyleToContext(st,a,T);let v=P,l=w,s=I,t=X;return P<0&&(v=0,s+=Math.abs(P)),w<0&&(l=0,t+=Math.abs(w)),lt.translate(-(Z.scale*v),-(Y.scale*l)),st.transform(Z.scale,0,0,Y.scale,0,0),lt.save(),this.clipBbox(st,v,l,s,t),st.baseTransform=st.ctx.mozCurrentTransform.slice(),st.executeOperatorList(b),st.endDrawing(),{canvas:et.canvas,scaleX:Z.scale,scaleY:Y.scale,offsetX:v,offsetY:l}}getSizeAndScale(g,b,y){g=Math.abs(g);let S=Math.max(u.MAX_PATTERN_SIZE,b),e=Math.ceil(g*y);return e>=S?e=S:y=e/g,{scale:y,size:e}}clipBbox(g,b,y,S,e){let a=S-b,_=e-y;g.ctx.rect(b,y,a,_),g.current.updateRectMinMax(g.ctx.mozCurrentTransform,[b,y,S,e]),g.clip(),g.endPath()}setFillAndStrokeStyleToContext(g,b,y){let S=g.ctx,e=g.current;switch(b){case o.COLORED:let a=this.ctx;S.fillStyle=a.fillStyle,S.strokeStyle=a.strokeStyle,e.fillColor=a.fillStyle,e.strokeColor=a.strokeStyle;break;case o.UNCOLORED:let _=c.Util.makeHexColor(y[0],y[1],y[2]);S.fillStyle=_,S.strokeStyle=_,e.fillColor=_,e.strokeColor=_;break;default:throw new c.FormatError(`Unsupported paint type: ${b}`)}}getPattern(g,b,y,S){let e=y;S!==q.SHADING&&(e=c.Util.transform(e,b.baseTransform),this.matrix&&(e=c.Util.transform(e,this.matrix)));let a=this.createPatternCanvas(b),_=new DOMMatrix(e);_=_.translate(a.offsetX,a.offsetY),_=_.scale(1/a.scaleX,1/a.scaleY);let T=g.createPattern(a.canvas,"repeat");try{T.setTransform(_)}catch(C){(0,c.warn)(`TilingPattern.getPattern: "${C==null?void 0:C.message}".`)}return T}}p.TilingPattern=u},($,p,H)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.applyMaskImageData=K;var c=H(1);function K({src:q,srcPos:G=0,dest:U,destPos:F=0,width:m,height:x,inverseDecode:k=!1}){let R=c.FeatureTest.isLittleEndian?4278190080:255,[A,o]=k?[0,R]:[R,0],u=m>>3,r=m&7,g=q.length;U=new Uint32Array(U.buffer);for(let b=0;b<x;b++){for(let S=G+u;G<S;G++){let e=G<g?q[G]:255;U[F++]=e&128?o:A,U[F++]=e&64?o:A,U[F++]=e&32?o:A,U[F++]=e&16?o:A,U[F++]=e&8?o:A,U[F++]=e&4?o:A,U[F++]=e&2?o:A,U[F++]=e&1?o:A}if(r===0)continue;let y=G<g?q[G++]:255;for(let S=0;S<r;S++)U[F++]=y&1<<7-S?o:A}return{srcPos:G,destPos:F}}},($,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.GlobalWorkerOptions=void 0;let H=Object.create(null);p.GlobalWorkerOptions=H,H.workerPort=H.workerPort===void 0?null:H.workerPort,H.workerSrc=H.workerSrc===void 0?"":H.workerSrc},($,p,H)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MessageHandler=void 0;var c=H(1);let K={UNKNOWN:0,DATA:1,ERROR:2},q={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function G(F){switch(F instanceof Error||typeof F=="object"&&F!==null||(0,c.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),F.name){case"AbortException":return new c.AbortException(F.message);case"MissingPDFException":return new c.MissingPDFException(F.message);case"PasswordException":return new c.PasswordException(F.message,F.code);case"UnexpectedResponseException":return new c.UnexpectedResponseException(F.message,F.status);case"UnknownErrorException":return new c.UnknownErrorException(F.message,F.details);default:return new c.UnknownErrorException(F.message,F.toString())}}class U{constructor(m,x,k){this.sourceName=m,this.targetName=x,this.comObj=k,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=R=>{let A=R.data;if(A.targetName!==this.sourceName)return;if(A.stream){this._processStreamMessage(A);return}if(A.callback){let u=A.callbackId,r=this.callbackCapabilities[u];if(!r)throw new Error(`Cannot resolve callback ${u}`);if(delete this.callbackCapabilities[u],A.callback===K.DATA)r.resolve(A.data);else if(A.callback===K.ERROR)r.reject(G(A.reason));else throw new Error("Unexpected callback case");return}let o=this.actionHandler[A.action];if(!o)throw new Error(`Unknown action from worker: ${A.action}`);if(A.callbackId){let u=this.sourceName,r=A.sourceName;new Promise(function(g){g(o(A.data))}).then(function(g){k.postMessage({sourceName:u,targetName:r,callback:K.DATA,callbackId:A.callbackId,data:g})},function(g){k.postMessage({sourceName:u,targetName:r,callback:K.ERROR,callbackId:A.callbackId,reason:G(g)})});return}if(A.streamId){this._createStreamSink(A);return}o(A.data)},k.addEventListener("message",this._onComObjOnMessage)}on(m,x){let k=this.actionHandler;if(k[m])throw new Error(`There is already an actionName called "${m}"`);k[m]=x}send(m,x,k){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:m,data:x},k)}sendWithPromise(m,x,k){let R=this.callbackId++,A=(0,c.createPromiseCapability)();this.callbackCapabilities[R]=A;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:m,callbackId:R,data:x},k)}catch(o){A.reject(o)}return A.promise}sendWithStream(m,x,k,R){let A=this.streamId++,o=this.sourceName,u=this.targetName,r=this.comObj;return new ReadableStream({start:g=>{let b=(0,c.createPromiseCapability)();return this.streamControllers[A]={controller:g,startCall:b,pullCall:null,cancelCall:null,isClosed:!1},r.postMessage({sourceName:o,targetName:u,action:m,streamId:A,data:x,desiredSize:g.desiredSize},R),b.promise},pull:g=>{let b=(0,c.createPromiseCapability)();return this.streamControllers[A].pullCall=b,r.postMessage({sourceName:o,targetName:u,stream:q.PULL,streamId:A,desiredSize:g.desiredSize}),b.promise},cancel:g=>{(0,c.assert)(g instanceof Error,"cancel must have a valid reason");let b=(0,c.createPromiseCapability)();return this.streamControllers[A].cancelCall=b,this.streamControllers[A].isClosed=!0,r.postMessage({sourceName:o,targetName:u,stream:q.CANCEL,streamId:A,reason:G(g)}),b.promise}},k)}_createStreamSink(m){let x=m.streamId,k=this.sourceName,R=m.sourceName,A=this.comObj,o=this,u=this.actionHandler[m.action],r={enqueue(g,b=1,y){if(this.isCancelled)return;let S=this.desiredSize;this.desiredSize-=b,S>0&&this.desiredSize<=0&&(this.sinkCapability=(0,c.createPromiseCapability)(),this.ready=this.sinkCapability.promise),A.postMessage({sourceName:k,targetName:R,stream:q.ENQUEUE,streamId:x,chunk:g},y)},close(){this.isCancelled||(this.isCancelled=!0,A.postMessage({sourceName:k,targetName:R,stream:q.CLOSE,streamId:x}),delete o.streamSinks[x])},error(g){(0,c.assert)(g instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,A.postMessage({sourceName:k,targetName:R,stream:q.ERROR,streamId:x,reason:G(g)}))},sinkCapability:(0,c.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:m.desiredSize,ready:null};r.sinkCapability.resolve(),r.ready=r.sinkCapability.promise,this.streamSinks[x]=r,new Promise(function(g){g(u(m.data,r))}).then(function(){A.postMessage({sourceName:k,targetName:R,stream:q.START_COMPLETE,streamId:x,success:!0})},function(g){A.postMessage({sourceName:k,targetName:R,stream:q.START_COMPLETE,streamId:x,reason:G(g)})})}_processStreamMessage(m){let x=m.streamId,k=this.sourceName,R=m.sourceName,A=this.comObj,o=this.streamControllers[x],u=this.streamSinks[x];switch(m.stream){case q.START_COMPLETE:m.success?o.startCall.resolve():o.startCall.reject(G(m.reason));break;case q.PULL_COMPLETE:m.success?o.pullCall.resolve():o.pullCall.reject(G(m.reason));break;case q.PULL:if(!u){A.postMessage({sourceName:k,targetName:R,stream:q.PULL_COMPLETE,streamId:x,success:!0});break}u.desiredSize<=0&&m.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=m.desiredSize,new Promise(function(r){r(u.onPull&&u.onPull())}).then(function(){A.postMessage({sourceName:k,targetName:R,stream:q.PULL_COMPLETE,streamId:x,success:!0})},function(r){A.postMessage({sourceName:k,targetName:R,stream:q.PULL_COMPLETE,streamId:x,reason:G(r)})});break;case q.ENQUEUE:if((0,c.assert)(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(m.chunk);break;case q.CLOSE:if((0,c.assert)(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this._deleteStreamController(o,x);break;case q.ERROR:(0,c.assert)(o,"error should have stream controller"),o.controller.error(G(m.reason)),this._deleteStreamController(o,x);break;case q.CANCEL_COMPLETE:m.success?o.cancelCall.resolve():o.cancelCall.reject(G(m.reason)),this._deleteStreamController(o,x);break;case q.CANCEL:if(!u)break;new Promise(function(r){r(u.onCancel&&u.onCancel(G(m.reason)))}).then(function(){A.postMessage({sourceName:k,targetName:R,stream:q.CANCEL_COMPLETE,streamId:x,success:!0})},function(r){A.postMessage({sourceName:k,targetName:R,stream:q.CANCEL_COMPLETE,streamId:x,reason:G(r)})}),u.sinkCapability.reject(G(m.reason)),u.isCancelled=!0,delete this.streamSinks[x];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(m,x){await Promise.allSettled([m.startCall&&m.startCall.promise,m.pullCall&&m.pullCall.promise,m.cancelCall&&m.cancelCall.promise]),delete this.streamControllers[x]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}p.MessageHandler=U},($,p,H)=>{var q,G;Object.defineProperty(p,"__esModule",{value:!0}),p.Metadata=void 0;var c=H(1);class K{constructor({parsedData:F,rawData:m}){xt(this,q,void 0);xt(this,G,void 0);Pt(this,q,F),Pt(this,G,m)}getRaw(){return ut(this,G)}get(F){var m;return(m=ut(this,q).get(F))!=null?m:null}getAll(){return(0,c.objectFromMap)(ut(this,q))}has(F){return ut(this,q).has(F)}}q=new WeakMap,G=new WeakMap,p.Metadata=K},($,p,H)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.OptionalContentConfig=void 0;var c=H(1);class K{constructor(U,F){this.visible=!0,this.name=U,this.intent=F}}class q{constructor(U){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,U!==null){this.name=U.name,this.creator=U.creator,this._order=U.order;for(let F of U.groups)this._groups.set(F.id,new K(F.name,F.intent));if(U.baseState==="OFF")for(let F of this._groups)F.visible=!1;for(let F of U.on)this._groups.get(F).visible=!0;for(let F of U.off)this._groups.get(F).visible=!1}}_evaluateVisibilityExpression(U){let F=U.length;if(F<2)return!0;let m=U[0];for(let x=1;x<F;x++){let k=U[x],R;if(Array.isArray(k))R=this._evaluateVisibilityExpression(k);else if(this._groups.has(k))R=this._groups.get(k).visible;else return(0,c.warn)(`Optional content group not found: ${k}`),!0;switch(m){case"And":if(!R)return!1;break;case"Or":if(R)return!0;break;case"Not":return!R;default:return!0}}return m==="And"}isVisible(U){if(this._groups.size===0)return!0;if(!U)return(0,c.warn)("Optional content group not defined."),!0;if(U.type==="OCG")return this._groups.has(U.id)?this._groups.get(U.id).visible:((0,c.warn)(`Optional content group not found: ${U.id}`),!0);if(U.type==="OCMD"){if(U.expression)return this._evaluateVisibilityExpression(U.expression);if(!U.policy||U.policy==="AnyOn"){for(let F of U.ids){if(!this._groups.has(F))return(0,c.warn)(`Optional content group not found: ${F}`),!0;if(this._groups.get(F).visible)return!0}return!1}else if(U.policy==="AllOn"){for(let F of U.ids){if(!this._groups.has(F))return(0,c.warn)(`Optional content group not found: ${F}`),!0;if(!this._groups.get(F).visible)return!1}return!0}else if(U.policy==="AnyOff"){for(let F of U.ids){if(!this._groups.has(F))return(0,c.warn)(`Optional content group not found: ${F}`),!0;if(!this._groups.get(F).visible)return!0}return!1}else if(U.policy==="AllOff"){for(let F of U.ids){if(!this._groups.has(F))return(0,c.warn)(`Optional content group not found: ${F}`),!0;if(this._groups.get(F).visible)return!1}return!0}return(0,c.warn)(`Unknown optional content policy ${U.policy}.`),!0}return(0,c.warn)(`Unknown group type ${U.type}.`),!0}setVisibility(U,F=!0){if(!this._groups.has(U)){(0,c.warn)(`Optional content group not found: ${U}`);return}this._groups.get(U).visible=!!F}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,c.objectFromMap)(this._groups):null}getGroup(U){return this._groups.get(U)||null}}p.OptionalContentConfig=q},($,p,H)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.PDFDataTransportStream=void 0;var c=H(1),K=H(5);class q{constructor(m,x){(0,c.assert)(x,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=m.progressiveDone||!1,this._contentDispositionFilename=m.contentDispositionFilename||null;let k=m.initialData;if((k==null?void 0:k.length)>0){let R=new Uint8Array(k).buffer;this._queuedChunks.push(R)}this._pdfDataRangeTransport=x,this._isStreamingSupported=!m.disableStream,this._isRangeSupported=!m.disableRange,this._contentLength=m.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((R,A)=>{this._onReceiveData({begin:R,chunk:A})}),this._pdfDataRangeTransport.addProgressListener((R,A)=>{this._onProgress({loaded:R,total:A})}),this._pdfDataRangeTransport.addProgressiveReadListener(R=>{this._onReceiveData({chunk:R})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(m){let x=new Uint8Array(m.chunk).buffer;if(m.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(x):this._queuedChunks.push(x);else{let k=this._rangeReaders.some(function(R){return R._begin!==m.begin?!1:(R._enqueue(x),!0)});(0,c.assert)(k,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var m,x;return(x=(m=this._fullRequestReader)==null?void 0:m._loaded)!=null?x:0}_onProgress(m){if(m.total===void 0){let x=this._rangeReaders[0];x!=null&&x.onProgress&&x.onProgress({loaded:m.loaded})}else{let x=this._fullRequestReader;x!=null&&x.onProgress&&x.onProgress({loaded:m.loaded,total:m.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(m){let x=this._rangeReaders.indexOf(m);x>=0&&this._rangeReaders.splice(x,1)}getFullReader(){(0,c.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let m=this._queuedChunks;return this._queuedChunks=null,new G(this,m,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(m,x){if(x<=this._progressiveDataLength)return null;let k=new U(this,m,x);return this._pdfDataRangeTransport.requestDataRange(m,x),this._rangeReaders.push(k),k}cancelAllRequests(m){this._fullRequestReader&&this._fullRequestReader.cancel(m);for(let x of this._rangeReaders.slice(0))x.cancel(m);this._pdfDataRangeTransport.abort()}}p.PDFDataTransportStream=q;class G{constructor(m,x,k=!1,R=null){this._stream=m,this._done=k||!1,this._filename=(0,K.isPdfFile)(R)?R:null,this._queuedChunks=x||[],this._loaded=0;for(let A of this._queuedChunks)this._loaded+=A.byteLength;this._requests=[],this._headersReady=Promise.resolve(),m._fullRequestReader=this,this.onProgress=null}_enqueue(m){this._done||(this._requests.length>0?this._requests.shift().resolve({value:m,done:!1}):this._queuedChunks.push(m),this._loaded+=m.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let m=(0,c.createPromiseCapability)();return this._requests.push(m),m.promise}cancel(m){this._done=!0;for(let x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class U{constructor(m,x,k){this._stream=m,this._begin=x,this._end=k,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(m){if(!this._done){if(this._requests.length===0)this._queuedChunk=m;else{this._requests.shift().resolve({value:m,done:!1});for(let k of this._requests)k.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){let x=this._queuedChunk;return this._queuedChunk=null,{value:x,done:!1}}if(this._done)return{value:void 0,done:!0};let m=(0,c.createPromiseCapability)();return this._requests.push(m),m.promise}cancel(m){this._done=!0;for(let x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},($,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.XfaText=void 0;class H{static textContent(K){let q=[],G={items:q,styles:Object.create(null)};function U(F){var k;if(!F)return;let m=null,x=F.name;if(x==="#text")m=F.value;else if(H.shouldBuildText(x))(k=F==null?void 0:F.attributes)!=null&&k.textContent?m=F.attributes.textContent:F.value&&(m=F.value);else return;if(m!==null&&q.push({str:m}),!!F.children)for(let R of F.children)U(R)}return U(K),G}static shouldBuildText(K){return!(K==="textarea"||K==="input"||K==="option"||K==="select")}}p.XfaText=H},($,p,H)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.NodeStandardFontDataFactory=p.NodeCanvasFactory=p.NodeCMapReaderFactory=void 0;var c=H(6);let K=function(F){return new Promise((m,x)=>{$t().readFile(F,(R,A)=>{if(R||!A){x(new Error(R));return}m(new Uint8Array(A))})})};class q extends c.BaseCanvasFactory{_createCanvas(m,x){return te().createCanvas(m,x)}}p.NodeCanvasFactory=q;class G extends c.BaseCMapReaderFactory{_fetchData(m,x){return K(m).then(k=>({cMapData:k,compressionType:x}))}}p.NodeCMapReaderFactory=G;class U extends c.BaseStandardFontDataFactory{_fetchData(m){return K(m)}}p.NodeStandardFontDataFactory=U},($,p,H)=>{var v,Kt;Object.defineProperty(p,"__esModule",{value:!0}),p.AnnotationLayer=void 0;var c=H(1),K=H(5),q=H(8),G=H(21),U=H(22);let F=1e3,m=new WeakSet;function x(s){return{width:s[2]-s[0],height:s[3]-s[1]}}class k{static create(t){switch(t.data.annotationType){case c.AnnotationType.LINK:return new A(t);case c.AnnotationType.TEXT:return new o(t);case c.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new r(t);case"Btn":return t.data.radioButton?new b(t):t.data.checkBox?new g(t):new y(t);case"Ch":return new S(t)}return new u(t);case c.AnnotationType.POPUP:return new e(t);case c.AnnotationType.FREETEXT:return new _(t);case c.AnnotationType.LINE:return new T(t);case c.AnnotationType.SQUARE:return new C(t);case c.AnnotationType.CIRCLE:return new P(t);case c.AnnotationType.POLYLINE:return new w(t);case c.AnnotationType.CARET:return new X(t);case c.AnnotationType.INK:return new W(t);case c.AnnotationType.POLYGON:return new I(t);case c.AnnotationType.HIGHLIGHT:return new z(t);case c.AnnotationType.UNDERLINE:return new J(t);case c.AnnotationType.SQUIGGLY:return new Z(t);case c.AnnotationType.STRIKEOUT:return new Y(t);case c.AnnotationType.STAMP:return new et(t);case c.AnnotationType.FILEATTACHMENT:return new lt(t);default:return new R(t)}}}class R{constructor(t,{isRenderable:n=!1,ignoreBorder:i=!1,createQuadrilaterals:d=!1}={}){this.isRenderable=n,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this._mouseState=t.mouseState,n&&(this.container=this._createContainer(i)),d&&(this.quadrilaterals=this._createQuadrilaterals(i))}_createContainer(t=!1){let n=this.data,i=this.page,d=this.viewport,h=document.createElement("section"),{width:f,height:E}=x(n.rect);h.setAttribute("data-annotation-id",n.id);let D=c.Util.normalizeRect([n.rect[0],i.view[3]-n.rect[1]+i.view[1],n.rect[2],i.view[3]-n.rect[3]+i.view[1]]);if(n.hasOwnCanvas){let M=d.transform.slice(),[L,j]=c.Util.singularValueDecompose2dScale(M);f=Math.ceil(f*L),E=Math.ceil(E*j),D[0]*=L,D[1]*=j;for(let B=0;B<4;B++)M[B]=Math.sign(M[B]);h.style.transform=`matrix(${M.join(",")})`}else h.style.transform=`matrix(${d.transform.join(",")})`;if(h.style.transformOrigin=`${-D[0]}px ${-D[1]}px`,!t&&n.borderStyle.width>0){h.style.borderWidth=`${n.borderStyle.width}px`,n.borderStyle.style!==c.AnnotationBorderStyleType.UNDERLINE&&(f-=2*n.borderStyle.width,E-=2*n.borderStyle.width);let M=n.borderStyle.horizontalCornerRadius,L=n.borderStyle.verticalCornerRadius;if(M>0||L>0){let B=`${M}px / ${L}px`;h.style.borderRadius=B}switch(n.borderStyle.style){case c.AnnotationBorderStyleType.SOLID:h.style.borderStyle="solid";break;case c.AnnotationBorderStyleType.DASHED:h.style.borderStyle="dashed";break;case c.AnnotationBorderStyleType.BEVELED:(0,c.warn)("Unimplemented border style: beveled");break;case c.AnnotationBorderStyleType.INSET:(0,c.warn)("Unimplemented border style: inset");break;case c.AnnotationBorderStyleType.UNDERLINE:h.style.borderBottomStyle="solid";break;default:break}n.borderColor||n.color||null?h.style.borderColor=c.Util.makeHexColor(n.color[0]|0,n.color[1]|0,n.color[2]|0):h.style.borderWidth=0}return h.style.left=`${D[0]}px`,h.style.top=`${D[1]}px`,n.hasOwnCanvas?h.style.width=h.style.height="auto":(h.style.width=`${f}px`,h.style.height=`${E}px`),h}get _commonActions(){let t=(n,i,d)=>{let h=d.detail[n];d.target.style[i]=G.ColorConverters[`${h[0]}_HTML`](h.slice(1))};return(0,c.shadow)(this,"_commonActions",{display:n=>{let i=n.detail.display%2===1;n.target.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:i,print:n.detail.display===0||n.detail.display===3})},print:n=>{this.annotationStorage.setValue(this.data.id,{print:n.detail.print})},hidden:n=>{n.target.style.visibility=n.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:n.detail.hidden})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.detail.readonly?n.target.setAttribute("readonly",""):n.target.removeAttribute("readonly")},required:n=>{n.detail.required?n.target.setAttribute("required",""):n.target.removeAttribute("required")},bgColor:n=>{t("bgColor","backgroundColor",n)},fillColor:n=>{t("fillColor","backgroundColor",n)},fgColor:n=>{t("fgColor","color",n)},textColor:n=>{t("textColor","color",n)},borderColor:n=>{t("borderColor","borderColor",n)},strokeColor:n=>{t("strokeColor","borderColor",n)}})}_dispatchEventFromSandbox(t,n){let i=this._commonActions;for(let d of Object.keys(n.detail)){let h=t[d]||i[d];h&&h(n)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;let n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;let i=this._commonActions;for(let[d,h]of Object.entries(n)){let f=i[d];f&&(f({detail:h,target:t}),delete n[d])}}_createQuadrilaterals(t=!1){if(!this.data.quadPoints)return null;let n=[],i=this.data.rect;for(let d of this.data.quadPoints)this.data.rect=[d[2].x,d[2].y,d[1].x,d[1].y],n.push(this._createContainer(t));return this.data.rect=i,n}_createPopup(t,n){let i=this.container;this.quadrilaterals&&(t=t||this.quadrilaterals,i=this.quadrilaterals[0]),t||(t=document.createElement("div"),t.style.height=i.style.height,t.style.width=i.style.width,i.appendChild(t));let h=new a({container:i,trigger:t,color:n.color,titleObj:n.titleObj,modificationDate:n.modificationDate,contentsObj:n.contentsObj,richText:n.richText,hideWrapper:!0}).render();h.style.left=i.style.width,i.appendChild(h)}_renderQuadrilaterals(t){for(let n of this.quadrilaterals)n.className=t;return this.quadrilaterals}render(){(0,c.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,n=null){let i=[];if(this._fieldObjects){let d=this._fieldObjects[t];if(d)for(let{page:h,id:f,exportValues:E}of d){if(h===-1||f===n)continue;let D=typeof E=="string"?E:null,M=document.getElementById(f);if(M&&!m.has(M)){(0,c.warn)(`_getElementsByName - element not allowed: ${f}`);continue}i.push({id:f,exportValue:D,domElement:M})}return i}for(let d of document.getElementsByName(t)){let{id:h,exportValue:f}=d;h!==n&&(!m.has(d)||i.push({id:h,exportValue:f,domElement:d}))}return i}static get platform(){let t=typeof navigator<"u"?navigator.platform:"";return(0,c.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}class A extends R{constructor(t,n=null){let i=!!(t.data.url||t.data.dest||t.data.action||t.data.isTooltipOnly||t.data.resetForm||t.data.actions&&(t.data.actions.Action||t.data.actions["Mouse Up"]||t.data.actions["Mouse Down"]));super(t,{isRenderable:i,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0})}render(){let{data:t,linkService:n}=this,i=document.createElement("a");if(t.url)n.addLinkAttributes(i,t.url,t.newWindow);else if(t.action)this._bindNamedAction(i,t.action);else if(t.dest)this._bindLink(i,t.dest);else{let d=!1;t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(d=!0,this._bindJSAction(i,t)),t.resetForm?this._bindResetFormAction(i,t.resetForm):d||this._bindLink(i,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((d,h)=>{let f=h===0?i:i.cloneNode();return d.appendChild(f),d}):(this.container.className="linkAnnotation",this.container.appendChild(i),this.container)}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&(t.className="internalLink")}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),t.className="internalLink"}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");let i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let d of Object.keys(n.actions)){let h=i.get(d);!h||(t[h]=()=>{var f;return(f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:d}}),!1})}t.onclick||(t.onclick=()=>!1),t.className="internalLink"}_bindResetFormAction(t,n){let i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),t.className="internalLink",!this._fieldObjects){(0,c.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var L;i&&i();let{fields:d,refs:h,include:f}=n,E=[];if(d.length!==0||h.length!==0){let j=new Set(h);for(let B of d){let Q=this._fieldObjects[B]||[];for(let{id:nt}of Q)j.add(nt)}for(let B of Object.values(this._fieldObjects))for(let Q of B)j.has(Q.id)===f&&E.push(Q)}else for(let j of Object.values(this._fieldObjects))E.push(...j);let D=this.annotationStorage,M=[];for(let j of E){let{id:B}=j;switch(M.push(B),j.type){case"text":{let nt=j.defaultValue||"";D.setValue(B,{value:nt});break}case"checkbox":case"radiobutton":{let nt=j.defaultValue===j.exportValues;D.setValue(B,{value:nt});break}case"combobox":case"listbox":{let nt=j.defaultValue||"";D.setValue(B,{value:nt});break}default:continue}let Q=document.getElementById(B);!Q||!m.has(Q)||Q.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:M,name:"ResetForm"}})),!1}}}class o extends R{constructor(t){var i,d,h;let n=!!(t.data.hasPopup||((i=t.data.titleObj)==null?void 0:i.str)||((d=t.data.contentsObj)==null?void 0:d.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:n})}render(){this.container.className="textAnnotation";let t=document.createElement("img");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(t,this.data),this.container.appendChild(t),this.container}}class u extends R{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(t){let{isWin:n,isMac:i}=R.platform;return n&&t.ctrlKey||i&&t.metaKey}_setEventListener(t,n,i,d){n.includes("mouse")?t.addEventListener(n,h=>{var f;(f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:d(h),shift:h.shiftKey,modifier:this._getKeyModifier(h)}})}):t.addEventListener(n,h=>{var f;(f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:d(h)}})})}_setEventListeners(t,n,i){var d;for(let[h,f]of n)(f==="Action"||((d=this.data.actions)==null?void 0:d[f]))&&this._setEventListener(t,h,f,i)}_setBackgroundColor(t){let n=this.data.backgroundColor||null;t.style.backgroundColor=n===null?"transparent":c.Util.makeHexColor(n[0],n[1],n[2])}}class r extends u{constructor(t){let n=t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:n})}setPropertyOnSiblings(t,n,i,d){let h=this.annotationStorage;for(let f of this._getElementsByName(t.name,t.id))f.domElement&&(f.domElement[n]=i),h.setValue(f.id,{[d]:i})}render(){var d;let t=this.annotationStorage,n=this.data.id;this.container.className="textWidgetAnnotation";let i=null;if(this.renderForms){let h=t.getValue(n,{value:this.data.fieldValue}),f=h.formattedValue||h.value||"",E={userValue:null,formattedValue:null,valueOnFocus:""};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=f):(i=document.createElement("input"),i.type="text",i.setAttribute("value",f)),m.add(i),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=F,E.userValue=f,i.setAttribute("id",n),i.addEventListener("input",M=>{t.setValue(n,{value:M.target.value}),this.setPropertyOnSiblings(i,"value",M.target.value,"value")}),i.addEventListener("resetform",M=>{var j;let L=(j=this.data.defaultFieldValue)!=null?j:"";i.value=E.userValue=L,E.formattedValue=null});let D=M=>{let{formattedValue:L}=E;L!=null&&(M.target.value=L),M.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",L=>{E.userValue&&(L.target.value=E.userValue),E.valueOnFocus=L.target.value}),i.addEventListener("updatefromsandbox",L=>{let j={value(B){var Q;E.userValue=(Q=B.detail.value)!=null?Q:"",t.setValue(n,{value:E.userValue.toString()}),B.target.value=E.userValue},formattedValue(B){let{formattedValue:Q}=B.detail;E.formattedValue=Q,Q!=null&&B.target!==document.activeElement&&(B.target.value=Q),t.setValue(n,{formattedValue:Q})},selRange(B){B.target.setSelectionRange(...B.detail.selRange)}};this._dispatchEventFromSandbox(j,L)}),i.addEventListener("keydown",L=>{var Q;let j=-1;if(L.key==="Escape"?j=0:L.key==="Enter"?j=2:L.key==="Tab"&&(j=3),j===-1)return;let{value:B}=L.target;E.valueOnFocus!==B&&(E.userValue=B,(Q=this.linkService.eventBus)==null||Q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:B,willCommit:!0,commitKey:j,selStart:L.target.selectionStart,selEnd:L.target.selectionEnd}}))});let M=D;D=null,i.addEventListener("blur",L=>{var B;let{value:j}=L.target;E.userValue=j,this._mouseState.isDown&&E.valueOnFocus!==j&&((B=this.linkService.eventBus)==null||B.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:j,willCommit:!0,commitKey:1,selStart:L.target.selectionStart,selEnd:L.target.selectionEnd}})),M(L)}),(d=this.data.actions)!=null&&d.Keystroke&&i.addEventListener("beforeinput",L=>{var ht;let{data:j,target:B}=L,{value:Q,selectionStart:nt,selectionEnd:rt}=B,ot=nt,tt=rt;switch(L.inputType){case"deleteWordBackward":{let ct=Q.substring(0,nt).match(/\w*[^\w]*$/);ct&&(ot-=ct[0].length);break}case"deleteWordForward":{let ct=Q.substring(nt).match(/^[^\w]*\w*/);ct&&(tt+=ct[0].length);break}case"deleteContentBackward":nt===rt&&(ot-=1);break;case"deleteContentForward":nt===rt&&(tt+=1);break}L.preventDefault(),(ht=this.linkService.eventBus)==null||ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:Q,change:j||"",willCommit:!1,selStart:ot,selEnd:tt}})}),this._setEventListeners(i,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],L=>L.target.value)}if(D&&i.addEventListener("blur",D),this.data.maxLen!==null&&(i.maxLength=this.data.maxLen),this.data.comb){let L=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;i.classList.add("comb"),i.style.letterSpacing=`calc(${L}px - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell";return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.appendChild(i),this.container}_setTextStyle(t){let n=["left","center","right"],{fontSize:i,fontColor:d}=this.data.defaultAppearanceData,h=t.style;i&&(h.fontSize=`${i}px`),h.color=c.Util.makeHexColor(d[0],d[1],d[2]),this.data.textAlignment!==null&&(h.textAlign=n[this.data.textAlignment])}}class g extends u{constructor(t){super(t,{isRenderable:t.renderForms})}render(){let t=this.annotationStorage,n=this.data,i=n.id,d=t.getValue(i,{value:n.exportValue===n.fieldValue}).value;typeof d=="string"&&(d=d!=="Off",t.setValue(i,{value:d})),this.container.className="buttonWidgetAnnotation checkBox";let h=document.createElement("input");return m.add(h),h.disabled=n.readOnly,h.type="checkbox",h.name=n.fieldName,d&&h.setAttribute("checked",!0),h.setAttribute("id",i),h.setAttribute("exportValue",n.exportValue),h.tabIndex=F,h.addEventListener("change",f=>{let{name:E,checked:D}=f.target;for(let M of this._getElementsByName(E,i)){let L=D&&M.exportValue===n.exportValue;M.domElement&&(M.domElement.checked=L),t.setValue(M.id,{value:L})}t.setValue(i,{value:D})}),h.addEventListener("resetform",f=>{let E=n.defaultFieldValue||"Off";f.target.checked=E===n.exportValue}),this.enableScripting&&this.hasJSActions&&(h.addEventListener("updatefromsandbox",f=>{let E={value(D){D.target.checked=D.detail.value!=="Off",t.setValue(i,{value:D.target.checked})}};this._dispatchEventFromSandbox(E,f)}),this._setEventListeners(h,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],f=>f.target.checked)),this._setBackgroundColor(h),this._setDefaultPropertiesFromJS(h),this.container.appendChild(h),this.container}}class b extends u{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";let t=this.annotationStorage,n=this.data,i=n.id,d=t.getValue(i,{value:n.fieldValue===n.buttonValue}).value;typeof d=="string"&&(d=d!==n.buttonValue,t.setValue(i,{value:d}));let h=document.createElement("input");if(m.add(h),h.disabled=n.readOnly,h.type="radio",h.name=n.fieldName,d&&h.setAttribute("checked",!0),h.setAttribute("id",i),h.tabIndex=F,h.addEventListener("change",f=>{let{name:E,checked:D}=f.target;for(let M of this._getElementsByName(E,i))t.setValue(M.id,{value:!1});t.setValue(i,{value:D})}),h.addEventListener("resetform",f=>{let E=n.defaultFieldValue;f.target.checked=E!=null&&E===n.buttonValue}),this.enableScripting&&this.hasJSActions){let f=n.buttonValue;h.addEventListener("updatefromsandbox",E=>{let D={value:M=>{let L=f===M.detail.value;for(let j of this._getElementsByName(M.target.name)){let B=L&&j.id===i;j.domElement&&(j.domElement.checked=B),t.setValue(j.id,{value:B})}}};this._dispatchEventFromSandbox(D,E)}),this._setEventListeners(h,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],E=>E.target.checked)}return this._setBackgroundColor(h),this._setDefaultPropertiesFromJS(h),this.container.appendChild(h),this.container}}class y extends A{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){let t=super.render();return t.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(t.title=this.data.alternativeText),this._setDefaultPropertiesFromJS(t),t}}class S extends u{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="choiceWidgetAnnotation";let t=this.annotationStorage,n=this.data.id,i=t.getValue(n,{value:this.data.fieldValue}),{fontSize:d}=this.data.defaultAppearanceData;d||(d=9);let h=`calc(${d}px * var(--zoom-factor))`,f=document.createElement("select");m.add(f),f.disabled=this.data.readOnly,f.name=this.data.fieldName,f.setAttribute("id",n),f.tabIndex=F,f.style.fontSize=`${d}px`,this.data.combo||(f.size=this.data.options.length,this.data.multiSelect&&(f.multiple=!0)),f.addEventListener("resetform",M=>{let L=this.data.defaultFieldValue;for(let j of f.options)j.selected=j.value===L});for(let M of this.data.options){let L=document.createElement("option");L.textContent=M.displayValue,L.value=M.exportValue,this.data.combo&&(L.style.fontSize=h),i.value.includes(M.exportValue)&&L.setAttribute("selected",!0),f.appendChild(L)}let E=(M,L)=>{let j=L?"value":"textContent",B=M.target.options;return M.target.multiple?Array.prototype.filter.call(B,Q=>Q.selected).map(Q=>Q[j]):B.selectedIndex===-1?null:B[B.selectedIndex][j]},D=M=>{let L=M.target.options;return Array.prototype.map.call(L,j=>({displayValue:j.textContent,exportValue:j.value}))};return this.enableScripting&&this.hasJSActions?(f.addEventListener("updatefromsandbox",M=>{let L={value(j){let B=j.detail.value,Q=new Set(Array.isArray(B)?B:[B]);for(let nt of f.options)nt.selected=Q.has(nt.value);t.setValue(n,{value:E(j,!0)})},multipleSelection(j){f.multiple=!0},remove(j){let B=f.options,Q=j.detail.remove;B[Q].selected=!1,f.remove(Q),B.length>0&&Array.prototype.findIndex.call(B,rt=>rt.selected)===-1&&(B[0].selected=!0),t.setValue(n,{value:E(j,!0),items:D(j)})},clear(j){for(;f.length!==0;)f.remove(0);t.setValue(n,{value:null,items:[]})},insert(j){let{index:B,displayValue:Q,exportValue:nt}=j.detail.insert,rt=document.createElement("option");rt.textContent=Q,rt.value=nt,f.insertBefore(rt,f.children[B]),t.setValue(n,{value:E(j,!0),items:D(j)})},items(j){let{items:B}=j.detail;for(;f.length!==0;)f.remove(0);for(let Q of B){let{displayValue:nt,exportValue:rt}=Q,ot=document.createElement("option");ot.textContent=nt,ot.value=rt,f.appendChild(ot)}f.options.length>0&&(f.options[0].selected=!0),t.setValue(n,{value:E(j,!0),items:D(j)})},indices(j){let B=new Set(j.detail.indices);for(let Q of j.target.options)Q.selected=B.has(Q.index);t.setValue(n,{value:E(j,!0)})},editable(j){j.target.disabled=!j.detail.editable}};this._dispatchEventFromSandbox(L,M)}),f.addEventListener("input",M=>{var B;let L=E(M,!0),j=E(M,!1);t.setValue(n,{value:L}),(B=this.linkService.eventBus)==null||B.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:j,changeEx:L,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(f,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],M=>M.target.checked)):f.addEventListener("input",function(M){t.setValue(n,{value:E(M,!0)})}),this._setBackgroundColor(f),this._setDefaultPropertiesFromJS(f),this.container.appendChild(f),this.container}}class e extends R{constructor(t){var i,d,h;let n=!!(((i=t.data.titleObj)==null?void 0:i.str)||((d=t.data.contentsObj)==null?void 0:d.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:n})}render(){let t=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",t.includes(this.data.parentType))return this.container;let n=`[data-annotation-id="${this.data.parentId}"]`,i=this.layer.querySelectorAll(n);if(i.length===0)return this.container;let d=new a({container:this.container,trigger:Array.from(i),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),h=this.page,f=c.Util.normalizeRect([this.data.parentRect[0],h.view[3]-this.data.parentRect[1]+h.view[1],this.data.parentRect[2],h.view[3]-this.data.parentRect[3]+h.view[1]]),E=f[0]+this.data.parentRect[2]-this.data.parentRect[0],D=f[1];return this.container.style.transformOrigin=`${-E}px ${-D}px`,this.container.style.left=`${E}px`,this.container.style.top=`${D}px`,this.container.appendChild(d.render()),this.container}}class a{constructor(t){this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.titleObj=t.titleObj,this.modificationDate=t.modificationDate,this.contentsObj=t.contentsObj,this.richText=t.richText,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}render(){var E,D;let n=document.createElement("div");n.className="popupWrapper",this.hideElement=this.hideWrapper?n:this.container,this.hideElement.hidden=!0;let i=document.createElement("div");i.className="popup";let d=this.color;if(d){let M=.7*(255-d[0])+d[0],L=.7*(255-d[1])+d[1],j=.7*(255-d[2])+d[2];i.style.backgroundColor=c.Util.makeHexColor(M|0,L|0,j|0)}let h=document.createElement("h1");h.dir=this.titleObj.dir,h.textContent=this.titleObj.str,i.appendChild(h);let f=K.PDFDateString.toDateObject(this.modificationDate);if(f){let M=document.createElement("span");M.className="popupDate",M.textContent="{{date}}, {{time}}",M.dataset.l10nId="annotation_date_string",M.dataset.l10nArgs=JSON.stringify({date:f.toLocaleDateString(),time:f.toLocaleTimeString()}),i.appendChild(M)}if(((E=this.richText)==null?void 0:E.str)&&(!((D=this.contentsObj)!=null&&D.str)||this.contentsObj.str===this.richText.str))U.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:i}),i.lastChild.className="richText popupContent";else{let M=this._formatContents(this.contentsObj);i.appendChild(M)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(let M of this.trigger)M.addEventListener("click",this._toggle.bind(this)),M.addEventListener("mouseover",this._show.bind(this,!1)),M.addEventListener("mouseout",this._hide.bind(this,!1));return i.addEventListener("click",this._hide.bind(this,!0)),n.appendChild(i),n}_formatContents({str:t,dir:n}){let i=document.createElement("p");i.className="popupContent",i.dir=n;let d=t.split(/(?:\r\n?|\n)/);for(let h=0,f=d.length;h<f;++h){let E=d[h];i.appendChild(document.createTextNode(E)),h<f-1&&i.appendChild(document.createElement("br"))}return i}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(t=!1){t&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(t=!0){t&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class _ extends R{constructor(t){var i,d,h;let n=!!(t.data.hasPopup||((i=t.data.titleObj)==null?void 0:i.str)||((d=t.data.contentsObj)==null?void 0:d.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:n,ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class T extends R{constructor(t){var i,d,h;let n=!!(t.data.hasPopup||((i=t.data.titleObj)==null?void 0:i.str)||((d=t.data.contentsObj)==null?void 0:d.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:n,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";let t=this.data,{width:n,height:i}=x(t.rect),d=this.svgFactory.create(n,i),h=this.svgFactory.createElement("svg:line");return h.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),h.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),h.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),h.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),h.setAttribute("stroke-width",t.borderStyle.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),d.appendChild(h),this.container.append(d),this._createPopup(h,t),this.container}}class C extends R{constructor(t){var i,d,h;let n=!!(t.data.hasPopup||((i=t.data.titleObj)==null?void 0:i.str)||((d=t.data.contentsObj)==null?void 0:d.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:n,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";let t=this.data,{width:n,height:i}=x(t.rect),d=this.svgFactory.create(n,i),h=t.borderStyle.width,f=this.svgFactory.createElement("svg:rect");return f.setAttribute("x",h/2),f.setAttribute("y",h/2),f.setAttribute("width",n-h),f.setAttribute("height",i-h),f.setAttribute("stroke-width",h||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),d.appendChild(f),this.container.append(d),this._createPopup(f,t),this.container}}class P extends R{constructor(t){var i,d,h;let n=!!(t.data.hasPopup||((i=t.data.titleObj)==null?void 0:i.str)||((d=t.data.contentsObj)==null?void 0:d.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:n,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";let t=this.data,{width:n,height:i}=x(t.rect),d=this.svgFactory.create(n,i),h=t.borderStyle.width,f=this.svgFactory.createElement("svg:ellipse");return f.setAttribute("cx",n/2),f.setAttribute("cy",i/2),f.setAttribute("rx",n/2-h/2),f.setAttribute("ry",i/2-h/2),f.setAttribute("stroke-width",h||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),d.appendChild(f),this.container.append(d),this._createPopup(f,t),this.container}}class w extends R{constructor(t){var i,d,h;let n=!!(t.data.hasPopup||((i=t.data.titleObj)==null?void 0:i.str)||((d=t.data.contentsObj)==null?void 0:d.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:n,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;let t=this.data,{width:n,height:i}=x(t.rect),d=this.svgFactory.create(n,i),h=[];for(let E of t.vertices){let D=E.x-t.rect[0],M=t.rect[3]-E.y;h.push(D+","+M)}h=h.join(" ");let f=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",h),f.setAttribute("stroke-width",t.borderStyle.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),d.appendChild(f),this.container.append(d),this._createPopup(f,t),this.container}}class I extends w{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class X extends R{constructor(t){var i,d,h;let n=!!(t.data.hasPopup||((i=t.data.titleObj)==null?void 0:i.str)||((d=t.data.contentsObj)==null?void 0:d.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:n,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class W extends R{constructor(t){var i,d,h;let n=!!(t.data.hasPopup||((i=t.data.titleObj)==null?void 0:i.str)||((d=t.data.contentsObj)==null?void 0:d.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:n,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;let t=this.data,{width:n,height:i}=x(t.rect),d=this.svgFactory.create(n,i);for(let h of t.inkLists){let f=[];for(let D of h){let M=D.x-t.rect[0],L=t.rect[3]-D.y;f.push(`${M},${L}`)}f=f.join(" ");let E=this.svgFactory.createElement(this.svgElementName);E.setAttribute("points",f),E.setAttribute("stroke-width",t.borderStyle.width||1),E.setAttribute("stroke","transparent"),E.setAttribute("fill","transparent"),this._createPopup(E,t),d.appendChild(E)}return this.container.append(d),this.container}}class z extends R{constructor(t){var i,d,h;let n=!!(t.data.hasPopup||((i=t.data.titleObj)==null?void 0:i.str)||((d=t.data.contentsObj)==null?void 0:d.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:n,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class J extends R{constructor(t){var i,d,h;let n=!!(t.data.hasPopup||((i=t.data.titleObj)==null?void 0:i.str)||((d=t.data.contentsObj)==null?void 0:d.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:n,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class Z extends R{constructor(t){var i,d,h;let n=!!(t.data.hasPopup||((i=t.data.titleObj)==null?void 0:i.str)||((d=t.data.contentsObj)==null?void 0:d.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:n,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class Y extends R{constructor(t){var i,d,h;let n=!!(t.data.hasPopup||((i=t.data.titleObj)==null?void 0:i.str)||((d=t.data.contentsObj)==null?void 0:d.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:n,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class et extends R{constructor(t){var i,d,h;let n=!!(t.data.hasPopup||((i=t.data.titleObj)==null?void 0:i.str)||((d=t.data.contentsObj)==null?void 0:d.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:n,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class lt extends R{constructor(t){var d;super(t,{isRenderable:!0});let{filename:n,content:i}=this.data.file;this.filename=(0,K.getFilenameFromUrl)(n),this.content=i,(d=this.linkService.eventBus)==null||d.dispatch("fileattachmentannotation",{source:this,filename:n,content:i})}render(){var n,i;this.container.className="fileAttachmentAnnotation";let t=document.createElement("div");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(((n=this.data.titleObj)==null?void 0:n.str)||((i=this.data.contentsObj)==null?void 0:i.str)||this.data.richText)&&this._createPopup(t,this.data),this.container.appendChild(t),this.container}_download(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.container,this.content,this.filename)}}class st{static render(t){let n=[],i=[];for(let h of t.annotations){if(!h)continue;let{width:f,height:E}=x(h.rect);if(!(f<=0||E<=0)){if(h.annotationType===c.AnnotationType.POPUP){i.push(h);continue}n.push(h)}}i.length&&n.push(...i);let d=t.div;for(let h of n){let f=k.create({data:h,layer:d,page:t.page,viewport:t.viewport,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new K.DOMSVGFactory,annotationStorage:t.annotationStorage||new q.AnnotationStorage,enableScripting:t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,mouseState:t.mouseState||{isDown:!1}});if(f.isRenderable){let E=f.render();if(h.hidden&&(E.style.visibility="hidden"),Array.isArray(E))for(let D of E)d.appendChild(D);else f instanceof e?d.prepend(E):d.appendChild(E)}}It(this,v,Kt).call(this,d,t.annotationCanvasMap)}static update(t){let{page:n,viewport:i,annotations:d,annotationCanvasMap:h,div:f}=t,E=i.transform,D=`matrix(${E.join(",")})`,M,L;for(let j of d){let B=f.querySelectorAll(`[data-annotation-id="${j.id}"]`);if(B)for(let Q of B)if(j.hasOwnCanvas){let nt=c.Util.normalizeRect([j.rect[0],n.view[3]-j.rect[1]+n.view[1],j.rect[2],n.view[3]-j.rect[3]+n.view[1]]);if(!L){M=Math.abs(E[0]||E[1]);let tt=E.slice();for(let ht=0;ht<4;ht++)tt[ht]=Math.sign(tt[ht]);L=`matrix(${tt.join(",")})`}let rt=nt[0]*M,ot=nt[1]*M;Q.style.left=`${rt}px`,Q.style.top=`${ot}px`,Q.style.transformOrigin=`${-rt}px ${-ot}px`,Q.style.transform=L}else Q.style.transform=D}It(this,v,Kt).call(this,f,h),f.hidden=!1}}v=new WeakSet,Kt=function(t,n){if(!!n){for(let[i,d]of n){let h=t.querySelector(`[data-annotation-id="${i}"]`);if(!h)continue;let{firstChild:f}=h;f.nodeName==="CANVAS"?h.replaceChild(d,f):h.insertBefore(d,f)}n.clear()}},xt(st,v),p.AnnotationLayer=st},($,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.ColorConverters=void 0;function H(K){return Math.floor(Math.max(0,Math.min(1,K))*255).toString(16).padStart(2,"0")}class c{static CMYK_G([q,G,U,F]){return["G",1-Math.min(1,.3*q+.59*U+.11*G+F)]}static G_CMYK([q]){return["CMYK",0,0,0,1-q]}static G_RGB([q]){return["RGB",q,q,q]}static G_HTML([q]){let G=H(q);return`#${G}${G}${G}`}static RGB_G([q,G,U]){return["G",.3*q+.59*G+.11*U]}static RGB_HTML([q,G,U]){let F=H(q),m=H(G),x=H(U);return`#${F}${m}${x}`}static T_HTML(){return"#00000000"}static CMYK_RGB([q,G,U,F]){return["RGB",1-Math.min(1,q+F),1-Math.min(1,U+F),1-Math.min(1,G+F)]}static CMYK_HTML(q){return this.RGB_HTML(this.CMYK_RGB(q))}static RGB_CMYK([q,G,U]){let F=1-q,m=1-G,x=1-U,k=Math.min(F,m,x);return["CMYK",F,m,x,k]}}p.ColorConverters=c},($,p,H)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.XfaLayer=void 0;var c=H(18);class K{static setupStorage(G,U,F,m,x){let k=m.getValue(U,{value:null});switch(F.name){case"textarea":if(k.value!==null&&(G.textContent=k.value),x==="print")break;G.addEventListener("input",R=>{m.setValue(U,{value:R.target.value})});break;case"input":if(F.attributes.type==="radio"||F.attributes.type==="checkbox"){if(k.value===F.attributes.xfaOn?G.setAttribute("checked",!0):k.value===F.attributes.xfaOff&&G.removeAttribute("checked"),x==="print")break;G.addEventListener("change",R=>{m.setValue(U,{value:R.target.checked?R.target.getAttribute("xfaOn"):R.target.getAttribute("xfaOff")})})}else{if(k.value!==null&&G.setAttribute("value",k.value),x==="print")break;G.addEventListener("input",R=>{m.setValue(U,{value:R.target.value})})}break;case"select":if(k.value!==null)for(let R of F.children)R.attributes.value===k.value&&(R.attributes.selected=!0);G.addEventListener("input",R=>{let A=R.target.options,o=A.selectedIndex===-1?"":A[A.selectedIndex].value;m.setValue(U,{value:o})});break}}static setAttributes({html:G,element:U,storage:F=null,intent:m,linkService:x}){let{attributes:k}=U,R=G instanceof HTMLAnchorElement;k.type==="radio"&&(k.name=`${k.name}-${m}`);for(let[A,o]of Object.entries(k))if(!(o==null||A==="dataId"))if(A!=="style")if(A==="textContent")G.textContent=o;else if(A==="class")o.length&&G.setAttribute(A,o.join(" "));else{if(R&&(A==="href"||A==="newWindow"))continue;G.setAttribute(A,o)}else Object.assign(G.style,o);R&&x.addLinkAttributes(G,k.href,k.newWindow),F&&k.dataId&&this.setupStorage(G,k.dataId,U,F)}static render(G){var u;let U=G.annotationStorage,F=G.linkService,m=G.xfaHtml,x=G.intent||"display",k=document.createElement(m.name);m.attributes&&this.setAttributes({html:k,element:m,intent:x,linkService:F});let R=[[m,-1,k]],A=G.div;if(A.appendChild(k),G.viewport){let r=`matrix(${G.viewport.transform.join(",")})`;A.style.transform=r}x!=="richText"&&A.setAttribute("class","xfaLayer xfaFont");let o=[];for(;R.length>0;){let[r,g,b]=R[R.length-1];if(g+1===r.children.length){R.pop();continue}let y=r.children[++R[R.length-1][1]];if(y===null)continue;let{name:S}=y;if(S==="#text"){let a=document.createTextNode(y.value);o.push(a),b.appendChild(a);continue}let e;if((u=y==null?void 0:y.attributes)!=null&&u.xmlns?e=document.createElementNS(y.attributes.xmlns,S):e=document.createElement(S),b.appendChild(e),y.attributes&&this.setAttributes({html:e,element:y,storage:U,intent:x,linkService:F}),y.children&&y.children.length>0)R.push([y,-1,e]);else if(y.value){let a=document.createTextNode(y.value);c.XfaText.shouldBuildText(S)&&o.push(a),e.appendChild(a)}}for(let r of A.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))r.setAttribute("readOnly",!0);return{textDivs:o}}static update(G){let U=`matrix(${G.viewport.transform.join(",")})`;G.div.style.transform=U,G.div.hidden=!1}}p.XfaLayer=K},($,p,H)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.renderTextLayer=g;var c=H(1);let K=1e5,q=30,G=.8,U=new Map,F=/^\s+$/g;function m(b,y){let S=U.get(b);if(S)return S;y.save(),y.font=`${q}px ${b}`;let e=y.measureText(""),a=e.fontBoundingBoxAscent,_=Math.abs(e.fontBoundingBoxDescent);if(a){y.restore();let C=a/(a+_);return U.set(b,C),C}y.strokeStyle="red",y.clearRect(0,0,q,q),y.strokeText("g",0,0);let T=y.getImageData(0,0,q,q).data;_=0;for(let C=T.length-1-3;C>=0;C-=4)if(T[C]>0){_=Math.ceil(C/4/q);break}y.clearRect(0,0,q,q),y.strokeText("A",0,q),T=y.getImageData(0,0,q,q).data,a=0;for(let C=0,P=T.length;C<P;C+=4)if(T[C]>0){a=q-Math.floor(C/4/q);break}if(y.restore(),a){let C=a/(a+_);return U.set(b,C),C}return U.set(b,G),G}function x(b,y,S,e){let a=document.createElement("span"),_=b._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:y.str!=="",hasEOL:y.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:y.str!=="",hasEOL:y.hasEOL};b._textDivs.push(a);let T=c.Util.transform(b._viewport.transform,y.transform),C=Math.atan2(T[1],T[0]),P=S[y.fontName];P.vertical&&(C+=Math.PI/2);let w=Math.hypot(T[2],T[3]),I=w*m(P.fontFamily,e),X,W;C===0?(X=T[4],W=T[5]-I):(X=T[4]+I*Math.sin(C),W=T[5]-I*Math.cos(C)),a.style.left=`${X}px`,a.style.top=`${W}px`,a.style.fontSize=`${w}px`,a.style.fontFamily=P.fontFamily,a.setAttribute("role","presentation"),a.textContent=y.str,a.dir=y.dir,b._fontInspectorEnabled&&(a.dataset.fontName=y.fontName),C!==0&&(_.angle=C*(180/Math.PI));let z=!1;if(y.str.length>1||b._enhanceTextSelection&&F.test(y.str))z=!0;else if(y.str!==" "&&y.transform[0]!==y.transform[3]){let J=Math.abs(y.transform[0]),Z=Math.abs(y.transform[3]);J!==Z&&Math.max(J,Z)/Math.min(J,Z)>1.5&&(z=!0)}if(z&&(P.vertical?_.canvasWidth=y.height*b._viewport.scale:_.canvasWidth=y.width*b._viewport.scale),b._textDivProperties.set(a,_),b._textContentStream&&b._layoutText(a),b._enhanceTextSelection&&_.hasText){let J=1,Z=0;C!==0&&(J=Math.cos(C),Z=Math.sin(C));let Y=(P.vertical?y.height:y.width)*b._viewport.scale,et=w,lt,st;C!==0?(lt=[J,Z,-Z,J,X,W],st=c.Util.getAxialAlignedBoundingBox([0,0,Y,et],lt)):st=[X,W,X+Y,W+et],b._bounds.push({left:st[0],top:st[1],right:st[2],bottom:st[3],div:a,size:[Y,et],m:lt})}}function k(b){if(b._canceled)return;let y=b._textDivs,S=b._capability,e=y.length;if(e>K){b._renderingDone=!0,S.resolve();return}if(!b._textContentStream)for(let a=0;a<e;a++)b._layoutText(y[a]);b._renderingDone=!0,S.resolve()}function R(b,y,S){let e=0;for(let a=0;a<S;a++){let _=b[y++];_>0&&(e=e?Math.min(_,e):_)}return e}function A(b){let y=b._bounds,S=b._viewport,e=o(S.width,S.height,y);for(let a=0;a<e.length;a++){let _=y[a].div,T=b._textDivProperties.get(_);if(T.angle===0){T.paddingLeft=y[a].left-e[a].left,T.paddingTop=y[a].top-e[a].top,T.paddingRight=e[a].right-y[a].right,T.paddingBottom=e[a].bottom-y[a].bottom,b._textDivProperties.set(_,T);continue}let C=e[a],P=y[a],w=P.m,I=w[0],X=w[1],W=[[0,0],[0,P.size[1]],[P.size[0],0],P.size],z=new Float64Array(64);for(let Z=0,Y=W.length;Z<Y;Z++){let et=c.Util.applyTransform(W[Z],w);z[Z+0]=I&&(C.left-et[0])/I,z[Z+4]=X&&(C.top-et[1])/X,z[Z+8]=I&&(C.right-et[0])/I,z[Z+12]=X&&(C.bottom-et[1])/X,z[Z+16]=X&&(C.left-et[0])/-X,z[Z+20]=I&&(C.top-et[1])/I,z[Z+24]=X&&(C.right-et[0])/-X,z[Z+28]=I&&(C.bottom-et[1])/I,z[Z+32]=I&&(C.left-et[0])/-I,z[Z+36]=X&&(C.top-et[1])/-X,z[Z+40]=I&&(C.right-et[0])/-I,z[Z+44]=X&&(C.bottom-et[1])/-X,z[Z+48]=X&&(C.left-et[0])/X,z[Z+52]=I&&(C.top-et[1])/-I,z[Z+56]=X&&(C.right-et[0])/X,z[Z+60]=I&&(C.bottom-et[1])/-I}let J=1+Math.min(Math.abs(I),Math.abs(X));T.paddingLeft=R(z,32,16)/J,T.paddingTop=R(z,48,16)/J,T.paddingRight=R(z,0,16)/J,T.paddingBottom=R(z,16,16)/J,b._textDivProperties.set(_,T)}}function o(b,y,S){let e=S.map(function(_,T){return{x1:_.left,y1:_.top,x2:_.right,y2:_.bottom,index:T,x1New:void 0,x2New:void 0}});u(b,e);let a=new Array(S.length);for(let _ of e){let T=_.index;a[T]={left:_.x1New,top:0,right:_.x2New,bottom:0}}S.map(function(_,T){let C=a[T],P=e[T];P.x1=_.top,P.y1=b-C.right,P.x2=_.bottom,P.y2=b-C.left,P.index=T,P.x1New=void 0,P.x2New=void 0}),u(y,e);for(let _ of e){let T=_.index;a[T].top=_.x1New,a[T].bottom=_.x2New}return a}function u(b,y){y.sort(function(a,_){return a.x1-_.x1||a.index-_.index});let e=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(let a of y){let _=0;for(;_<e.length&&e[_].end<=a.y1;)_++;let T=e.length-1;for(;T>=0&&e[T].start>=a.y2;)T--;let C,P,w,I,X=-1/0;for(w=_;w<=T;w++){C=e[w],P=C.boundary;let J;P.x2>a.x1?J=P.index>a.index?P.x1New:a.x1:P.x2New===void 0?J=(P.x2+a.x1)/2:J=P.x2New,J>X&&(X=J)}for(a.x1New=X,w=_;w<=T;w++)C=e[w],P=C.boundary,P.x2New===void 0?P.x2>a.x1?P.index>a.index&&(P.x2New=P.x2):P.x2New=X:P.x2New>X&&(P.x2New=Math.max(X,P.x2));let W=[],z=null;for(w=_;w<=T;w++){C=e[w],P=C.boundary;let J=P.x2>a.x2?P:a;z===J?W[W.length-1].end=C.end:(W.push({start:C.start,end:C.end,boundary:J}),z=J)}for(e[_].start<a.y1&&(W[0].start=a.y1,W.unshift({start:e[_].start,end:a.y1,boundary:e[_].boundary})),a.y2<e[T].end&&(W[W.length-1].end=a.y2,W.push({start:a.y2,end:e[T].end,boundary:e[T].boundary})),w=_;w<=T;w++){if(C=e[w],P=C.boundary,P.x2New!==void 0)continue;let J=!1;for(I=_-1;!J&&I>=0&&e[I].start>=P.y1;I--)J=e[I].boundary===P;for(I=T+1;!J&&I<e.length&&e[I].end<=P.y2;I++)J=e[I].boundary===P;for(I=0;!J&&I<W.length;I++)J=W[I].boundary===P;J||(P.x2New=X)}Array.prototype.splice.apply(e,[_,T-_+1].concat(W))}for(let a of e){let _=a.boundary;_.x2New===void 0&&(_.x2New=Math.max(b,_.x2))}}class r{constructor({textContent:y,textContentStream:S,container:e,viewport:a,textDivs:_,textContentItemsStr:T,enhanceTextSelection:C}){var P;this._textContent=y,this._textContentStream=S,this._container=e,this._document=e.ownerDocument,this._viewport=a,this._textDivs=_||[],this._textContentItemsStr=T||[],this._enhanceTextSelection=!!C,this._fontInspectorEnabled=!!((P=globalThis.FontInspector)!=null&&P.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,c.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new c.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(y,S){for(let e=0,a=y.length;e<a;e++){if(y[e].str===void 0){if(y[e].type==="beginMarkedContentProps"||y[e].type==="beginMarkedContent"){let _=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),y[e].id!==null&&this._container.setAttribute("id",`${y[e].id}`),_.appendChild(this._container)}else y[e].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(y[e].str),x(this,y[e],S,this._layoutTextCtx)}}_layoutText(y){let S=this._textDivProperties.get(y),e="";if(S.canvasWidth!==0&&S.hasText){let{fontSize:a,fontFamily:_}=y.style;(a!==this._layoutTextLastFontSize||_!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${a} ${_}`,this._layoutTextLastFontSize=a,this._layoutTextLastFontFamily=_);let{width:T}=this._layoutTextCtx.measureText(y.textContent);if(T>0){let C=S.canvasWidth/T;this._enhanceTextSelection&&(S.scale=C),e=`scaleX(${C})`}}if(S.angle!==0&&(e=`rotate(${S.angle}deg) ${e}`),e.length>0&&(this._enhanceTextSelection&&(S.originalTransform=e),y.style.transform=e),S.hasText&&this._container.appendChild(y),S.hasEOL){let a=document.createElement("br");a.setAttribute("role","presentation"),this._container.appendChild(a)}}_render(y=0){let S=(0,c.createPromiseCapability)(),e=Object.create(null),a=this._document.createElement("canvas");if(a.height=a.width=q,this._layoutTextCtx=a.getContext("2d",{alpha:!1}),this._textContent){let _=this._textContent.items,T=this._textContent.styles;this._processItems(_,T),S.resolve()}else if(this._textContentStream){let _=()=>{this._reader.read().then(({value:T,done:C})=>{if(C){S.resolve();return}Object.assign(e,T.styles),this._processItems(T.items,e),_()},S.reject)};this._reader=this._textContentStream.getReader(),_()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');S.promise.then(()=>{e=null,y?this._renderTimer=setTimeout(()=>{k(this),this._renderTimer=null},y):k(this)},this._capability.reject)}expandTextDivs(y=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(A(this),this._bounds=null);let S=[],e=[];for(let a=0,_=this._textDivs.length;a<_;a++){let T=this._textDivs[a],C=this._textDivProperties.get(T);!C.hasText||(y?(S.length=0,e.length=0,C.originalTransform&&S.push(C.originalTransform),C.paddingTop>0?(e.push(`${C.paddingTop}px`),S.push(`translateY(${-C.paddingTop}px)`)):e.push(0),C.paddingRight>0?e.push(`${C.paddingRight/C.scale}px`):e.push(0),C.paddingBottom>0?e.push(`${C.paddingBottom}px`):e.push(0),C.paddingLeft>0?(e.push(`${C.paddingLeft/C.scale}px`),S.push(`translateX(${-C.paddingLeft/C.scale}px)`)):e.push(0),T.style.padding=e.join(" "),S.length&&(T.style.transform=S.join(" "))):(T.style.padding=null,T.style.transform=C.originalTransform))}}}function g(b){let y=new r({textContent:b.textContent,textContentStream:b.textContentStream,container:b.container,viewport:b.viewport,textDivs:b.textDivs,textContentItemsStr:b.textContentItemsStr,enhanceTextSelection:b.enhanceTextSelection});return y._render(b.timeout),y}},($,p,H)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.SVGGraphics=void 0;var c=H(1),K=H(5),q=H(3);let G=class{constructor(){(0,c.unreachable)("Not implemented: SVGGraphics")}};p.SVGGraphics=G;{let u=function(e){let a=[],_=[];for(let T of e){if(T.fn==="save"){a.push({fnId:92,fn:"group",items:[]}),_.push(a),a=a[a.length-1].items;continue}T.fn==="restore"?a=_.pop():a.push(T)}return a},r=function(e){if(Number.isInteger(e))return e.toString();let a=e.toFixed(10),_=a.length-1;if(a[_]!=="0")return a;do _--;while(a[_]==="0");return a.substring(0,a[_]==="."?_:_+1)},g=function(e){if(e[4]===0&&e[5]===0){if(e[1]===0&&e[2]===0)return e[0]===1&&e[3]===1?"":`scale(${r(e[0])} ${r(e[3])})`;if(e[0]===e[3]&&e[1]===-e[2]){let a=Math.acos(e[0])*180/Math.PI;return`rotate(${r(a)})`}}else if(e[0]===1&&e[1]===0&&e[2]===0&&e[3]===1)return`translate(${r(e[4])} ${r(e[5])})`;return`matrix(${r(e[0])} ${r(e[1])} ${r(e[2])} ${r(e[3])} ${r(e[4])} ${r(e[5])})`},U={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},F="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/1999/xlink",x=["butt","round","square"],k=["miter","round","bevel"],R=function(e,a="",_=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!_)return URL.createObjectURL(new Blob([e],{type:a}));let T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",C=`data:${a};base64,`;for(let P=0,w=e.length;P<w;P+=3){let I=e[P]&255,X=e[P+1]&255,W=e[P+2]&255,z=I>>2,J=(I&3)<<4|X>>4,Z=P+1<w?(X&15)<<2|W>>6:64,Y=P+2<w?W&63:64;C+=T[z]+T[J]+T[Z]+T[Y]}return C},A=function(){let e=new Uint8Array([137,80,78,71,13,10,26,10]),a=12,_=new Int32Array(256);for(let W=0;W<256;W++){let z=W;for(let J=0;J<8;J++)z&1?z=3988292384^z>>1&2147483647:z=z>>1&2147483647;_[W]=z}function T(W,z,J){let Z=-1;for(let Y=z;Y<J;Y++){let et=(Z^W[Y])&255,lt=_[et];Z=Z>>>8^lt}return Z^-1}function C(W,z,J,Z){let Y=Z,et=z.length;J[Y]=et>>24&255,J[Y+1]=et>>16&255,J[Y+2]=et>>8&255,J[Y+3]=et&255,Y+=4,J[Y]=W.charCodeAt(0)&255,J[Y+1]=W.charCodeAt(1)&255,J[Y+2]=W.charCodeAt(2)&255,J[Y+3]=W.charCodeAt(3)&255,Y+=4,J.set(z,Y),Y+=z.length;let lt=T(J,Z+4,Y);J[Y]=lt>>24&255,J[Y+1]=lt>>16&255,J[Y+2]=lt>>8&255,J[Y+3]=lt&255}function P(W,z,J){let Z=1,Y=0;for(let et=z;et<J;++et)Z=(Z+(W[et]&255))%65521,Y=(Y+Z)%65521;return Y<<16|Z}function w(W){if(!q.isNodeJS)return I(W);try{let z;parseInt(process.versions.node)>=8?z=W:z=Buffer.from(W);let J=ee().deflateSync(z,{level:9});return J instanceof Uint8Array?J:new Uint8Array(J)}catch(z){(0,c.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+z)}return I(W)}function I(W){let z=W.length,J=65535,Z=Math.ceil(z/J),Y=new Uint8Array(2+z+Z*5+4),et=0;Y[et++]=120,Y[et++]=156;let lt=0;for(;z>J;)Y[et++]=0,Y[et++]=255,Y[et++]=255,Y[et++]=0,Y[et++]=0,Y.set(W.subarray(lt,lt+J),et),et+=J,lt+=J,z-=J;Y[et++]=1,Y[et++]=z&255,Y[et++]=z>>8&255,Y[et++]=~z&65535&255,Y[et++]=(~z&65535)>>8&255,Y.set(W.subarray(lt),et),et+=W.length-lt;let st=P(W,0,W.length);return Y[et++]=st>>24&255,Y[et++]=st>>16&255,Y[et++]=st>>8&255,Y[et++]=st&255,Y}function X(W,z,J,Z){let Y=W.width,et=W.height,lt,st,v,l=W.data;switch(z){case c.ImageKind.GRAYSCALE_1BPP:st=0,lt=1,v=Y+7>>3;break;case c.ImageKind.RGB_24BPP:st=2,lt=8,v=Y*3;break;case c.ImageKind.RGBA_32BPP:st=6,lt=8,v=Y*4;break;default:throw new Error("invalid format")}let s=new Uint8Array((1+v)*et),t=0,n=0;for(let D=0;D<et;++D)s[t++]=0,s.set(l.subarray(n,n+v),t),n+=v,t+=v;if(z===c.ImageKind.GRAYSCALE_1BPP&&Z){t=0;for(let D=0;D<et;D++){t++;for(let M=0;M<v;M++)s[t++]^=255}}let i=new Uint8Array([Y>>24&255,Y>>16&255,Y>>8&255,Y&255,et>>24&255,et>>16&255,et>>8&255,et&255,lt,st,0,0,0]),d=w(s),h=e.length+a*3+i.length+d.length,f=new Uint8Array(h),E=0;return f.set(e,E),E+=e.length,C("IHDR",i,f,E),E+=a+i.length,C("IDATA",d,f,E),E+=a+d.length,C("IEND",new Uint8Array(0),f,E),R(f,"image/png",J)}return function(z,J,Z){let Y=z.kind===void 0?c.ImageKind.GRAYSCALE_1BPP:z.kind;return X(z,Y,J,Z)}}();class o{constructor(){this.fontSizeScale=1,this.fontWeight=U.fontWeight,this.fontSize=0,this.textMatrix=c.IDENTITY_MATRIX,this.fontMatrix=c.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=c.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=U.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(a,_){this.x=a,this.y=_}}let b=0,y=0,S=0;p.SVGGraphics=G=class{constructor(e,a,_=!1){this.svgFactory=new K.DOMSVGFactory,this.current=new o,this.transformMatrix=c.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=e,this.objs=a,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!_,this._operatorIdMapping=[];for(let T in c.OPS)this._operatorIdMapping[c.OPS[T]]=T}save(){this.transformStack.push(this.transformMatrix);let e=this.current;this.extraStack.push(e),this.current=e.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(e){this.save(),this.executeOpTree(e),this.restore()}loadDependencies(e){let a=e.fnArray,_=e.argsArray;for(let T=0,C=a.length;T<C;T++)if(a[T]===c.OPS.dependency)for(let P of _[T]){let w=P.startsWith("g_")?this.commonObjs:this.objs,I=new Promise(X=>{w.get(P,X)});this.current.dependencies.push(I)}return Promise.all(this.current.dependencies)}transform(e,a,_,T,C,P){let w=[e,a,_,T,C,P];this.transformMatrix=c.Util.transform(this.transformMatrix,w),this.tgrp=null}getSVG(e,a){this.viewport=a;let _=this._initialize(a);return this.loadDependencies(e).then(()=>(this.transformMatrix=c.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(e)),_))}convertOpList(e){let a=this._operatorIdMapping,_=e.argsArray,T=e.fnArray,C=[];for(let P=0,w=T.length;P<w;P++){let I=T[P];C.push({fnId:I,fn:a[I],args:_[P]})}return u(C)}executeOpTree(e){for(let a of e){let _=a.fn,T=a.fnId,C=a.args;switch(T|0){case c.OPS.beginText:this.beginText();break;case c.OPS.dependency:break;case c.OPS.setLeading:this.setLeading(C);break;case c.OPS.setLeadingMoveText:this.setLeadingMoveText(C[0],C[1]);break;case c.OPS.setFont:this.setFont(C);break;case c.OPS.showText:this.showText(C[0]);break;case c.OPS.showSpacedText:this.showText(C[0]);break;case c.OPS.endText:this.endText();break;case c.OPS.moveText:this.moveText(C[0],C[1]);break;case c.OPS.setCharSpacing:this.setCharSpacing(C[0]);break;case c.OPS.setWordSpacing:this.setWordSpacing(C[0]);break;case c.OPS.setHScale:this.setHScale(C[0]);break;case c.OPS.setTextMatrix:this.setTextMatrix(C[0],C[1],C[2],C[3],C[4],C[5]);break;case c.OPS.setTextRise:this.setTextRise(C[0]);break;case c.OPS.setTextRenderingMode:this.setTextRenderingMode(C[0]);break;case c.OPS.setLineWidth:this.setLineWidth(C[0]);break;case c.OPS.setLineJoin:this.setLineJoin(C[0]);break;case c.OPS.setLineCap:this.setLineCap(C[0]);break;case c.OPS.setMiterLimit:this.setMiterLimit(C[0]);break;case c.OPS.setFillRGBColor:this.setFillRGBColor(C[0],C[1],C[2]);break;case c.OPS.setStrokeRGBColor:this.setStrokeRGBColor(C[0],C[1],C[2]);break;case c.OPS.setStrokeColorN:this.setStrokeColorN(C);break;case c.OPS.setFillColorN:this.setFillColorN(C);break;case c.OPS.shadingFill:this.shadingFill(C[0]);break;case c.OPS.setDash:this.setDash(C[0],C[1]);break;case c.OPS.setRenderingIntent:this.setRenderingIntent(C[0]);break;case c.OPS.setFlatness:this.setFlatness(C[0]);break;case c.OPS.setGState:this.setGState(C[0]);break;case c.OPS.fill:this.fill();break;case c.OPS.eoFill:this.eoFill();break;case c.OPS.stroke:this.stroke();break;case c.OPS.fillStroke:this.fillStroke();break;case c.OPS.eoFillStroke:this.eoFillStroke();break;case c.OPS.clip:this.clip("nonzero");break;case c.OPS.eoClip:this.clip("evenodd");break;case c.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case c.OPS.paintImageXObject:this.paintImageXObject(C[0]);break;case c.OPS.paintInlineImageXObject:this.paintInlineImageXObject(C[0]);break;case c.OPS.paintImageMaskXObject:this.paintImageMaskXObject(C[0]);break;case c.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(C[0],C[1]);break;case c.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case c.OPS.closePath:this.closePath();break;case c.OPS.closeStroke:this.closeStroke();break;case c.OPS.closeFillStroke:this.closeFillStroke();break;case c.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case c.OPS.nextLine:this.nextLine();break;case c.OPS.transform:this.transform(C[0],C[1],C[2],C[3],C[4],C[5]);break;case c.OPS.constructPath:this.constructPath(C[0],C[1]);break;case c.OPS.endPath:this.endPath();break;case 92:this.group(a.items);break;default:(0,c.warn)(`Unimplemented operator ${_}`);break}}}setWordSpacing(e){this.current.wordSpacing=e}setCharSpacing(e){this.current.charSpacing=e}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(e,a,_,T,C,P){let w=this.current;w.textMatrix=w.lineMatrix=[e,a,_,T,C,P],w.textMatrixScale=Math.hypot(e,a),w.x=w.lineX=0,w.y=w.lineY=0,w.xcoords=[],w.ycoords=[],w.tspan=this.svgFactory.createElement("svg:tspan"),w.tspan.setAttributeNS(null,"font-family",w.fontFamily),w.tspan.setAttributeNS(null,"font-size",`${r(w.fontSize)}px`),w.tspan.setAttributeNS(null,"y",r(-w.y)),w.txtElement=this.svgFactory.createElement("svg:text"),w.txtElement.appendChild(w.tspan)}beginText(){let e=this.current;e.x=e.lineX=0,e.y=e.lineY=0,e.textMatrix=c.IDENTITY_MATRIX,e.lineMatrix=c.IDENTITY_MATRIX,e.textMatrixScale=1,e.tspan=this.svgFactory.createElement("svg:tspan"),e.txtElement=this.svgFactory.createElement("svg:text"),e.txtgrp=this.svgFactory.createElement("svg:g"),e.xcoords=[],e.ycoords=[]}moveText(e,a){let _=this.current;_.x=_.lineX+=e,_.y=_.lineY+=a,_.xcoords=[],_.ycoords=[],_.tspan=this.svgFactory.createElement("svg:tspan"),_.tspan.setAttributeNS(null,"font-family",_.fontFamily),_.tspan.setAttributeNS(null,"font-size",`${r(_.fontSize)}px`),_.tspan.setAttributeNS(null,"y",r(-_.y))}showText(e){let a=this.current,_=a.font,T=a.fontSize;if(T===0)return;let C=a.fontSizeScale,P=a.charSpacing,w=a.wordSpacing,I=a.fontDirection,X=a.textHScale*I,W=_.vertical,z=W?1:-1,J=_.defaultVMetrics,Z=T*a.fontMatrix[0],Y=0;for(let st of e){if(st===null){Y+=I*w;continue}else if(typeof st=="number"){Y+=z*st*T/1e3;continue}let v=(st.isSpace?w:0)+P,l=st.fontChar,s,t,n=st.width;if(W){let d,h=st.vmetric||J;d=st.vmetric?h[1]:n*.5,d=-d*Z;let f=h[2]*Z;n=h?-h[0]:n,s=d/C,t=(Y+f)/C}else s=Y/C,t=0;(st.isInFont||_.missingFile)&&(a.xcoords.push(a.x+s),W&&a.ycoords.push(-a.y+t),a.tspan.textContent+=l);let i;W?i=n*Z-v*I:i=n*Z+v*I,Y+=i}a.tspan.setAttributeNS(null,"x",a.xcoords.map(r).join(" ")),W?a.tspan.setAttributeNS(null,"y",a.ycoords.map(r).join(" ")):a.tspan.setAttributeNS(null,"y",r(-a.y)),W?a.y-=Y:a.x+=Y*X,a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size",`${r(a.fontSize)}px`),a.fontStyle!==U.fontStyle&&a.tspan.setAttributeNS(null,"font-style",a.fontStyle),a.fontWeight!==U.fontWeight&&a.tspan.setAttributeNS(null,"font-weight",a.fontWeight);let et=a.textRenderingMode&c.TextRenderingMode.FILL_STROKE_MASK;if(et===c.TextRenderingMode.FILL||et===c.TextRenderingMode.FILL_STROKE?(a.fillColor!==U.fillColor&&a.tspan.setAttributeNS(null,"fill",a.fillColor),a.fillAlpha<1&&a.tspan.setAttributeNS(null,"fill-opacity",a.fillAlpha)):a.textRenderingMode===c.TextRenderingMode.ADD_TO_PATH?a.tspan.setAttributeNS(null,"fill","transparent"):a.tspan.setAttributeNS(null,"fill","none"),et===c.TextRenderingMode.STROKE||et===c.TextRenderingMode.FILL_STROKE){let st=1/(a.textMatrixScale||1);this._setStrokeAttributes(a.tspan,st)}let lt=a.textMatrix;a.textRise!==0&&(lt=lt.slice(),lt[5]+=a.textRise),a.txtElement.setAttributeNS(null,"transform",`${g(lt)} scale(${r(X)}, -1)`),a.txtElement.setAttributeNS(F,"xml:space","preserve"),a.txtElement.appendChild(a.tspan),a.txtgrp.appendChild(a.txtElement),this._ensureTransformGroup().appendChild(a.txtElement)}setLeadingMoveText(e,a){this.setLeading(-a),this.moveText(e,a)}addFontStyle(e){if(!e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));let a=R(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${e.loadedName}"; src: url(${a}); }
`}setFont(e){let a=this.current,_=this.commonObjs.get(e[0]),T=e[1];a.font=_,this.embedFonts&&!_.missingFile&&!this.embeddedFonts[_.loadedName]&&(this.addFontStyle(_),this.embeddedFonts[_.loadedName]=_),a.fontMatrix=_.fontMatrix||c.FONT_IDENTITY_MATRIX;let C="normal";_.black?C="900":_.bold&&(C="bold");let P=_.italic?"italic":"normal";T<0?(T=-T,a.fontDirection=-1):a.fontDirection=1,a.fontSize=T,a.fontFamily=_.loadedName,a.fontWeight=C,a.fontStyle=P,a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"y",r(-a.y)),a.xcoords=[],a.ycoords=[]}endText(){var a;let e=this.current;e.textRenderingMode&c.TextRenderingMode.ADD_TO_PATH_FLAG&&((a=e.txtElement)==null?void 0:a.hasChildNodes())&&(e.element=e.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(e){e>0&&(this.current.lineWidth=e)}setLineCap(e){this.current.lineCap=x[e]}setLineJoin(e){this.current.lineJoin=k[e]}setMiterLimit(e){this.current.miterLimit=e}setStrokeAlpha(e){this.current.strokeAlpha=e}setStrokeRGBColor(e,a,_){this.current.strokeColor=c.Util.makeHexColor(e,a,_)}setFillAlpha(e){this.current.fillAlpha=e}setFillRGBColor(e,a,_){this.current.fillColor=c.Util.makeHexColor(e,a,_),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(e){this.current.strokeColor=this._makeColorN_Pattern(e)}setFillColorN(e){this.current.fillColor=this._makeColorN_Pattern(e)}shadingFill(e){let a=this.viewport.width,_=this.viewport.height,T=c.Util.inverseTransform(this.transformMatrix),C=c.Util.applyTransform([0,0],T),P=c.Util.applyTransform([0,_],T),w=c.Util.applyTransform([a,0],T),I=c.Util.applyTransform([a,_],T),X=Math.min(C[0],P[0],w[0],I[0]),W=Math.min(C[1],P[1],w[1],I[1]),z=Math.max(C[0],P[0],w[0],I[0]),J=Math.max(C[1],P[1],w[1],I[1]),Z=this.svgFactory.createElement("svg:rect");Z.setAttributeNS(null,"x",X),Z.setAttributeNS(null,"y",W),Z.setAttributeNS(null,"width",z-X),Z.setAttributeNS(null,"height",J-W),Z.setAttributeNS(null,"fill",this._makeShadingPattern(e)),this.current.fillAlpha<1&&Z.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(Z)}_makeColorN_Pattern(e){return e[0]==="TilingPattern"?this._makeTilingPattern(e):this._makeShadingPattern(e)}_makeTilingPattern(e){let a=e[1],_=e[2],T=e[3]||c.IDENTITY_MATRIX,[C,P,w,I]=e[4],X=e[5],W=e[6],z=e[7],J=`shading${S++}`,[Z,Y,et,lt]=c.Util.normalizeRect([...c.Util.applyTransform([C,P],T),...c.Util.applyTransform([w,I],T)]),[st,v]=c.Util.singularValueDecompose2dScale(T),l=X*st,s=W*v,t=this.svgFactory.createElement("svg:pattern");t.setAttributeNS(null,"id",J),t.setAttributeNS(null,"patternUnits","userSpaceOnUse"),t.setAttributeNS(null,"width",l),t.setAttributeNS(null,"height",s),t.setAttributeNS(null,"x",`${Z}`),t.setAttributeNS(null,"y",`${Y}`);let n=this.svg,i=this.transformMatrix,d=this.current.fillColor,h=this.current.strokeColor,f=this.svgFactory.create(et-Z,lt-Y);if(this.svg=f,this.transformMatrix=T,z===2){let E=c.Util.makeHexColor(...a);this.current.fillColor=E,this.current.strokeColor=E}return this.executeOpTree(this.convertOpList(_)),this.svg=n,this.transformMatrix=i,this.current.fillColor=d,this.current.strokeColor=h,t.appendChild(f.childNodes[0]),this.defs.appendChild(t),`url(#${J})`}_makeShadingPattern(e){switch(typeof e=="string"&&(e=this.objs.get(e)),e[0]){case"RadialAxial":let a=`shading${S++}`,_=e[3],T;switch(e[1]){case"axial":let C=e[4],P=e[5];T=this.svgFactory.createElement("svg:linearGradient"),T.setAttributeNS(null,"id",a),T.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),T.setAttributeNS(null,"x1",C[0]),T.setAttributeNS(null,"y1",C[1]),T.setAttributeNS(null,"x2",P[0]),T.setAttributeNS(null,"y2",P[1]);break;case"radial":let w=e[4],I=e[5],X=e[6],W=e[7];T=this.svgFactory.createElement("svg:radialGradient"),T.setAttributeNS(null,"id",a),T.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),T.setAttributeNS(null,"cx",I[0]),T.setAttributeNS(null,"cy",I[1]),T.setAttributeNS(null,"r",W),T.setAttributeNS(null,"fx",w[0]),T.setAttributeNS(null,"fy",w[1]),T.setAttributeNS(null,"fr",X);break;default:throw new Error(`Unknown RadialAxial type: ${e[1]}`)}for(let C of _){let P=this.svgFactory.createElement("svg:stop");P.setAttributeNS(null,"offset",C[0]),P.setAttributeNS(null,"stop-color",C[1]),T.appendChild(P)}return this.defs.appendChild(T),`url(#${a})`;case"Mesh":return(0,c.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${e[0]}`)}}setDash(e,a){this.current.dashArray=e,this.current.dashPhase=a}constructPath(e,a){let _=this.current,T=_.x,C=_.y,P=[],w=0;for(let I of e)switch(I|0){case c.OPS.rectangle:T=a[w++],C=a[w++];let X=a[w++],W=a[w++],z=T+X,J=C+W;P.push("M",r(T),r(C),"L",r(z),r(C),"L",r(z),r(J),"L",r(T),r(J),"Z");break;case c.OPS.moveTo:T=a[w++],C=a[w++],P.push("M",r(T),r(C));break;case c.OPS.lineTo:T=a[w++],C=a[w++],P.push("L",r(T),r(C));break;case c.OPS.curveTo:T=a[w+4],C=a[w+5],P.push("C",r(a[w]),r(a[w+1]),r(a[w+2]),r(a[w+3]),r(T),r(C)),w+=6;break;case c.OPS.curveTo2:P.push("C",r(T),r(C),r(a[w]),r(a[w+1]),r(a[w+2]),r(a[w+3])),T=a[w+2],C=a[w+3],w+=4;break;case c.OPS.curveTo3:T=a[w+2],C=a[w+3],P.push("C",r(a[w]),r(a[w+1]),r(T),r(C),r(T),r(C)),w+=4;break;case c.OPS.closePath:P.push("Z");break}P=P.join(" "),_.path&&e.length>0&&e[0]!==c.OPS.rectangle&&e[0]!==c.OPS.moveTo?P=_.path.getAttributeNS(null,"d")+P:(_.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(_.path)),_.path.setAttributeNS(null,"d",P),_.path.setAttributeNS(null,"fill","none"),_.element=_.path,_.setCurrentPoint(T,C)}endPath(){let e=this.current;if(e.path=null,!this.pendingClip)return;if(!e.element){this.pendingClip=null;return}let a=`clippath${b++}`,_=this.svgFactory.createElement("svg:clipPath");_.setAttributeNS(null,"id",a),_.setAttributeNS(null,"transform",g(this.transformMatrix));let T=e.element.cloneNode(!0);if(this.pendingClip==="evenodd"?T.setAttributeNS(null,"clip-rule","evenodd"):T.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,_.appendChild(T),this.defs.appendChild(_),e.activeClipUrl){e.clipGroup=null;for(let C of this.extraStack)C.clipGroup=null;_.setAttributeNS(null,"clip-path",e.activeClipUrl)}e.activeClipUrl=`url(#${a})`,this.tgrp=null}clip(e){this.pendingClip=e}closePath(){let e=this.current;if(e.path){let a=`${e.path.getAttributeNS(null,"d")}Z`;e.path.setAttributeNS(null,"d",a)}}setLeading(e){this.current.leading=-e}setTextRise(e){this.current.textRise=e}setTextRenderingMode(e){this.current.textRenderingMode=e}setHScale(e){this.current.textHScale=e/100}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(let[a,_]of e)switch(a){case"LW":this.setLineWidth(_);break;case"LC":this.setLineCap(_);break;case"LJ":this.setLineJoin(_);break;case"ML":this.setMiterLimit(_);break;case"D":this.setDash(_[0],_[1]);break;case"RI":this.setRenderingIntent(_);break;case"FL":this.setFlatness(_);break;case"Font":this.setFont(_);break;case"CA":this.setStrokeAlpha(_);break;case"ca":this.setFillAlpha(_);break;default:(0,c.warn)(`Unimplemented graphic state operator ${a}`);break}}fill(){let e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())}stroke(){let e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(e,a=1){let _=this.current,T=_.dashArray;a!==1&&T.length>0&&(T=T.map(function(C){return a*C})),e.setAttributeNS(null,"stroke",_.strokeColor),e.setAttributeNS(null,"stroke-opacity",_.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",r(_.miterLimit)),e.setAttributeNS(null,"stroke-linecap",_.lineCap),e.setAttributeNS(null,"stroke-linejoin",_.lineJoin),e.setAttributeNS(null,"stroke-width",r(a*_.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",T.map(r).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",r(a*_.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){let e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(e)}paintImageXObject(e){let a=e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e);if(!a){(0,c.warn)(`Dependent image with object ID ${e} is not ready yet`);return}this.paintInlineImageXObject(a)}paintInlineImageXObject(e,a){let _=e.width,T=e.height,C=A(e,this.forceDataSchema,!!a),P=this.svgFactory.createElement("svg:rect");P.setAttributeNS(null,"x","0"),P.setAttributeNS(null,"y","0"),P.setAttributeNS(null,"width",r(_)),P.setAttributeNS(null,"height",r(T)),this.current.element=P,this.clip("nonzero");let w=this.svgFactory.createElement("svg:image");w.setAttributeNS(m,"xlink:href",C),w.setAttributeNS(null,"x","0"),w.setAttributeNS(null,"y",r(-T)),w.setAttributeNS(null,"width",r(_)+"px"),w.setAttributeNS(null,"height",r(T)+"px"),w.setAttributeNS(null,"transform",`scale(${r(1/_)} ${r(-1/T)})`),a?a.appendChild(w):this._ensureTransformGroup().appendChild(w)}paintImageMaskXObject(e){let a=this.current,_=e.width,T=e.height,C=a.fillColor;a.maskId=`mask${y++}`;let P=this.svgFactory.createElement("svg:mask");P.setAttributeNS(null,"id",a.maskId);let w=this.svgFactory.createElement("svg:rect");w.setAttributeNS(null,"x","0"),w.setAttributeNS(null,"y","0"),w.setAttributeNS(null,"width",r(_)),w.setAttributeNS(null,"height",r(T)),w.setAttributeNS(null,"fill",C),w.setAttributeNS(null,"mask",`url(#${a.maskId})`),this.defs.appendChild(P),this._ensureTransformGroup().appendChild(w),this.paintInlineImageXObject(e,P)}paintFormXObjectBegin(e,a){if(Array.isArray(e)&&e.length===6&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),a){let _=a[2]-a[0],T=a[3]-a[1],C=this.svgFactory.createElement("svg:rect");C.setAttributeNS(null,"x",a[0]),C.setAttributeNS(null,"y",a[1]),C.setAttributeNS(null,"width",r(_)),C.setAttributeNS(null,"height",r(T)),this.current.element=C,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(e){let a=this.svgFactory.create(e.width,e.height),_=this.svgFactory.createElement("svg:defs");a.appendChild(_),this.defs=_;let T=this.svgFactory.createElement("svg:g");return T.setAttributeNS(null,"transform",g(e.transform)),a.appendChild(T),this.svg=T,a}_ensureClipGroup(){if(!this.current.clipGroup){let e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(e),this.current.clipGroup=e}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",g(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},($,p,H)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.PDFNodeStream=void 0;var c=H(1),K=H(26);let q=$t(),G=ne(),U=se(),F=ie(),m=/^file:\/\/\/[a-zA-Z]:\//;function x(y){let S=F.parse(y);return S.protocol==="file:"||S.host?S:/^[a-z]:[/\\]/i.test(y)?F.parse(`file:///${y}`):(S.host||(S.protocol="file:"),S)}class k{constructor(S){this.source=S,this.url=x(S.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&S.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var S,e;return(e=(S=this._fullRequestReader)==null?void 0:S._loaded)!=null?e:0}getFullReader(){return(0,c.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new g(this):new u(this),this._fullRequestReader}getRangeReader(S,e){if(e<=this._progressiveDataLength)return null;let a=this.isFsUrl?new b(this,S,e):new r(this,S,e);return this._rangeRequestReaders.push(a),a}cancelAllRequests(S){this._fullRequestReader&&this._fullRequestReader.cancel(S);for(let e of this._rangeRequestReaders.slice(0))e.cancel(S)}}p.PDFNodeStream=k;class R{constructor(S){this._url=S.url,this._done=!1,this._storedError=null,this.onProgress=null;let e=S.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=(0,c.createPromiseCapability)(),this._headersCapability=(0,c.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let S=this._readableStream.read();return S===null?(this._readCapability=(0,c.createPromiseCapability)(),this.read()):(this._loaded+=S.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(S).buffer,done:!1})}cancel(S){if(!this._readableStream){this._error(S);return}this._readableStream.destroy(S)}_error(S){this._storedError=S,this._readCapability.resolve()}_setReadableStream(S){this._readableStream=S,S.on("readable",()=>{this._readCapability.resolve()}),S.on("end",()=>{S.destroy(),this._done=!0,this._readCapability.resolve()}),S.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new c.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class A{constructor(S){this._url=S.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,c.createPromiseCapability)();let e=S.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let S=this._readableStream.read();return S===null?(this._readCapability=(0,c.createPromiseCapability)(),this.read()):(this._loaded+=S.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(S).buffer,done:!1})}cancel(S){if(!this._readableStream){this._error(S);return}this._readableStream.destroy(S)}_error(S){this._storedError=S,this._readCapability.resolve()}_setReadableStream(S){this._readableStream=S,S.on("readable",()=>{this._readCapability.resolve()}),S.on("end",()=>{S.destroy(),this._done=!0,this._readCapability.resolve()}),S.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function o(y,S){return{protocol:y.protocol,auth:y.auth,host:y.hostname,port:y.port,path:y.path,method:"GET",headers:S}}class u extends R{constructor(S){super(S);let e=a=>{if(a.statusCode===404){let P=new c.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=P,this._headersCapability.reject(P);return}this._headersCapability.resolve(),this._setReadableStream(a);let _=P=>this._readableStream.headers[P.toLowerCase()],{allowRangeRequests:T,suggestedLength:C}=(0,K.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:S.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=T,this._contentLength=C||this._contentLength,this._filename=(0,K.extractFilenameFromHeader)(_)};this._request=null,this._url.protocol==="http:"?this._request=G.request(o(this._url,S.httpHeaders),e):this._request=U.request(o(this._url,S.httpHeaders),e),this._request.on("error",a=>{this._storedError=a,this._headersCapability.reject(a)}),this._request.end()}}class r extends A{constructor(S,e,a){super(S),this._httpHeaders={};for(let T in S.httpHeaders){let C=S.httpHeaders[T];typeof C>"u"||(this._httpHeaders[T]=C)}this._httpHeaders.Range=`bytes=${e}-${a-1}`;let _=T=>{if(T.statusCode===404){let C=new c.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=C;return}this._setReadableStream(T)};this._request=null,this._url.protocol==="http:"?this._request=G.request(o(this._url,this._httpHeaders),_):this._request=U.request(o(this._url,this._httpHeaders),_),this._request.on("error",T=>{this._storedError=T}),this._request.end()}}class g extends R{constructor(S){super(S);let e=decodeURIComponent(this._url.path);m.test(this._url.href)&&(e=e.replace(/^\//,"")),q.lstat(e,(a,_)=>{if(a){a.code==="ENOENT"&&(a=new c.MissingPDFException(`Missing PDF "${e}".`)),this._storedError=a,this._headersCapability.reject(a);return}this._contentLength=_.size,this._setReadableStream(q.createReadStream(e)),this._headersCapability.resolve()})}}class b extends A{constructor(S,e,a){super(S);let _=decodeURIComponent(this._url.path);m.test(this._url.href)&&(_=_.replace(/^\//,"")),this._setReadableStream(q.createReadStream(_,{start:e,end:a-1}))}}},($,p,H)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.createResponseStatusError=F,p.extractFilenameFromHeader=U,p.validateRangeRequestCapabilities=G,p.validateResponseStatus=m;var c=H(1),K=H(27),q=H(5);function G({getResponseHeader:x,isHttp:k,rangeChunkSize:R,disableRange:A}){let o={allowRangeRequests:!1,suggestedLength:void 0},u=parseInt(x("Content-Length"),10);return!Number.isInteger(u)||(o.suggestedLength=u,u<=2*R)||A||!k||x("Accept-Ranges")!=="bytes"||(x("Content-Encoding")||"identity")!=="identity"||(o.allowRangeRequests=!0),o}function U(x){let k=x("Content-Disposition");if(k){let R=(0,K.getFilenameFromContentDispositionHeader)(k);if(R.includes("%"))try{R=decodeURIComponent(R)}catch(A){}if((0,q.isPdfFile)(R))return R}return null}function F(x,k){return x===404||x===0&&k.startsWith("file:")?new c.MissingPDFException('Missing PDF "'+k+'".'):new c.UnexpectedResponseException(`Unexpected server response (${x}) while retrieving PDF "${k}".`,x)}function m(x){return x===200||x===206}},($,p,H)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.getFilenameFromContentDispositionHeader=K;var c=H(1);function K(q){let G=!0,U=F("filename\\*","i").exec(q);if(U){U=U[1];let u=R(U);return u=unescape(u),u=A(u),u=o(u),x(u)}if(U=k(q),U){let u=o(U);return x(u)}if(U=F("filename","i").exec(q),U){U=U[1];let u=R(U);return u=o(u),x(u)}function F(u,r){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',r)}function m(u,r){if(u){if(!/^[\x00-\xFF]+$/.test(r))return r;try{let g=new TextDecoder(u,{fatal:!0}),b=(0,c.stringToBytes)(r);r=g.decode(b),G=!1}catch(g){}}return r}function x(u){return G&&/[\x80-\xff]/.test(u)&&(u=m("utf-8",u),G&&(u=m("iso-8859-1",u))),u}function k(u){let r=[],g,b=F("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=b.exec(u))!==null;){let[,S,e,a]=g;if(S=parseInt(S,10),S in r){if(S===0)break;continue}r[S]=[e,a]}let y=[];for(let S=0;S<r.length&&S in r;++S){let[e,a]=r[S];a=R(a),e&&(a=unescape(a),S===0&&(a=A(a))),y.push(a)}return y.join("")}function R(u){if(u.startsWith('"')){let r=u.slice(1).split('\\"');for(let g=0;g<r.length;++g){let b=r[g].indexOf('"');b!==-1&&(r[g]=r[g].slice(0,b),r.length=g+1),r[g]=r[g].replace(/\\(.)/g,"$1")}u=r.join('"')}return u}function A(u){let r=u.indexOf("'");if(r===-1)return u;let g=u.slice(0,r),y=u.slice(r+1).replace(/^[^']*'/,"");return m(g,y)}function o(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(r,g,b,y){if(b==="q"||b==="Q")return y=y.replace(/_/g," "),y=y.replace(/=([0-9a-fA-F]{2})/g,function(S,e){return String.fromCharCode(parseInt(e,16))}),m(g,y);try{y=atob(y)}catch(S){}return m(g,y)})}return""}},($,p,H)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.PDFNetworkStream=void 0;var c=H(1),K=H(26);let q=200,G=206;function U(R){let A=R.response;return typeof A!="string"?A:(0,c.stringToBytes)(A).buffer}class F{constructor(A,o={}){this.url=A,this.isHttp=/^https?:/i.test(A),this.httpHeaders=this.isHttp&&o.httpHeaders||Object.create(null),this.withCredentials=o.withCredentials||!1,this.getXhr=o.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(A,o,u){let r={begin:A,end:o};for(let g in u)r[g]=u[g];return this.request(r)}requestFull(A){return this.request(A)}request(A){let o=this.getXhr(),u=this.currXhrId++,r=this.pendingRequests[u]={xhr:o};o.open("GET",this.url),o.withCredentials=this.withCredentials;for(let g in this.httpHeaders){let b=this.httpHeaders[g];typeof b>"u"||o.setRequestHeader(g,b)}return this.isHttp&&"begin"in A&&"end"in A?(o.setRequestHeader("Range",`bytes=${A.begin}-${A.end-1}`),r.expectedStatus=G):r.expectedStatus=q,o.responseType="arraybuffer",A.onError&&(o.onerror=function(g){A.onError(o.status)}),o.onreadystatechange=this.onStateChange.bind(this,u),o.onprogress=this.onProgress.bind(this,u),r.onHeadersReceived=A.onHeadersReceived,r.onDone=A.onDone,r.onError=A.onError,r.onProgress=A.onProgress,o.send(null),u}onProgress(A,o){var r;let u=this.pendingRequests[A];!u||(r=u.onProgress)==null||r.call(u,o)}onStateChange(A,o){var S,e,a;let u=this.pendingRequests[A];if(!u)return;let r=u.xhr;if(r.readyState>=2&&u.onHeadersReceived&&(u.onHeadersReceived(),delete u.onHeadersReceived),r.readyState!==4||!(A in this.pendingRequests))return;if(delete this.pendingRequests[A],r.status===0&&this.isHttp){(S=u.onError)==null||S.call(u,r.status);return}let g=r.status||q;if(!(g===q&&u.expectedStatus===G)&&g!==u.expectedStatus){(e=u.onError)==null||e.call(u,r.status);return}let y=U(r);if(g===G){let _=r.getResponseHeader("Content-Range"),T=/bytes (\d+)-(\d+)\/(\d+)/.exec(_);u.onDone({begin:parseInt(T[1],10),chunk:y})}else y?u.onDone({begin:0,chunk:y}):(a=u.onError)==null||a.call(u,r.status)}getRequestXhr(A){return this.pendingRequests[A].xhr}isPendingRequest(A){return A in this.pendingRequests}abortRequest(A){let o=this.pendingRequests[A].xhr;delete this.pendingRequests[A],o.abort()}}class m{constructor(A){this._source=A,this._manager=new F(A.url,{httpHeaders:A.httpHeaders,withCredentials:A.withCredentials}),this._rangeChunkSize=A.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(A){let o=this._rangeRequestReaders.indexOf(A);o>=0&&this._rangeRequestReaders.splice(o,1)}getFullReader(){return(0,c.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new x(this._manager,this._source),this._fullRequestReader}getRangeReader(A,o){let u=new k(this._manager,A,o);return u.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(u),u}cancelAllRequests(A){var o;(o=this._fullRequestReader)==null||o.cancel(A);for(let u of this._rangeRequestReaders.slice(0))u.cancel(A)}}p.PDFNetworkStream=m;class x{constructor(A,o){this._manager=A;let u={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=o.url,this._fullRequestId=A.requestFull(u),this._headersReceivedCapability=(0,c.createPromiseCapability)(),this._disableRange=o.disableRange||!1,this._contentLength=o.length,this._rangeChunkSize=o.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let A=this._fullRequestId,o=this._manager.getRequestXhr(A),u=b=>o.getResponseHeader(b),{allowRangeRequests:r,suggestedLength:g}=(0,K.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=g||this._contentLength,this._filename=(0,K.extractFilenameFromHeader)(u),this._isRangeSupported&&this._manager.abortRequest(A),this._headersReceivedCapability.resolve()}_onDone(A){if(A&&(this._requests.length>0?this._requests.shift().resolve({value:A.chunk,done:!1}):this._cachedChunks.push(A.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(A){this._storedError=(0,K.createResponseStatusError)(A,this._url),this._headersReceivedCapability.reject(this._storedError);for(let o of this._requests)o.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(A){var o;(o=this.onProgress)==null||o.call(this,{loaded:A.loaded,total:A.lengthComputable?A.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let A=(0,c.createPromiseCapability)();return this._requests.push(A),A.promise}cancel(A){this._done=!0,this._headersReceivedCapability.reject(A);for(let o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class k{constructor(A,o,u){this._manager=A;let r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=A.url,this._requestId=A.requestRange(o,u,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var A;(A=this.onClosed)==null||A.call(this,this)}_onDone(A){let o=A.chunk;this._requests.length>0?this._requests.shift().resolve({value:o,done:!1}):this._queuedChunk=o,this._done=!0;for(let u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(A){this._storedError=(0,K.createResponseStatusError)(A,this._url);for(let o of this._requests)o.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(A){var o;this.isStreamingSupported||(o=this.onProgress)==null||o.call(this,{loaded:A.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let o=this._queuedChunk;return this._queuedChunk=null,{value:o,done:!1}}if(this._done)return{value:void 0,done:!0};let A=(0,c.createPromiseCapability)();return this._requests.push(A),A.promise}cancel(A){this._done=!0;for(let o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},($,p,H)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.PDFFetchStream=void 0;var c=H(1),K=H(26);function q(x,k,R){return{method:"GET",headers:x,signal:R==null?void 0:R.signal,mode:"cors",credentials:k?"include":"same-origin",redirect:"follow"}}function G(x){let k=new Headers;for(let R in x){let A=x[R];typeof A>"u"||k.append(R,A)}return k}class U{constructor(k){this.source=k,this.isHttp=/^https?:/i.test(k.url),this.httpHeaders=this.isHttp&&k.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var k,R;return(R=(k=this._fullRequestReader)==null?void 0:k._loaded)!=null?R:0}getFullReader(){return(0,c.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new F(this),this._fullRequestReader}getRangeReader(k,R){if(R<=this._progressiveDataLength)return null;let A=new m(this,k,R);return this._rangeRequestReaders.push(A),A}cancelAllRequests(k){this._fullRequestReader&&this._fullRequestReader.cancel(k);for(let R of this._rangeRequestReaders.slice(0))R.cancel(k)}}p.PDFFetchStream=U;class F{constructor(k){this._stream=k,this._reader=null,this._loaded=0,this._filename=null;let R=k.source;this._withCredentials=R.withCredentials||!1,this._contentLength=R.length,this._headersCapability=(0,c.createPromiseCapability)(),this._disableRange=R.disableRange||!1,this._rangeChunkSize=R.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController<"u"&&(this._abortController=new AbortController),this._isStreamingSupported=!R.disableStream,this._isRangeSupported=!R.disableRange,this._headers=G(this._stream.httpHeaders);let A=R.url;fetch(A,q(this._headers,this._withCredentials,this._abortController)).then(o=>{if(!(0,K.validateResponseStatus)(o.status))throw(0,K.createResponseStatusError)(o.status,A);this._reader=o.body.getReader(),this._headersCapability.resolve();let u=b=>o.headers.get(b),{allowRangeRequests:r,suggestedLength:g}=(0,K.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=g||this._contentLength,this._filename=(0,K.extractFilenameFromHeader)(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new c.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;let{value:k,done:R}=await this._reader.read();return R?{value:k,done:R}:(this._loaded+=k.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(k).buffer,done:!1})}cancel(k){this._reader&&this._reader.cancel(k),this._abortController&&this._abortController.abort()}}class m{constructor(k,R,A){this._stream=k,this._reader=null,this._loaded=0;let o=k.source;this._withCredentials=o.withCredentials||!1,this._readCapability=(0,c.createPromiseCapability)(),this._isStreamingSupported=!o.disableStream,typeof AbortController<"u"&&(this._abortController=new AbortController),this._headers=G(this._stream.httpHeaders),this._headers.append("Range",`bytes=${R}-${A-1}`);let u=o.url;fetch(u,q(this._headers,this._withCredentials,this._abortController)).then(r=>{if(!(0,K.validateResponseStatus)(r.status))throw(0,K.createResponseStatusError)(r.status,u);this._readCapability.resolve(),this._reader=r.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;let{value:k,done:R}=await this._reader.read();return R?{value:k,done:R}:(this._loaded+=k.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(k).buffer,done:!1})}cancel(k){this._reader&&this._reader.cancel(k),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__($){var p=__webpack_module_cache__[$];if(p!==void 0)return p.exports;var H=__webpack_module_cache__[$]={exports:{}};return __webpack_modules__[$](H,H.exports,__w_pdfjs_require__),H.exports}var __webpack_exports__={};return(()=>{var $=__webpack_exports__;Object.defineProperty($,"__esModule",{value:!0}),Object.defineProperty($,"AnnotationLayer",{enumerable:!0,get:function(){return K.AnnotationLayer}}),Object.defineProperty($,"AnnotationMode",{enumerable:!0,get:function(){return p.AnnotationMode}}),Object.defineProperty($,"CMapCompressionType",{enumerable:!0,get:function(){return p.CMapCompressionType}}),Object.defineProperty($,"GlobalWorkerOptions",{enumerable:!0,get:function(){return q.GlobalWorkerOptions}}),Object.defineProperty($,"InvalidPDFException",{enumerable:!0,get:function(){return p.InvalidPDFException}}),Object.defineProperty($,"LoopbackPort",{enumerable:!0,get:function(){return H.LoopbackPort}}),Object.defineProperty($,"MissingPDFException",{enumerable:!0,get:function(){return p.MissingPDFException}}),Object.defineProperty($,"OPS",{enumerable:!0,get:function(){return p.OPS}}),Object.defineProperty($,"PDFDataRangeTransport",{enumerable:!0,get:function(){return H.PDFDataRangeTransport}}),Object.defineProperty($,"PDFDateString",{enumerable:!0,get:function(){return c.PDFDateString}}),Object.defineProperty($,"PDFWorker",{enumerable:!0,get:function(){return H.PDFWorker}}),Object.defineProperty($,"PasswordResponses",{enumerable:!0,get:function(){return p.PasswordResponses}}),Object.defineProperty($,"PermissionFlag",{enumerable:!0,get:function(){return p.PermissionFlag}}),Object.defineProperty($,"PixelsPerInch",{enumerable:!0,get:function(){return c.PixelsPerInch}}),Object.defineProperty($,"RenderingCancelledException",{enumerable:!0,get:function(){return c.RenderingCancelledException}}),Object.defineProperty($,"SVGGraphics",{enumerable:!0,get:function(){return F.SVGGraphics}}),Object.defineProperty($,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return p.UNSUPPORTED_FEATURES}}),Object.defineProperty($,"UnexpectedResponseException",{enumerable:!0,get:function(){return p.UnexpectedResponseException}}),Object.defineProperty($,"Util",{enumerable:!0,get:function(){return p.Util}}),Object.defineProperty($,"VerbosityLevel",{enumerable:!0,get:function(){return p.VerbosityLevel}}),Object.defineProperty($,"XfaLayer",{enumerable:!0,get:function(){return m.XfaLayer}}),Object.defineProperty($,"build",{enumerable:!0,get:function(){return H.build}}),Object.defineProperty($,"createPromiseCapability",{enumerable:!0,get:function(){return p.createPromiseCapability}}),Object.defineProperty($,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return p.createValidAbsoluteUrl}}),Object.defineProperty($,"getDocument",{enumerable:!0,get:function(){return H.getDocument}}),Object.defineProperty($,"getFilenameFromUrl",{enumerable:!0,get:function(){return c.getFilenameFromUrl}}),Object.defineProperty($,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return c.getPdfFilenameFromUrl}}),Object.defineProperty($,"getXfaPageViewport",{enumerable:!0,get:function(){return c.getXfaPageViewport}}),Object.defineProperty($,"isPdfFile",{enumerable:!0,get:function(){return c.isPdfFile}}),Object.defineProperty($,"loadScript",{enumerable:!0,get:function(){return c.loadScript}}),Object.defineProperty($,"renderTextLayer",{enumerable:!0,get:function(){return U.renderTextLayer}}),Object.defineProperty($,"shadow",{enumerable:!0,get:function(){return p.shadow}}),Object.defineProperty($,"version",{enumerable:!0,get:function(){return H.version}});var p=__w_pdfjs_require__(1),H=__w_pdfjs_require__(4),c=__w_pdfjs_require__(5),K=__w_pdfjs_require__(20),q=__w_pdfjs_require__(13),G=__w_pdfjs_require__(3),U=__w_pdfjs_require__(23),F=__w_pdfjs_require__(24),m=__w_pdfjs_require__(22);let x="2.14.305",k="eaaa8b4ad";if(G.isNodeJS){let{PDFNodeStream:R}=__w_pdfjs_require__(25);(0,H.setPDFNetworkStreamFactory)(A=>new R(A))}else{let{PDFNetworkStream:R}=__w_pdfjs_require__(28),{PDFFetchStream:A}=__w_pdfjs_require__(29);(0,H.setPDFNetworkStreamFactory)(o=>(0,c.isValidFetchUrl)(o.url)?new A(o):new R(o))}})(),__webpack_exports__})())});var Wt=Qt(Jt()),re=Qt(Jt());Wt.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.14.305/pdf.worker.min.js";var ae=($,p)=>{Wt.getDocument($).promise.then(async c=>{let K=document.getElementById(p);for(let q=1;q<=c.numPages;q++)c.getPage(q).then(function(G){let F=G.getViewport({scale:1.5}),m=document.createElement("svg");m.style.width=F.width+"px",m.style.height=F.height+"px",K==null||K.appendChild(m),G.getOperatorList().then(function(x){return new re.SVGGraphics(G.commonObjs,G.objs).getSVG(x,F)}).then(function(x){m.appendChild(x)})})})};window.addEventListener("load",()=>{ae("./sample1.pdf","pdf-container")});})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiKGRpc2FibGVkKTpmcyIsICIoZGlzYWJsZWQpOmNhbnZhcyIsICIoZGlzYWJsZWQpOnpsaWIiLCAiKGRpc2FibGVkKTpodHRwIiwgIihkaXNhYmxlZCk6aHR0cHMiLCAiKGRpc2FibGVkKTp1cmwiLCAiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3BkZmpzLWRpc3QvYnVpbGQvd2VicGFjazovcGRmanMtZGlzdC9idWlsZC9wZGYvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwgIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9wZGZqcy1kaXN0L2J1aWxkL3dlYnBhY2s6L3BkZmpzLWRpc3QvYnVpbGQvcGRmL3NyYy9zaGFyZWQvdXRpbC5qcyIsICIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcGRmanMtZGlzdC9idWlsZC93ZWJwYWNrOi9wZGZqcy1kaXN0L2J1aWxkL3BkZi9zcmMvc2hhcmVkL2NvbXBhdGliaWxpdHkuanMiLCAiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3BkZmpzLWRpc3QvYnVpbGQvd2VicGFjazovcGRmanMtZGlzdC9idWlsZC9wZGYvc3JjL3NoYXJlZC9pc19ub2RlLmpzIiwgIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9wZGZqcy1kaXN0L2J1aWxkL3dlYnBhY2s6L3BkZmpzLWRpc3QvYnVpbGQvcGRmL3NyYy9kaXNwbGF5L2FwaS5qcyIsICIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcGRmanMtZGlzdC9idWlsZC93ZWJwYWNrOi9wZGZqcy1kaXN0L2J1aWxkL3BkZi9zcmMvZGlzcGxheS9kaXNwbGF5X3V0aWxzLmpzIiwgIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9wZGZqcy1kaXN0L2J1aWxkL3dlYnBhY2s6L3BkZmpzLWRpc3QvYnVpbGQvcGRmL3NyYy9kaXNwbGF5L2Jhc2VfZmFjdG9yeS5qcyIsICIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcGRmanMtZGlzdC9idWlsZC93ZWJwYWNrOi9wZGZqcy1kaXN0L2J1aWxkL3BkZi9zcmMvZGlzcGxheS9mb250X2xvYWRlci5qcyIsICIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcGRmanMtZGlzdC9idWlsZC93ZWJwYWNrOi9wZGZqcy1kaXN0L2J1aWxkL3BkZi9zcmMvZGlzcGxheS9hbm5vdGF0aW9uX3N0b3JhZ2UuanMiLCAiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3BkZmpzLWRpc3QvYnVpbGQvd2VicGFjazovcGRmanMtZGlzdC9idWlsZC9wZGYvc3JjL3NoYXJlZC9tdXJtdXJoYXNoMy5qcyIsICIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcGRmanMtZGlzdC9idWlsZC93ZWJwYWNrOi9wZGZqcy1kaXN0L2J1aWxkL3BkZi9zcmMvZGlzcGxheS9jYW52YXMuanMiLCAiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3BkZmpzLWRpc3QvYnVpbGQvd2VicGFjazovcGRmanMtZGlzdC9idWlsZC9wZGYvc3JjL2Rpc3BsYXkvcGF0dGVybl9oZWxwZXIuanMiLCAiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3BkZmpzLWRpc3QvYnVpbGQvd2VicGFjazovcGRmanMtZGlzdC9idWlsZC9wZGYvc3JjL3NoYXJlZC9pbWFnZV91dGlscy5qcyIsICIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcGRmanMtZGlzdC9idWlsZC93ZWJwYWNrOi9wZGZqcy1kaXN0L2J1aWxkL3BkZi9zcmMvZGlzcGxheS93b3JrZXJfb3B0aW9ucy5qcyIsICIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcGRmanMtZGlzdC9idWlsZC93ZWJwYWNrOi9wZGZqcy1kaXN0L2J1aWxkL3BkZi9zcmMvc2hhcmVkL21lc3NhZ2VfaGFuZGxlci5qcyIsICIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcGRmanMtZGlzdC9idWlsZC93ZWJwYWNrOi9wZGZqcy1kaXN0L2J1aWxkL3BkZi9zcmMvZGlzcGxheS9tZXRhZGF0YS5qcyIsICIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcGRmanMtZGlzdC9idWlsZC93ZWJwYWNrOi9wZGZqcy1kaXN0L2J1aWxkL3BkZi9zcmMvZGlzcGxheS9vcHRpb25hbF9jb250ZW50X2NvbmZpZy5qcyIsICIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcGRmanMtZGlzdC9idWlsZC93ZWJwYWNrOi9wZGZqcy1kaXN0L2J1aWxkL3BkZi9zcmMvZGlzcGxheS90cmFuc3BvcnRfc3RyZWFtLmpzIiwgIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9wZGZqcy1kaXN0L2J1aWxkL3dlYnBhY2s6L3BkZmpzLWRpc3QvYnVpbGQvcGRmL3NyYy9kaXNwbGF5L3hmYV90ZXh0LmpzIiwgIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9wZGZqcy1kaXN0L2J1aWxkL3dlYnBhY2s6L3BkZmpzLWRpc3QvYnVpbGQvcGRmL3NyYy9kaXNwbGF5L25vZGVfdXRpbHMuanMiLCAiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3BkZmpzLWRpc3QvYnVpbGQvd2VicGFjazovcGRmanMtZGlzdC9idWlsZC9wZGYvc3JjL2Rpc3BsYXkvYW5ub3RhdGlvbl9sYXllci5qcyIsICIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcGRmanMtZGlzdC9idWlsZC93ZWJwYWNrOi9wZGZqcy1kaXN0L2J1aWxkL3BkZi9zcmMvc2hhcmVkL3NjcmlwdGluZ191dGlscy5qcyIsICIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcGRmanMtZGlzdC9idWlsZC93ZWJwYWNrOi9wZGZqcy1kaXN0L2J1aWxkL3BkZi9zcmMvZGlzcGxheS94ZmFfbGF5ZXIuanMiLCAiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3BkZmpzLWRpc3QvYnVpbGQvd2VicGFjazovcGRmanMtZGlzdC9idWlsZC9wZGYvc3JjL2Rpc3BsYXkvdGV4dF9sYXllci5qcyIsICIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcGRmanMtZGlzdC9idWlsZC93ZWJwYWNrOi9wZGZqcy1kaXN0L2J1aWxkL3BkZi9zcmMvZGlzcGxheS9zdmcuanMiLCAiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3BkZmpzLWRpc3QvYnVpbGQvd2VicGFjazovcGRmanMtZGlzdC9idWlsZC9wZGYvc3JjL2Rpc3BsYXkvbm9kZV9zdHJlYW0uanMiLCAiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3BkZmpzLWRpc3QvYnVpbGQvd2VicGFjazovcGRmanMtZGlzdC9idWlsZC9wZGYvc3JjL2Rpc3BsYXkvbmV0d29ya191dGlscy5qcyIsICIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcGRmanMtZGlzdC9idWlsZC93ZWJwYWNrOi9wZGZqcy1kaXN0L2J1aWxkL3BkZi9zcmMvZGlzcGxheS9jb250ZW50X2Rpc3Bvc2l0aW9uLmpzIiwgIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9wZGZqcy1kaXN0L2J1aWxkL3dlYnBhY2s6L3BkZmpzLWRpc3QvYnVpbGQvcGRmL3NyYy9kaXNwbGF5L25ldHdvcmsuanMiLCAiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3BkZmpzLWRpc3QvYnVpbGQvd2VicGFjazovcGRmanMtZGlzdC9idWlsZC9wZGYvc3JjL2Rpc3BsYXkvZmV0Y2hfc3RyZWFtLmpzIiwgIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9wZGZqcy1kaXN0L2J1aWxkL3dlYnBhY2s6L3BkZmpzLWRpc3QvYnVpbGQvcGRmL3dlYnBhY2svYm9vdHN0cmFwIiwgIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9wZGZqcy1kaXN0L2J1aWxkL3dlYnBhY2s6L3BkZmpzLWRpc3QvYnVpbGQvcGRmL3NyYy9wZGYuanMiLCAicGRmLXZpZXdlci50cyIsICJwZGYtdmlld2VyLXRlc3QudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIiIsICIiLCAiIiwgIiIsICIiLCAiIiwgIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwicGRmanMtZGlzdC9idWlsZC9wZGZcIiwgW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wicGRmanMtZGlzdC9idWlsZC9wZGZcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wicGRmanMtZGlzdC9idWlsZC9wZGZcIl0gPSBmYWN0b3J5KCk7XG59KSh0aGlzLCAoKSA9PiB7XG5yZXR1cm4gIiwgIi8qIENvcHlyaWdodCAyMDEyIE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgXCIuL2NvbXBhdGliaWxpdHkuanNcIjtcblxuY29uc3QgSURFTlRJVFlfTUFUUklYID0gWzEsIDAsIDAsIDEsIDAsIDBdO1xuY29uc3QgRk9OVF9JREVOVElUWV9NQVRSSVggPSBbMC4wMDEsIDAsIDAsIDAuMDAxLCAwLCAwXTtcblxuLyoqXG4gKiBSZWZlciB0byB0aGUgYFdvcmtlclRyYW5zcG9ydC5nZXRSZW5kZXJpbmdJbnRlbnRgLW1ldGhvZCBpbiB0aGUgQVBJLCB0byBzZWVcbiAqIGhvdyB0aGVzZSBmbGFncyBhcmUgYmVpbmcgdXNlZDpcbiAqICAtIEFOWSwgRElTUExBWSwgYW5kIFBSSU5UIGFyZSB0aGUgbm9ybWFsIHJlbmRlcmluZyBpbnRlbnRzLCBub3RlIHRoZVxuICogICAgYFBERlBhZ2VQcm94eS57cmVuZGVyLCBnZXRPcGVyYXRvckxpc3QsIGdldEFubm90YXRpb25zfWAtbWV0aG9kcy5cbiAqICAtIEFOTk9UQVRJT05TX0ZPUk1TLCBBTk5PVEFUSU9OU19TVE9SQUdFLCBBTk5PVEFUSU9OU19ESVNBQkxFIGNvbnRyb2wgd2hpY2hcbiAqICAgIGFubm90YXRpb25zIGFyZSByZW5kZXJlZCBvbnRvIHRoZSBjYW52YXMgKGkuZS4gYnkgYmVpbmcgaW5jbHVkZWQgaW4gdGhlXG4gKiAgICBvcGVyYXRvckxpc3QpLCBub3RlIHRoZSBgUERGUGFnZVByb3h5LntyZW5kZXIsIGdldE9wZXJhdG9yTGlzdH1gLW1ldGhvZHNcbiAqICAgIGFuZCB0aGVpciBgYW5ub3RhdGlvbk1vZGVgLW9wdGlvbi5cbiAqICAtIE9QTElTVCBpcyB1c2VkIHdpdGggdGhlIGBQREZQYWdlUHJveHkuZ2V0T3BlcmF0b3JMaXN0YC1tZXRob2QsIG5vdGUgdGhlXG4gKiAgICBgT3BlcmF0b3JMaXN0YC1jb25zdHJ1Y3RvciAob24gdGhlIHdvcmtlci10aHJlYWQpLlxuICovXG5jb25zdCBSZW5kZXJpbmdJbnRlbnRGbGFnID0ge1xuICBBTlk6IDB4MDEsXG4gIERJU1BMQVk6IDB4MDIsXG4gIFBSSU5UOiAweDA0LFxuICBBTk5PVEFUSU9OU19GT1JNUzogMHgxMCxcbiAgQU5OT1RBVElPTlNfU1RPUkFHRTogMHgyMCxcbiAgQU5OT1RBVElPTlNfRElTQUJMRTogMHg0MCxcbiAgT1BMSVNUOiAweDEwMCxcbn07XG5cbmNvbnN0IEFubm90YXRpb25Nb2RlID0ge1xuICBESVNBQkxFOiAwLFxuICBFTkFCTEU6IDEsXG4gIEVOQUJMRV9GT1JNUzogMixcbiAgRU5BQkxFX1NUT1JBR0U6IDMsXG59O1xuXG4vLyBQZXJtaXNzaW9uIGZsYWdzIGZyb20gVGFibGUgMjIsIFNlY3Rpb24gNy42LjMuMiBvZiB0aGUgUERGIHNwZWNpZmljYXRpb24uXG5jb25zdCBQZXJtaXNzaW9uRmxhZyA9IHtcbiAgUFJJTlQ6IDB4MDQsXG4gIE1PRElGWV9DT05URU5UUzogMHgwOCxcbiAgQ09QWTogMHgxMCxcbiAgTU9ESUZZX0FOTk9UQVRJT05TOiAweDIwLFxuICBGSUxMX0lOVEVSQUNUSVZFX0ZPUk1TOiAweDEwMCxcbiAgQ09QWV9GT1JfQUNDRVNTSUJJTElUWTogMHgyMDAsXG4gIEFTU0VNQkxFOiAweDQwMCxcbiAgUFJJTlRfSElHSF9RVUFMSVRZOiAweDgwMCxcbn07XG5cbmNvbnN0IFRleHRSZW5kZXJpbmdNb2RlID0ge1xuICBGSUxMOiAwLFxuICBTVFJPS0U6IDEsXG4gIEZJTExfU1RST0tFOiAyLFxuICBJTlZJU0lCTEU6IDMsXG4gIEZJTExfQUREX1RPX1BBVEg6IDQsXG4gIFNUUk9LRV9BRERfVE9fUEFUSDogNSxcbiAgRklMTF9TVFJPS0VfQUREX1RPX1BBVEg6IDYsXG4gIEFERF9UT19QQVRIOiA3LFxuICBGSUxMX1NUUk9LRV9NQVNLOiAzLFxuICBBRERfVE9fUEFUSF9GTEFHOiA0LFxufTtcblxuY29uc3QgSW1hZ2VLaW5kID0ge1xuICBHUkFZU0NBTEVfMUJQUDogMSxcbiAgUkdCXzI0QlBQOiAyLFxuICBSR0JBXzMyQlBQOiAzLFxufTtcblxuY29uc3QgQW5ub3RhdGlvblR5cGUgPSB7XG4gIFRFWFQ6IDEsXG4gIExJTks6IDIsXG4gIEZSRUVURVhUOiAzLFxuICBMSU5FOiA0LFxuICBTUVVBUkU6IDUsXG4gIENJUkNMRTogNixcbiAgUE9MWUdPTjogNyxcbiAgUE9MWUxJTkU6IDgsXG4gIEhJR0hMSUdIVDogOSxcbiAgVU5ERVJMSU5FOiAxMCxcbiAgU1FVSUdHTFk6IDExLFxuICBTVFJJS0VPVVQ6IDEyLFxuICBTVEFNUDogMTMsXG4gIENBUkVUOiAxNCxcbiAgSU5LOiAxNSxcbiAgUE9QVVA6IDE2LFxuICBGSUxFQVRUQUNITUVOVDogMTcsXG4gIFNPVU5EOiAxOCxcbiAgTU9WSUU6IDE5LFxuICBXSURHRVQ6IDIwLFxuICBTQ1JFRU46IDIxLFxuICBQUklOVEVSTUFSSzogMjIsXG4gIFRSQVBORVQ6IDIzLFxuICBXQVRFUk1BUks6IDI0LFxuICBUSFJFRUQ6IDI1LFxuICBSRURBQ1Q6IDI2LFxufTtcblxuY29uc3QgQW5ub3RhdGlvblN0YXRlTW9kZWxUeXBlID0ge1xuICBNQVJLRUQ6IFwiTWFya2VkXCIsXG4gIFJFVklFVzogXCJSZXZpZXdcIixcbn07XG5cbmNvbnN0IEFubm90YXRpb25NYXJrZWRTdGF0ZSA9IHtcbiAgTUFSS0VEOiBcIk1hcmtlZFwiLFxuICBVTk1BUktFRDogXCJVbm1hcmtlZFwiLFxufTtcblxuY29uc3QgQW5ub3RhdGlvblJldmlld1N0YXRlID0ge1xuICBBQ0NFUFRFRDogXCJBY2NlcHRlZFwiLFxuICBSRUpFQ1RFRDogXCJSZWplY3RlZFwiLFxuICBDQU5DRUxMRUQ6IFwiQ2FuY2VsbGVkXCIsXG4gIENPTVBMRVRFRDogXCJDb21wbGV0ZWRcIixcbiAgTk9ORTogXCJOb25lXCIsXG59O1xuXG5jb25zdCBBbm5vdGF0aW9uUmVwbHlUeXBlID0ge1xuICBHUk9VUDogXCJHcm91cFwiLFxuICBSRVBMWTogXCJSXCIsXG59O1xuXG5jb25zdCBBbm5vdGF0aW9uRmxhZyA9IHtcbiAgSU5WSVNJQkxFOiAweDAxLFxuICBISURERU46IDB4MDIsXG4gIFBSSU5UOiAweDA0LFxuICBOT1pPT006IDB4MDgsXG4gIE5PUk9UQVRFOiAweDEwLFxuICBOT1ZJRVc6IDB4MjAsXG4gIFJFQURPTkxZOiAweDQwLFxuICBMT0NLRUQ6IDB4ODAsXG4gIFRPR0dMRU5PVklFVzogMHgxMDAsXG4gIExPQ0tFRENPTlRFTlRTOiAweDIwMCxcbn07XG5cbmNvbnN0IEFubm90YXRpb25GaWVsZEZsYWcgPSB7XG4gIFJFQURPTkxZOiAweDAwMDAwMDEsXG4gIFJFUVVJUkVEOiAweDAwMDAwMDIsXG4gIE5PRVhQT1JUOiAweDAwMDAwMDQsXG4gIE1VTFRJTElORTogMHgwMDAxMDAwLFxuICBQQVNTV09SRDogMHgwMDAyMDAwLFxuICBOT1RPR0dMRVRPT0ZGOiAweDAwMDQwMDAsXG4gIFJBRElPOiAweDAwMDgwMDAsXG4gIFBVU0hCVVRUT046IDB4MDAxMDAwMCxcbiAgQ09NQk86IDB4MDAyMDAwMCxcbiAgRURJVDogMHgwMDQwMDAwLFxuICBTT1JUOiAweDAwODAwMDAsXG4gIEZJTEVTRUxFQ1Q6IDB4MDEwMDAwMCxcbiAgTVVMVElTRUxFQ1Q6IDB4MDIwMDAwMCxcbiAgRE9OT1RTUEVMTENIRUNLOiAweDA0MDAwMDAsXG4gIERPTk9UU0NST0xMOiAweDA4MDAwMDAsXG4gIENPTUI6IDB4MTAwMDAwMCxcbiAgUklDSFRFWFQ6IDB4MjAwMDAwMCxcbiAgUkFESU9TSU5VTklTT046IDB4MjAwMDAwMCxcbiAgQ09NTUlUT05TRUxDSEFOR0U6IDB4NDAwMDAwMCxcbn07XG5cbmNvbnN0IEFubm90YXRpb25Cb3JkZXJTdHlsZVR5cGUgPSB7XG4gIFNPTElEOiAxLFxuICBEQVNIRUQ6IDIsXG4gIEJFVkVMRUQ6IDMsXG4gIElOU0VUOiA0LFxuICBVTkRFUkxJTkU6IDUsXG59O1xuXG5jb25zdCBBbm5vdGF0aW9uQWN0aW9uRXZlbnRUeXBlID0ge1xuICBFOiBcIk1vdXNlIEVudGVyXCIsXG4gIFg6IFwiTW91c2UgRXhpdFwiLFxuICBEOiBcIk1vdXNlIERvd25cIixcbiAgVTogXCJNb3VzZSBVcFwiLFxuICBGbzogXCJGb2N1c1wiLFxuICBCbDogXCJCbHVyXCIsXG4gIFBPOiBcIlBhZ2VPcGVuXCIsXG4gIFBDOiBcIlBhZ2VDbG9zZVwiLFxuICBQVjogXCJQYWdlVmlzaWJsZVwiLFxuICBQSTogXCJQYWdlSW52aXNpYmxlXCIsXG4gIEs6IFwiS2V5c3Ryb2tlXCIsXG4gIEY6IFwiRm9ybWF0XCIsXG4gIFY6IFwiVmFsaWRhdGVcIixcbiAgQzogXCJDYWxjdWxhdGVcIixcbn07XG5cbmNvbnN0IERvY3VtZW50QWN0aW9uRXZlbnRUeXBlID0ge1xuICBXQzogXCJXaWxsQ2xvc2VcIixcbiAgV1M6IFwiV2lsbFNhdmVcIixcbiAgRFM6IFwiRGlkU2F2ZVwiLFxuICBXUDogXCJXaWxsUHJpbnRcIixcbiAgRFA6IFwiRGlkUHJpbnRcIixcbn07XG5cbmNvbnN0IFBhZ2VBY3Rpb25FdmVudFR5cGUgPSB7XG4gIE86IFwiUGFnZU9wZW5cIixcbiAgQzogXCJQYWdlQ2xvc2VcIixcbn07XG5cbmNvbnN0IFN0cmVhbVR5cGUgPSB7XG4gIFVOS05PV046IFwiVU5LTk9XTlwiLFxuICBGTEFURTogXCJGTEFURVwiLFxuICBMWlc6IFwiTFpXXCIsXG4gIERDVDogXCJEQ1RcIixcbiAgSlBYOiBcIkpQWFwiLFxuICBKQklHOiBcIkpCSUdcIixcbiAgQTg1OiBcIkE4NVwiLFxuICBBSFg6IFwiQUhYXCIsXG4gIENDRjogXCJDQ0ZcIixcbiAgUkxYOiBcIlJMWFwiLCAvLyBQREYgc2hvcnQgbmFtZSBpcyAnUkwnLCBidXQgdGVsZW1ldHJ5IHJlcXVpcmVzIHRocmVlIGNoYXJzLlxufTtcblxuY29uc3QgRm9udFR5cGUgPSB7XG4gIFVOS05PV046IFwiVU5LTk9XTlwiLFxuICBUWVBFMTogXCJUWVBFMVwiLFxuICBUWVBFMVNUQU5EQVJEOiBcIlRZUEUxU1RBTkRBUkRcIixcbiAgVFlQRTFDOiBcIlRZUEUxQ1wiLFxuICBDSURGT05UVFlQRTA6IFwiQ0lERk9OVFRZUEUwXCIsXG4gIENJREZPTlRUWVBFMEM6IFwiQ0lERk9OVFRZUEUwQ1wiLFxuICBUUlVFVFlQRTogXCJUUlVFVFlQRVwiLFxuICBDSURGT05UVFlQRTI6IFwiQ0lERk9OVFRZUEUyXCIsXG4gIFRZUEUzOiBcIlRZUEUzXCIsXG4gIE9QRU5UWVBFOiBcIk9QRU5UWVBFXCIsXG4gIFRZUEUwOiBcIlRZUEUwXCIsXG4gIE1NVFlQRTE6IFwiTU1UWVBFMVwiLFxufTtcblxuY29uc3QgVmVyYm9zaXR5TGV2ZWwgPSB7XG4gIEVSUk9SUzogMCxcbiAgV0FSTklOR1M6IDEsXG4gIElORk9TOiA1LFxufTtcblxuY29uc3QgQ01hcENvbXByZXNzaW9uVHlwZSA9IHtcbiAgTk9ORTogMCxcbiAgQklOQVJZOiAxLFxuICBTVFJFQU06IDIsXG59O1xuXG4vLyBBbGwgdGhlIHBvc3NpYmxlIG9wZXJhdGlvbnMgZm9yIGFuIG9wZXJhdG9yIGxpc3QuXG5jb25zdCBPUFMgPSB7XG4gIC8vIEludGVudGlvbmFsbHkgc3RhcnQgZnJvbSAxIHNvIGl0IGlzIGVhc3kgdG8gc3BvdCBiYWQgb3BlcmF0b3JzIHRoYXQgd2lsbCBiZVxuICAvLyAwJ3MuXG4gIGRlcGVuZGVuY3k6IDEsXG4gIHNldExpbmVXaWR0aDogMixcbiAgc2V0TGluZUNhcDogMyxcbiAgc2V0TGluZUpvaW46IDQsXG4gIHNldE1pdGVyTGltaXQ6IDUsXG4gIHNldERhc2g6IDYsXG4gIHNldFJlbmRlcmluZ0ludGVudDogNyxcbiAgc2V0RmxhdG5lc3M6IDgsXG4gIHNldEdTdGF0ZTogOSxcbiAgc2F2ZTogMTAsXG4gIHJlc3RvcmU6IDExLFxuICB0cmFuc2Zvcm06IDEyLFxuICBtb3ZlVG86IDEzLFxuICBsaW5lVG86IDE0LFxuICBjdXJ2ZVRvOiAxNSxcbiAgY3VydmVUbzI6IDE2LFxuICBjdXJ2ZVRvMzogMTcsXG4gIGNsb3NlUGF0aDogMTgsXG4gIHJlY3RhbmdsZTogMTksXG4gIHN0cm9rZTogMjAsXG4gIGNsb3NlU3Ryb2tlOiAyMSxcbiAgZmlsbDogMjIsXG4gIGVvRmlsbDogMjMsXG4gIGZpbGxTdHJva2U6IDI0LFxuICBlb0ZpbGxTdHJva2U6IDI1LFxuICBjbG9zZUZpbGxTdHJva2U6IDI2LFxuICBjbG9zZUVPRmlsbFN0cm9rZTogMjcsXG4gIGVuZFBhdGg6IDI4LFxuICBjbGlwOiAyOSxcbiAgZW9DbGlwOiAzMCxcbiAgYmVnaW5UZXh0OiAzMSxcbiAgZW5kVGV4dDogMzIsXG4gIHNldENoYXJTcGFjaW5nOiAzMyxcbiAgc2V0V29yZFNwYWNpbmc6IDM0LFxuICBzZXRIU2NhbGU6IDM1LFxuICBzZXRMZWFkaW5nOiAzNixcbiAgc2V0Rm9udDogMzcsXG4gIHNldFRleHRSZW5kZXJpbmdNb2RlOiAzOCxcbiAgc2V0VGV4dFJpc2U6IDM5LFxuICBtb3ZlVGV4dDogNDAsXG4gIHNldExlYWRpbmdNb3ZlVGV4dDogNDEsXG4gIHNldFRleHRNYXRyaXg6IDQyLFxuICBuZXh0TGluZTogNDMsXG4gIHNob3dUZXh0OiA0NCxcbiAgc2hvd1NwYWNlZFRleHQ6IDQ1LFxuICBuZXh0TGluZVNob3dUZXh0OiA0NixcbiAgbmV4dExpbmVTZXRTcGFjaW5nU2hvd1RleHQ6IDQ3LFxuICBzZXRDaGFyV2lkdGg6IDQ4LFxuICBzZXRDaGFyV2lkdGhBbmRCb3VuZHM6IDQ5LFxuICBzZXRTdHJva2VDb2xvclNwYWNlOiA1MCxcbiAgc2V0RmlsbENvbG9yU3BhY2U6IDUxLFxuICBzZXRTdHJva2VDb2xvcjogNTIsXG4gIHNldFN0cm9rZUNvbG9yTjogNTMsXG4gIHNldEZpbGxDb2xvcjogNTQsXG4gIHNldEZpbGxDb2xvck46IDU1LFxuICBzZXRTdHJva2VHcmF5OiA1NixcbiAgc2V0RmlsbEdyYXk6IDU3LFxuICBzZXRTdHJva2VSR0JDb2xvcjogNTgsXG4gIHNldEZpbGxSR0JDb2xvcjogNTksXG4gIHNldFN0cm9rZUNNWUtDb2xvcjogNjAsXG4gIHNldEZpbGxDTVlLQ29sb3I6IDYxLFxuICBzaGFkaW5nRmlsbDogNjIsXG4gIGJlZ2luSW5saW5lSW1hZ2U6IDYzLFxuICBiZWdpbkltYWdlRGF0YTogNjQsXG4gIGVuZElubGluZUltYWdlOiA2NSxcbiAgcGFpbnRYT2JqZWN0OiA2NixcbiAgbWFya1BvaW50OiA2NyxcbiAgbWFya1BvaW50UHJvcHM6IDY4LFxuICBiZWdpbk1hcmtlZENvbnRlbnQ6IDY5LFxuICBiZWdpbk1hcmtlZENvbnRlbnRQcm9wczogNzAsXG4gIGVuZE1hcmtlZENvbnRlbnQ6IDcxLFxuICBiZWdpbkNvbXBhdDogNzIsXG4gIGVuZENvbXBhdDogNzMsXG4gIHBhaW50Rm9ybVhPYmplY3RCZWdpbjogNzQsXG4gIHBhaW50Rm9ybVhPYmplY3RFbmQ6IDc1LFxuICBiZWdpbkdyb3VwOiA3NixcbiAgZW5kR3JvdXA6IDc3LFxuICBiZWdpbkFubm90YXRpb25zOiA3OCxcbiAgZW5kQW5ub3RhdGlvbnM6IDc5LFxuICBiZWdpbkFubm90YXRpb246IDgwLFxuICBlbmRBbm5vdGF0aW9uOiA4MSxcbiAgLyoqIEBkZXByZWNhdGVkIHVudXNlZCAqL1xuICBwYWludEpwZWdYT2JqZWN0OiA4MixcbiAgcGFpbnRJbWFnZU1hc2tYT2JqZWN0OiA4MyxcbiAgcGFpbnRJbWFnZU1hc2tYT2JqZWN0R3JvdXA6IDg0LFxuICBwYWludEltYWdlWE9iamVjdDogODUsXG4gIHBhaW50SW5saW5lSW1hZ2VYT2JqZWN0OiA4NixcbiAgcGFpbnRJbmxpbmVJbWFnZVhPYmplY3RHcm91cDogODcsXG4gIHBhaW50SW1hZ2VYT2JqZWN0UmVwZWF0OiA4OCxcbiAgcGFpbnRJbWFnZU1hc2tYT2JqZWN0UmVwZWF0OiA4OSxcbiAgcGFpbnRTb2xpZENvbG9ySW1hZ2VNYXNrOiA5MCxcbiAgY29uc3RydWN0UGF0aDogOTEsXG59O1xuXG5jb25zdCBVTlNVUFBPUlRFRF9GRUFUVVJFUyA9IHtcbiAgLyoqIEBkZXByZWNhdGVkIHVudXNlZCAqL1xuICB1bmtub3duOiBcInVua25vd25cIixcbiAgZm9ybXM6IFwiZm9ybXNcIixcbiAgamF2YVNjcmlwdDogXCJqYXZhU2NyaXB0XCIsXG4gIHNpZ25hdHVyZXM6IFwic2lnbmF0dXJlc1wiLFxuICBzbWFzazogXCJzbWFza1wiLFxuICBzaGFkaW5nUGF0dGVybjogXCJzaGFkaW5nUGF0dGVyblwiLFxuICAvKiogQGRlcHJlY2F0ZWQgdW51c2VkICovXG4gIGZvbnQ6IFwiZm9udFwiLFxuICBlcnJvclRpbGluZ1BhdHRlcm46IFwiZXJyb3JUaWxpbmdQYXR0ZXJuXCIsXG4gIGVycm9yRXh0R1N0YXRlOiBcImVycm9yRXh0R1N0YXRlXCIsXG4gIGVycm9yWE9iamVjdDogXCJlcnJvclhPYmplY3RcIixcbiAgZXJyb3JGb250TG9hZFR5cGUzOiBcImVycm9yRm9udExvYWRUeXBlM1wiLFxuICBlcnJvckZvbnRTdGF0ZTogXCJlcnJvckZvbnRTdGF0ZVwiLFxuICBlcnJvckZvbnRNaXNzaW5nOiBcImVycm9yRm9udE1pc3NpbmdcIixcbiAgZXJyb3JGb250VHJhbnNsYXRlOiBcImVycm9yRm9udFRyYW5zbGF0ZVwiLFxuICBlcnJvckNvbG9yU3BhY2U6IFwiZXJyb3JDb2xvclNwYWNlXCIsXG4gIGVycm9yT3BlcmF0b3JMaXN0OiBcImVycm9yT3BlcmF0b3JMaXN0XCIsXG4gIGVycm9yRm9udFRvVW5pY29kZTogXCJlcnJvckZvbnRUb1VuaWNvZGVcIixcbiAgZXJyb3JGb250TG9hZE5hdGl2ZTogXCJlcnJvckZvbnRMb2FkTmF0aXZlXCIsXG4gIGVycm9yRm9udEJ1aWxkUGF0aDogXCJlcnJvckZvbnRCdWlsZFBhdGhcIixcbiAgZXJyb3JGb250R2V0UGF0aDogXCJlcnJvckZvbnRHZXRQYXRoXCIsXG4gIGVycm9yTWFya2VkQ29udGVudDogXCJlcnJvck1hcmtlZENvbnRlbnRcIixcbiAgZXJyb3JDb250ZW50U3ViU3RyZWFtOiBcImVycm9yQ29udGVudFN1YlN0cmVhbVwiLFxufTtcblxuY29uc3QgUGFzc3dvcmRSZXNwb25zZXMgPSB7XG4gIE5FRURfUEFTU1dPUkQ6IDEsXG4gIElOQ09SUkVDVF9QQVNTV09SRDogMixcbn07XG5cbmxldCB2ZXJib3NpdHkgPSBWZXJib3NpdHlMZXZlbC5XQVJOSU5HUztcblxuZnVuY3Rpb24gc2V0VmVyYm9zaXR5TGV2ZWwobGV2ZWwpIHtcbiAgaWYgKE51bWJlci5pc0ludGVnZXIobGV2ZWwpKSB7XG4gICAgdmVyYm9zaXR5ID0gbGV2ZWw7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0VmVyYm9zaXR5TGV2ZWwoKSB7XG4gIHJldHVybiB2ZXJib3NpdHk7XG59XG5cbi8vIEEgbm90aWNlIGZvciBkZXZzLiBUaGVzZSBhcmUgZ29vZCBmb3IgdGhpbmdzIHRoYXQgYXJlIGhlbHBmdWwgdG8gZGV2cywgc3VjaFxuLy8gYXMgd2FybmluZyB0aGF0IFdvcmtlcnMgd2VyZSBkaXNhYmxlZCwgd2hpY2ggaXMgaW1wb3J0YW50IHRvIGRldnMgYnV0IG5vdFxuLy8gZW5kIHVzZXJzLlxuZnVuY3Rpb24gaW5mbyhtc2cpIHtcbiAgaWYgKHZlcmJvc2l0eSA+PSBWZXJib3NpdHlMZXZlbC5JTkZPUykge1xuICAgIGNvbnNvbGUubG9nKGBJbmZvOiAke21zZ31gKTtcbiAgfVxufVxuXG4vLyBOb24tZmF0YWwgd2FybmluZ3MuXG5mdW5jdGlvbiB3YXJuKG1zZykge1xuICBpZiAodmVyYm9zaXR5ID49IFZlcmJvc2l0eUxldmVsLldBUk5JTkdTKSB7XG4gICAgY29uc29sZS5sb2coYFdhcm5pbmc6ICR7bXNnfWApO1xuICB9XG59XG5cbmZ1bmN0aW9uIHVucmVhY2hhYmxlKG1zZykge1xuICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbn1cblxuZnVuY3Rpb24gYXNzZXJ0KGNvbmQsIG1zZykge1xuICBpZiAoIWNvbmQpIHtcbiAgICB1bnJlYWNoYWJsZShtc2cpO1xuICB9XG59XG5cbi8vIENoZWNrcyBpZiBVUkxzIHVzZSBvbmUgb2YgdGhlIGFsbG93ZWQgcHJvdG9jb2xzLCBlLmcuIHRvIGF2b2lkIFhTUy5cbmZ1bmN0aW9uIF9pc1ZhbGlkUHJvdG9jb2wodXJsKSB7XG4gIGlmICghdXJsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHN3aXRjaCAodXJsLnByb3RvY29sKSB7XG4gICAgY2FzZSBcImh0dHA6XCI6XG4gICAgY2FzZSBcImh0dHBzOlwiOlxuICAgIGNhc2UgXCJmdHA6XCI6XG4gICAgY2FzZSBcIm1haWx0bzpcIjpcbiAgICBjYXNlIFwidGVsOlwiOlxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vKipcbiAqIEF0dGVtcHRzIHRvIGNyZWF0ZSBhIHZhbGlkIGFic29sdXRlIFVSTC5cbiAqXG4gKiBAcGFyYW0ge1VSTHxzdHJpbmd9IHVybCAtIEFuIGFic29sdXRlLCBvciByZWxhdGl2ZSwgVVJMLlxuICogQHBhcmFtIHtVUkx8c3RyaW5nfSBbYmFzZVVybF0gLSBBbiBhYnNvbHV0ZSBVUkwuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gKiBAcmV0dXJucyBFaXRoZXIgYSB2YWxpZCB7VVJMfSwgb3IgYG51bGxgIG90aGVyd2lzZS5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlVmFsaWRBYnNvbHV0ZVVybCh1cmwsIGJhc2VVcmwgPSBudWxsLCBvcHRpb25zID0gbnVsbCkge1xuICBpZiAoIXVybCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHRyeSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgdHlwZW9mIHVybCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgLy8gTGV0IFVSTHMgYmVnaW5uaW5nIHdpdGggXCJ3d3cuXCIgZGVmYXVsdCB0byB1c2luZyB0aGUgXCJodHRwOi8vXCIgcHJvdG9jb2wuXG4gICAgICBpZiAob3B0aW9ucy5hZGREZWZhdWx0UHJvdG9jb2wgJiYgdXJsLnN0YXJ0c1dpdGgoXCJ3d3cuXCIpKSB7XG4gICAgICAgIGNvbnN0IGRvdHMgPSB1cmwubWF0Y2goL1xcLi9nKTtcbiAgICAgICAgLy8gQXZvaWQgYWNjaWRlbnRhbGx5IG1hdGNoaW5nIGEgKnJlbGF0aXZlKiBVUkwgcG9pbnRpbmcgdG8gYSBmaWxlIG5hbWVkXG4gICAgICAgIC8vIGUuZy4gXCJ3d3cucGRmXCIgb3Igc2ltaWxhci5cbiAgICAgICAgaWYgKGRvdHMgJiYgZG90cy5sZW5ndGggPj0gMikge1xuICAgICAgICAgIHVybCA9IGBodHRwOi8vJHt1cmx9YDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBBY2NvcmRpbmcgdG8gSVNPIDMyMDAwLTE6MjAwOCwgc2VjdGlvbiAxMi42LjQuNywgVVJJcyBzaG91bGQgYmUgZW5jb2RlZFxuICAgICAgLy8gaW4gNy1iaXQgQVNDSUkuIFNvbWUgYmFkIFBERnMgdXNlIFVURi04IGVuY29kaW5nOyBzZWUgYnVnIDExMjIyODAuXG4gICAgICBpZiAob3B0aW9ucy50cnlDb252ZXJ0RW5jb2RpbmcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB1cmwgPSBzdHJpbmdUb1VURjhTdHJpbmcodXJsKTtcbiAgICAgICAgfSBjYXRjaCAoZXgpIHt9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYWJzb2x1dGVVcmwgPSBiYXNlVXJsID8gbmV3IFVSTCh1cmwsIGJhc2VVcmwpIDogbmV3IFVSTCh1cmwpO1xuICAgIGlmIChfaXNWYWxpZFByb3RvY29sKGFic29sdXRlVXJsKSkge1xuICAgICAgcmV0dXJuIGFic29sdXRlVXJsO1xuICAgIH1cbiAgfSBjYXRjaCAoZXgpIHtcbiAgICAvKiBgbmV3IFVSTCgpYCB3aWxsIHRocm93IG9uIGluY29ycmVjdCBkYXRhLiAqL1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBzaGFkb3cob2JqLCBwcm9wLCB2YWx1ZSkge1xuICBpZiAoXG4gICAgdHlwZW9mIFBERkpTRGV2ID09PSBcInVuZGVmaW5lZFwiIHx8XG4gICAgUERGSlNEZXYudGVzdChcIiFQUk9EVUNUSU9OIHx8IFRFU1RJTkdcIilcbiAgKSB7XG4gICAgYXNzZXJ0KFxuICAgICAgcHJvcCBpbiBvYmosXG4gICAgICBgc2hhZG93OiBQcm9wZXJ0eSBcIiR7cHJvcCAmJiBwcm9wLnRvU3RyaW5nKCl9XCIgbm90IGZvdW5kIGluIG9iamVjdC5gXG4gICAgKTtcbiAgfVxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBwcm9wLCB7XG4gICAgdmFsdWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgd3JpdGFibGU6IGZhbHNlLFxuICB9KTtcbiAgcmV0dXJuIHZhbHVlO1xufVxuXG4vKipcbiAqIEB0eXBlIHthbnl9XG4gKi9cbmNvbnN0IEJhc2VFeGNlcHRpb24gPSAoZnVuY3Rpb24gQmFzZUV4Y2VwdGlvbkNsb3N1cmUoKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zaGFkb3dcbiAgZnVuY3Rpb24gQmFzZUV4Y2VwdGlvbihtZXNzYWdlLCBuYW1lKSB7XG4gICAgaWYgKHRoaXMuY29uc3RydWN0b3IgPT09IEJhc2VFeGNlcHRpb24pIHtcbiAgICAgIHVucmVhY2hhYmxlKFwiQ2Fubm90IGluaXRpYWxpemUgQmFzZUV4Y2VwdGlvbi5cIik7XG4gICAgfVxuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgfVxuICBCYXNlRXhjZXB0aW9uLnByb3RvdHlwZSA9IG5ldyBFcnJvcigpO1xuICBCYXNlRXhjZXB0aW9uLmNvbnN0cnVjdG9yID0gQmFzZUV4Y2VwdGlvbjtcblxuICByZXR1cm4gQmFzZUV4Y2VwdGlvbjtcbn0pKCk7XG5cbmNsYXNzIFBhc3N3b3JkRXhjZXB0aW9uIGV4dGVuZHMgQmFzZUV4Y2VwdGlvbiB7XG4gIGNvbnN0cnVjdG9yKG1zZywgY29kZSkge1xuICAgIHN1cGVyKG1zZywgXCJQYXNzd29yZEV4Y2VwdGlvblwiKTtcbiAgICB0aGlzLmNvZGUgPSBjb2RlO1xuICB9XG59XG5cbmNsYXNzIFVua25vd25FcnJvckV4Y2VwdGlvbiBleHRlbmRzIEJhc2VFeGNlcHRpb24ge1xuICBjb25zdHJ1Y3Rvcihtc2csIGRldGFpbHMpIHtcbiAgICBzdXBlcihtc2csIFwiVW5rbm93bkVycm9yRXhjZXB0aW9uXCIpO1xuICAgIHRoaXMuZGV0YWlscyA9IGRldGFpbHM7XG4gIH1cbn1cblxuY2xhc3MgSW52YWxpZFBERkV4Y2VwdGlvbiBleHRlbmRzIEJhc2VFeGNlcHRpb24ge1xuICBjb25zdHJ1Y3Rvcihtc2cpIHtcbiAgICBzdXBlcihtc2csIFwiSW52YWxpZFBERkV4Y2VwdGlvblwiKTtcbiAgfVxufVxuXG5jbGFzcyBNaXNzaW5nUERGRXhjZXB0aW9uIGV4dGVuZHMgQmFzZUV4Y2VwdGlvbiB7XG4gIGNvbnN0cnVjdG9yKG1zZykge1xuICAgIHN1cGVyKG1zZywgXCJNaXNzaW5nUERGRXhjZXB0aW9uXCIpO1xuICB9XG59XG5cbmNsYXNzIFVuZXhwZWN0ZWRSZXNwb25zZUV4Y2VwdGlvbiBleHRlbmRzIEJhc2VFeGNlcHRpb24ge1xuICBjb25zdHJ1Y3Rvcihtc2csIHN0YXR1cykge1xuICAgIHN1cGVyKG1zZywgXCJVbmV4cGVjdGVkUmVzcG9uc2VFeGNlcHRpb25cIik7XG4gICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gIH1cbn1cblxuLyoqXG4gKiBFcnJvciBjYXVzZWQgZHVyaW5nIHBhcnNpbmcgUERGIGRhdGEuXG4gKi9cbmNsYXNzIEZvcm1hdEVycm9yIGV4dGVuZHMgQmFzZUV4Y2VwdGlvbiB7XG4gIGNvbnN0cnVjdG9yKG1zZykge1xuICAgIHN1cGVyKG1zZywgXCJGb3JtYXRFcnJvclwiKTtcbiAgfVxufVxuXG4vKipcbiAqIEVycm9yIHVzZWQgdG8gaW5kaWNhdGUgdGFzayBjYW5jZWxsYXRpb24uXG4gKi9cbmNsYXNzIEFib3J0RXhjZXB0aW9uIGV4dGVuZHMgQmFzZUV4Y2VwdGlvbiB7XG4gIGNvbnN0cnVjdG9yKG1zZykge1xuICAgIHN1cGVyKG1zZywgXCJBYm9ydEV4Y2VwdGlvblwiKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBieXRlc1RvU3RyaW5nKGJ5dGVzKSB7XG4gIGlmIChcbiAgICB0eXBlb2YgYnl0ZXMgIT09IFwib2JqZWN0XCIgfHxcbiAgICBieXRlcyA9PT0gbnVsbCB8fFxuICAgIGJ5dGVzLmxlbmd0aCA9PT0gdW5kZWZpbmVkXG4gICkge1xuICAgIHVucmVhY2hhYmxlKFwiSW52YWxpZCBhcmd1bWVudCBmb3IgYnl0ZXNUb1N0cmluZ1wiKTtcbiAgfVxuICBjb25zdCBsZW5ndGggPSBieXRlcy5sZW5ndGg7XG4gIGNvbnN0IE1BWF9BUkdVTUVOVF9DT1VOVCA9IDgxOTI7XG4gIGlmIChsZW5ndGggPCBNQVhfQVJHVU1FTlRfQ09VTlQpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBieXRlcyk7XG4gIH1cbiAgY29uc3Qgc3RyQnVmID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IE1BWF9BUkdVTUVOVF9DT1VOVCkge1xuICAgIGNvbnN0IGNodW5rRW5kID0gTWF0aC5taW4oaSArIE1BWF9BUkdVTUVOVF9DT1VOVCwgbGVuZ3RoKTtcbiAgICBjb25zdCBjaHVuayA9IGJ5dGVzLnN1YmFycmF5KGksIGNodW5rRW5kKTtcbiAgICBzdHJCdWYucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGNodW5rKSk7XG4gIH1cbiAgcmV0dXJuIHN0ckJ1Zi5qb2luKFwiXCIpO1xufVxuXG5mdW5jdGlvbiBzdHJpbmdUb0J5dGVzKHN0cikge1xuICBpZiAodHlwZW9mIHN0ciAhPT0gXCJzdHJpbmdcIikge1xuICAgIHVucmVhY2hhYmxlKFwiSW52YWxpZCBhcmd1bWVudCBmb3Igc3RyaW5nVG9CeXRlc1wiKTtcbiAgfVxuICBjb25zdCBsZW5ndGggPSBzdHIubGVuZ3RoO1xuICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICBieXRlc1tpXSA9IHN0ci5jaGFyQ29kZUF0KGkpICYgMHhmZjtcbiAgfVxuICByZXR1cm4gYnl0ZXM7XG59XG5cbi8qKlxuICogR2V0cyBsZW5ndGggb2YgdGhlIGFycmF5IChBcnJheSwgVWludDhBcnJheSwgb3Igc3RyaW5nKSBpbiBieXRlcy5cbiAqIEBwYXJhbSB7QXJyYXk8YW55PnxVaW50OEFycmF5fHN0cmluZ30gYXJyXG4gKiBAcmV0dXJucyB7bnVtYmVyfVxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29uc2lzdGVudC1yZXR1cm5cbmZ1bmN0aW9uIGFycmF5Qnl0ZUxlbmd0aChhcnIpIHtcbiAgaWYgKGFyci5sZW5ndGggIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBhcnIubGVuZ3RoO1xuICB9XG4gIGlmIChhcnIuYnl0ZUxlbmd0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGFyci5ieXRlTGVuZ3RoO1xuICB9XG4gIHVucmVhY2hhYmxlKFwiSW52YWxpZCBhcmd1bWVudCBmb3IgYXJyYXlCeXRlTGVuZ3RoXCIpO1xufVxuXG4vKipcbiAqIENvbWJpbmVzIGFycmF5IGl0ZW1zIChhcnJheXMpIGludG8gc2luZ2xlIFVpbnQ4QXJyYXkgb2JqZWN0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxhbnk+fFVpbnQ4QXJyYXl8c3RyaW5nPn0gYXJyIC0gdGhlIGFycmF5IG9mIHRoZSBhcnJheXNcbiAqICAgKEFycmF5LCBVaW50OEFycmF5LCBvciBzdHJpbmcpLlxuICogQHJldHVybnMge1VpbnQ4QXJyYXl9XG4gKi9cbmZ1bmN0aW9uIGFycmF5c1RvQnl0ZXMoYXJyKSB7XG4gIGNvbnN0IGxlbmd0aCA9IGFyci5sZW5ndGg7XG4gIC8vIFNob3J0Y3V0OiBpZiBmaXJzdCBhbmQgb25seSBpdGVtIGlzIFVpbnQ4QXJyYXksIHJldHVybiBpdC5cbiAgaWYgKGxlbmd0aCA9PT0gMSAmJiBhcnJbMF0gaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgcmV0dXJuIGFyclswXTtcbiAgfVxuICBsZXQgcmVzdWx0TGVuZ3RoID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHJlc3VsdExlbmd0aCArPSBhcnJheUJ5dGVMZW5ndGgoYXJyW2ldKTtcbiAgfVxuICBsZXQgcG9zID0gMDtcbiAgY29uc3QgZGF0YSA9IG5ldyBVaW50OEFycmF5KHJlc3VsdExlbmd0aCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgaXRlbSA9IGFycltpXTtcbiAgICBpZiAoIShpdGVtIGluc3RhbmNlb2YgVWludDhBcnJheSkpIHtcbiAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpdGVtID0gc3RyaW5nVG9CeXRlcyhpdGVtKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGl0ZW0gPSBuZXcgVWludDhBcnJheShpdGVtKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgaXRlbUxlbmd0aCA9IGl0ZW0uYnl0ZUxlbmd0aDtcbiAgICBkYXRhLnNldChpdGVtLCBwb3MpO1xuICAgIHBvcyArPSBpdGVtTGVuZ3RoO1xuICB9XG4gIHJldHVybiBkYXRhO1xufVxuXG5mdW5jdGlvbiBzdHJpbmczMih2YWx1ZSkge1xuICBpZiAoXG4gICAgdHlwZW9mIFBERkpTRGV2ID09PSBcInVuZGVmaW5lZFwiIHx8XG4gICAgUERGSlNEZXYudGVzdChcIiFQUk9EVUNUSU9OIHx8IFRFU1RJTkdcIilcbiAgKSB7XG4gICAgYXNzZXJ0KFxuICAgICAgdHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiICYmIE1hdGguYWJzKHZhbHVlKSA8IDIgKiogMzIsXG4gICAgICBgc3RyaW5nMzI6IFVuZXhwZWN0ZWQgaW5wdXQgXCIke3ZhbHVlfVwiLmBcbiAgICApO1xuICB9XG4gIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKFxuICAgICh2YWx1ZSA+PiAyNCkgJiAweGZmLFxuICAgICh2YWx1ZSA+PiAxNikgJiAweGZmLFxuICAgICh2YWx1ZSA+PiA4KSAmIDB4ZmYsXG4gICAgdmFsdWUgJiAweGZmXG4gICk7XG59XG5cbmZ1bmN0aW9uIG9iamVjdFNpemUob2JqKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhvYmopLmxlbmd0aDtcbn1cblxuLy8gRW5zdXJlIHRoYXQgdGhlIHJldHVybmVkIE9iamVjdCBoYXMgYSBgbnVsbGAgcHJvdG90eXBlOyBoZW5jZSB3aHlcbi8vIGBPYmplY3QuZnJvbUVudHJpZXMoLi4uKWAgaXMgbm90IHVzZWQuXG5mdW5jdGlvbiBvYmplY3RGcm9tTWFwKG1hcCkge1xuICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBtYXApIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiBvYmo7XG59XG5cbi8vIENoZWNrcyB0aGUgZW5kaWFubmVzcyBvZiB0aGUgcGxhdGZvcm0uXG5mdW5jdGlvbiBpc0xpdHRsZUVuZGlhbigpIHtcbiAgY29uc3QgYnVmZmVyOCA9IG5ldyBVaW50OEFycmF5KDQpO1xuICBidWZmZXI4WzBdID0gMTtcbiAgY29uc3QgdmlldzMyID0gbmV3IFVpbnQzMkFycmF5KGJ1ZmZlcjguYnVmZmVyLCAwLCAxKTtcbiAgcmV0dXJuIHZpZXczMlswXSA9PT0gMTtcbn1cblxuLy8gQ2hlY2tzIGlmIGl0J3MgcG9zc2libGUgdG8gZXZhbCBKUyBleHByZXNzaW9ucy5cbmZ1bmN0aW9uIGlzRXZhbFN1cHBvcnRlZCgpIHtcbiAgdHJ5IHtcbiAgICBuZXcgRnVuY3Rpb24oXCJcIik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3LCBuby1uZXctZnVuY1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmNsYXNzIEZlYXR1cmVUZXN0IHtcbiAgc3RhdGljIGdldCBpc0xpdHRsZUVuZGlhbigpIHtcbiAgICByZXR1cm4gc2hhZG93KHRoaXMsIFwiaXNMaXR0bGVFbmRpYW5cIiwgaXNMaXR0bGVFbmRpYW4oKSk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IGlzRXZhbFN1cHBvcnRlZCgpIHtcbiAgICByZXR1cm4gc2hhZG93KHRoaXMsIFwiaXNFdmFsU3VwcG9ydGVkXCIsIGlzRXZhbFN1cHBvcnRlZCgpKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgaXNPZmZzY3JlZW5DYW52YXNTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIHNoYWRvdyhcbiAgICAgIHRoaXMsXG4gICAgICBcImlzT2Zmc2NyZWVuQ2FudmFzU3VwcG9ydGVkXCIsXG4gICAgICB0eXBlb2YgT2Zmc2NyZWVuQ2FudmFzICE9PSBcInVuZGVmaW5lZFwiXG4gICAgKTtcbiAgfVxufVxuXG5jb25zdCBoZXhOdW1iZXJzID0gWy4uLkFycmF5KDI1Nikua2V5cygpXS5tYXAobiA9PlxuICBuLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCBcIjBcIilcbik7XG5cbmNsYXNzIFV0aWwge1xuICBzdGF0aWMgbWFrZUhleENvbG9yKHIsIGcsIGIpIHtcbiAgICByZXR1cm4gYCMke2hleE51bWJlcnNbcl19JHtoZXhOdW1iZXJzW2ddfSR7aGV4TnVtYmVyc1tiXX1gO1xuICB9XG5cbiAgLy8gQXBwbHkgYSBzY2FsaW5nIG1hdHJpeCB0byBzb21lIG1pbi9tYXggdmFsdWVzLlxuICAvLyBJZiBhIHNjYWxpbmcgZmFjdG9yIGlzIG5lZ2F0aXZlIHRoZW4gbWluIGFuZCBtYXggbXVzdCBiZVxuICAvLyBzd2FwZWQuXG4gIHN0YXRpYyBzY2FsZU1pbk1heCh0cmFuc2Zvcm0sIG1pbk1heCkge1xuICAgIGxldCB0ZW1wO1xuICAgIGlmICh0cmFuc2Zvcm1bMF0pIHtcbiAgICAgIGlmICh0cmFuc2Zvcm1bMF0gPCAwKSB7XG4gICAgICAgIHRlbXAgPSBtaW5NYXhbMF07XG4gICAgICAgIG1pbk1heFswXSA9IG1pbk1heFsxXTtcbiAgICAgICAgbWluTWF4WzFdID0gdGVtcDtcbiAgICAgIH1cbiAgICAgIG1pbk1heFswXSAqPSB0cmFuc2Zvcm1bMF07XG4gICAgICBtaW5NYXhbMV0gKj0gdHJhbnNmb3JtWzBdO1xuXG4gICAgICBpZiAodHJhbnNmb3JtWzNdIDwgMCkge1xuICAgICAgICB0ZW1wID0gbWluTWF4WzJdO1xuICAgICAgICBtaW5NYXhbMl0gPSBtaW5NYXhbM107XG4gICAgICAgIG1pbk1heFszXSA9IHRlbXA7XG4gICAgICB9XG4gICAgICBtaW5NYXhbMl0gKj0gdHJhbnNmb3JtWzNdO1xuICAgICAgbWluTWF4WzNdICo9IHRyYW5zZm9ybVszXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGVtcCA9IG1pbk1heFswXTtcbiAgICAgIG1pbk1heFswXSA9IG1pbk1heFsyXTtcbiAgICAgIG1pbk1heFsyXSA9IHRlbXA7XG4gICAgICB0ZW1wID0gbWluTWF4WzFdO1xuICAgICAgbWluTWF4WzFdID0gbWluTWF4WzNdO1xuICAgICAgbWluTWF4WzNdID0gdGVtcDtcblxuICAgICAgaWYgKHRyYW5zZm9ybVsxXSA8IDApIHtcbiAgICAgICAgdGVtcCA9IG1pbk1heFsyXTtcbiAgICAgICAgbWluTWF4WzJdID0gbWluTWF4WzNdO1xuICAgICAgICBtaW5NYXhbM10gPSB0ZW1wO1xuICAgICAgfVxuICAgICAgbWluTWF4WzJdICo9IHRyYW5zZm9ybVsxXTtcbiAgICAgIG1pbk1heFszXSAqPSB0cmFuc2Zvcm1bMV07XG5cbiAgICAgIGlmICh0cmFuc2Zvcm1bMl0gPCAwKSB7XG4gICAgICAgIHRlbXAgPSBtaW5NYXhbMF07XG4gICAgICAgIG1pbk1heFswXSA9IG1pbk1heFsxXTtcbiAgICAgICAgbWluTWF4WzFdID0gdGVtcDtcbiAgICAgIH1cbiAgICAgIG1pbk1heFswXSAqPSB0cmFuc2Zvcm1bMl07XG4gICAgICBtaW5NYXhbMV0gKj0gdHJhbnNmb3JtWzJdO1xuICAgIH1cbiAgICBtaW5NYXhbMF0gKz0gdHJhbnNmb3JtWzRdO1xuICAgIG1pbk1heFsxXSArPSB0cmFuc2Zvcm1bNF07XG4gICAgbWluTWF4WzJdICs9IHRyYW5zZm9ybVs1XTtcbiAgICBtaW5NYXhbM10gKz0gdHJhbnNmb3JtWzVdO1xuICB9XG5cbiAgLy8gQ29uY2F0ZW5hdGVzIHR3byB0cmFuc2Zvcm1hdGlvbiBtYXRyaWNlcyB0b2dldGhlciBhbmQgcmV0dXJucyB0aGUgcmVzdWx0LlxuICBzdGF0aWMgdHJhbnNmb3JtKG0xLCBtMikge1xuICAgIHJldHVybiBbXG4gICAgICBtMVswXSAqIG0yWzBdICsgbTFbMl0gKiBtMlsxXSxcbiAgICAgIG0xWzFdICogbTJbMF0gKyBtMVszXSAqIG0yWzFdLFxuICAgICAgbTFbMF0gKiBtMlsyXSArIG0xWzJdICogbTJbM10sXG4gICAgICBtMVsxXSAqIG0yWzJdICsgbTFbM10gKiBtMlszXSxcbiAgICAgIG0xWzBdICogbTJbNF0gKyBtMVsyXSAqIG0yWzVdICsgbTFbNF0sXG4gICAgICBtMVsxXSAqIG0yWzRdICsgbTFbM10gKiBtMls1XSArIG0xWzVdLFxuICAgIF07XG4gIH1cblxuICAvLyBGb3IgMmQgYWZmaW5lIHRyYW5zZm9ybXNcbiAgc3RhdGljIGFwcGx5VHJhbnNmb3JtKHAsIG0pIHtcbiAgICBjb25zdCB4dCA9IHBbMF0gKiBtWzBdICsgcFsxXSAqIG1bMl0gKyBtWzRdO1xuICAgIGNvbnN0IHl0ID0gcFswXSAqIG1bMV0gKyBwWzFdICogbVszXSArIG1bNV07XG4gICAgcmV0dXJuIFt4dCwgeXRdO1xuICB9XG5cbiAgc3RhdGljIGFwcGx5SW52ZXJzZVRyYW5zZm9ybShwLCBtKSB7XG4gICAgY29uc3QgZCA9IG1bMF0gKiBtWzNdIC0gbVsxXSAqIG1bMl07XG4gICAgY29uc3QgeHQgPSAocFswXSAqIG1bM10gLSBwWzFdICogbVsyXSArIG1bMl0gKiBtWzVdIC0gbVs0XSAqIG1bM10pIC8gZDtcbiAgICBjb25zdCB5dCA9ICgtcFswXSAqIG1bMV0gKyBwWzFdICogbVswXSArIG1bNF0gKiBtWzFdIC0gbVs1XSAqIG1bMF0pIC8gZDtcbiAgICByZXR1cm4gW3h0LCB5dF07XG4gIH1cblxuICAvLyBBcHBsaWVzIHRoZSB0cmFuc2Zvcm0gdG8gdGhlIHJlY3RhbmdsZSBhbmQgZmluZHMgdGhlIG1pbmltdW0gYXhpYWxseVxuICAvLyBhbGlnbmVkIGJvdW5kaW5nIGJveC5cbiAgc3RhdGljIGdldEF4aWFsQWxpZ25lZEJvdW5kaW5nQm94KHIsIG0pIHtcbiAgICBjb25zdCBwMSA9IFV0aWwuYXBwbHlUcmFuc2Zvcm0ociwgbSk7XG4gICAgY29uc3QgcDIgPSBVdGlsLmFwcGx5VHJhbnNmb3JtKHIuc2xpY2UoMiwgNCksIG0pO1xuICAgIGNvbnN0IHAzID0gVXRpbC5hcHBseVRyYW5zZm9ybShbclswXSwgclszXV0sIG0pO1xuICAgIGNvbnN0IHA0ID0gVXRpbC5hcHBseVRyYW5zZm9ybShbclsyXSwgclsxXV0sIG0pO1xuICAgIHJldHVybiBbXG4gICAgICBNYXRoLm1pbihwMVswXSwgcDJbMF0sIHAzWzBdLCBwNFswXSksXG4gICAgICBNYXRoLm1pbihwMVsxXSwgcDJbMV0sIHAzWzFdLCBwNFsxXSksXG4gICAgICBNYXRoLm1heChwMVswXSwgcDJbMF0sIHAzWzBdLCBwNFswXSksXG4gICAgICBNYXRoLm1heChwMVsxXSwgcDJbMV0sIHAzWzFdLCBwNFsxXSksXG4gICAgXTtcbiAgfVxuXG4gIHN0YXRpYyBpbnZlcnNlVHJhbnNmb3JtKG0pIHtcbiAgICBjb25zdCBkID0gbVswXSAqIG1bM10gLSBtWzFdICogbVsyXTtcbiAgICByZXR1cm4gW1xuICAgICAgbVszXSAvIGQsXG4gICAgICAtbVsxXSAvIGQsXG4gICAgICAtbVsyXSAvIGQsXG4gICAgICBtWzBdIC8gZCxcbiAgICAgIChtWzJdICogbVs1XSAtIG1bNF0gKiBtWzNdKSAvIGQsXG4gICAgICAobVs0XSAqIG1bMV0gLSBtWzVdICogbVswXSkgLyBkLFxuICAgIF07XG4gIH1cblxuICAvLyBBcHBseSBhIGdlbmVyaWMgM2QgbWF0cml4IE0gb24gYSAzLXZlY3RvciB2OlxuICAvLyAgIHwgYSBiIGMgfCAgIHwgWCB8XG4gIC8vICAgfCBkIGUgZiB8IHggfCBZIHxcbiAgLy8gICB8IGcgaCBpIHwgICB8IFogfFxuICAvLyBNIGlzIGFzc3VtZWQgdG8gYmUgc2VyaWFsaXplZCBhcyBbYSxiLGMsZCxlLGYsZyxoLGldLFxuICAvLyB3aXRoIHYgYXMgW1gsWSxaXVxuICBzdGF0aWMgYXBwbHkzZFRyYW5zZm9ybShtLCB2KSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIG1bMF0gKiB2WzBdICsgbVsxXSAqIHZbMV0gKyBtWzJdICogdlsyXSxcbiAgICAgIG1bM10gKiB2WzBdICsgbVs0XSAqIHZbMV0gKyBtWzVdICogdlsyXSxcbiAgICAgIG1bNl0gKiB2WzBdICsgbVs3XSAqIHZbMV0gKyBtWzhdICogdlsyXSxcbiAgICBdO1xuICB9XG5cbiAgLy8gVGhpcyBjYWxjdWxhdGlvbiB1c2VzIFNpbmd1bGFyIFZhbHVlIERlY29tcG9zaXRpb24uXG4gIC8vIFRoZSBTVkQgY2FuIGJlIHJlcHJlc2VudGVkIHdpdGggZm9ybXVsYSBBID0gVVNWLiBXZSBhcmUgaW50ZXJlc3RlZCBpbiB0aGVcbiAgLy8gbWF0cml4IFMgaGVyZSBiZWNhdXNlIGl0IHJlcHJlc2VudHMgdGhlIHNjYWxlIHZhbHVlcy5cbiAgc3RhdGljIHNpbmd1bGFyVmFsdWVEZWNvbXBvc2UyZFNjYWxlKG0pIHtcbiAgICBjb25zdCB0cmFuc3Bvc2UgPSBbbVswXSwgbVsyXSwgbVsxXSwgbVszXV07XG5cbiAgICAvLyBNdWx0aXBseSBtYXRyaXggbSB3aXRoIGl0cyB0cmFuc3Bvc2UuXG4gICAgY29uc3QgYSA9IG1bMF0gKiB0cmFuc3Bvc2VbMF0gKyBtWzFdICogdHJhbnNwb3NlWzJdO1xuICAgIGNvbnN0IGIgPSBtWzBdICogdHJhbnNwb3NlWzFdICsgbVsxXSAqIHRyYW5zcG9zZVszXTtcbiAgICBjb25zdCBjID0gbVsyXSAqIHRyYW5zcG9zZVswXSArIG1bM10gKiB0cmFuc3Bvc2VbMl07XG4gICAgY29uc3QgZCA9IG1bMl0gKiB0cmFuc3Bvc2VbMV0gKyBtWzNdICogdHJhbnNwb3NlWzNdO1xuXG4gICAgLy8gU29sdmUgdGhlIHNlY29uZCBkZWdyZWUgcG9seW5vbWlhbCB0byBnZXQgcm9vdHMuXG4gICAgY29uc3QgZmlyc3QgPSAoYSArIGQpIC8gMjtcbiAgICBjb25zdCBzZWNvbmQgPSBNYXRoLnNxcnQoKGEgKyBkKSAqKiAyIC0gNCAqIChhICogZCAtIGMgKiBiKSkgLyAyO1xuICAgIGNvbnN0IHN4ID0gZmlyc3QgKyBzZWNvbmQgfHwgMTtcbiAgICBjb25zdCBzeSA9IGZpcnN0IC0gc2Vjb25kIHx8IDE7XG5cbiAgICAvLyBTY2FsZSB2YWx1ZXMgYXJlIHRoZSBzcXVhcmUgcm9vdHMgb2YgdGhlIGVpZ2VudmFsdWVzLlxuICAgIHJldHVybiBbTWF0aC5zcXJ0KHN4KSwgTWF0aC5zcXJ0KHN5KV07XG4gIH1cblxuICAvLyBOb3JtYWxpemUgcmVjdGFuZ2xlIHJlY3Q9W3gxLCB5MSwgeDIsIHkyXSBzbyB0aGF0ICh4MSx5MSkgPCAoeDIseTIpXG4gIC8vIEZvciBjb29yZGluYXRlIHN5c3RlbXMgd2hvc2Ugb3JpZ2luIGxpZXMgaW4gdGhlIGJvdHRvbS1sZWZ0LCB0aGlzXG4gIC8vIG1lYW5zIG5vcm1hbGl6YXRpb24gdG8gKEJMLFRSKSBvcmRlcmluZy4gRm9yIHN5c3RlbXMgd2l0aCBvcmlnaW4gaW4gdGhlXG4gIC8vIHRvcC1sZWZ0LCB0aGlzIG1lYW5zIChUTCxCUikgb3JkZXJpbmcuXG4gIHN0YXRpYyBub3JtYWxpemVSZWN0KHJlY3QpIHtcbiAgICBjb25zdCByID0gcmVjdC5zbGljZSgwKTsgLy8gY2xvbmUgcmVjdFxuICAgIGlmIChyZWN0WzBdID4gcmVjdFsyXSkge1xuICAgICAgclswXSA9IHJlY3RbMl07XG4gICAgICByWzJdID0gcmVjdFswXTtcbiAgICB9XG4gICAgaWYgKHJlY3RbMV0gPiByZWN0WzNdKSB7XG4gICAgICByWzFdID0gcmVjdFszXTtcbiAgICAgIHJbM10gPSByZWN0WzFdO1xuICAgIH1cbiAgICByZXR1cm4gcjtcbiAgfVxuXG4gIC8vIFJldHVybnMgYSByZWN0YW5nbGUgW3gxLCB5MSwgeDIsIHkyXSBjb3JyZXNwb25kaW5nIHRvIHRoZVxuICAvLyBpbnRlcnNlY3Rpb24gb2YgcmVjdDEgYW5kIHJlY3QyLiBJZiBubyBpbnRlcnNlY3Rpb24sIHJldHVybnMgJ251bGwnXG4gIC8vIFRoZSByZWN0YW5nbGUgY29vcmRpbmF0ZXMgb2YgcmVjdDEsIHJlY3QyIHNob3VsZCBiZSBbeDEsIHkxLCB4MiwgeTJdXG4gIHN0YXRpYyBpbnRlcnNlY3QocmVjdDEsIHJlY3QyKSB7XG4gICAgY29uc3QgeExvdyA9IE1hdGgubWF4KFxuICAgICAgTWF0aC5taW4ocmVjdDFbMF0sIHJlY3QxWzJdKSxcbiAgICAgIE1hdGgubWluKHJlY3QyWzBdLCByZWN0MlsyXSlcbiAgICApO1xuICAgIGNvbnN0IHhIaWdoID0gTWF0aC5taW4oXG4gICAgICBNYXRoLm1heChyZWN0MVswXSwgcmVjdDFbMl0pLFxuICAgICAgTWF0aC5tYXgocmVjdDJbMF0sIHJlY3QyWzJdKVxuICAgICk7XG4gICAgaWYgKHhMb3cgPiB4SGlnaCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHlMb3cgPSBNYXRoLm1heChcbiAgICAgIE1hdGgubWluKHJlY3QxWzFdLCByZWN0MVszXSksXG4gICAgICBNYXRoLm1pbihyZWN0MlsxXSwgcmVjdDJbM10pXG4gICAgKTtcbiAgICBjb25zdCB5SGlnaCA9IE1hdGgubWluKFxuICAgICAgTWF0aC5tYXgocmVjdDFbMV0sIHJlY3QxWzNdKSxcbiAgICAgIE1hdGgubWF4KHJlY3QyWzFdLCByZWN0MlszXSlcbiAgICApO1xuICAgIGlmICh5TG93ID4geUhpZ2gpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBbeExvdywgeUxvdywgeEhpZ2gsIHlIaWdoXTtcbiAgfVxuXG4gIC8vIEZyb20gaHR0cHM6Ly9naXRodWIuY29tL2Fkb2JlLXdlYnBsYXRmb3JtL1NuYXAuc3ZnL2Jsb2IvYjM2NTI4NzcyMmE3MjUyNjAwMGFjNGJmY2YwY2U0Y2FjMmZhYTAxNS9zcmMvcGF0aC5qcyNMODUyXG4gIHN0YXRpYyBiZXppZXJCb3VuZGluZ0JveCh4MCwgeTAsIHgxLCB5MSwgeDIsIHkyLCB4MywgeTMpIHtcbiAgICBjb25zdCB0dmFsdWVzID0gW10sXG4gICAgICBib3VuZHMgPSBbW10sIFtdXTtcbiAgICBsZXQgYSwgYiwgYywgdCwgdDEsIHQyLCBiMmFjLCBzcXJ0YjJhYztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI7ICsraSkge1xuICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgYiA9IDYgKiB4MCAtIDEyICogeDEgKyA2ICogeDI7XG4gICAgICAgIGEgPSAtMyAqIHgwICsgOSAqIHgxIC0gOSAqIHgyICsgMyAqIHgzO1xuICAgICAgICBjID0gMyAqIHgxIC0gMyAqIHgwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYiA9IDYgKiB5MCAtIDEyICogeTEgKyA2ICogeTI7XG4gICAgICAgIGEgPSAtMyAqIHkwICsgOSAqIHkxIC0gOSAqIHkyICsgMyAqIHkzO1xuICAgICAgICBjID0gMyAqIHkxIC0gMyAqIHkwO1xuICAgICAgfVxuICAgICAgaWYgKE1hdGguYWJzKGEpIDwgMWUtMTIpIHtcbiAgICAgICAgaWYgKE1hdGguYWJzKGIpIDwgMWUtMTIpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0ID0gLWMgLyBiO1xuICAgICAgICBpZiAoMCA8IHQgJiYgdCA8IDEpIHtcbiAgICAgICAgICB0dmFsdWVzLnB1c2godCk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBiMmFjID0gYiAqIGIgLSA0ICogYyAqIGE7XG4gICAgICBzcXJ0YjJhYyA9IE1hdGguc3FydChiMmFjKTtcbiAgICAgIGlmIChiMmFjIDwgMCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHQxID0gKC1iICsgc3FydGIyYWMpIC8gKDIgKiBhKTtcbiAgICAgIGlmICgwIDwgdDEgJiYgdDEgPCAxKSB7XG4gICAgICAgIHR2YWx1ZXMucHVzaCh0MSk7XG4gICAgICB9XG4gICAgICB0MiA9ICgtYiAtIHNxcnRiMmFjKSAvICgyICogYSk7XG4gICAgICBpZiAoMCA8IHQyICYmIHQyIDwgMSkge1xuICAgICAgICB0dmFsdWVzLnB1c2godDIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBqID0gdHZhbHVlcy5sZW5ndGgsXG4gICAgICBtdDtcbiAgICBjb25zdCBqbGVuID0gajtcbiAgICB3aGlsZSAoai0tKSB7XG4gICAgICB0ID0gdHZhbHVlc1tqXTtcbiAgICAgIG10ID0gMSAtIHQ7XG4gICAgICBib3VuZHNbMF1bal0gPVxuICAgICAgICBtdCAqIG10ICogbXQgKiB4MCArXG4gICAgICAgIDMgKiBtdCAqIG10ICogdCAqIHgxICtcbiAgICAgICAgMyAqIG10ICogdCAqIHQgKiB4MiArXG4gICAgICAgIHQgKiB0ICogdCAqIHgzO1xuICAgICAgYm91bmRzWzFdW2pdID1cbiAgICAgICAgbXQgKiBtdCAqIG10ICogeTAgK1xuICAgICAgICAzICogbXQgKiBtdCAqIHQgKiB5MSArXG4gICAgICAgIDMgKiBtdCAqIHQgKiB0ICogeTIgK1xuICAgICAgICB0ICogdCAqIHQgKiB5MztcbiAgICB9XG5cbiAgICBib3VuZHNbMF1bamxlbl0gPSB4MDtcbiAgICBib3VuZHNbMV1bamxlbl0gPSB5MDtcbiAgICBib3VuZHNbMF1bamxlbiArIDFdID0geDM7XG4gICAgYm91bmRzWzFdW2psZW4gKyAxXSA9IHkzO1xuICAgIGJvdW5kc1swXS5sZW5ndGggPSBib3VuZHNbMV0ubGVuZ3RoID0gamxlbiArIDI7XG5cbiAgICByZXR1cm4gW1xuICAgICAgTWF0aC5taW4oLi4uYm91bmRzWzBdKSxcbiAgICAgIE1hdGgubWluKC4uLmJvdW5kc1sxXSksXG4gICAgICBNYXRoLm1heCguLi5ib3VuZHNbMF0pLFxuICAgICAgTWF0aC5tYXgoLi4uYm91bmRzWzFdKSxcbiAgICBdO1xuICB9XG59XG5cbmNvbnN0IFBERlN0cmluZ1RyYW5zbGF0ZVRhYmxlID0gW1xuICAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAweDJkOCxcbiAgMHgyYzcsIDB4MmM2LCAweDJkOSwgMHgyZGQsIDB4MmRiLCAweDJkYSwgMHgyZGMsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsXG4gIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsXG4gIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsXG4gIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsXG4gIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDB4MjAyMiwgMHgyMDIwLCAweDIwMjEsIDB4MjAyNiwgMHgyMDE0LCAweDIwMTMsIDB4MTkyLFxuICAweDIwNDQsIDB4MjAzOSwgMHgyMDNhLCAweDIyMTIsIDB4MjAzMCwgMHgyMDFlLCAweDIwMWMsIDB4MjAxZCwgMHgyMDE4LFxuICAweDIwMTksIDB4MjAxYSwgMHgyMTIyLCAweGZiMDEsIDB4ZmIwMiwgMHgxNDEsIDB4MTUyLCAweDE2MCwgMHgxNzgsIDB4MTdkLFxuICAweDEzMSwgMHgxNDIsIDB4MTUzLCAweDE2MSwgMHgxN2UsIDAsIDB4MjBhYyxcbl07XG5cbmZ1bmN0aW9uIHN0cmluZ1RvUERGU3RyaW5nKHN0cikge1xuICBpZiAoc3RyWzBdID49IFwiXFx4RUZcIikge1xuICAgIGxldCBlbmNvZGluZztcbiAgICBpZiAoc3RyWzBdID09PSBcIlxceEZFXCIgJiYgc3RyWzFdID09PSBcIlxceEZGXCIpIHtcbiAgICAgIGVuY29kaW5nID0gXCJ1dGYtMTZiZVwiO1xuICAgIH0gZWxzZSBpZiAoc3RyWzBdID09PSBcIlxceEZGXCIgJiYgc3RyWzFdID09PSBcIlxceEZFXCIpIHtcbiAgICAgIGVuY29kaW5nID0gXCJ1dGYtMTZsZVwiO1xuICAgIH0gZWxzZSBpZiAoc3RyWzBdID09PSBcIlxceEVGXCIgJiYgc3RyWzFdID09PSBcIlxceEJCXCIgJiYgc3RyWzJdID09PSBcIlxceEJGXCIpIHtcbiAgICAgIGVuY29kaW5nID0gXCJ1dGYtOFwiO1xuICAgIH1cblxuICAgIGlmIChlbmNvZGluZykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcihlbmNvZGluZywgeyBmYXRhbDogdHJ1ZSB9KTtcbiAgICAgICAgY29uc3QgYnVmZmVyID0gc3RyaW5nVG9CeXRlcyhzdHIpO1xuICAgICAgICByZXR1cm4gZGVjb2Rlci5kZWNvZGUoYnVmZmVyKTtcbiAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgIHdhcm4oYHN0cmluZ1RvUERGU3RyaW5nOiBcIiR7ZXh9XCIuYCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIElTTyBMYXRpbiAxXG4gIGNvbnN0IHN0ckJ1ZiA9IFtdO1xuICBmb3IgKGxldCBpID0gMCwgaWkgPSBzdHIubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgIGNvbnN0IGNvZGUgPSBQREZTdHJpbmdUcmFuc2xhdGVUYWJsZVtzdHIuY2hhckNvZGVBdChpKV07XG4gICAgc3RyQnVmLnB1c2goY29kZSA/IFN0cmluZy5mcm9tQ2hhckNvZGUoY29kZSkgOiBzdHIuY2hhckF0KGkpKTtcbiAgfVxuICByZXR1cm4gc3RyQnVmLmpvaW4oXCJcIik7XG59XG5cbmZ1bmN0aW9uIGVzY2FwZVN0cmluZyhzdHIpIHtcbiAgLy8gcmVwbGFjZSBcIihcIiwgXCIpXCIsIFwiXFxuXCIsIFwiXFxyXCIgYW5kIFwiXFxcIlxuICAvLyBieSBcIlxcKFwiLCBcIlxcKVwiLCBcIlxcXFxuXCIsIFwiXFxcXHJcIiBhbmQgXCJcXFxcXCJcbiAgLy8gaW4gb3JkZXIgdG8gd3JpdGUgaXQgaW4gYSBQREYgZmlsZS5cbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oWygpXFxcXFxcblxccl0pL2csIG1hdGNoID0+IHtcbiAgICBpZiAobWF0Y2ggPT09IFwiXFxuXCIpIHtcbiAgICAgIHJldHVybiBcIlxcXFxuXCI7XG4gICAgfSBlbHNlIGlmIChtYXRjaCA9PT0gXCJcXHJcIikge1xuICAgICAgcmV0dXJuIFwiXFxcXHJcIjtcbiAgICB9XG4gICAgcmV0dXJuIGBcXFxcJHttYXRjaH1gO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaXNBc2NpaShzdHIpIHtcbiAgcmV0dXJuIC9eW1xceDAwLVxceDdGXSokLy50ZXN0KHN0cik7XG59XG5cbmZ1bmN0aW9uIHN0cmluZ1RvVVRGMTZCRVN0cmluZyhzdHIpIHtcbiAgY29uc3QgYnVmID0gW1wiXFx4RkVcXHhGRlwiXTtcbiAgZm9yIChsZXQgaSA9IDAsIGlpID0gc3RyLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICBjb25zdCBjaGFyID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgYnVmLnB1c2goXG4gICAgICBTdHJpbmcuZnJvbUNoYXJDb2RlKChjaGFyID4+IDgpICYgMHhmZiksXG4gICAgICBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoYXIgJiAweGZmKVxuICAgICk7XG4gIH1cbiAgcmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufVxuXG5mdW5jdGlvbiBzdHJpbmdUb1VURjhTdHJpbmcoc3RyKSB7XG4gIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKHN0cikpO1xufVxuXG5mdW5jdGlvbiB1dGY4U3RyaW5nVG9TdHJpbmcoc3RyKSB7XG4gIHJldHVybiB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoc3RyKSk7XG59XG5cbmZ1bmN0aW9uIGlzQXJyYXlCdWZmZXIodikge1xuICByZXR1cm4gdHlwZW9mIHYgPT09IFwib2JqZWN0XCIgJiYgdiAhPT0gbnVsbCAmJiB2LmJ5dGVMZW5ndGggIT09IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gaXNBcnJheUVxdWFsKGFycjEsIGFycjIpIHtcbiAgaWYgKGFycjEubGVuZ3RoICE9PSBhcnIyLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBmb3IgKGxldCBpID0gMCwgaWkgPSBhcnIxLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICBpZiAoYXJyMVtpXSAhPT0gYXJyMltpXSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gZ2V0TW9kaWZpY2F0aW9uRGF0ZShkYXRlID0gbmV3IERhdGUoKSkge1xuICBjb25zdCBidWZmZXIgPSBbXG4gICAgZGF0ZS5nZXRVVENGdWxsWWVhcigpLnRvU3RyaW5nKCksXG4gICAgKGRhdGUuZ2V0VVRDTW9udGgoKSArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpLFxuICAgIGRhdGUuZ2V0VVRDRGF0ZSgpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpLFxuICAgIGRhdGUuZ2V0VVRDSG91cnMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKSxcbiAgICBkYXRlLmdldFVUQ01pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKSxcbiAgICBkYXRlLmdldFVUQ1NlY29uZHMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKSxcbiAgXTtcblxuICByZXR1cm4gYnVmZmVyLmpvaW4oXCJcIik7XG59XG5cbi8qKlxuICogUHJvbWlzZSBDYXBhYmlsaXR5IG9iamVjdC5cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBQcm9taXNlQ2FwYWJpbGl0eVxuICogQHByb3BlcnR5IHtQcm9taXNlPGFueT59IHByb21pc2UgLSBBIFByb21pc2Ugb2JqZWN0LlxuICogQHByb3BlcnR5IHtib29sZWFufSBzZXR0bGVkIC0gSWYgdGhlIFByb21pc2UgaGFzIGJlZW4gZnVsZmlsbGVkL3JlamVjdGVkLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbn0gcmVzb2x2ZSAtIEZ1bGZpbGxzIHRoZSBQcm9taXNlLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbn0gcmVqZWN0IC0gUmVqZWN0cyB0aGUgUHJvbWlzZS5cbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBwcm9taXNlIGNhcGFiaWxpdHkgb2JqZWN0LlxuICogQGFsaWFzIGNyZWF0ZVByb21pc2VDYXBhYmlsaXR5XG4gKlxuICogQHJldHVybnMge1Byb21pc2VDYXBhYmlsaXR5fVxuICovXG5mdW5jdGlvbiBjcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSgpIHtcbiAgY29uc3QgY2FwYWJpbGl0eSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGxldCBpc1NldHRsZWQgPSBmYWxzZTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY2FwYWJpbGl0eSwgXCJzZXR0bGVkXCIsIHtcbiAgICBnZXQoKSB7XG4gICAgICByZXR1cm4gaXNTZXR0bGVkO1xuICAgIH0sXG4gIH0pO1xuICBjYXBhYmlsaXR5LnByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgY2FwYWJpbGl0eS5yZXNvbHZlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIGlzU2V0dGxlZCA9IHRydWU7XG4gICAgICByZXNvbHZlKGRhdGEpO1xuICAgIH07XG4gICAgY2FwYWJpbGl0eS5yZWplY3QgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICBpc1NldHRsZWQgPSB0cnVlO1xuICAgICAgcmVqZWN0KHJlYXNvbik7XG4gICAgfTtcbiAgfSk7XG4gIHJldHVybiBjYXBhYmlsaXR5O1xufVxuXG5leHBvcnQge1xuICBBYm9ydEV4Y2VwdGlvbixcbiAgQW5ub3RhdGlvbkFjdGlvbkV2ZW50VHlwZSxcbiAgQW5ub3RhdGlvbkJvcmRlclN0eWxlVHlwZSxcbiAgQW5ub3RhdGlvbkZpZWxkRmxhZyxcbiAgQW5ub3RhdGlvbkZsYWcsXG4gIEFubm90YXRpb25NYXJrZWRTdGF0ZSxcbiAgQW5ub3RhdGlvbk1vZGUsXG4gIEFubm90YXRpb25SZXBseVR5cGUsXG4gIEFubm90YXRpb25SZXZpZXdTdGF0ZSxcbiAgQW5ub3RhdGlvblN0YXRlTW9kZWxUeXBlLFxuICBBbm5vdGF0aW9uVHlwZSxcbiAgYXJyYXlCeXRlTGVuZ3RoLFxuICBhcnJheXNUb0J5dGVzLFxuICBhc3NlcnQsXG4gIEJhc2VFeGNlcHRpb24sXG4gIGJ5dGVzVG9TdHJpbmcsXG4gIENNYXBDb21wcmVzc2lvblR5cGUsXG4gIGNyZWF0ZVByb21pc2VDYXBhYmlsaXR5LFxuICBjcmVhdGVWYWxpZEFic29sdXRlVXJsLFxuICBEb2N1bWVudEFjdGlvbkV2ZW50VHlwZSxcbiAgZXNjYXBlU3RyaW5nLFxuICBGZWF0dXJlVGVzdCxcbiAgRk9OVF9JREVOVElUWV9NQVRSSVgsXG4gIEZvbnRUeXBlLFxuICBGb3JtYXRFcnJvcixcbiAgZ2V0TW9kaWZpY2F0aW9uRGF0ZSxcbiAgZ2V0VmVyYm9zaXR5TGV2ZWwsXG4gIElERU5USVRZX01BVFJJWCxcbiAgSW1hZ2VLaW5kLFxuICBpbmZvLFxuICBJbnZhbGlkUERGRXhjZXB0aW9uLFxuICBpc0FycmF5QnVmZmVyLFxuICBpc0FycmF5RXF1YWwsXG4gIGlzQXNjaWksXG4gIE1pc3NpbmdQREZFeGNlcHRpb24sXG4gIG9iamVjdEZyb21NYXAsXG4gIG9iamVjdFNpemUsXG4gIE9QUyxcbiAgUGFnZUFjdGlvbkV2ZW50VHlwZSxcbiAgUGFzc3dvcmRFeGNlcHRpb24sXG4gIFBhc3N3b3JkUmVzcG9uc2VzLFxuICBQZXJtaXNzaW9uRmxhZyxcbiAgUmVuZGVyaW5nSW50ZW50RmxhZyxcbiAgc2V0VmVyYm9zaXR5TGV2ZWwsXG4gIHNoYWRvdyxcbiAgU3RyZWFtVHlwZSxcbiAgc3RyaW5nMzIsXG4gIHN0cmluZ1RvQnl0ZXMsXG4gIHN0cmluZ1RvUERGU3RyaW5nLFxuICBzdHJpbmdUb1VURjE2QkVTdHJpbmcsXG4gIHN0cmluZ1RvVVRGOFN0cmluZyxcbiAgVGV4dFJlbmRlcmluZ01vZGUsXG4gIFVuZXhwZWN0ZWRSZXNwb25zZUV4Y2VwdGlvbixcbiAgVW5rbm93bkVycm9yRXhjZXB0aW9uLFxuICB1bnJlYWNoYWJsZSxcbiAgVU5TVVBQT1JURURfRkVBVFVSRVMsXG4gIHV0ZjhTdHJpbmdUb1N0cmluZyxcbiAgVXRpbCxcbiAgVmVyYm9zaXR5TGV2ZWwsXG4gIHdhcm4sXG59O1xuIiwgIi8qIENvcHlyaWdodCAyMDE3IE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyogZ2xvYmFscyBfX25vbl93ZWJwYWNrX3JlcXVpcmVfXyAqL1xuXG5pbXBvcnQgeyBpc05vZGVKUyB9IGZyb20gXCIuL2lzX25vZGUuanNcIjtcblxuLy8gU2tpcCBjb21wYXRpYmlsaXR5IGNoZWNrcyBmb3IgbW9kZXJuIGJ1aWxkcyBhbmQgaWYgd2UgYWxyZWFkeSByYW4gdGhlIG1vZHVsZS5cbmlmIChcbiAgKHR5cGVvZiBQREZKU0RldiA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhUERGSlNEZXYudGVzdChcIlNLSVBfQkFCRUxcIikpICYmXG4gICFnbG9iYWxUaGlzLl9wZGZqc0NvbXBhdGliaWxpdHlDaGVja2VkXG4pIHtcbiAgZ2xvYmFsVGhpcy5fcGRmanNDb21wYXRpYmlsaXR5Q2hlY2tlZCA9IHRydWU7XG5cbiAgLy8gU3VwcG9ydDogTm9kZS5qc1xuICAoZnVuY3Rpb24gY2hlY2tOb2RlQnRvYSgpIHtcbiAgICBpZiAoZ2xvYmFsVGhpcy5idG9hIHx8ICFpc05vZGVKUykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBnbG9iYWxUaGlzLmJ0b2EgPSBmdW5jdGlvbiAoY2hhcnMpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgICAgcmV0dXJuIEJ1ZmZlci5mcm9tKGNoYXJzLCBcImJpbmFyeVwiKS50b1N0cmluZyhcImJhc2U2NFwiKTtcbiAgICB9O1xuICB9KSgpO1xuXG4gIC8vIFN1cHBvcnQ6IE5vZGUuanNcbiAgKGZ1bmN0aW9uIGNoZWNrTm9kZUF0b2IoKSB7XG4gICAgaWYgKGdsb2JhbFRoaXMuYXRvYiB8fCAhaXNOb2RlSlMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZ2xvYmFsVGhpcy5hdG9iID0gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgICAgIHJldHVybiBCdWZmZXIuZnJvbShpbnB1dCwgXCJiYXNlNjRcIikudG9TdHJpbmcoXCJiaW5hcnlcIik7XG4gICAgfTtcbiAgfSkoKTtcblxuICAvLyBTdXBwb3J0OiBOb2RlLmpzXG4gIChmdW5jdGlvbiBjaGVja0RPTU1hdHJpeCgpIHtcbiAgICBpZiAoZ2xvYmFsVGhpcy5ET01NYXRyaXggfHwgIWlzTm9kZUpTKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGdsb2JhbFRoaXMuRE9NTWF0cml4ID0gX19ub25fd2VicGFja19yZXF1aXJlX18oXG4gICAgICBcImRvbW1hdHJpeC9kaXN0L2RvbW1hdHJpeC5qc1wiXG4gICAgKTtcbiAgfSkoKTtcblxuICAvLyBQcm92aWRlcyBzdXBwb3J0IGZvciAqcmVjZW50KiBhZGRpdGlvbnMgdG8gdGhlIFByb21pc2Ugc3BlY2lmaWNhdGlvbixcbiAgLy8gaG93ZXZlciBiYXNpYyBQcm9taXNlIHN1cHBvcnQgaXMgYXNzdW1lZCB0byBiZSBhdmFpbGFibGUgbmF0aXZlbHkuXG4gIC8vIFN1cHBvcnQ6IEZpcmVmb3g8NzEsIENocm9tZTw3NiwgU2FmYXJpPDEzLCBOb2RlLmpzPDEyLjkuMFxuICAoZnVuY3Rpb24gY2hlY2tQcm9taXNlKCkge1xuICAgIGlmICh0eXBlb2YgUERGSlNEZXYgIT09IFwidW5kZWZpbmVkXCIgJiYgUERGSlNEZXYudGVzdChcIklNQUdFX0RFQ09ERVJTXCIpKSB7XG4gICAgICAvLyBUaGUgY3VycmVudCBpbWFnZSBkZWNvZGVycyBhcmUgc3luY2hyb25vdXMsIGhlbmNlIGBQcm9taXNlYCBzaG91bGRuJ3RcbiAgICAgIC8vIG5lZWQgdG8gYmUgcG9seWZpbGxlZCBmb3IgdGhlIElNQUdFX0RFQ09ERVJTIGJ1aWxkIHRhcmdldC5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGdsb2JhbFRoaXMuUHJvbWlzZS5hbGxTZXR0bGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGdsb2JhbFRoaXMuUHJvbWlzZSA9IHJlcXVpcmUoXCJjb3JlLWpzL2VzL3Byb21pc2UvaW5kZXguanNcIik7XG4gIH0pKCk7XG5cbiAgLy8gU3VwcG9ydDogTm9kZS5qc1xuICAoZnVuY3Rpb24gY2hlY2tSZWFkYWJsZVN0cmVhbSgpIHtcbiAgICBpZiAoZ2xvYmFsVGhpcy5SZWFkYWJsZVN0cmVhbSB8fCAhaXNOb2RlSlMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZ2xvYmFsVGhpcy5SZWFkYWJsZVN0cmVhbSA9IF9fbm9uX3dlYnBhY2tfcmVxdWlyZV9fKFxuICAgICAgXCJ3ZWItc3RyZWFtcy1wb2x5ZmlsbC9kaXN0L3BvbnlmaWxsLmpzXCJcbiAgICApLlJlYWRhYmxlU3RyZWFtO1xuICB9KSgpO1xuXG4gIC8vIFN1cHBvcnQ6IEZpcmVmb3g8OTQsIENocm9tZTw5OCwgU2FmYXJpPDE1LjQsIE5vZGUuanM8MTcuMC4wXG4gIChmdW5jdGlvbiBjaGVja1N0cnVjdHVyZWRDbG9uZSgpIHtcbiAgICBpZiAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJJTUFHRV9ERUNPREVSU1wiKSkge1xuICAgICAgLy8gVGhlIGN1cnJlbnQgaW1hZ2UgZGVjb2RlcnMgYXJlIHN5bmNocm9ub3VzLCBoZW5jZSBgc3RydWN0dXJlZENsb25lYFxuICAgICAgLy8gc2hvdWxkbid0IG5lZWQgdG8gYmUgcG9seWZpbGxlZCBmb3IgdGhlIElNQUdFX0RFQ09ERVJTIGJ1aWxkIHRhcmdldC5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGdsb2JhbFRoaXMuc3RydWN0dXJlZENsb25lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJlcXVpcmUoXCJjb3JlLWpzL3dlYi9zdHJ1Y3R1cmVkLWNsb25lLmpzXCIpO1xuICB9KSgpO1xufVxuIiwgIi8qIENvcHlyaWdodCAyMDE4IE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyogZ2xvYmFscyBwcm9jZXNzICovXG5cbi8vIE5XLmpzIC8gRWxlY3Ryb24gaXMgYSBicm93c2VyIGNvbnRleHQsIGJ1dCBjb3BpZXMgc29tZSBOb2RlLmpzIG9iamVjdHM7IHNlZVxuLy8gaHR0cDovL2RvY3Mubndqcy5pby9lbi9sYXRlc3QvRm9yJTIwVXNlcnMvQWR2YW5jZWQvSmF2YVNjcmlwdCUyMENvbnRleHRzJTIwaW4lMjBOVy5qcy8jYWNjZXNzLW5vZGVqcy1hbmQtbndqcy1hcGktaW4tYnJvd3Nlci1jb250ZXh0XG4vLyBodHRwczovL3d3dy5lbGVjdHJvbmpzLm9yZy9kb2NzL2FwaS9wcm9jZXNzI3Byb2Nlc3N2ZXJzaW9uc2VsZWN0cm9uLXJlYWRvbmx5XG4vLyBodHRwczovL3d3dy5lbGVjdHJvbmpzLm9yZy9kb2NzL2FwaS9wcm9jZXNzI3Byb2Nlc3N0eXBlLXJlYWRvbmx5XG5jb25zdCBpc05vZGVKUyA9XG4gICh0eXBlb2YgUERGSlNEZXYgPT09IFwidW5kZWZpbmVkXCIgfHwgUERGSlNEZXYudGVzdChcIkdFTkVSSUNcIikpICYmXG4gIHR5cGVvZiBwcm9jZXNzID09PSBcIm9iamVjdFwiICYmXG4gIHByb2Nlc3MgKyBcIlwiID09PSBcIltvYmplY3QgcHJvY2Vzc11cIiAmJlxuICAhcHJvY2Vzcy52ZXJzaW9ucy5udyAmJlxuICAhKHByb2Nlc3MudmVyc2lvbnMuZWxlY3Ryb24gJiYgcHJvY2Vzcy50eXBlICYmIHByb2Nlc3MudHlwZSAhPT0gXCJicm93c2VyXCIpO1xuXG5leHBvcnQgeyBpc05vZGVKUyB9O1xuIiwgIi8qIENvcHlyaWdodCAyMDEyIE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEBtb2R1bGUgcGRmanNMaWJcbiAqL1xuXG5pbXBvcnQge1xuICBBYm9ydEV4Y2VwdGlvbixcbiAgQW5ub3RhdGlvbk1vZGUsXG4gIGFzc2VydCxcbiAgY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHksXG4gIGdldFZlcmJvc2l0eUxldmVsLFxuICBpbmZvLFxuICBJbnZhbGlkUERGRXhjZXB0aW9uLFxuICBpc0FycmF5QnVmZmVyLFxuICBNaXNzaW5nUERGRXhjZXB0aW9uLFxuICBQYXNzd29yZEV4Y2VwdGlvbixcbiAgUmVuZGVyaW5nSW50ZW50RmxhZyxcbiAgc2V0VmVyYm9zaXR5TGV2ZWwsXG4gIHNoYWRvdyxcbiAgc3RyaW5nVG9CeXRlcyxcbiAgVW5leHBlY3RlZFJlc3BvbnNlRXhjZXB0aW9uLFxuICBVbmtub3duRXJyb3JFeGNlcHRpb24sXG4gIHVucmVhY2hhYmxlLFxuICB3YXJuLFxufSBmcm9tIFwiLi4vc2hhcmVkL3V0aWwuanNcIjtcbmltcG9ydCB7XG4gIGRlcHJlY2F0ZWQsXG4gIERPTUNhbnZhc0ZhY3RvcnksXG4gIERPTUNNYXBSZWFkZXJGYWN0b3J5LFxuICBET01TdGFuZGFyZEZvbnREYXRhRmFjdG9yeSxcbiAgaXNEYXRhU2NoZW1lLFxuICBsb2FkU2NyaXB0LFxuICBQYWdlVmlld3BvcnQsXG4gIFJlbmRlcmluZ0NhbmNlbGxlZEV4Y2VwdGlvbixcbiAgU3RhdFRpbWVyLFxufSBmcm9tIFwiLi9kaXNwbGF5X3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBGb250RmFjZU9iamVjdCwgRm9udExvYWRlciB9IGZyb20gXCIuL2ZvbnRfbG9hZGVyLmpzXCI7XG5pbXBvcnQgeyBBbm5vdGF0aW9uU3RvcmFnZSB9IGZyb20gXCIuL2Fubm90YXRpb25fc3RvcmFnZS5qc1wiO1xuaW1wb3J0IHsgQ2FudmFzR3JhcGhpY3MgfSBmcm9tIFwiLi9jYW52YXMuanNcIjtcbmltcG9ydCB7IEdsb2JhbFdvcmtlck9wdGlvbnMgfSBmcm9tIFwiLi93b3JrZXJfb3B0aW9ucy5qc1wiO1xuaW1wb3J0IHsgaXNOb2RlSlMgfSBmcm9tIFwiLi4vc2hhcmVkL2lzX25vZGUuanNcIjtcbmltcG9ydCB7IE1lc3NhZ2VIYW5kbGVyIH0gZnJvbSBcIi4uL3NoYXJlZC9tZXNzYWdlX2hhbmRsZXIuanNcIjtcbmltcG9ydCB7IE1ldGFkYXRhIH0gZnJvbSBcIi4vbWV0YWRhdGEuanNcIjtcbmltcG9ydCB7IE9wdGlvbmFsQ29udGVudENvbmZpZyB9IGZyb20gXCIuL29wdGlvbmFsX2NvbnRlbnRfY29uZmlnLmpzXCI7XG5pbXBvcnQgeyBQREZEYXRhVHJhbnNwb3J0U3RyZWFtIH0gZnJvbSBcIi4vdHJhbnNwb3J0X3N0cmVhbS5qc1wiO1xuaW1wb3J0IHsgWGZhVGV4dCB9IGZyb20gXCIuL3hmYV90ZXh0LmpzXCI7XG5cbmNvbnN0IERFRkFVTFRfUkFOR0VfQ0hVTktfU0laRSA9IDY1NTM2OyAvLyAyXjE2ID0gNjU1MzZcbmNvbnN0IFJFTkRFUklOR19DQU5DRUxMRURfVElNRU9VVCA9IDEwMDsgLy8gbXNcblxubGV0IERlZmF1bHRDYW52YXNGYWN0b3J5ID0gRE9NQ2FudmFzRmFjdG9yeTtcbmxldCBEZWZhdWx0Q01hcFJlYWRlckZhY3RvcnkgPSBET01DTWFwUmVhZGVyRmFjdG9yeTtcbmxldCBEZWZhdWx0U3RhbmRhcmRGb250RGF0YUZhY3RvcnkgPSBET01TdGFuZGFyZEZvbnREYXRhRmFjdG9yeTtcblxuaWYgKHR5cGVvZiBQREZKU0RldiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBQREZKU0Rldi50ZXN0KFwiR0VORVJJQ1wiKSAmJiBpc05vZGVKUykge1xuICBjb25zdCB7XG4gICAgTm9kZUNhbnZhc0ZhY3RvcnksXG4gICAgTm9kZUNNYXBSZWFkZXJGYWN0b3J5LFxuICAgIE5vZGVTdGFuZGFyZEZvbnREYXRhRmFjdG9yeSxcbiAgfSA9IHJlcXVpcmUoXCIuL25vZGVfdXRpbHMuanNcIik7XG5cbiAgRGVmYXVsdENhbnZhc0ZhY3RvcnkgPSBOb2RlQ2FudmFzRmFjdG9yeTtcbiAgRGVmYXVsdENNYXBSZWFkZXJGYWN0b3J5ID0gTm9kZUNNYXBSZWFkZXJGYWN0b3J5O1xuICBEZWZhdWx0U3RhbmRhcmRGb250RGF0YUZhY3RvcnkgPSBOb2RlU3RhbmRhcmRGb250RGF0YUZhY3Rvcnk7XG59XG5cbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9ufSBJUERGU3RyZWFtRmFjdG9yeVxuICogQHBhcmFtIHtEb2N1bWVudEluaXRQYXJhbWV0ZXJzfSBwYXJhbXMgLSBUaGUgZG9jdW1lbnQgaW5pdGlhbGl6YXRpb25cbiAqICAgcGFyYW1ldGVycy4gVGhlIFwidXJsXCIga2V5IGlzIGFsd2F5cyBwcmVzZW50LlxuICogQHJldHVybnMge1Byb21pc2V9IEEgcHJvbWlzZSwgd2hpY2ggaXMgcmVzb2x2ZWQgd2l0aCBhbiBpbnN0YW5jZSBvZlxuICogICB7SVBERlN0cmVhbX0uXG4gKiBAaWdub3JlXG4gKi9cblxuLyoqXG4gKiBAdHlwZSB7SVBERlN0cmVhbUZhY3Rvcnl9XG4gKiBAcHJpdmF0ZVxuICovXG5sZXQgY3JlYXRlUERGTmV0d29ya1N0cmVhbTtcblxuLyoqXG4gKiBTZXRzIHRoZSBmdW5jdGlvbiB0aGF0IGluc3RhbnRpYXRlcyBhbiB7SVBERlN0cmVhbX0gYXMgYW4gYWx0ZXJuYXRpdmUgUERGXG4gKiBkYXRhIHRyYW5zcG9ydC5cbiAqXG4gKiBAcGFyYW0ge0lQREZTdHJlYW1GYWN0b3J5fSBwZGZOZXR3b3JrU3RyZWFtRmFjdG9yeSAtIFRoZSBmYWN0b3J5IGZ1bmN0aW9uXG4gKiAgIHRoYXQgdGFrZXMgZG9jdW1lbnQgaW5pdGlhbGl6YXRpb24gcGFyYW1ldGVycyAoaW5jbHVkaW5nIGEgXCJ1cmxcIikgYW5kXG4gKiAgIHJldHVybnMgYSBwcm9taXNlIHdoaWNoIGlzIHJlc29sdmVkIHdpdGggYW4gaW5zdGFuY2Ugb2Yge0lQREZTdHJlYW19LlxuICogQGlnbm9yZVxuICovXG5mdW5jdGlvbiBzZXRQREZOZXR3b3JrU3RyZWFtRmFjdG9yeShwZGZOZXR3b3JrU3RyZWFtRmFjdG9yeSkge1xuICBjcmVhdGVQREZOZXR3b3JrU3RyZWFtID0gcGRmTmV0d29ya1N0cmVhbUZhY3Rvcnk7XG59XG5cbi8qKlxuICogQHR5cGVkZWYgeyBJbnQ4QXJyYXkgfCBVaW50OEFycmF5IHwgVWludDhDbGFtcGVkQXJyYXkgfFxuICogICAgICAgICAgICBJbnQxNkFycmF5IHwgVWludDE2QXJyYXkgfFxuICogICAgICAgICAgICBJbnQzMkFycmF5IHwgVWludDMyQXJyYXkgfCBGbG9hdDMyQXJyYXkgfFxuICogICAgICAgICAgICBGbG9hdDY0QXJyYXlcbiAqIH0gVHlwZWRBcnJheVxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gUmVmUHJveHlcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBudW1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBnZW5cbiAqL1xuXG4vKipcbiAqIERvY3VtZW50IGluaXRpYWxpemF0aW9uIC8gbG9hZGluZyBwYXJhbWV0ZXJzIG9iamVjdC5cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBEb2N1bWVudEluaXRQYXJhbWV0ZXJzXG4gKiBAcHJvcGVydHkge3N0cmluZ3xVUkx9IFt1cmxdIC0gVGhlIFVSTCBvZiB0aGUgUERGLlxuICogQHByb3BlcnR5IHtUeXBlZEFycmF5fEFycmF5PG51bWJlcj58c3RyaW5nfSBbZGF0YV0gLSBCaW5hcnkgUERGIGRhdGEuIFVzZVxuICogICAgdHlwZWQgYXJyYXlzIChVaW50OEFycmF5KSB0byBpbXByb3ZlIHRoZSBtZW1vcnkgdXNhZ2UuIElmIFBERiBkYXRhIGlzXG4gKiAgICBCQVNFNjQtZW5jb2RlZCwgdXNlIGBhdG9iKClgIHRvIGNvbnZlcnQgaXQgdG8gYSBiaW5hcnkgc3RyaW5nIGZpcnN0LlxuICogQHByb3BlcnR5IHtPYmplY3R9IFtodHRwSGVhZGVyc10gLSBCYXNpYyBhdXRoZW50aWNhdGlvbiBoZWFkZXJzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbd2l0aENyZWRlbnRpYWxzXSAtIEluZGljYXRlcyB3aGV0aGVyIG9yIG5vdFxuICogICBjcm9zcy1zaXRlIEFjY2Vzcy1Db250cm9sIHJlcXVlc3RzIHNob3VsZCBiZSBtYWRlIHVzaW5nIGNyZWRlbnRpYWxzIHN1Y2hcbiAqICAgYXMgY29va2llcyBvciBhdXRob3JpemF0aW9uIGhlYWRlcnMuIFRoZSBkZWZhdWx0IGlzIGBmYWxzZWAuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3Bhc3N3b3JkXSAtIEZvciBkZWNyeXB0aW5nIHBhc3N3b3JkLXByb3RlY3RlZCBQREZzLlxuICogQHByb3BlcnR5IHtUeXBlZEFycmF5fSBbaW5pdGlhbERhdGFdIC0gQSB0eXBlZCBhcnJheSB3aXRoIHRoZSBmaXJzdCBwb3J0aW9uXG4gKiAgIG9yIGFsbCBvZiB0aGUgcGRmIGRhdGEuIFVzZWQgYnkgdGhlIGV4dGVuc2lvbiBzaW5jZSBzb21lIGRhdGEgaXMgYWxyZWFkeVxuICogICBsb2FkZWQgYmVmb3JlIHRoZSBzd2l0Y2ggdG8gcmFuZ2UgcmVxdWVzdHMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2xlbmd0aF0gLSBUaGUgUERGIGZpbGUgbGVuZ3RoLiBJdCdzIHVzZWQgZm9yIHByb2dyZXNzXG4gKiAgIHJlcG9ydHMgYW5kIHJhbmdlIHJlcXVlc3RzIG9wZXJhdGlvbnMuXG4gKiBAcHJvcGVydHkge1BERkRhdGFSYW5nZVRyYW5zcG9ydH0gW3JhbmdlXSAtIEFsbG93cyBmb3IgdXNpbmcgYSBjdXN0b20gcmFuZ2VcbiAqICAgdHJhbnNwb3J0IGltcGxlbWVudGF0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyYW5nZUNodW5rU2l6ZV0gLSBTcGVjaWZ5IG1heGltdW0gbnVtYmVyIG9mIGJ5dGVzIGZldGNoZWRcbiAqICAgcGVyIHJhbmdlIHJlcXVlc3QuIFRoZSBkZWZhdWx0IHZhbHVlIGlzIHtAbGluayBERUZBVUxUX1JBTkdFX0NIVU5LX1NJWkV9LlxuICogQHByb3BlcnR5IHtQREZXb3JrZXJ9IFt3b3JrZXJdIC0gVGhlIHdvcmtlciB0aGF0IHdpbGwgYmUgdXNlZCBmb3IgbG9hZGluZyBhbmRcbiAqICAgcGFyc2luZyB0aGUgUERGIGRhdGEuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3ZlcmJvc2l0eV0gLSBDb250cm9scyB0aGUgbG9nZ2luZyBsZXZlbDsgdGhlIGNvbnN0YW50c1xuICogICBmcm9tIHtAbGluayBWZXJib3NpdHlMZXZlbH0gc2hvdWxkIGJlIHVzZWQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2RvY0Jhc2VVcmxdIC0gVGhlIGJhc2UgVVJMIG9mIHRoZSBkb2N1bWVudCwgdXNlZCB3aGVuXG4gKiAgIGF0dGVtcHRpbmcgdG8gcmVjb3ZlciB2YWxpZCBhYnNvbHV0ZSBVUkxzIGZvciBhbm5vdGF0aW9ucywgYW5kIG91dGxpbmVcbiAqICAgaXRlbXMsIHRoYXQgKGluY29ycmVjdGx5KSBvbmx5IHNwZWNpZnkgcmVsYXRpdmUgVVJMcy5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY01hcFVybF0gLSBUaGUgVVJMIHdoZXJlIHRoZSBwcmVkZWZpbmVkIEFkb2JlIENNYXBzIGFyZVxuICogICBsb2NhdGVkLiBJbmNsdWRlIHRoZSB0cmFpbGluZyBzbGFzaC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NNYXBQYWNrZWRdIC0gU3BlY2lmaWVzIGlmIHRoZSBBZG9iZSBDTWFwcyBhcmUgYmluYXJ5XG4gKiAgIHBhY2tlZCBvciBub3QuXG4gKiBAcHJvcGVydHkge09iamVjdH0gW0NNYXBSZWFkZXJGYWN0b3J5XSAtIFRoZSBmYWN0b3J5IHRoYXQgd2lsbCBiZSB1c2VkIHdoZW5cbiAqICAgcmVhZGluZyBidWlsdC1pbiBDTWFwIGZpbGVzLiBQcm92aWRpbmcgYSBjdXN0b20gZmFjdG9yeSBpcyB1c2VmdWwgZm9yXG4gKiAgIGVudmlyb25tZW50cyB3aXRob3V0IEZldGNoIEFQSSBvciBgWE1MSHR0cFJlcXVlc3RgIHN1cHBvcnQsIHN1Y2ggYXNcbiAqICAgTm9kZS5qcy4gVGhlIGRlZmF1bHQgdmFsdWUgaXMge0RPTUNNYXBSZWFkZXJGYWN0b3J5fS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3VzZVN5c3RlbUZvbnRzXSAtIFdoZW4gYHRydWVgLCBmb250cyB0aGF0IGFyZW4ndFxuICogICBlbWJlZGRlZCBpbiB0aGUgUERGIGRvY3VtZW50IHdpbGwgZmFsbGJhY2sgdG8gYSBzeXN0ZW0gZm9udC5cbiAqICAgVGhlIGRlZmF1bHQgdmFsdWUgaXMgYHRydWVgIGluIHdlYiBlbnZpcm9ubWVudHMgYW5kIGBmYWxzZWAgaW4gTm9kZS5qcztcbiAqICAgdW5sZXNzIGBkaXNhYmxlRm9udEZhY2UgPT09IHRydWVgIGluIHdoaWNoIGNhc2UgdGhpcyBkZWZhdWx0cyB0byBgZmFsc2VgXG4gKiAgIHJlZ2FyZGxlc3Mgb2YgdGhlIGVudmlyb25tZW50ICh0byBwcmV2ZW50IGNvbXBsZXRlbHkgYnJva2VuIGZvbnRzKS5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbc3RhbmRhcmRGb250RGF0YVVybF0gLSBUaGUgVVJMIHdoZXJlIHRoZSBzdGFuZGFyZCBmb250XG4gKiAgIGZpbGVzIGFyZSBsb2NhdGVkLiBJbmNsdWRlIHRoZSB0cmFpbGluZyBzbGFzaC5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBbU3RhbmRhcmRGb250RGF0YUZhY3RvcnldIC0gVGhlIGZhY3RvcnkgdGhhdCB3aWxsIGJlIHVzZWRcbiAqICAgd2hlbiByZWFkaW5nIHRoZSBzdGFuZGFyZCBmb250IGZpbGVzLiBQcm92aWRpbmcgYSBjdXN0b20gZmFjdG9yeSBpcyB1c2VmdWxcbiAqICAgZm9yIGVudmlyb25tZW50cyB3aXRob3V0IEZldGNoIEFQSSBvciBgWE1MSHR0cFJlcXVlc3RgIHN1cHBvcnQsIHN1Y2ggYXNcbiAqICAgTm9kZS5qcy4gVGhlIGRlZmF1bHQgdmFsdWUgaXMge0RPTVN0YW5kYXJkRm9udERhdGFGYWN0b3J5fS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3VzZVdvcmtlckZldGNoXSAtIEVuYWJsZSB1c2luZyB0aGUgRmV0Y2ggQVBJIGluIHRoZVxuICogICB3b3JrZXItdGhyZWFkIHdoZW4gcmVhZGluZyBDTWFwIGFuZCBzdGFuZGFyZCBmb250IGZpbGVzLiBXaGVuIGB0cnVlYCxcbiAqICAgdGhlIGBDTWFwUmVhZGVyRmFjdG9yeWAgYW5kIGBTdGFuZGFyZEZvbnREYXRhRmFjdG9yeWAgb3B0aW9ucyBhcmUgaWdub3JlZC5cbiAqICAgVGhlIGRlZmF1bHQgdmFsdWUgaXMgYHRydWVgIGluIHdlYiBlbnZpcm9ubWVudHMgYW5kIGBmYWxzZWAgaW4gTm9kZS5qcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3N0b3BBdEVycm9yc10gLSBSZWplY3QgY2VydGFpbiBwcm9taXNlcywgZS5nLlxuICogICBgZ2V0T3BlcmF0b3JMaXN0YCwgYGdldFRleHRDb250ZW50YCwgYW5kIGBSZW5kZXJUYXNrYCwgd2hlbiB0aGUgYXNzb2NpYXRlZFxuICogICBQREYgZGF0YSBjYW5ub3QgYmUgc3VjY2Vzc2Z1bGx5IHBhcnNlZCwgaW5zdGVhZCBvZiBhdHRlbXB0aW5nIHRvIHJlY292ZXJcbiAqICAgd2hhdGV2ZXIgcG9zc2libGUgb2YgdGhlIGRhdGEuIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGBmYWxzZWAuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heEltYWdlU2l6ZV0gLSBUaGUgbWF4aW11bSBhbGxvd2VkIGltYWdlIHNpemUgaW4gdG90YWxcbiAqICAgcGl4ZWxzLCBpLmUuIHdpZHRoICogaGVpZ2h0LiBJbWFnZXMgYWJvdmUgdGhpcyB2YWx1ZSB3aWxsIG5vdCBiZSByZW5kZXJlZC5cbiAqICAgVXNlIC0xIGZvciBubyBsaW1pdCwgd2hpY2ggaXMgYWxzbyB0aGUgZGVmYXVsdCB2YWx1ZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2lzRXZhbFN1cHBvcnRlZF0gLSBEZXRlcm1pbmVzIGlmIHdlIGNhbiBldmFsdWF0ZSBzdHJpbmdzXG4gKiAgIGFzIEphdmFTY3JpcHQuIFByaW1hcmlseSB1c2VkIHRvIGltcHJvdmUgcGVyZm9ybWFuY2Ugb2YgZm9udCByZW5kZXJpbmcsIGFuZFxuICogICB3aGVuIHBhcnNpbmcgUERGIGZ1bmN0aW9ucy4gVGhlIGRlZmF1bHQgdmFsdWUgaXMgYHRydWVgLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZGlzYWJsZUZvbnRGYWNlXSAtIEJ5IGRlZmF1bHQgZm9udHMgYXJlIGNvbnZlcnRlZCB0b1xuICogICBPcGVuVHlwZSBmb250cyBhbmQgbG9hZGVkIHZpYSB0aGUgRm9udCBMb2FkaW5nIEFQSSBvciBgQGZvbnQtZmFjZWAgcnVsZXMuXG4gKiAgIElmIGRpc2FibGVkLCBmb250cyB3aWxsIGJlIHJlbmRlcmVkIHVzaW5nIGEgYnVpbHQtaW4gZm9udCByZW5kZXJlciB0aGF0XG4gKiAgIGNvbnN0cnVjdHMgdGhlIGdseXBocyB3aXRoIHByaW1pdGl2ZSBwYXRoIGNvbW1hbmRzLlxuICogICBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgZmFsc2VgIGluIHdlYiBlbnZpcm9ubWVudHMgYW5kIGB0cnVlYCBpbiBOb2RlLmpzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZm9udEV4dHJhUHJvcGVydGllc10gLSBJbmNsdWRlIGFkZGl0aW9uYWwgcHJvcGVydGllcyxcbiAqICAgd2hpY2ggYXJlIHVudXNlZCBkdXJpbmcgcmVuZGVyaW5nIG9mIFBERiBkb2N1bWVudHMsIHdoZW4gZXhwb3J0aW5nIHRoZVxuICogICBwYXJzZWQgZm9udCBkYXRhIGZyb20gdGhlIHdvcmtlci10aHJlYWQuIFRoaXMgbWF5IGJlIHVzZWZ1bCBmb3IgZGVidWdnaW5nXG4gKiAgIHB1cnBvc2VzIChhbmQgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkpLCBidXQgbm90ZSB0aGF0IGl0IHdpbGwgbGVhZCB0b1xuICogICBpbmNyZWFzZWQgbWVtb3J5IHVzYWdlLiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgZmFsc2VgLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZW5hYmxlWGZhXSAtIFJlbmRlciBYZmEgZm9ybXMgaWYgYW55LlxuICogICBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgZmFsc2VgLlxuICogQHByb3BlcnR5IHtIVE1MRG9jdW1lbnR9IFtvd25lckRvY3VtZW50XSAtIFNwZWNpZnkgYW4gZXhwbGljaXQgZG9jdW1lbnRcbiAqICAgY29udGV4dCB0byBjcmVhdGUgZWxlbWVudHMgd2l0aCBhbmQgdG8gbG9hZCByZXNvdXJjZXMsIHN1Y2ggYXMgZm9udHMsXG4gKiAgIGludG8uIERlZmF1bHRzIHRvIHRoZSBjdXJyZW50IGRvY3VtZW50LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZGlzYWJsZVJhbmdlXSAtIERpc2FibGUgcmFuZ2UgcmVxdWVzdCBsb2FkaW5nIG9mIFBERlxuICogICBmaWxlcy4gV2hlbiBlbmFibGVkLCBhbmQgaWYgdGhlIHNlcnZlciBzdXBwb3J0cyBwYXJ0aWFsIGNvbnRlbnQgcmVxdWVzdHMsXG4gKiAgIHRoZW4gdGhlIFBERiB3aWxsIGJlIGZldGNoZWQgaW4gY2h1bmtzLiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgZmFsc2VgLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZGlzYWJsZVN0cmVhbV0gLSBEaXNhYmxlIHN0cmVhbWluZyBvZiBQREYgZmlsZSBkYXRhLlxuICogICBCeSBkZWZhdWx0IFBERi5qcyBhdHRlbXB0cyB0byBsb2FkIFBERiBmaWxlcyBpbiBjaHVua3MuIFRoZSBkZWZhdWx0IHZhbHVlXG4gKiAgIGlzIGBmYWxzZWAuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtkaXNhYmxlQXV0b0ZldGNoXSAtIERpc2FibGUgcHJlLWZldGNoaW5nIG9mIFBERiBmaWxlXG4gKiAgIGRhdGEuIFdoZW4gcmFuZ2UgcmVxdWVzdHMgYXJlIGVuYWJsZWQgUERGLmpzIHdpbGwgYXV0b21hdGljYWxseSBrZWVwXG4gKiAgIGZldGNoaW5nIG1vcmUgZGF0YSBldmVuIGlmIGl0IGlzbid0IG5lZWRlZCB0byBkaXNwbGF5IHRoZSBjdXJyZW50IHBhZ2UuXG4gKiAgIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGBmYWxzZWAuXG4gKlxuICogICBOT1RFOiBJdCBpcyBhbHNvIG5lY2Vzc2FyeSB0byBkaXNhYmxlIHN0cmVhbWluZywgc2VlIGFib3ZlLCBpbiBvcmRlciBmb3JcbiAqICAgZGlzYWJsaW5nIG9mIHByZS1mZXRjaGluZyB0byB3b3JrIGNvcnJlY3RseS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3BkZkJ1Z10gLSBFbmFibGVzIHNwZWNpYWwgaG9va3MgZm9yIGRlYnVnZ2luZyBQREYuanNcbiAqICAgKHNlZSBgd2ViL2RlYnVnZ2VyLmpzYCkuIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGBmYWxzZWAuXG4gKi9cblxuLyoqXG4gKiBUaGlzIGlzIHRoZSBtYWluIGVudHJ5IHBvaW50IGZvciBsb2FkaW5nIGEgUERGIGFuZCBpbnRlcmFjdGluZyB3aXRoIGl0LlxuICpcbiAqIE5PVEU6IElmIGEgVVJMIGlzIHVzZWQgdG8gZmV0Y2ggdGhlIFBERiBkYXRhIGEgc3RhbmRhcmQgRmV0Y2ggQVBJIGNhbGwgKG9yXG4gKiBYSFIgYXMgZmFsbGJhY2spIGlzIHVzZWQsIHdoaWNoIG1lYW5zIGl0IG11c3QgZm9sbG93IHNhbWUgb3JpZ2luIHJ1bGVzLFxuICogZS5nLiBubyBjcm9zcy1kb21haW4gcmVxdWVzdHMgd2l0aG91dCBDT1JTLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfFVSTHxUeXBlZEFycmF5fFBERkRhdGFSYW5nZVRyYW5zcG9ydHxEb2N1bWVudEluaXRQYXJhbWV0ZXJzfVxuICogICBzcmMgLSBDYW4gYmUgYSBVUkwgd2hlcmUgYSBQREYgZmlsZSBpcyBsb2NhdGVkLCBhIHR5cGVkIGFycmF5IChVaW50OEFycmF5KVxuICogICAgICAgICBhbHJlYWR5IHBvcHVsYXRlZCB3aXRoIGRhdGEsIG9yIGEgcGFyYW1ldGVyIG9iamVjdC5cbiAqIEByZXR1cm5zIHtQREZEb2N1bWVudExvYWRpbmdUYXNrfVxuICovXG5mdW5jdGlvbiBnZXREb2N1bWVudChzcmMpIHtcbiAgY29uc3QgdGFzayA9IG5ldyBQREZEb2N1bWVudExvYWRpbmdUYXNrKCk7XG5cbiAgbGV0IHNvdXJjZTtcbiAgaWYgKHR5cGVvZiBzcmMgPT09IFwic3RyaW5nXCIgfHwgc3JjIGluc3RhbmNlb2YgVVJMKSB7XG4gICAgc291cmNlID0geyB1cmw6IHNyYyB9O1xuICB9IGVsc2UgaWYgKGlzQXJyYXlCdWZmZXIoc3JjKSkge1xuICAgIHNvdXJjZSA9IHsgZGF0YTogc3JjIH07XG4gIH0gZWxzZSBpZiAoc3JjIGluc3RhbmNlb2YgUERGRGF0YVJhbmdlVHJhbnNwb3J0KSB7XG4gICAgc291cmNlID0geyByYW5nZTogc3JjIH07XG4gIH0gZWxzZSB7XG4gICAgaWYgKHR5cGVvZiBzcmMgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJJbnZhbGlkIHBhcmFtZXRlciBpbiBnZXREb2N1bWVudCwgXCIgK1xuICAgICAgICAgIFwibmVlZCBlaXRoZXIgc3RyaW5nLCBVUkwsIFVpbnQ4QXJyYXksIG9yIHBhcmFtZXRlciBvYmplY3QuXCJcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICghc3JjLnVybCAmJiAhc3JjLmRhdGEgJiYgIXNyYy5yYW5nZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkludmFsaWQgcGFyYW1ldGVyIG9iamVjdDogbmVlZCBlaXRoZXIgLmRhdGEsIC5yYW5nZSBvciAudXJsXCJcbiAgICAgICk7XG4gICAgfVxuICAgIHNvdXJjZSA9IHNyYztcbiAgfVxuICBjb25zdCBwYXJhbXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBsZXQgcmFuZ2VUcmFuc3BvcnQgPSBudWxsLFxuICAgIHdvcmtlciA9IG51bGw7XG5cbiAgZm9yIChjb25zdCBrZXkgaW4gc291cmNlKSB7XG4gICAgY29uc3QgdmFsdWUgPSBzb3VyY2Vba2V5XTtcblxuICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICBjYXNlIFwidXJsXCI6XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFRoZSBmdWxsIHBhdGggaXMgcmVxdWlyZWQgaW4gdGhlICd1cmwnIGZpZWxkLlxuICAgICAgICAgICAgcGFyYW1zW2tleV0gPSBuZXcgVVJMKHZhbHVlLCB3aW5kb3cubG9jYXRpb24pLmhyZWY7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgd2FybihgQ2Fubm90IGNyZWF0ZSB2YWxpZCBVUkw6IFwiJHtleH1cIi5gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiIHx8IHZhbHVlIGluc3RhbmNlb2YgVVJMKSB7XG4gICAgICAgICAgcGFyYW1zW2tleV0gPSB2YWx1ZS50b1N0cmluZygpOyAvLyBTdXBwb3J0IE5vZGUuanMgZW52aXJvbm1lbnRzLlxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBcIkludmFsaWQgUERGIHVybCBkYXRhOiBcIiArXG4gICAgICAgICAgICBcImVpdGhlciBzdHJpbmcgb3IgVVJMLW9iamVjdCBpcyBleHBlY3RlZCBpbiB0aGUgdXJsIHByb3BlcnR5LlwiXG4gICAgICAgICk7XG4gICAgICBjYXNlIFwicmFuZ2VcIjpcbiAgICAgICAgcmFuZ2VUcmFuc3BvcnQgPSB2YWx1ZTtcbiAgICAgICAgY29udGludWU7XG4gICAgICBjYXNlIFwid29ya2VyXCI6XG4gICAgICAgIHdvcmtlciA9IHZhbHVlO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIGNhc2UgXCJkYXRhXCI6XG4gICAgICAgIC8vIENvbnZlcnRpbmcgc3RyaW5nIG9yIGFycmF5LWxpa2UgZGF0YSB0byBVaW50OEFycmF5LlxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgICAgUERGSlNEZXYudGVzdChcIkdFTkVSSUNcIikgJiZcbiAgICAgICAgICBpc05vZGVKUyAmJlxuICAgICAgICAgIHR5cGVvZiBCdWZmZXIgIT09IFwidW5kZWZpbmVkXCIgJiYgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuICAgICAgICAgIHZhbHVlIGluc3RhbmNlb2YgQnVmZmVyIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcbiAgICAgICAgKSB7XG4gICAgICAgICAgcGFyYW1zW2tleV0gPSBuZXcgVWludDhBcnJheSh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgICAgYnJlYWs7IC8vIFVzZSB0aGUgZGF0YSBhcy1pcyB3aGVuIGl0J3MgYWxyZWFkeSBhIFVpbnQ4QXJyYXkuXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgcGFyYW1zW2tleV0gPSBzdHJpbmdUb0J5dGVzKHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICB2YWx1ZSAhPT0gbnVsbCAmJlxuICAgICAgICAgICFpc05hTih2YWx1ZS5sZW5ndGgpXG4gICAgICAgICkge1xuICAgICAgICAgIHBhcmFtc1trZXldID0gbmV3IFVpbnQ4QXJyYXkodmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXlCdWZmZXIodmFsdWUpKSB7XG4gICAgICAgICAgcGFyYW1zW2tleV0gPSBuZXcgVWludDhBcnJheSh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgXCJJbnZhbGlkIFBERiBiaW5hcnkgZGF0YTogZWl0aGVyIHR5cGVkIGFycmF5LCBcIiArXG4gICAgICAgICAgICAgIFwic3RyaW5nLCBvciBhcnJheS1saWtlIG9iamVjdCBpcyBleHBlY3RlZCBpbiB0aGUgZGF0YSBwcm9wZXJ0eS5cIlxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHBhcmFtc1trZXldID0gdmFsdWU7XG4gIH1cblxuICBwYXJhbXMuQ01hcFJlYWRlckZhY3RvcnkgPVxuICAgIHBhcmFtcy5DTWFwUmVhZGVyRmFjdG9yeSB8fCBEZWZhdWx0Q01hcFJlYWRlckZhY3Rvcnk7XG4gIHBhcmFtcy5TdGFuZGFyZEZvbnREYXRhRmFjdG9yeSA9XG4gICAgcGFyYW1zLlN0YW5kYXJkRm9udERhdGFGYWN0b3J5IHx8IERlZmF1bHRTdGFuZGFyZEZvbnREYXRhRmFjdG9yeTtcbiAgcGFyYW1zLmlnbm9yZUVycm9ycyA9IHBhcmFtcy5zdG9wQXRFcnJvcnMgIT09IHRydWU7XG4gIHBhcmFtcy5mb250RXh0cmFQcm9wZXJ0aWVzID0gcGFyYW1zLmZvbnRFeHRyYVByb3BlcnRpZXMgPT09IHRydWU7XG4gIHBhcmFtcy5wZGZCdWcgPSBwYXJhbXMucGRmQnVnID09PSB0cnVlO1xuICBwYXJhbXMuZW5hYmxlWGZhID0gcGFyYW1zLmVuYWJsZVhmYSA9PT0gdHJ1ZTtcblxuICBpZiAoIU51bWJlci5pc0ludGVnZXIocGFyYW1zLnJhbmdlQ2h1bmtTaXplKSB8fCBwYXJhbXMucmFuZ2VDaHVua1NpemUgPCAxKSB7XG4gICAgcGFyYW1zLnJhbmdlQ2h1bmtTaXplID0gREVGQVVMVF9SQU5HRV9DSFVOS19TSVpFO1xuICB9XG4gIGlmIChcbiAgICB0eXBlb2YgcGFyYW1zLmRvY0Jhc2VVcmwgIT09IFwic3RyaW5nXCIgfHxcbiAgICBpc0RhdGFTY2hlbWUocGFyYW1zLmRvY0Jhc2VVcmwpXG4gICkge1xuICAgIC8vIElnbm9yZSBcImRhdGE6XCItVVJMcywgc2luY2UgdGhleSBjYW4ndCBiZSB1c2VkIHRvIHJlY292ZXIgdmFsaWQgYWJzb2x1dGVcbiAgICAvLyBVUkxzIGFueXdheS4gV2Ugd2FudCB0byBhdm9pZCBzZW5kaW5nIHRoZW0gdG8gdGhlIHdvcmtlci10aHJlYWQsIHNpbmNlXG4gICAgLy8gdGhleSBjb250YWluIHRoZSAqZW50aXJlKiBQREYgZG9jdW1lbnQgYW5kIGNhbiB0aHVzIGJlIGFyYml0cmFyaWx5IGxvbmcuXG4gICAgcGFyYW1zLmRvY0Jhc2VVcmwgPSBudWxsO1xuICB9XG4gIGlmICghTnVtYmVyLmlzSW50ZWdlcihwYXJhbXMubWF4SW1hZ2VTaXplKSB8fCBwYXJhbXMubWF4SW1hZ2VTaXplIDwgLTEpIHtcbiAgICBwYXJhbXMubWF4SW1hZ2VTaXplID0gLTE7XG4gIH1cbiAgaWYgKHR5cGVvZiBwYXJhbXMuY01hcFVybCAhPT0gXCJzdHJpbmdcIikge1xuICAgIHBhcmFtcy5jTWFwVXJsID0gbnVsbDtcbiAgfVxuICBpZiAodHlwZW9mIHBhcmFtcy5zdGFuZGFyZEZvbnREYXRhVXJsICE9PSBcInN0cmluZ1wiKSB7XG4gICAgcGFyYW1zLnN0YW5kYXJkRm9udERhdGFVcmwgPSBudWxsO1xuICB9XG4gIGlmICh0eXBlb2YgcGFyYW1zLnVzZVdvcmtlckZldGNoICE9PSBcImJvb2xlYW5cIikge1xuICAgIHBhcmFtcy51c2VXb3JrZXJGZXRjaCA9XG4gICAgICBwYXJhbXMuQ01hcFJlYWRlckZhY3RvcnkgPT09IERPTUNNYXBSZWFkZXJGYWN0b3J5ICYmXG4gICAgICBwYXJhbXMuU3RhbmRhcmRGb250RGF0YUZhY3RvcnkgPT09IERPTVN0YW5kYXJkRm9udERhdGFGYWN0b3J5O1xuICB9XG4gIGlmICh0eXBlb2YgcGFyYW1zLmlzRXZhbFN1cHBvcnRlZCAhPT0gXCJib29sZWFuXCIpIHtcbiAgICBwYXJhbXMuaXNFdmFsU3VwcG9ydGVkID0gdHJ1ZTtcbiAgfVxuICBpZiAodHlwZW9mIHBhcmFtcy5kaXNhYmxlRm9udEZhY2UgIT09IFwiYm9vbGVhblwiKSB7XG4gICAgcGFyYW1zLmRpc2FibGVGb250RmFjZSA9IGlzTm9kZUpTO1xuICB9XG4gIGlmICh0eXBlb2YgcGFyYW1zLnVzZVN5c3RlbUZvbnRzICE9PSBcImJvb2xlYW5cIikge1xuICAgIHBhcmFtcy51c2VTeXN0ZW1Gb250cyA9ICFpc05vZGVKUyAmJiAhcGFyYW1zLmRpc2FibGVGb250RmFjZTtcbiAgfVxuICBpZiAoXG4gICAgdHlwZW9mIHBhcmFtcy5vd25lckRvY3VtZW50ICE9PSBcIm9iamVjdFwiIHx8XG4gICAgcGFyYW1zLm93bmVyRG9jdW1lbnQgPT09IG51bGxcbiAgKSB7XG4gICAgcGFyYW1zLm93bmVyRG9jdW1lbnQgPSBnbG9iYWxUaGlzLmRvY3VtZW50O1xuICB9XG5cbiAgaWYgKHR5cGVvZiBwYXJhbXMuZGlzYWJsZVJhbmdlICE9PSBcImJvb2xlYW5cIikge1xuICAgIHBhcmFtcy5kaXNhYmxlUmFuZ2UgPSBmYWxzZTtcbiAgfVxuICBpZiAodHlwZW9mIHBhcmFtcy5kaXNhYmxlU3RyZWFtICE9PSBcImJvb2xlYW5cIikge1xuICAgIHBhcmFtcy5kaXNhYmxlU3RyZWFtID0gZmFsc2U7XG4gIH1cbiAgaWYgKHR5cGVvZiBwYXJhbXMuZGlzYWJsZUF1dG9GZXRjaCAhPT0gXCJib29sZWFuXCIpIHtcbiAgICBwYXJhbXMuZGlzYWJsZUF1dG9GZXRjaCA9IGZhbHNlO1xuICB9XG5cbiAgLy8gU2V0IHRoZSBtYWluLXRocmVhZCB2ZXJib3NpdHkgbGV2ZWwuXG4gIHNldFZlcmJvc2l0eUxldmVsKHBhcmFtcy52ZXJib3NpdHkpO1xuXG4gIGlmICghd29ya2VyKSB7XG4gICAgY29uc3Qgd29ya2VyUGFyYW1zID0ge1xuICAgICAgdmVyYm9zaXR5OiBwYXJhbXMudmVyYm9zaXR5LFxuICAgICAgcG9ydDogR2xvYmFsV29ya2VyT3B0aW9ucy53b3JrZXJQb3J0LFxuICAgIH07XG4gICAgLy8gV29ya2VyIHdhcyBub3QgcHJvdmlkZWQgLS0gY3JlYXRpbmcgYW5kIG93bmluZyBvdXIgb3duLiBJZiBtZXNzYWdlIHBvcnRcbiAgICAvLyBpcyBzcGVjaWZpZWQgaW4gZ2xvYmFsIHdvcmtlciBvcHRpb25zLCB1c2luZyBpdC5cbiAgICB3b3JrZXIgPSB3b3JrZXJQYXJhbXMucG9ydFxuICAgICAgPyBQREZXb3JrZXIuZnJvbVBvcnQod29ya2VyUGFyYW1zKVxuICAgICAgOiBuZXcgUERGV29ya2VyKHdvcmtlclBhcmFtcyk7XG4gICAgdGFzay5fd29ya2VyID0gd29ya2VyO1xuICB9XG4gIGNvbnN0IGRvY0lkID0gdGFzay5kb2NJZDtcbiAgd29ya2VyLnByb21pc2VcbiAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGFzay5kZXN0cm95ZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTG9hZGluZyBhYm9ydGVkXCIpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB3b3JrZXJJZFByb21pc2UgPSBfZmV0Y2hEb2N1bWVudChcbiAgICAgICAgd29ya2VyLFxuICAgICAgICBwYXJhbXMsXG4gICAgICAgIHJhbmdlVHJhbnNwb3J0LFxuICAgICAgICBkb2NJZFxuICAgICAgKTtcbiAgICAgIGNvbnN0IG5ldHdvcmtTdHJlYW1Qcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgbGV0IG5ldHdvcmtTdHJlYW07XG4gICAgICAgIGlmIChyYW5nZVRyYW5zcG9ydCkge1xuICAgICAgICAgIG5ldHdvcmtTdHJlYW0gPSBuZXcgUERGRGF0YVRyYW5zcG9ydFN0cmVhbShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbGVuZ3RoOiBwYXJhbXMubGVuZ3RoLFxuICAgICAgICAgICAgICBpbml0aWFsRGF0YTogcGFyYW1zLmluaXRpYWxEYXRhLFxuICAgICAgICAgICAgICBwcm9ncmVzc2l2ZURvbmU6IHBhcmFtcy5wcm9ncmVzc2l2ZURvbmUsXG4gICAgICAgICAgICAgIGNvbnRlbnREaXNwb3NpdGlvbkZpbGVuYW1lOiBwYXJhbXMuY29udGVudERpc3Bvc2l0aW9uRmlsZW5hbWUsXG4gICAgICAgICAgICAgIGRpc2FibGVSYW5nZTogcGFyYW1zLmRpc2FibGVSYW5nZSxcbiAgICAgICAgICAgICAgZGlzYWJsZVN0cmVhbTogcGFyYW1zLmRpc2FibGVTdHJlYW0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmFuZ2VUcmFuc3BvcnRcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKCFwYXJhbXMuZGF0YSkge1xuICAgICAgICAgIG5ldHdvcmtTdHJlYW0gPSBjcmVhdGVQREZOZXR3b3JrU3RyZWFtKHtcbiAgICAgICAgICAgIHVybDogcGFyYW1zLnVybCxcbiAgICAgICAgICAgIGxlbmd0aDogcGFyYW1zLmxlbmd0aCxcbiAgICAgICAgICAgIGh0dHBIZWFkZXJzOiBwYXJhbXMuaHR0cEhlYWRlcnMsXG4gICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHBhcmFtcy53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICByYW5nZUNodW5rU2l6ZTogcGFyYW1zLnJhbmdlQ2h1bmtTaXplLFxuICAgICAgICAgICAgZGlzYWJsZVJhbmdlOiBwYXJhbXMuZGlzYWJsZVJhbmdlLFxuICAgICAgICAgICAgZGlzYWJsZVN0cmVhbTogcGFyYW1zLmRpc2FibGVTdHJlYW0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZShuZXR3b3JrU3RyZWFtKTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3dvcmtlcklkUHJvbWlzZSwgbmV0d29ya1N0cmVhbVByb21pc2VdKS50aGVuKFxuICAgICAgICBmdW5jdGlvbiAoW3dvcmtlcklkLCBuZXR3b3JrU3RyZWFtXSkge1xuICAgICAgICAgIGlmICh0YXNrLmRlc3Ryb3llZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTG9hZGluZyBhYm9ydGVkXCIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IG1lc3NhZ2VIYW5kbGVyID0gbmV3IE1lc3NhZ2VIYW5kbGVyKFxuICAgICAgICAgICAgZG9jSWQsXG4gICAgICAgICAgICB3b3JrZXJJZCxcbiAgICAgICAgICAgIHdvcmtlci5wb3J0XG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCB0cmFuc3BvcnQgPSBuZXcgV29ya2VyVHJhbnNwb3J0KFxuICAgICAgICAgICAgbWVzc2FnZUhhbmRsZXIsXG4gICAgICAgICAgICB0YXNrLFxuICAgICAgICAgICAgbmV0d29ya1N0cmVhbSxcbiAgICAgICAgICAgIHBhcmFtc1xuICAgICAgICAgICk7XG4gICAgICAgICAgdGFzay5fdHJhbnNwb3J0ID0gdHJhbnNwb3J0O1xuICAgICAgICAgIG1lc3NhZ2VIYW5kbGVyLnNlbmQoXCJSZWFkeVwiLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9KVxuICAgIC5jYXRjaCh0YXNrLl9jYXBhYmlsaXR5LnJlamVjdCk7XG5cbiAgcmV0dXJuIHRhc2s7XG59XG5cbi8qKlxuICogU3RhcnRzIGZldGNoaW5nIG9mIHNwZWNpZmllZCBQREYgZG9jdW1lbnQvZGF0YS5cbiAqXG4gKiBAcGFyYW0ge1BERldvcmtlcn0gd29ya2VyXG4gKiBAcGFyYW0ge09iamVjdH0gc291cmNlXG4gKiBAcGFyYW0ge1BERkRhdGFSYW5nZVRyYW5zcG9ydH0gcGRmRGF0YVJhbmdlVHJhbnNwb3J0XG4gKiBAcGFyYW0ge3N0cmluZ30gZG9jSWQgLSBVbmlxdWUgZG9jdW1lbnQgSUQsIHVzZWQgaW4gYE1lc3NhZ2VIYW5kbGVyYC5cbiAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdoZW4gdGhlIHdvcmtlciBJRCBvZlxuICogICB0aGUgYE1lc3NhZ2VIYW5kbGVyYCBpcyBrbm93bi5cbiAqIEBwcml2YXRlXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIF9mZXRjaERvY3VtZW50KHdvcmtlciwgc291cmNlLCBwZGZEYXRhUmFuZ2VUcmFuc3BvcnQsIGRvY0lkKSB7XG4gIGlmICh3b3JrZXIuZGVzdHJveWVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiV29ya2VyIHdhcyBkZXN0cm95ZWRcIik7XG4gIH1cblxuICBpZiAocGRmRGF0YVJhbmdlVHJhbnNwb3J0KSB7XG4gICAgc291cmNlLmxlbmd0aCA9IHBkZkRhdGFSYW5nZVRyYW5zcG9ydC5sZW5ndGg7XG4gICAgc291cmNlLmluaXRpYWxEYXRhID0gcGRmRGF0YVJhbmdlVHJhbnNwb3J0LmluaXRpYWxEYXRhO1xuICAgIHNvdXJjZS5wcm9ncmVzc2l2ZURvbmUgPSBwZGZEYXRhUmFuZ2VUcmFuc3BvcnQucHJvZ3Jlc3NpdmVEb25lO1xuICAgIHNvdXJjZS5jb250ZW50RGlzcG9zaXRpb25GaWxlbmFtZSA9XG4gICAgICBwZGZEYXRhUmFuZ2VUcmFuc3BvcnQuY29udGVudERpc3Bvc2l0aW9uRmlsZW5hbWU7XG4gIH1cbiAgY29uc3Qgd29ya2VySWQgPSBhd2FpdCB3b3JrZXIubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFxuICAgIFwiR2V0RG9jUmVxdWVzdFwiLFxuICAgIHtcbiAgICAgIGRvY0lkLFxuICAgICAgYXBpVmVyc2lvbjpcbiAgICAgICAgdHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmICFQREZKU0Rldi50ZXN0KFwiVEVTVElOR1wiKVxuICAgICAgICAgID8gUERGSlNEZXYuZXZhbChcIkJVTkRMRV9WRVJTSU9OXCIpXG4gICAgICAgICAgOiBudWxsLFxuICAgICAgLy8gT25seSBzZW5kIHRoZSByZXF1aXJlZCBwcm9wZXJ0aWVzLCBhbmQgKm5vdCogdGhlIGVudGlyZSBvYmplY3QuXG4gICAgICBzb3VyY2U6IHtcbiAgICAgICAgZGF0YTogc291cmNlLmRhdGEsXG4gICAgICAgIHVybDogc291cmNlLnVybCxcbiAgICAgICAgcGFzc3dvcmQ6IHNvdXJjZS5wYXNzd29yZCxcbiAgICAgICAgZGlzYWJsZUF1dG9GZXRjaDogc291cmNlLmRpc2FibGVBdXRvRmV0Y2gsXG4gICAgICAgIHJhbmdlQ2h1bmtTaXplOiBzb3VyY2UucmFuZ2VDaHVua1NpemUsXG4gICAgICAgIGxlbmd0aDogc291cmNlLmxlbmd0aCxcbiAgICAgIH0sXG4gICAgICBtYXhJbWFnZVNpemU6IHNvdXJjZS5tYXhJbWFnZVNpemUsXG4gICAgICBkaXNhYmxlRm9udEZhY2U6IHNvdXJjZS5kaXNhYmxlRm9udEZhY2UsXG4gICAgICBkb2NCYXNlVXJsOiBzb3VyY2UuZG9jQmFzZVVybCxcbiAgICAgIGlnbm9yZUVycm9yczogc291cmNlLmlnbm9yZUVycm9ycyxcbiAgICAgIGlzRXZhbFN1cHBvcnRlZDogc291cmNlLmlzRXZhbFN1cHBvcnRlZCxcbiAgICAgIGZvbnRFeHRyYVByb3BlcnRpZXM6IHNvdXJjZS5mb250RXh0cmFQcm9wZXJ0aWVzLFxuICAgICAgZW5hYmxlWGZhOiBzb3VyY2UuZW5hYmxlWGZhLFxuICAgICAgdXNlU3lzdGVtRm9udHM6IHNvdXJjZS51c2VTeXN0ZW1Gb250cyxcbiAgICAgIGNNYXBVcmw6IHNvdXJjZS51c2VXb3JrZXJGZXRjaCA/IHNvdXJjZS5jTWFwVXJsIDogbnVsbCxcbiAgICAgIHN0YW5kYXJkRm9udERhdGFVcmw6IHNvdXJjZS51c2VXb3JrZXJGZXRjaFxuICAgICAgICA/IHNvdXJjZS5zdGFuZGFyZEZvbnREYXRhVXJsXG4gICAgICAgIDogbnVsbCxcbiAgICB9XG4gICk7XG5cbiAgaWYgKHdvcmtlci5kZXN0cm95ZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJXb3JrZXIgd2FzIGRlc3Ryb3llZFwiKTtcbiAgfVxuICByZXR1cm4gd29ya2VySWQ7XG59XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT25Qcm9ncmVzc1BhcmFtZXRlcnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBsb2FkZWQgLSBDdXJyZW50bHkgbG9hZGVkIG51bWJlciBvZiBieXRlcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0b3RhbCAtIFRvdGFsIG51bWJlciBvZiBieXRlcyBpbiB0aGUgUERGIGZpbGUuXG4gKi9cblxuLyoqXG4gKiBUaGUgbG9hZGluZyB0YXNrIGNvbnRyb2xzIHRoZSBvcGVyYXRpb25zIHJlcXVpcmVkIHRvIGxvYWQgYSBQREYgZG9jdW1lbnRcbiAqIChzdWNoIGFzIG5ldHdvcmsgcmVxdWVzdHMpIGFuZCBwcm92aWRlcyBhIHdheSB0byBsaXN0ZW4gZm9yIGNvbXBsZXRpb24sXG4gKiBhZnRlciB3aGljaCBpbmRpdmlkdWFsIHBhZ2VzIGNhbiBiZSByZW5kZXJlZC5cbiAqL1xuY2xhc3MgUERGRG9jdW1lbnRMb2FkaW5nVGFzayB7XG4gIHN0YXRpYyAjZG9jSWQgPSAwO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX2NhcGFiaWxpdHkgPSBjcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSgpO1xuICAgIHRoaXMuX3RyYW5zcG9ydCA9IG51bGw7XG4gICAgdGhpcy5fd29ya2VyID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgZG9jdW1lbnQgbG9hZGluZyB0YXNrLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5kb2NJZCA9IGBkJHtQREZEb2N1bWVudExvYWRpbmdUYXNrLiNkb2NJZCsrfWA7XG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBsb2FkaW5nIHRhc2sgaXMgZGVzdHJveWVkIG9yIG5vdC5cbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmRlc3Ryb3llZCA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQ2FsbGJhY2sgdG8gcmVxdWVzdCBhIHBhc3N3b3JkIGlmIGEgd3Jvbmcgb3Igbm8gcGFzc3dvcmQgd2FzIHByb3ZpZGVkLlxuICAgICAqIFRoZSBjYWxsYmFjayByZWNlaXZlcyB0d28gcGFyYW1ldGVyczogYSBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBjYWxsZWRcbiAgICAgKiB3aXRoIHRoZSBuZXcgcGFzc3dvcmQsIGFuZCBhIHJlYXNvbiAoc2VlIHtAbGluayBQYXNzd29yZFJlc3BvbnNlc30pLlxuICAgICAqIEB0eXBlIHtmdW5jdGlvbn1cbiAgICAgKi9cbiAgICB0aGlzLm9uUGFzc3dvcmQgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQ2FsbGJhY2sgdG8gYmUgYWJsZSB0byBtb25pdG9yIHRoZSBsb2FkaW5nIHByb2dyZXNzIG9mIHRoZSBQREYgZmlsZVxuICAgICAqIChuZWNlc3NhcnkgdG8gaW1wbGVtZW50IGUuZy4gYSBsb2FkaW5nIGJhcikuXG4gICAgICogVGhlIGNhbGxiYWNrIHJlY2VpdmVzIGFuIHtAbGluayBPblByb2dyZXNzUGFyYW1ldGVyc30gYXJndW1lbnQuXG4gICAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgICAqL1xuICAgIHRoaXMub25Qcm9ncmVzcyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBDYWxsYmFjayBmb3Igd2hlbiBhbiB1bnN1cHBvcnRlZCBmZWF0dXJlIGlzIHVzZWQgaW4gdGhlIFBERiBkb2N1bWVudC5cbiAgICAgKiBUaGUgY2FsbGJhY2sgcmVjZWl2ZXMgYW4ge0BsaW5rIFVOU1VQUE9SVEVEX0ZFQVRVUkVTfSBhcmd1bWVudC5cbiAgICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAgICovXG4gICAgdGhpcy5vblVuc3VwcG9ydGVkRmVhdHVyZSA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUHJvbWlzZSBmb3IgZG9jdW1lbnQgbG9hZGluZyB0YXNrIGNvbXBsZXRpb24uXG4gICAqIEB0eXBlIHtQcm9taXNlPFBERkRvY3VtZW50UHJveHk+fVxuICAgKi9cbiAgZ2V0IHByb21pc2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBYm9ydCBhbGwgbmV0d29yayByZXF1ZXN0cyBhbmQgZGVzdHJveSB0aGUgd29ya2VyLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn0gQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiBkZXN0cnVjdGlvbiBpc1xuICAgKiAgIGNvbXBsZXRlZC5cbiAgICovXG4gIGFzeW5jIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5kZXN0cm95ZWQgPSB0cnVlO1xuICAgIGF3YWl0IHRoaXMuX3RyYW5zcG9ydD8uZGVzdHJveSgpO1xuXG4gICAgdGhpcy5fdHJhbnNwb3J0ID0gbnVsbDtcbiAgICBpZiAodGhpcy5fd29ya2VyKSB7XG4gICAgICB0aGlzLl93b3JrZXIuZGVzdHJveSgpO1xuICAgICAgdGhpcy5fd29ya2VyID0gbnVsbDtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBYnN0cmFjdCBjbGFzcyB0byBzdXBwb3J0IHJhbmdlIHJlcXVlc3RzIGZpbGUgbG9hZGluZy5cbiAqL1xuY2xhc3MgUERGRGF0YVJhbmdlVHJhbnNwb3J0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBsZW5ndGhcbiAgICogQHBhcmFtIHtVaW50OEFycmF5fSBpbml0aWFsRGF0YVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtwcm9ncmVzc2l2ZURvbmVdXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbY29udGVudERpc3Bvc2l0aW9uRmlsZW5hbWVdXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBsZW5ndGgsXG4gICAgaW5pdGlhbERhdGEsXG4gICAgcHJvZ3Jlc3NpdmVEb25lID0gZmFsc2UsXG4gICAgY29udGVudERpc3Bvc2l0aW9uRmlsZW5hbWUgPSBudWxsXG4gICkge1xuICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgIHRoaXMuaW5pdGlhbERhdGEgPSBpbml0aWFsRGF0YTtcbiAgICB0aGlzLnByb2dyZXNzaXZlRG9uZSA9IHByb2dyZXNzaXZlRG9uZTtcbiAgICB0aGlzLmNvbnRlbnREaXNwb3NpdGlvbkZpbGVuYW1lID0gY29udGVudERpc3Bvc2l0aW9uRmlsZW5hbWU7XG5cbiAgICB0aGlzLl9yYW5nZUxpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMuX3Byb2dyZXNzTGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5fcHJvZ3Jlc3NpdmVSZWFkTGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5fcHJvZ3Jlc3NpdmVEb25lTGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5fcmVhZHlDYXBhYmlsaXR5ID0gY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHkoKTtcbiAgfVxuXG4gIGFkZFJhbmdlTGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgICB0aGlzLl9yYW5nZUxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgfVxuXG4gIGFkZFByb2dyZXNzTGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgICB0aGlzLl9wcm9ncmVzc0xpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgfVxuXG4gIGFkZFByb2dyZXNzaXZlUmVhZExpc3RlbmVyKGxpc3RlbmVyKSB7XG4gICAgdGhpcy5fcHJvZ3Jlc3NpdmVSZWFkTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICB9XG5cbiAgYWRkUHJvZ3Jlc3NpdmVEb25lTGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgICB0aGlzLl9wcm9ncmVzc2l2ZURvbmVMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gIH1cblxuICBvbkRhdGFSYW5nZShiZWdpbiwgY2h1bmspIHtcbiAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHRoaXMuX3JhbmdlTGlzdGVuZXJzKSB7XG4gICAgICBsaXN0ZW5lcihiZWdpbiwgY2h1bmspO1xuICAgIH1cbiAgfVxuXG4gIG9uRGF0YVByb2dyZXNzKGxvYWRlZCwgdG90YWwpIHtcbiAgICB0aGlzLl9yZWFkeUNhcGFiaWxpdHkucHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgdGhpcy5fcHJvZ3Jlc3NMaXN0ZW5lcnMpIHtcbiAgICAgICAgbGlzdGVuZXIobG9hZGVkLCB0b3RhbCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBvbkRhdGFQcm9ncmVzc2l2ZVJlYWQoY2h1bmspIHtcbiAgICB0aGlzLl9yZWFkeUNhcGFiaWxpdHkucHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgdGhpcy5fcHJvZ3Jlc3NpdmVSZWFkTGlzdGVuZXJzKSB7XG4gICAgICAgIGxpc3RlbmVyKGNodW5rKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIG9uRGF0YVByb2dyZXNzaXZlRG9uZSgpIHtcbiAgICB0aGlzLl9yZWFkeUNhcGFiaWxpdHkucHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgdGhpcy5fcHJvZ3Jlc3NpdmVEb25lTGlzdGVuZXJzKSB7XG4gICAgICAgIGxpc3RlbmVyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICB0cmFuc3BvcnRSZWFkeSgpIHtcbiAgICB0aGlzLl9yZWFkeUNhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICB9XG5cbiAgcmVxdWVzdERhdGFSYW5nZShiZWdpbiwgZW5kKSB7XG4gICAgdW5yZWFjaGFibGUoXCJBYnN0cmFjdCBtZXRob2QgUERGRGF0YVJhbmdlVHJhbnNwb3J0LnJlcXVlc3REYXRhUmFuZ2VcIik7XG4gIH1cblxuICBhYm9ydCgpIHt9XG59XG5cbi8qKlxuICogUHJveHkgdG8gYSBgUERGRG9jdW1lbnRgIGluIHRoZSB3b3JrZXIgdGhyZWFkLlxuICovXG5jbGFzcyBQREZEb2N1bWVudFByb3h5IHtcbiAgY29uc3RydWN0b3IocGRmSW5mbywgdHJhbnNwb3J0KSB7XG4gICAgdGhpcy5fcGRmSW5mbyA9IHBkZkluZm87XG4gICAgdGhpcy5fdHJhbnNwb3J0ID0gdHJhbnNwb3J0O1xuXG4gICAgaWYgKHR5cGVvZiBQREZKU0RldiA9PT0gXCJ1bmRlZmluZWRcIiB8fCBQREZKU0Rldi50ZXN0KFwiR0VORVJJQ1wiKSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZmluZ2VycHJpbnRcIiwge1xuICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgZGVwcmVjYXRlZChcbiAgICAgICAgICAgIFwiYFBERkRvY3VtZW50UHJveHkuZmluZ2VycHJpbnRgLCBcIiArXG4gICAgICAgICAgICAgIFwicGxlYXNlIHVzZSBgUERGRG9jdW1lbnRQcm94eS5maW5nZXJwcmludHNgIGluc3RlYWQuXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiB0aGlzLmZpbmdlcnByaW50c1swXTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJnZXRTdGF0c1wiLCB7XG4gICAgICAgIHZhbHVlOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgZGVwcmVjYXRlZChcbiAgICAgICAgICAgIFwiYFBERkRvY3VtZW50UHJveHkuZ2V0U3RhdHNgLCBcIiArXG4gICAgICAgICAgICAgIFwicGxlYXNlIHVzZSB0aGUgYFBERkRvY3VtZW50UHJveHkuc3RhdHNgLWdldHRlciBpbnN0ZWFkLlwiXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0cyB8fCB7IHN0cmVhbVR5cGVzOiB7fSwgZm9udFR5cGVzOiB7fSB9O1xuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtBbm5vdGF0aW9uU3RvcmFnZX0gU3RvcmFnZSBmb3IgYW5ub3RhdGlvbiBkYXRhIGluIGZvcm1zLlxuICAgKi9cbiAgZ2V0IGFubm90YXRpb25TdG9yYWdlKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuYW5ub3RhdGlvblN0b3JhZ2U7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge251bWJlcn0gVG90YWwgbnVtYmVyIG9mIHBhZ2VzIGluIHRoZSBQREYgZmlsZS5cbiAgICovXG4gIGdldCBudW1QYWdlcygpIHtcbiAgICByZXR1cm4gdGhpcy5fcGRmSW5mby5udW1QYWdlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7QXJyYXk8c3RyaW5nLCBzdHJpbmd8bnVsbD59IEEgKG5vdCBndWFyYW50ZWVkIHRvIGJlKSB1bmlxdWUgSUQgdG9cbiAgICogICBpZGVudGlmeSB0aGUgUERGIGRvY3VtZW50LlxuICAgKiAgIE5PVEU6IFRoZSBmaXJzdCBlbGVtZW50IHdpbGwgYWx3YXlzIGJlIGRlZmluZWQgZm9yIGFsbCBQREYgZG9jdW1lbnRzLFxuICAgKiAgIHdoZXJlYXMgdGhlIHNlY29uZCBlbGVtZW50IGlzIG9ubHkgZGVmaW5lZCBmb3IgKm1vZGlmaWVkKiBQREYgZG9jdW1lbnRzLlxuICAgKi9cbiAgZ2V0IGZpbmdlcnByaW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5fcGRmSW5mby5maW5nZXJwcmludHM7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGVkZWYge09iamVjdH0gUERGRG9jdW1lbnRTdGF0c1xuICAgKiBAcHJvcGVydHkge09iamVjdDxzdHJpbmcsIGJvb2xlYW4+fSBzdHJlYW1UeXBlcyAtIFVzZWQgc3RyZWFtIHR5cGVzIGluIHRoZVxuICAgKiAgIGRvY3VtZW50IChhbiBpdGVtIGlzIHNldCB0byB0cnVlIGlmIHNwZWNpZmljIHN0cmVhbSBJRCB3YXMgdXNlZCBpbiB0aGVcbiAgICogICBkb2N1bWVudCkuXG4gICAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgYm9vbGVhbj59IGZvbnRUeXBlcyAtIFVzZWQgZm9udCB0eXBlcyBpbiB0aGVcbiAgICogICBkb2N1bWVudCAoYW4gaXRlbSBpcyBzZXQgdG8gdHJ1ZSBpZiBzcGVjaWZpYyBmb250IElEIHdhcyB1c2VkIGluIHRoZVxuICAgKiAgIGRvY3VtZW50KS5cbiAgICovXG5cbiAgLyoqXG4gICAqIEB0eXBlIHtQREZEb2N1bWVudFN0YXRzIHwgbnVsbH0gVGhlIGN1cnJlbnQgc3RhdGlzdGljcyBhYm91dCBkb2N1bWVudFxuICAgKiAgIHN0cnVjdHVyZXMsIG9yIGBudWxsYCB3aGVuIG5vIHN0YXRpc3RpY3MgZXhpc3RzLlxuICAgKi9cbiAgZ2V0IHN0YXRzKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuc3RhdHM7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge2Jvb2xlYW59IFRydWUgaWYgb25seSBYRkEgZm9ybS5cbiAgICovXG4gIGdldCBpc1B1cmVYZmEoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5fdHJhbnNwb3J0Ll9odG1sRm9yWGZhO1xuICB9XG5cbiAgLyoqXG4gICAqIE5PVEU6IFRoaXMgaXMgKG1vc3RseSkgaW50ZW5kZWQgdG8gc3VwcG9ydCBwcmludGluZyBvZiBYRkEgZm9ybXMuXG4gICAqXG4gICAqIEB0eXBlIHtPYmplY3QgfCBudWxsfSBBbiBvYmplY3QgcmVwcmVzZW50aW5nIGEgSFRNTCB0cmVlIHN0cnVjdHVyZVxuICAgKiAgIHRvIHJlbmRlciB0aGUgWEZBLCBvciBgbnVsbGAgd2hlbiBubyBYRkEgZm9ybSBleGlzdHMuXG4gICAqL1xuICBnZXQgYWxsWGZhSHRtbCgpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0Ll9odG1sRm9yWGZhO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwYWdlTnVtYmVyIC0gVGhlIHBhZ2UgbnVtYmVyIHRvIGdldC4gVGhlIGZpcnN0IHBhZ2UgaXMgMS5cbiAgICogQHJldHVybnMge1Byb21pc2U8UERGUGFnZVByb3h5Pn0gQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2l0aFxuICAgKiAgIGEge0BsaW5rIFBERlBhZ2VQcm94eX0gb2JqZWN0LlxuICAgKi9cbiAgZ2V0UGFnZShwYWdlTnVtYmVyKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRQYWdlKHBhZ2VOdW1iZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7UmVmUHJveHl9IHJlZiAtIFRoZSBwYWdlIHJlZmVyZW5jZS5cbiAgICogQHJldHVybnMge1Byb21pc2U8bnVtYmVyPn0gQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2l0aCB0aGUgcGFnZSBpbmRleCxcbiAgICogICBzdGFydGluZyBmcm9tIHplcm8sIHRoYXQgaXMgYXNzb2NpYXRlZCB3aXRoIHRoZSByZWZlcmVuY2UuXG4gICAqL1xuICBnZXRQYWdlSW5kZXgocmVmKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRQYWdlSW5kZXgocmVmKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q8c3RyaW5nLCBBcnJheTxhbnk+Pj59IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkXG4gICAqICAgd2l0aCBhIG1hcHBpbmcgZnJvbSBuYW1lZCBkZXN0aW5hdGlvbnMgdG8gcmVmZXJlbmNlcy5cbiAgICpcbiAgICogVGhpcyBjYW4gYmUgc2xvdyBmb3IgbGFyZ2UgZG9jdW1lbnRzLiBVc2UgYGdldERlc3RpbmF0aW9uYCBpbnN0ZWFkLlxuICAgKi9cbiAgZ2V0RGVzdGluYXRpb25zKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0RGVzdGluYXRpb25zKCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gVGhlIG5hbWVkIGRlc3RpbmF0aW9uIHRvIGdldC5cbiAgICogQHJldHVybnMge1Byb21pc2U8QXJyYXk8YW55PiB8IG51bGw+fSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aXRoIGFsbFxuICAgKiAgIGluZm9ybWF0aW9uIG9mIHRoZSBnaXZlbiBuYW1lZCBkZXN0aW5hdGlvbiwgb3IgYG51bGxgIHdoZW4gdGhlIG5hbWVkXG4gICAqICAgZGVzdGluYXRpb24gaXMgbm90IHByZXNlbnQgaW4gdGhlIFBERiBmaWxlLlxuICAgKi9cbiAgZ2V0RGVzdGluYXRpb24oaWQpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldERlc3RpbmF0aW9uKGlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxBcnJheTxzdHJpbmc+IHwgbnVsbD59IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdpdGhcbiAgICogICBhbiB7QXJyYXl9IGNvbnRhaW5pbmcgdGhlIHBhZ2UgbGFiZWxzIHRoYXQgY29ycmVzcG9uZCB0byB0aGUgcGFnZVxuICAgKiAgIGluZGV4ZXMsIG9yIGBudWxsYCB3aGVuIG5vIHBhZ2UgbGFiZWxzIGFyZSBwcmVzZW50IGluIHRoZSBQREYgZmlsZS5cbiAgICovXG4gIGdldFBhZ2VMYWJlbHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRQYWdlTGFiZWxzKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2l0aCBhIHtzdHJpbmd9XG4gICAqICAgY29udGFpbmluZyB0aGUgcGFnZSBsYXlvdXQgbmFtZS5cbiAgICovXG4gIGdldFBhZ2VMYXlvdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRQYWdlTGF5b3V0KCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2l0aCBhIHtzdHJpbmd9XG4gICAqICAgY29udGFpbmluZyB0aGUgcGFnZSBtb2RlIG5hbWUuXG4gICAqL1xuICBnZXRQYWdlTW9kZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldFBhZ2VNb2RlKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0IHwgbnVsbD59IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdpdGggYW5cbiAgICogICB7T2JqZWN0fSBjb250YWluaW5nIHRoZSB2aWV3ZXIgcHJlZmVyZW5jZXMsIG9yIGBudWxsYCB3aGVuIG5vIHZpZXdlclxuICAgKiAgIHByZWZlcmVuY2VzIGFyZSBwcmVzZW50IGluIHRoZSBQREYgZmlsZS5cbiAgICovXG4gIGdldFZpZXdlclByZWZlcmVuY2VzKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0Vmlld2VyUHJlZmVyZW5jZXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnkgfCBudWxsPn0gQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2l0aCBhbiB7QXJyYXl9XG4gICAqICAgY29udGFpbmluZyB0aGUgZGVzdGluYXRpb24sIG9yIGBudWxsYCB3aGVuIG5vIG9wZW4gYWN0aW9uIGlzIHByZXNlbnRcbiAgICogICBpbiB0aGUgUERGLlxuICAgKi9cbiAgZ2V0T3BlbkFjdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldE9wZW5BY3Rpb24oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aXRoIGEgbG9va3VwIHRhYmxlXG4gICAqICAgZm9yIG1hcHBpbmcgbmFtZWQgYXR0YWNobWVudHMgdG8gdGhlaXIgY29udGVudC5cbiAgICovXG4gIGdldEF0dGFjaG1lbnRzKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0QXR0YWNobWVudHMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxBcnJheTxzdHJpbmc+IHwgbnVsbD59IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdpdGhcbiAgICogICBhbiB7QXJyYXl9IG9mIGFsbCB0aGUgSmF2YVNjcmlwdCBzdHJpbmdzIGluIHRoZSBuYW1lIHRyZWUsIG9yIGBudWxsYFxuICAgKiAgIGlmIG5vIEphdmFTY3JpcHQgZXhpc3RzLlxuICAgKi9cbiAgZ2V0SmF2YVNjcmlwdCgpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldEphdmFTY3JpcHQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3QgfCBudWxsPn0gQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2l0aFxuICAgKiAgIGFuIHtPYmplY3R9IHdpdGggdGhlIEphdmFTY3JpcHQgYWN0aW9uczpcbiAgICogICAgIC0gZnJvbSB0aGUgbmFtZSB0cmVlIChsaWtlIGdldEphdmFTY3JpcHQpO1xuICAgKiAgICAgLSBmcm9tIEEgb3IgQUEgZW50cmllcyBpbiB0aGUgY2F0YWxvZyBkaWN0aW9uYXJ5LlxuICAgKiAgICwgb3IgYG51bGxgIGlmIG5vIEphdmFTY3JpcHQgZXhpc3RzLlxuICAgKi9cbiAgZ2V0SlNBY3Rpb25zKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0RG9jSlNBY3Rpb25zKCk7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGVkZWYge09iamVjdH0gT3V0bGluZU5vZGVcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IHRpdGxlXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gYm9sZFxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IGl0YWxpY1xuICAgKiBAcHJvcGVydHkge1VpbnQ4Q2xhbXBlZEFycmF5fSBjb2xvciAtIFRoZSBjb2xvciBpbiBSR0IgZm9ybWF0IHRvIHVzZSBmb3JcbiAgICogICBkaXNwbGF5IHB1cnBvc2VzLlxuICAgKiBAcHJvcGVydHkge3N0cmluZyB8IEFycmF5PGFueT4gfCBudWxsfSBkZXN0XG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nIHwgbnVsbH0gdXJsXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nIHwgdW5kZWZpbmVkfSB1bnNhZmVVcmxcbiAgICogQHByb3BlcnR5IHtib29sZWFuIHwgdW5kZWZpbmVkfSBuZXdXaW5kb3dcbiAgICogQHByb3BlcnR5IHtudW1iZXIgfCB1bmRlZmluZWR9IGNvdW50XG4gICAqIEBwcm9wZXJ0eSB7QXJyYXk8T3V0bGluZU5vZGU+fSBpdGVtc1xuICAgKi9cblxuICAvKipcbiAgICogQHJldHVybnMge1Byb21pc2U8QXJyYXk8T3V0bGluZU5vZGU+Pn0gQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2l0aCBhblxuICAgKiAgIHtBcnJheX0gdGhhdCBpcyBhIHRyZWUgb3V0bGluZSAoaWYgaXQgaGFzIG9uZSkgb2YgdGhlIFBERiBmaWxlLlxuICAgKi9cbiAgZ2V0T3V0bGluZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldE91dGxpbmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxPcHRpb25hbENvbnRlbnRDb25maWc+fSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aXRoXG4gICAqICAgYW4ge0BsaW5rIE9wdGlvbmFsQ29udGVudENvbmZpZ30gdGhhdCBjb250YWlucyBhbGwgdGhlIG9wdGlvbmFsIGNvbnRlbnRcbiAgICogICBncm91cHMgKGFzc3VtaW5nIHRoYXQgdGhlIGRvY3VtZW50IGhhcyBhbnkpLlxuICAgKi9cbiAgZ2V0T3B0aW9uYWxDb250ZW50Q29uZmlnKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0T3B0aW9uYWxDb250ZW50Q29uZmlnKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1Byb21pc2U8QXJyYXk8bnVtYmVyPiB8IG51bGw+fSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aXRoXG4gICAqICAgYW4ge0FycmF5fSB0aGF0IGNvbnRhaW5zIHRoZSBwZXJtaXNzaW9uIGZsYWdzIGZvciB0aGUgUERGIGRvY3VtZW50LCBvclxuICAgKiAgIGBudWxsYCB3aGVuIG5vIHBlcm1pc3Npb25zIGFyZSBwcmVzZW50IGluIHRoZSBQREYgZmlsZS5cbiAgICovXG4gIGdldFBlcm1pc3Npb25zKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0UGVybWlzc2lvbnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTx7IGluZm86IE9iamVjdCwgbWV0YWRhdGE6IE1ldGFkYXRhIH0+fSBBIHByb21pc2UgdGhhdCBpc1xuICAgKiAgIHJlc29sdmVkIHdpdGggYW4ge09iamVjdH0gdGhhdCBoYXMgYGluZm9gIGFuZCBgbWV0YWRhdGFgIHByb3BlcnRpZXMuXG4gICAqICAgYGluZm9gIGlzIGFuIHtPYmplY3R9IGZpbGxlZCB3aXRoIGFueXRoaW5nIGF2YWlsYWJsZSBpbiB0aGUgaW5mb3JtYXRpb25cbiAgICogICBkaWN0aW9uYXJ5IGFuZCBzaW1pbGFybHkgYG1ldGFkYXRhYCBpcyBhIHtNZXRhZGF0YX0gb2JqZWN0IHdpdGhcbiAgICogICBpbmZvcm1hdGlvbiBmcm9tIHRoZSBtZXRhZGF0YSBzZWN0aW9uIG9mIHRoZSBQREYuXG4gICAqL1xuICBnZXRNZXRhZGF0YSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldE1ldGFkYXRhKCk7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGVkZWYge09iamVjdH0gTWFya0luZm9cbiAgICogUHJvcGVydGllcyBjb3JyZXNwb25kIHRvIFRhYmxlIDMyMSBvZiB0aGUgUERGIDMyMDAwLTE6MjAwOCBzcGVjLlxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IE1hcmtlZFxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFVzZXJQcm9wZXJ0aWVzXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gU3VzcGVjdHNcbiAgICovXG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE1hcmtJbmZvIHwgbnVsbD59IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdpdGhcbiAgICogICBhIHtNYXJrSW5mb30gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIE1hcmtJbmZvIGZsYWdzIGZvciB0aGUgUERGXG4gICAqICAgZG9jdW1lbnQsIG9yIGBudWxsYCB3aGVuIG5vIE1hcmtJbmZvIHZhbHVlcyBhcmUgcHJlc2VudCBpbiB0aGUgUERGIGZpbGUuXG4gICAqL1xuICBnZXRNYXJrSW5mbygpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldE1hcmtJbmZvKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1Byb21pc2U8VHlwZWRBcnJheT59IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdpdGggYVxuICAgKiAgIHtUeXBlZEFycmF5fSB0aGF0IGhhcyB0aGUgcmF3IGRhdGEgZnJvbSB0aGUgUERGLlxuICAgKi9cbiAgZ2V0RGF0YSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldERhdGEoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTx7IGxlbmd0aDogbnVtYmVyIH0+fSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZVxuICAgKiAgIGRvY3VtZW50J3MgZGF0YSBpcyBsb2FkZWQuIEl0IGlzIHJlc29sdmVkIHdpdGggYW4ge09iamVjdH0gdGhhdCBjb250YWluc1xuICAgKiAgIHRoZSBgbGVuZ3RoYCBwcm9wZXJ0eSB0aGF0IGluZGljYXRlcyBzaXplIG9mIHRoZSBQREYgZGF0YSBpbiBieXRlcy5cbiAgICovXG4gIGdldERvd25sb2FkSW5mbygpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmRvd25sb2FkSW5mb0NhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnMgdXAgcmVzb3VyY2VzIGFsbG9jYXRlZCBieSB0aGUgZG9jdW1lbnQgb24gYm90aCB0aGUgbWFpbiBhbmQgd29ya2VyXG4gICAqIHRocmVhZHMuXG4gICAqXG4gICAqIE5PVEU6IERvIG5vdCwgdW5kZXIgYW55IGNpcmN1bXN0YW5jZXMsIGNhbGwgdGhpcyBtZXRob2Qgd2hlbiByZW5kZXJpbmcgaXNcbiAgICogY3VycmVudGx5IG9uZ29pbmcgc2luY2UgdGhhdCBtYXkgbGVhZCB0byByZW5kZXJpbmcgZXJyb3JzLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtrZWVwTG9hZGVkRm9udHNdIC0gTGV0IGZvbnRzIHJlbWFpbiBhdHRhY2hlZCB0byB0aGUgRE9NLlxuICAgKiAgIE5PVEU6IFRoaXMgd2lsbCBpbmNyZWFzZSBwZXJzaXN0ZW50IG1lbW9yeSB1c2FnZSwgaGVuY2UgZG9uJ3QgdXNlIHRoaXNcbiAgICogICBvcHRpb24gdW5sZXNzIGFic29sdXRlbHkgbmVjZXNzYXJ5LiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgZmFsc2VgLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiBjbGVhbi11cCBoYXMgZmluaXNoZWQuXG4gICAqL1xuICBjbGVhbnVwKGtlZXBMb2FkZWRGb250cyA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5zdGFydENsZWFudXAoa2VlcExvYWRlZEZvbnRzIHx8IHRoaXMuaXNQdXJlWGZhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cm95cyB0aGUgY3VycmVudCBkb2N1bWVudCBpbnN0YW5jZSBhbmQgdGVybWluYXRlcyB0aGUgd29ya2VyLlxuICAgKi9cbiAgZGVzdHJveSgpIHtcbiAgICByZXR1cm4gdGhpcy5sb2FkaW5nVGFzay5kZXN0cm95KCk7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge0RvY3VtZW50SW5pdFBhcmFtZXRlcnN9IEEgc3Vic2V0IG9mIHRoZSBjdXJyZW50XG4gICAqICAge0RvY3VtZW50SW5pdFBhcmFtZXRlcnN9LCB3aGljaCBhcmUgbmVlZGVkIGluIHRoZSB2aWV3ZXIuXG4gICAqL1xuICBnZXQgbG9hZGluZ1BhcmFtcygpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmxvYWRpbmdQYXJhbXM7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge1BERkRvY3VtZW50TG9hZGluZ1Rhc2t9IFRoZSBsb2FkaW5nVGFzayBmb3IgdGhlIGN1cnJlbnQgZG9jdW1lbnQuXG4gICAqL1xuICBnZXQgbG9hZGluZ1Rhc2soKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5sb2FkaW5nVGFzaztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxVaW50OEFycmF5Pn0gQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2l0aCBhXG4gICAqICAge1VpbnQ4QXJyYXl9IGNvbnRhaW5pbmcgdGhlIGZ1bGwgZGF0YSBvZiB0aGUgc2F2ZWQgZG9jdW1lbnQuXG4gICAqL1xuICBzYXZlRG9jdW1lbnQoKSB7XG4gICAgaWYgKFxuICAgICAgKHR5cGVvZiBQREZKU0RldiA9PT0gXCJ1bmRlZmluZWRcIiB8fCBQREZKU0Rldi50ZXN0KFwiR0VORVJJQ1wiKSkgJiZcbiAgICAgIHRoaXMuX3RyYW5zcG9ydC5hbm5vdGF0aW9uU3RvcmFnZS5zaXplIDw9IDBcbiAgICApIHtcbiAgICAgIGRlcHJlY2F0ZWQoXG4gICAgICAgIFwic2F2ZURvY3VtZW50IGNhbGxlZCB3aGlsZSBgYW5ub3RhdGlvblN0b3JhZ2VgIGlzIGVtcHR5LCBcIiArXG4gICAgICAgICAgXCJwbGVhc2UgdXNlIHRoZSBnZXREYXRhLW1ldGhvZCBpbnN0ZWFkLlwiXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LnNhdmVEb2N1bWVudCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdDxzdHJpbmcsIEFycmF5PE9iamVjdD4+IHwgbnVsbD59IEEgcHJvbWlzZSB0aGF0IGlzXG4gICAqICAgcmVzb2x2ZWQgd2l0aCBhbiB7T2JqZWN0fSBjb250YWluaW5nIC9BY3JvRm9ybSBmaWVsZCBkYXRhIGZvciB0aGUgSlNcbiAgICogICBzYW5kYm94LCBvciBgbnVsbGAgd2hlbiBubyBmaWVsZCBkYXRhIGlzIHByZXNlbnQgaW4gdGhlIFBERiBmaWxlLlxuICAgKi9cbiAgZ2V0RmllbGRPYmplY3RzKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0RmllbGRPYmplY3RzKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdpdGggYHRydWVgXG4gICAqICAgaWYgc29tZSAvQWNyb0Zvcm0gZmllbGRzIGhhdmUgSmF2YVNjcmlwdCBhY3Rpb25zLlxuICAgKi9cbiAgaGFzSlNBY3Rpb25zKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuaGFzSlNBY3Rpb25zKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1Byb21pc2U8QXJyYXk8c3RyaW5nPiB8IG51bGw+fSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aXRoIGFuXG4gICAqICAge0FycmF5PHN0cmluZz59IGNvbnRhaW5pbmcgSURzIG9mIGFubm90YXRpb25zIHRoYXQgaGF2ZSBhIGNhbGN1bGF0aW9uXG4gICAqICAgYWN0aW9uLCBvciBgbnVsbGAgd2hlbiBubyBzdWNoIGFubm90YXRpb25zIGFyZSBwcmVzZW50IGluIHRoZSBQREYgZmlsZS5cbiAgICovXG4gIGdldENhbGN1bGF0aW9uT3JkZXJJZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRDYWxjdWxhdGlvbk9yZGVySWRzKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBQYWdlIGdldFZpZXdwb3J0IHBhcmFtZXRlcnMuXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gR2V0Vmlld3BvcnRQYXJhbWV0ZXJzXG4gKiBAcHJvcGVydHkge251bWJlcn0gc2NhbGUgLSBUaGUgZGVzaXJlZCBzY2FsZSBvZiB0aGUgdmlld3BvcnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JvdGF0aW9uXSAtIFRoZSBkZXNpcmVkIHJvdGF0aW9uLCBpbiBkZWdyZWVzLCBvZlxuICogICB0aGUgdmlld3BvcnQuIElmIG9taXR0ZWQgaXQgZGVmYXVsdHMgdG8gdGhlIHBhZ2Ugcm90YXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29mZnNldFhdIC0gVGhlIGhvcml6b250YWwsIGkuZS4geC1heGlzLCBvZmZzZXQuXG4gKiAgIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGAwYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb2Zmc2V0WV0gLSBUaGUgdmVydGljYWwsIGkuZS4geS1heGlzLCBvZmZzZXQuXG4gKiAgIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGAwYC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2RvbnRGbGlwXSAtIElmIHRydWUsIHRoZSB5LWF4aXMgd2lsbCBub3QgYmVcbiAqICAgZmxpcHBlZC4gVGhlIGRlZmF1bHQgdmFsdWUgaXMgYGZhbHNlYC5cbiAqL1xuXG4vKipcbiAqIFBhZ2UgZ2V0VGV4dENvbnRlbnQgcGFyYW1ldGVycy5cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBnZXRUZXh0Q29udGVudFBhcmFtZXRlcnNcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gZGlzYWJsZUNvbWJpbmVUZXh0SXRlbXMgLSBEbyBub3QgYXR0ZW1wdCB0byBjb21iaW5lXG4gKiAgIHNhbWUgbGluZSB7QGxpbmsgVGV4dEl0ZW19J3MuIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGBmYWxzZWAuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtpbmNsdWRlTWFya2VkQ29udGVudF0gLSBXaGVuIHRydWUgaW5jbHVkZSBtYXJrZWRcbiAqICAgY29udGVudCBpdGVtcyBpbiB0aGUgaXRlbXMgYXJyYXkgb2YgVGV4dENvbnRlbnQuIFRoZSBkZWZhdWx0IGlzIGBmYWxzZWAuXG4gKi9cblxuLyoqXG4gKiBQYWdlIHRleHQgY29udGVudC5cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUZXh0Q29udGVudFxuICogQHByb3BlcnR5IHtBcnJheTxUZXh0SXRlbSB8IFRleHRNYXJrZWRDb250ZW50Pn0gaXRlbXMgLSBBcnJheSBvZlxuICogICB7QGxpbmsgVGV4dEl0ZW19IGFuZCB7QGxpbmsgVGV4dE1hcmtlZENvbnRlbnR9IG9iamVjdHMuIFRleHRNYXJrZWRDb250ZW50XG4gKiAgIGl0ZW1zIGFyZSBpbmNsdWRlZCB3aGVuIGluY2x1ZGVNYXJrZWRDb250ZW50IGlzIHRydWUuXG4gKiBAcHJvcGVydHkge09iamVjdDxzdHJpbmcsIFRleHRTdHlsZT59IHN0eWxlcyAtIHtAbGluayBUZXh0U3R5bGV9IG9iamVjdHMsXG4gKiAgIGluZGV4ZWQgYnkgZm9udCBuYW1lLlxuICovXG5cbi8qKlxuICogUGFnZSB0ZXh0IGNvbnRlbnQgcGFydC5cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUZXh0SXRlbVxuICogQHByb3BlcnR5IHtzdHJpbmd9IHN0ciAtIFRleHQgY29udGVudC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBkaXIgLSBUZXh0IGRpcmVjdGlvbjogJ3R0YicsICdsdHInIG9yICdydGwnLlxuICogQHByb3BlcnR5IHtBcnJheTxhbnk+fSB0cmFuc2Zvcm0gLSBUcmFuc2Zvcm1hdGlvbiBtYXRyaXguXG4gKiBAcHJvcGVydHkge251bWJlcn0gd2lkdGggLSBXaWR0aCBpbiBkZXZpY2Ugc3BhY2UuXG4gKiBAcHJvcGVydHkge251bWJlcn0gaGVpZ2h0IC0gSGVpZ2h0IGluIGRldmljZSBzcGFjZS5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBmb250TmFtZSAtIEZvbnQgbmFtZSB1c2VkIGJ5IFBERi5qcyBmb3IgY29udmVydGVkIGZvbnQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGhhc0VPTCAtIEluZGljYXRpbmcgaWYgdGhlIHRleHQgY29udGVudCBpcyBmb2xsb3dlZCBieSBhXG4gKiAgIGxpbmUtYnJlYWsuXG4gKi9cblxuLyoqXG4gKiBQYWdlIHRleHQgbWFya2VkIGNvbnRlbnQgcGFydC5cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUZXh0TWFya2VkQ29udGVudFxuICogQHByb3BlcnR5IHtzdHJpbmd9IHR5cGUgLSBFaXRoZXIgJ2JlZ2luTWFya2VkQ29udGVudCcsXG4gKiAgICdiZWdpbk1hcmtlZENvbnRlbnRQcm9wcycsIG9yICdlbmRNYXJrZWRDb250ZW50Jy5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBpZCAtIFRoZSBtYXJrZWQgY29udGVudCBpZGVudGlmaWVyLiBPbmx5IHVzZWQgZm9yIHR5cGVcbiAqICAgJ2JlZ2luTWFya2VkQ29udGVudFByb3BzJy5cbiAqL1xuXG4vKipcbiAqIFRleHQgc3R5bGUuXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gVGV4dFN0eWxlXG4gKiBAcHJvcGVydHkge251bWJlcn0gYXNjZW50IC0gRm9udCBhc2NlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gZGVzY2VudCAtIEZvbnQgZGVzY2VudC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gdmVydGljYWwgLSBXaGV0aGVyIG9yIG5vdCB0aGUgdGV4dCBpcyBpbiB2ZXJ0aWNhbCBtb2RlLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IGZvbnRGYW1pbHkgLSBUaGUgcG9zc2libGUgZm9udCBmYW1pbHkuXG4gKi9cblxuLyoqXG4gKiBQYWdlIGFubm90YXRpb24gcGFyYW1ldGVycy5cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBHZXRBbm5vdGF0aW9uc1BhcmFtZXRlcnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbaW50ZW50XSAtIERldGVybWluZXMgdGhlIGFubm90YXRpb25zIHRoYXQgYXJlIGZldGNoZWQsXG4gKiAgIGNhbiBiZSAnZGlzcGxheScgKHZpZXdhYmxlIGFubm90YXRpb25zKSwgJ3ByaW50JyAocHJpbnRhYmxlIGFubm90YXRpb25zKSxcbiAqICAgb3IgJ2FueScgKGFsbCBhbm5vdGF0aW9ucykuIFRoZSBkZWZhdWx0IHZhbHVlIGlzICdkaXNwbGF5Jy5cbiAqL1xuXG4vKipcbiAqIFBhZ2UgcmVuZGVyIHBhcmFtZXRlcnMuXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gUmVuZGVyUGFyYW1ldGVyc1xuICogQHByb3BlcnR5IHtPYmplY3R9IGNhbnZhc0NvbnRleHQgLSBBIDJEIGNvbnRleHQgb2YgYSBET00gQ2FudmFzIG9iamVjdC5cbiAqIEBwcm9wZXJ0eSB7UGFnZVZpZXdwb3J0fSB2aWV3cG9ydCAtIFJlbmRlcmluZyB2aWV3cG9ydCBvYnRhaW5lZCBieSBjYWxsaW5nXG4gKiAgIHRoZSBgUERGUGFnZVByb3h5LmdldFZpZXdwb3J0YCBtZXRob2QuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2ludGVudF0gLSBSZW5kZXJpbmcgaW50ZW50LCBjYW4gYmUgJ2Rpc3BsYXknLCAncHJpbnQnLFxuICogICBvciAnYW55Jy4gVGhlIGRlZmF1bHQgdmFsdWUgaXMgJ2Rpc3BsYXknLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFthbm5vdGF0aW9uTW9kZV0gQ29udHJvbHMgd2hpY2ggYW5ub3RhdGlvbnMgYXJlIHJlbmRlcmVkXG4gKiAgIG9udG8gdGhlIGNhbnZhcywgZm9yIGFubm90YXRpb25zIHdpdGggYXBwZWFyYW5jZS1kYXRhOyB0aGUgdmFsdWVzIGZyb21cbiAqICAge0BsaW5rIEFubm90YXRpb25Nb2RlfSBzaG91bGQgYmUgdXNlZC4gVGhlIGZvbGxvd2luZyB2YWx1ZXMgYXJlIHN1cHBvcnRlZDpcbiAqICAgIC0gYEFubm90YXRpb25Nb2RlLkRJU0FCTEVgLCB3aGljaCBkaXNhYmxlcyBhbGwgYW5ub3RhdGlvbnMuXG4gKiAgICAtIGBBbm5vdGF0aW9uTW9kZS5FTkFCTEVgLCB3aGljaCBpbmNsdWRlcyBhbGwgcG9zc2libGUgYW5ub3RhdGlvbnMgKHRodXNcbiAqICAgICAgaXQgYWxzbyBkZXBlbmRzIG9uIHRoZSBgaW50ZW50YC1vcHRpb24sIHNlZSBhYm92ZSkuXG4gKiAgICAtIGBBbm5vdGF0aW9uTW9kZS5FTkFCTEVfRk9STVNgLCB3aGljaCBleGNsdWRlcyBhbm5vdGF0aW9ucyB0aGF0IGNvbnRhaW5cbiAqICAgICAgaW50ZXJhY3RpdmUgZm9ybSBlbGVtZW50cyAodGhvc2Ugd2lsbCBiZSByZW5kZXJlZCBpbiB0aGUgZGlzcGxheSBsYXllcikuXG4gKiAgICAtIGBBbm5vdGF0aW9uTW9kZS5FTkFCTEVfU1RPUkFHRWAsIHdoaWNoIGluY2x1ZGVzIGFsbCBwb3NzaWJsZSBhbm5vdGF0aW9uc1xuICogICAgICAoYXMgYWJvdmUpIGJ1dCB3aGVyZSBpbnRlcmFjdGl2ZSBmb3JtIGVsZW1lbnRzIGFyZSB1cGRhdGVkIHdpdGggZGF0YVxuICogICAgICBmcm9tIHRoZSB7QGxpbmsgQW5ub3RhdGlvblN0b3JhZ2V9LWluc3RhbmNlOyB1c2VmdWwgZS5nLiBmb3IgcHJpbnRpbmcuXG4gKiAgIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGBBbm5vdGF0aW9uTW9kZS5FTkFCTEVgLlxuICogQHByb3BlcnR5IHtBcnJheTxhbnk+fSBbdHJhbnNmb3JtXSAtIEFkZGl0aW9uYWwgdHJhbnNmb3JtLCBhcHBsaWVkIGp1c3RcbiAqICAgYmVmb3JlIHZpZXdwb3J0IHRyYW5zZm9ybS5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBbaW1hZ2VMYXllcl0gLSBBbiBvYmplY3QgdGhhdCBoYXMgYGJlZ2luTGF5b3V0YCxcbiAqICAgYGVuZExheW91dGAgYW5kIGBhcHBlbmRJbWFnZWAgZnVuY3Rpb25zLlxuICogQHByb3BlcnR5IHtPYmplY3R9IFtjYW52YXNGYWN0b3J5XSAtIFRoZSBmYWN0b3J5IGluc3RhbmNlIHRoYXQgd2lsbCBiZSB1c2VkXG4gKiAgIHdoZW4gY3JlYXRpbmcgY2FudmFzZXMuIFRoZSBkZWZhdWx0IHZhbHVlIGlzIHtuZXcgRE9NQ2FudmFzRmFjdG9yeSgpfS5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0IHwgc3RyaW5nfSBbYmFja2dyb3VuZF0gLSBCYWNrZ3JvdW5kIHRvIHVzZSBmb3IgdGhlIGNhbnZhcy5cbiAqICAgQW55IHZhbGlkIGBjYW52YXMuZmlsbFN0eWxlYCBjYW4gYmUgdXNlZDogYSBgRE9NU3RyaW5nYCBwYXJzZWQgYXMgQ1NTXG4gKiAgIDxjb2xvcj4gdmFsdWUsIGEgYENhbnZhc0dyYWRpZW50YCBvYmplY3QgKGEgbGluZWFyIG9yIHJhZGlhbCBncmFkaWVudCkgb3JcbiAqICAgYSBgQ2FudmFzUGF0dGVybmAgb2JqZWN0IChhIHJlcGV0aXRpdmUgaW1hZ2UpLiBUaGUgZGVmYXVsdCB2YWx1ZSBpc1xuICogICAncmdiKDI1NSwyNTUsMjU1KScuXG4gKlxuICogICBOT1RFOiBUaGlzIG9wdGlvbiBtYXkgYmUgcGFydGlhbGx5LCBvciBjb21wbGV0ZWx5LCBpZ25vcmVkIHdoZW4gdGhlXG4gKiAgIGBwYWdlQ29sb3JzYC1vcHRpb24gaXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBbcGFnZUNvbG9yc10gLSBPdmVyd3JpdGVzIGJhY2tncm91bmQgYW5kIGZvcmVncm91bmQgY29sb3JzXG4gKiAgIHdpdGggdXNlciBkZWZpbmVkIG9uZXMgaW4gb3JkZXIgdG8gaW1wcm92ZSByZWFkYWJpbGl0eSBpbiBoaWdoIGNvbnRyYXN0XG4gKiAgIG1vZGUuXG4gKiBAcHJvcGVydHkge1Byb21pc2U8T3B0aW9uYWxDb250ZW50Q29uZmlnPn0gW29wdGlvbmFsQ29udGVudENvbmZpZ1Byb21pc2VdIC1cbiAqICAgQSBwcm9taXNlIHRoYXQgc2hvdWxkIHJlc29sdmUgd2l0aCBhbiB7QGxpbmsgT3B0aW9uYWxDb250ZW50Q29uZmlnfVxuICogICBjcmVhdGVkIGZyb20gYFBERkRvY3VtZW50UHJveHkuZ2V0T3B0aW9uYWxDb250ZW50Q29uZmlnYC4gSWYgYG51bGxgLFxuICogICB0aGUgY29uZmlndXJhdGlvbiB3aWxsIGJlIGZldGNoZWQgYXV0b21hdGljYWxseSB3aXRoIHRoZSBkZWZhdWx0IHZpc2liaWxpdHlcbiAqICAgc3RhdGVzIHNldC5cbiAqIEBwcm9wZXJ0eSB7TWFwPHN0cmluZywgSFRNTENhbnZhc0VsZW1lbnQ+fSBbYW5ub3RhdGlvbkNhbnZhc01hcF0gLSBNYXAgc29tZVxuICogICBhbm5vdGF0aW9uIGlkcyB3aXRoIGNhbnZhc2VzIHVzZWQgdG8gcmVuZGVyIHRoZW0uXG4gKi9cblxuLyoqXG4gKiBQYWdlIGdldE9wZXJhdG9yTGlzdCBwYXJhbWV0ZXJzLlxuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEdldE9wZXJhdG9yTGlzdFBhcmFtZXRlcnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbaW50ZW50XSAtIFJlbmRlcmluZyBpbnRlbnQsIGNhbiBiZSAnZGlzcGxheScsICdwcmludCcsXG4gKiAgIG9yICdhbnknLiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyAnZGlzcGxheScuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2Fubm90YXRpb25Nb2RlXSBDb250cm9scyB3aGljaCBhbm5vdGF0aW9ucyBhcmUgaW5jbHVkZWRcbiAqICAgaW4gdGhlIG9wZXJhdG9yTGlzdCwgZm9yIGFubm90YXRpb25zIHdpdGggYXBwZWFyYW5jZS1kYXRhOyB0aGUgdmFsdWVzIGZyb21cbiAqICAge0BsaW5rIEFubm90YXRpb25Nb2RlfSBzaG91bGQgYmUgdXNlZC4gVGhlIGZvbGxvd2luZyB2YWx1ZXMgYXJlIHN1cHBvcnRlZDpcbiAqICAgIC0gYEFubm90YXRpb25Nb2RlLkRJU0FCTEVgLCB3aGljaCBkaXNhYmxlcyBhbGwgYW5ub3RhdGlvbnMuXG4gKiAgICAtIGBBbm5vdGF0aW9uTW9kZS5FTkFCTEVgLCB3aGljaCBpbmNsdWRlcyBhbGwgcG9zc2libGUgYW5ub3RhdGlvbnMgKHRodXNcbiAqICAgICAgaXQgYWxzbyBkZXBlbmRzIG9uIHRoZSBgaW50ZW50YC1vcHRpb24sIHNlZSBhYm92ZSkuXG4gKiAgICAtIGBBbm5vdGF0aW9uTW9kZS5FTkFCTEVfRk9STVNgLCB3aGljaCBleGNsdWRlcyBhbm5vdGF0aW9ucyB0aGF0IGNvbnRhaW5cbiAqICAgICAgaW50ZXJhY3RpdmUgZm9ybSBlbGVtZW50cyAodGhvc2Ugd2lsbCBiZSByZW5kZXJlZCBpbiB0aGUgZGlzcGxheSBsYXllcikuXG4gKiAgICAtIGBBbm5vdGF0aW9uTW9kZS5FTkFCTEVfU1RPUkFHRWAsIHdoaWNoIGluY2x1ZGVzIGFsbCBwb3NzaWJsZSBhbm5vdGF0aW9uc1xuICogICAgICAoYXMgYWJvdmUpIGJ1dCB3aGVyZSBpbnRlcmFjdGl2ZSBmb3JtIGVsZW1lbnRzIGFyZSB1cGRhdGVkIHdpdGggZGF0YVxuICogICAgICBmcm9tIHRoZSB7QGxpbmsgQW5ub3RhdGlvblN0b3JhZ2V9LWluc3RhbmNlOyB1c2VmdWwgZS5nLiBmb3IgcHJpbnRpbmcuXG4gKiAgIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGBBbm5vdGF0aW9uTW9kZS5FTkFCTEVgLlxuICovXG5cbi8qKlxuICogU3RydWN0dXJlIHRyZWUgbm9kZS4gVGhlIHJvb3Qgbm9kZSB3aWxsIGhhdmUgYSByb2xlIFwiUm9vdFwiLlxuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFN0cnVjdFRyZWVOb2RlXG4gKiBAcHJvcGVydHkge0FycmF5PFN0cnVjdFRyZWVOb2RlIHwgU3RydWN0VHJlZUNvbnRlbnQ+fSBjaGlsZHJlbiAtIEFycmF5IG9mXG4gKiAgIHtAbGluayBTdHJ1Y3RUcmVlTm9kZX0gYW5kIHtAbGluayBTdHJ1Y3RUcmVlQ29udGVudH0gb2JqZWN0cy5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSByb2xlIC0gZWxlbWVudCdzIHJvbGUsIGFscmVhZHkgbWFwcGVkIGlmIGEgcm9sZSBtYXAgZXhpc3RzXG4gKiBpbiB0aGUgUERGLlxuICovXG5cbi8qKlxuICogU3RydWN0dXJlIHRyZWUgY29udGVudC5cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTdHJ1Y3RUcmVlQ29udGVudFxuICogQHByb3BlcnR5IHtzdHJpbmd9IHR5cGUgLSBlaXRoZXIgXCJjb250ZW50XCIgZm9yIHBhZ2UgYW5kIHN0cmVhbSBzdHJ1Y3R1cmVcbiAqICAgZWxlbWVudHMgb3IgXCJvYmplY3RcIiBmb3Igb2JqZWN0IHJlZmVyZW5jZXMuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gaWQgLSB1bmlxdWUgaWQgdGhhdCB3aWxsIG1hcCB0byB0aGUgdGV4dCBsYXllci5cbiAqL1xuXG4vKipcbiAqIFBERiBwYWdlIG9wZXJhdG9yIGxpc3QuXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gUERGT3BlcmF0b3JMaXN0XG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IGZuQXJyYXkgLSBBcnJheSBjb250YWluaW5nIHRoZSBvcGVyYXRvciBmdW5jdGlvbnMuXG4gKiBAcHJvcGVydHkge0FycmF5PGFueT59IGFyZ3NBcnJheSAtIEFycmF5IGNvbnRhaW5pbmcgdGhlIGFyZ3VtZW50cyBvZiB0aGVcbiAqICAgZnVuY3Rpb25zLlxuICovXG5cbi8qKlxuICogUHJveHkgdG8gYSBgUERGUGFnZWAgaW4gdGhlIHdvcmtlciB0aHJlYWQuXG4gKi9cbmNsYXNzIFBERlBhZ2VQcm94eSB7XG4gIGNvbnN0cnVjdG9yKHBhZ2VJbmRleCwgcGFnZUluZm8sIHRyYW5zcG9ydCwgb3duZXJEb2N1bWVudCwgcGRmQnVnID0gZmFsc2UpIHtcbiAgICB0aGlzLl9wYWdlSW5kZXggPSBwYWdlSW5kZXg7XG4gICAgdGhpcy5fcGFnZUluZm8gPSBwYWdlSW5mbztcbiAgICB0aGlzLl9vd25lckRvY3VtZW50ID0gb3duZXJEb2N1bWVudDtcbiAgICB0aGlzLl90cmFuc3BvcnQgPSB0cmFuc3BvcnQ7XG4gICAgdGhpcy5fc3RhdHMgPSBwZGZCdWcgPyBuZXcgU3RhdFRpbWVyKCkgOiBudWxsO1xuICAgIHRoaXMuX3BkZkJ1ZyA9IHBkZkJ1ZztcbiAgICAvKiogQHR5cGUge1BERk9iamVjdHN9ICovXG4gICAgdGhpcy5jb21tb25PYmpzID0gdHJhbnNwb3J0LmNvbW1vbk9ianM7XG4gICAgdGhpcy5vYmpzID0gbmV3IFBERk9iamVjdHMoKTtcblxuICAgIHRoaXMuX2JpdG1hcHMgPSBuZXcgU2V0KCk7XG5cbiAgICB0aGlzLmNsZWFudXBBZnRlclJlbmRlciA9IGZhbHNlO1xuICAgIHRoaXMucGVuZGluZ0NsZWFudXAgPSBmYWxzZTtcbiAgICB0aGlzLl9pbnRlbnRTdGF0ZXMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5fYW5ub3RhdGlvblByb21pc2VzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge251bWJlcn0gUGFnZSBudW1iZXIgb2YgdGhlIHBhZ2UuIEZpcnN0IHBhZ2UgaXMgMS5cbiAgICovXG4gIGdldCBwYWdlTnVtYmVyKCkge1xuICAgIHJldHVybiB0aGlzLl9wYWdlSW5kZXggKyAxO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtudW1iZXJ9IFRoZSBudW1iZXIgb2YgZGVncmVlcyB0aGUgcGFnZSBpcyByb3RhdGVkIGNsb2Nrd2lzZS5cbiAgICovXG4gIGdldCByb3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhZ2VJbmZvLnJvdGF0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7UmVmUHJveHkgfCBudWxsfSBUaGUgcmVmZXJlbmNlIHRoYXQgcG9pbnRzIHRvIHRoaXMgcGFnZS5cbiAgICovXG4gIGdldCByZWYoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhZ2VJbmZvLnJlZjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7bnVtYmVyfSBUaGUgZGVmYXVsdCBzaXplIG9mIHVuaXRzIGluIDEvNzJuZHMgb2YgYW4gaW5jaC5cbiAgICovXG4gIGdldCB1c2VyVW5pdCgpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFnZUluZm8udXNlclVuaXQ7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge0FycmF5PG51bWJlcj59IEFuIGFycmF5IG9mIHRoZSB2aXNpYmxlIHBvcnRpb24gb2YgdGhlIFBERiBwYWdlIGluXG4gICAqICAgdXNlciBzcGFjZSB1bml0cyBbeDEsIHkxLCB4MiwgeTJdLlxuICAgKi9cbiAgZ2V0IHZpZXcoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhZ2VJbmZvLnZpZXc7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtHZXRWaWV3cG9ydFBhcmFtZXRlcnN9IHBhcmFtcyAtIFZpZXdwb3J0IHBhcmFtZXRlcnMuXG4gICAqIEByZXR1cm5zIHtQYWdlVmlld3BvcnR9IENvbnRhaW5zICd3aWR0aCcgYW5kICdoZWlnaHQnIHByb3BlcnRpZXNcbiAgICogICBhbG9uZyB3aXRoIHRyYW5zZm9ybXMgcmVxdWlyZWQgZm9yIHJlbmRlcmluZy5cbiAgICovXG4gIGdldFZpZXdwb3J0KHtcbiAgICBzY2FsZSxcbiAgICByb3RhdGlvbiA9IHRoaXMucm90YXRlLFxuICAgIG9mZnNldFggPSAwLFxuICAgIG9mZnNldFkgPSAwLFxuICAgIGRvbnRGbGlwID0gZmFsc2UsXG4gIH0gPSB7fSkge1xuICAgIHJldHVybiBuZXcgUGFnZVZpZXdwb3J0KHtcbiAgICAgIHZpZXdCb3g6IHRoaXMudmlldyxcbiAgICAgIHNjYWxlLFxuICAgICAgcm90YXRpb24sXG4gICAgICBvZmZzZXRYLFxuICAgICAgb2Zmc2V0WSxcbiAgICAgIGRvbnRGbGlwLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7R2V0QW5ub3RhdGlvbnNQYXJhbWV0ZXJzfSBwYXJhbXMgLSBBbm5vdGF0aW9uIHBhcmFtZXRlcnMuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPEFycmF5PGFueT4+fSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aXRoIGFuXG4gICAqICAge0FycmF5fSBvZiB0aGUgYW5ub3RhdGlvbiBvYmplY3RzLlxuICAgKi9cbiAgZ2V0QW5ub3RhdGlvbnMoeyBpbnRlbnQgPSBcImRpc3BsYXlcIiB9ID0ge30pIHtcbiAgICBjb25zdCBpbnRlbnRBcmdzID0gdGhpcy5fdHJhbnNwb3J0LmdldFJlbmRlcmluZ0ludGVudChpbnRlbnQpO1xuXG4gICAgbGV0IHByb21pc2UgPSB0aGlzLl9hbm5vdGF0aW9uUHJvbWlzZXMuZ2V0KGludGVudEFyZ3MuY2FjaGVLZXkpO1xuICAgIGlmICghcHJvbWlzZSkge1xuICAgICAgcHJvbWlzZSA9IHRoaXMuX3RyYW5zcG9ydC5nZXRBbm5vdGF0aW9ucyhcbiAgICAgICAgdGhpcy5fcGFnZUluZGV4LFxuICAgICAgICBpbnRlbnRBcmdzLnJlbmRlcmluZ0ludGVudFxuICAgICAgKTtcbiAgICAgIHRoaXMuX2Fubm90YXRpb25Qcm9taXNlcy5zZXQoaW50ZW50QXJncy5jYWNoZUtleSwgcHJvbWlzZSk7XG5cbiAgICAgIGlmICh0eXBlb2YgUERGSlNEZXYgPT09IFwidW5kZWZpbmVkXCIgfHwgUERGSlNEZXYudGVzdChcIkdFTkVSSUNcIikpIHtcbiAgICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihhbm5vdGF0aW9ucyA9PiB7XG4gICAgICAgICAgZm9yIChjb25zdCBhbm5vdGF0aW9uIG9mIGFubm90YXRpb25zKSB7XG4gICAgICAgICAgICBpZiAoYW5ub3RhdGlvbi50aXRsZU9iaiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhbm5vdGF0aW9uLCBcInRpdGxlXCIsIHtcbiAgICAgICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICBkZXByZWNhdGVkKFxuICAgICAgICAgICAgICAgICAgICBcImB0aXRsZWAtcHJvcGVydHkgb24gYW5ub3RhdGlvbiwgcGxlYXNlIHVzZSBgdGl0bGVPYmpgIGluc3RlYWQuXCJcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gYW5ub3RhdGlvbi50aXRsZU9iai5zdHI7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYW5ub3RhdGlvbi5jb250ZW50c09iaiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhbm5vdGF0aW9uLCBcImNvbnRlbnRzXCIsIHtcbiAgICAgICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICBkZXByZWNhdGVkKFxuICAgICAgICAgICAgICAgICAgICBcImBjb250ZW50c2AtcHJvcGVydHkgb24gYW5ub3RhdGlvbiwgcGxlYXNlIHVzZSBgY29udGVudHNPYmpgIGluc3RlYWQuXCJcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gYW5ub3RhdGlvbi5jb250ZW50c09iai5zdHI7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBhbm5vdGF0aW9ucztcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdpdGggYW5cbiAgICogICB7T2JqZWN0fSB3aXRoIEpTIGFjdGlvbnMuXG4gICAqL1xuICBnZXRKU0FjdGlvbnMoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9qc0FjdGlvbnNQcm9taXNlIHx8PSB0aGlzLl90cmFuc3BvcnQuZ2V0UGFnZUpTQWN0aW9ucyhcbiAgICAgIHRoaXMuX3BhZ2VJbmRleFxuICAgICkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdCB8IG51bGw+fSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aXRoXG4gICAqICAgYW4ge09iamVjdH0gd2l0aCBhIGZha2UgRE9NIG9iamVjdCAoYSB0cmVlIHN0cnVjdHVyZSB3aGVyZSBlbGVtZW50c1xuICAgKiAgIGFyZSB7T2JqZWN0fSB3aXRoIGEgbmFtZSwgYXR0cmlidXRlcyAoY2xhc3MsIHN0eWxlLCAuLi4pLCB2YWx1ZSBhbmRcbiAgICogICBjaGlsZHJlbiwgdmVyeSBzaW1pbGFyIHRvIGEgSFRNTCBET00gdHJlZSksIG9yIGBudWxsYCBpZiBubyBYRkEgZXhpc3RzLlxuICAgKi9cbiAgYXN5bmMgZ2V0WGZhKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuX2h0bWxGb3JYZmE/LmNoaWxkcmVuW3RoaXMuX3BhZ2VJbmRleF0gfHwgbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBCZWdpbnMgdGhlIHByb2Nlc3Mgb2YgcmVuZGVyaW5nIGEgcGFnZSB0byB0aGUgZGVzaXJlZCBjb250ZXh0LlxuICAgKlxuICAgKiBAcGFyYW0ge1JlbmRlclBhcmFtZXRlcnN9IHBhcmFtcyAtIFBhZ2UgcmVuZGVyIHBhcmFtZXRlcnMuXG4gICAqIEByZXR1cm5zIHtSZW5kZXJUYXNrfSBBbiBvYmplY3QgdGhhdCBjb250YWlucyBhIHByb21pc2UgdGhhdCBpc1xuICAgKiAgIHJlc29sdmVkIHdoZW4gdGhlIHBhZ2UgZmluaXNoZXMgcmVuZGVyaW5nLlxuICAgKi9cbiAgcmVuZGVyKHtcbiAgICBjYW52YXNDb250ZXh0LFxuICAgIHZpZXdwb3J0LFxuICAgIGludGVudCA9IFwiZGlzcGxheVwiLFxuICAgIGFubm90YXRpb25Nb2RlID0gQW5ub3RhdGlvbk1vZGUuRU5BQkxFLFxuICAgIHRyYW5zZm9ybSA9IG51bGwsXG4gICAgaW1hZ2VMYXllciA9IG51bGwsXG4gICAgY2FudmFzRmFjdG9yeSA9IG51bGwsXG4gICAgYmFja2dyb3VuZCA9IG51bGwsXG4gICAgb3B0aW9uYWxDb250ZW50Q29uZmlnUHJvbWlzZSA9IG51bGwsXG4gICAgYW5ub3RhdGlvbkNhbnZhc01hcCA9IG51bGwsXG4gICAgcGFnZUNvbG9ycyA9IG51bGwsXG4gIH0pIHtcbiAgICBpZiAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJHRU5FUklDXCIpKSB7XG4gICAgICBpZiAoYXJndW1lbnRzWzBdPy5yZW5kZXJJbnRlcmFjdGl2ZUZvcm1zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZGVwcmVjYXRlZChcbiAgICAgICAgICBcInJlbmRlciBubyBsb25nZXIgYWNjZXB0cyB0aGUgYHJlbmRlckludGVyYWN0aXZlRm9ybXNgLW9wdGlvbiwgXCIgK1xuICAgICAgICAgICAgXCJwbGVhc2UgdXNlIHRoZSBgYW5ub3RhdGlvbk1vZGVgLW9wdGlvbiBpbnN0ZWFkLlwiXG4gICAgICAgICk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBhcmd1bWVudHNbMF0ucmVuZGVySW50ZXJhY3RpdmVGb3JtcyA9PT0gdHJ1ZSAmJlxuICAgICAgICAgIGFubm90YXRpb25Nb2RlID09PSBBbm5vdGF0aW9uTW9kZS5FTkFCTEVcbiAgICAgICAgKSB7XG4gICAgICAgICAgYW5ub3RhdGlvbk1vZGUgPSBBbm5vdGF0aW9uTW9kZS5FTkFCTEVfRk9STVM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChhcmd1bWVudHNbMF0/LmluY2x1ZGVBbm5vdGF0aW9uU3RvcmFnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGRlcHJlY2F0ZWQoXG4gICAgICAgICAgXCJyZW5kZXIgbm8gbG9uZ2VyIGFjY2VwdHMgdGhlIGBpbmNsdWRlQW5ub3RhdGlvblN0b3JhZ2VgLW9wdGlvbiwgXCIgK1xuICAgICAgICAgICAgXCJwbGVhc2UgdXNlIHRoZSBgYW5ub3RhdGlvbk1vZGVgLW9wdGlvbiBpbnN0ZWFkLlwiXG4gICAgICAgICk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBhcmd1bWVudHNbMF0uaW5jbHVkZUFubm90YXRpb25TdG9yYWdlID09PSB0cnVlICYmXG4gICAgICAgICAgYW5ub3RhdGlvbk1vZGUgPT09IEFubm90YXRpb25Nb2RlLkVOQUJMRVxuICAgICAgICApIHtcbiAgICAgICAgICBhbm5vdGF0aW9uTW9kZSA9IEFubm90YXRpb25Nb2RlLkVOQUJMRV9TVE9SQUdFO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3N0YXRzKSB7XG4gICAgICB0aGlzLl9zdGF0cy50aW1lKFwiT3ZlcmFsbFwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBpbnRlbnRBcmdzID0gdGhpcy5fdHJhbnNwb3J0LmdldFJlbmRlcmluZ0ludGVudChcbiAgICAgIGludGVudCxcbiAgICAgIGFubm90YXRpb25Nb2RlXG4gICAgKTtcbiAgICAvLyBJZiB0aGVyZSB3YXMgYSBwZW5kaW5nIGRlc3Ryb3ksIGNhbmNlbCBpdCBzbyBubyBjbGVhbnVwIGhhcHBlbnMgZHVyaW5nXG4gICAgLy8gdGhpcyBjYWxsIHRvIHJlbmRlci5cbiAgICB0aGlzLnBlbmRpbmdDbGVhbnVwID0gZmFsc2U7XG5cbiAgICBpZiAoIW9wdGlvbmFsQ29udGVudENvbmZpZ1Byb21pc2UpIHtcbiAgICAgIG9wdGlvbmFsQ29udGVudENvbmZpZ1Byb21pc2UgPSB0aGlzLl90cmFuc3BvcnQuZ2V0T3B0aW9uYWxDb250ZW50Q29uZmlnKCk7XG4gICAgfVxuXG4gICAgbGV0IGludGVudFN0YXRlID0gdGhpcy5faW50ZW50U3RhdGVzLmdldChpbnRlbnRBcmdzLmNhY2hlS2V5KTtcbiAgICBpZiAoIWludGVudFN0YXRlKSB7XG4gICAgICBpbnRlbnRTdGF0ZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICB0aGlzLl9pbnRlbnRTdGF0ZXMuc2V0KGludGVudEFyZ3MuY2FjaGVLZXksIGludGVudFN0YXRlKTtcbiAgICB9XG5cbiAgICAvLyBFbnN1cmUgdGhhdCBhIHBlbmRpbmcgYHN0cmVhbVJlYWRlcmAgY2FuY2VsIHRpbWVvdXQgaXMgYWx3YXlzIGFib3J0ZWQuXG4gICAgaWYgKGludGVudFN0YXRlLnN0cmVhbVJlYWRlckNhbmNlbFRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dChpbnRlbnRTdGF0ZS5zdHJlYW1SZWFkZXJDYW5jZWxUaW1lb3V0KTtcbiAgICAgIGludGVudFN0YXRlLnN0cmVhbVJlYWRlckNhbmNlbFRpbWVvdXQgPSBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGNhbnZhc0ZhY3RvcnlJbnN0YW5jZSA9XG4gICAgICBjYW52YXNGYWN0b3J5IHx8XG4gICAgICBuZXcgRGVmYXVsdENhbnZhc0ZhY3RvcnkoeyBvd25lckRvY3VtZW50OiB0aGlzLl9vd25lckRvY3VtZW50IH0pO1xuICAgIGNvbnN0IGludGVudFByaW50ID0gISEoXG4gICAgICBpbnRlbnRBcmdzLnJlbmRlcmluZ0ludGVudCAmIFJlbmRlcmluZ0ludGVudEZsYWcuUFJJTlRcbiAgICApO1xuXG4gICAgLy8gSWYgdGhlcmUncyBubyBkaXNwbGF5UmVhZHlDYXBhYmlsaXR5IHlldCwgdGhlbiB0aGUgb3BlcmF0b3JMaXN0XG4gICAgLy8gd2FzIG5ldmVyIHJlcXVlc3RlZCBiZWZvcmUuIE1ha2UgdGhlIHJlcXVlc3QgYW5kIGNyZWF0ZSB0aGUgcHJvbWlzZS5cbiAgICBpZiAoIWludGVudFN0YXRlLmRpc3BsYXlSZWFkeUNhcGFiaWxpdHkpIHtcbiAgICAgIGludGVudFN0YXRlLmRpc3BsYXlSZWFkeUNhcGFiaWxpdHkgPSBjcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSgpO1xuICAgICAgaW50ZW50U3RhdGUub3BlcmF0b3JMaXN0ID0ge1xuICAgICAgICBmbkFycmF5OiBbXSxcbiAgICAgICAgYXJnc0FycmF5OiBbXSxcbiAgICAgICAgbGFzdENodW5rOiBmYWxzZSxcbiAgICAgIH07XG5cbiAgICAgIGlmICh0aGlzLl9zdGF0cykge1xuICAgICAgICB0aGlzLl9zdGF0cy50aW1lKFwiUGFnZSBSZXF1ZXN0XCIpO1xuICAgICAgfVxuICAgICAgdGhpcy5fcHVtcE9wZXJhdG9yTGlzdChpbnRlbnRBcmdzKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb21wbGV0ZSA9IGVycm9yID0+IHtcbiAgICAgIGludGVudFN0YXRlLnJlbmRlclRhc2tzLmRlbGV0ZShpbnRlcm5hbFJlbmRlclRhc2spO1xuXG4gICAgICAvLyBBdHRlbXB0IHRvIHJlZHVjZSBtZW1vcnkgdXNhZ2UgZHVyaW5nICpwcmludGluZyosIGJ5IGFsd2F5cyBydW5uaW5nXG4gICAgICAvLyBjbGVhbnVwIG9uY2UgcmVuZGVyaW5nIGhhcyBmaW5pc2hlZCAocmVnYXJkbGVzcyBvZiBjbGVhbnVwQWZ0ZXJSZW5kZXIpLlxuICAgICAgaWYgKHRoaXMuY2xlYW51cEFmdGVyUmVuZGVyIHx8IGludGVudFByaW50KSB7XG4gICAgICAgIHRoaXMucGVuZGluZ0NsZWFudXAgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy5fdHJ5Q2xlYW51cCgpO1xuXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgaW50ZXJuYWxSZW5kZXJUYXNrLmNhcGFiaWxpdHkucmVqZWN0KGVycm9yKTtcblxuICAgICAgICB0aGlzLl9hYm9ydE9wZXJhdG9yTGlzdCh7XG4gICAgICAgICAgaW50ZW50U3RhdGUsXG4gICAgICAgICAgcmVhc29uOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoZXJyb3IpLFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGludGVybmFsUmVuZGVyVGFzay5jYXBhYmlsaXR5LnJlc29sdmUoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9zdGF0cykge1xuICAgICAgICB0aGlzLl9zdGF0cy50aW1lRW5kKFwiUmVuZGVyaW5nXCIpO1xuICAgICAgICB0aGlzLl9zdGF0cy50aW1lRW5kKFwiT3ZlcmFsbFwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgaW50ZXJuYWxSZW5kZXJUYXNrID0gbmV3IEludGVybmFsUmVuZGVyVGFzayh7XG4gICAgICBjYWxsYmFjazogY29tcGxldGUsXG4gICAgICAvLyBPbmx5IGluY2x1ZGUgdGhlIHJlcXVpcmVkIHByb3BlcnRpZXMsIGFuZCAqbm90KiB0aGUgZW50aXJlIG9iamVjdC5cbiAgICAgIHBhcmFtczoge1xuICAgICAgICBjYW52YXNDb250ZXh0LFxuICAgICAgICB2aWV3cG9ydCxcbiAgICAgICAgdHJhbnNmb3JtLFxuICAgICAgICBpbWFnZUxheWVyLFxuICAgICAgICBiYWNrZ3JvdW5kLFxuICAgICAgfSxcbiAgICAgIG9ianM6IHRoaXMub2JqcyxcbiAgICAgIGNvbW1vbk9ianM6IHRoaXMuY29tbW9uT2JqcyxcbiAgICAgIGFubm90YXRpb25DYW52YXNNYXAsXG4gICAgICBvcGVyYXRvckxpc3Q6IGludGVudFN0YXRlLm9wZXJhdG9yTGlzdCxcbiAgICAgIHBhZ2VJbmRleDogdGhpcy5fcGFnZUluZGV4LFxuICAgICAgY2FudmFzRmFjdG9yeTogY2FudmFzRmFjdG9yeUluc3RhbmNlLFxuICAgICAgdXNlUmVxdWVzdEFuaW1hdGlvbkZyYW1lOiAhaW50ZW50UHJpbnQsXG4gICAgICBwZGZCdWc6IHRoaXMuX3BkZkJ1ZyxcbiAgICAgIHBhZ2VDb2xvcnMsXG4gICAgfSk7XG5cbiAgICAoaW50ZW50U3RhdGUucmVuZGVyVGFza3MgfHw9IG5ldyBTZXQoKSkuYWRkKGludGVybmFsUmVuZGVyVGFzayk7XG4gICAgY29uc3QgcmVuZGVyVGFzayA9IGludGVybmFsUmVuZGVyVGFzay50YXNrO1xuXG4gICAgUHJvbWlzZS5hbGwoW1xuICAgICAgaW50ZW50U3RhdGUuZGlzcGxheVJlYWR5Q2FwYWJpbGl0eS5wcm9taXNlLFxuICAgICAgb3B0aW9uYWxDb250ZW50Q29uZmlnUHJvbWlzZSxcbiAgICBdKVxuICAgICAgLnRoZW4oKFt0cmFuc3BhcmVuY3ksIG9wdGlvbmFsQ29udGVudENvbmZpZ10pID0+IHtcbiAgICAgICAgaWYgKHRoaXMucGVuZGluZ0NsZWFudXApIHtcbiAgICAgICAgICBjb21wbGV0ZSgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fc3RhdHMpIHtcbiAgICAgICAgICB0aGlzLl9zdGF0cy50aW1lKFwiUmVuZGVyaW5nXCIpO1xuICAgICAgICB9XG4gICAgICAgIGludGVybmFsUmVuZGVyVGFzay5pbml0aWFsaXplR3JhcGhpY3Moe1xuICAgICAgICAgIHRyYW5zcGFyZW5jeSxcbiAgICAgICAgICBvcHRpb25hbENvbnRlbnRDb25maWcsXG4gICAgICAgIH0pO1xuICAgICAgICBpbnRlcm5hbFJlbmRlclRhc2sub3BlcmF0b3JMaXN0Q2hhbmdlZCgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChjb21wbGV0ZSk7XG5cbiAgICByZXR1cm4gcmVuZGVyVGFzaztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0dldE9wZXJhdG9yTGlzdFBhcmFtZXRlcnN9IHBhcmFtcyAtIFBhZ2UgZ2V0T3BlcmF0b3JMaXN0XG4gICAqICAgcGFyYW1ldGVycy5cbiAgICogQHJldHVybnMge1Byb21pc2U8UERGT3BlcmF0b3JMaXN0Pn0gQSBwcm9taXNlIHJlc29sdmVkIHdpdGggYW5cbiAgICogICB7QGxpbmsgUERGT3BlcmF0b3JMaXN0fSBvYmplY3QgdGhhdCByZXByZXNlbnRzIHRoZSBwYWdlJ3Mgb3BlcmF0b3IgbGlzdC5cbiAgICovXG4gIGdldE9wZXJhdG9yTGlzdCh7XG4gICAgaW50ZW50ID0gXCJkaXNwbGF5XCIsXG4gICAgYW5ub3RhdGlvbk1vZGUgPSBBbm5vdGF0aW9uTW9kZS5FTkFCTEUsXG4gIH0gPSB7fSkge1xuICAgIGZ1bmN0aW9uIG9wZXJhdG9yTGlzdENoYW5nZWQoKSB7XG4gICAgICBpZiAoaW50ZW50U3RhdGUub3BlcmF0b3JMaXN0Lmxhc3RDaHVuaykge1xuICAgICAgICBpbnRlbnRTdGF0ZS5vcExpc3RSZWFkQ2FwYWJpbGl0eS5yZXNvbHZlKGludGVudFN0YXRlLm9wZXJhdG9yTGlzdCk7XG5cbiAgICAgICAgaW50ZW50U3RhdGUucmVuZGVyVGFza3MuZGVsZXRlKG9wTGlzdFRhc2spO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGludGVudEFyZ3MgPSB0aGlzLl90cmFuc3BvcnQuZ2V0UmVuZGVyaW5nSW50ZW50KFxuICAgICAgaW50ZW50LFxuICAgICAgYW5ub3RhdGlvbk1vZGUsXG4gICAgICAvKiBpc09wTGlzdCA9ICovIHRydWVcbiAgICApO1xuICAgIGxldCBpbnRlbnRTdGF0ZSA9IHRoaXMuX2ludGVudFN0YXRlcy5nZXQoaW50ZW50QXJncy5jYWNoZUtleSk7XG4gICAgaWYgKCFpbnRlbnRTdGF0ZSkge1xuICAgICAgaW50ZW50U3RhdGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgdGhpcy5faW50ZW50U3RhdGVzLnNldChpbnRlbnRBcmdzLmNhY2hlS2V5LCBpbnRlbnRTdGF0ZSk7XG4gICAgfVxuICAgIGxldCBvcExpc3RUYXNrO1xuXG4gICAgaWYgKCFpbnRlbnRTdGF0ZS5vcExpc3RSZWFkQ2FwYWJpbGl0eSkge1xuICAgICAgb3BMaXN0VGFzayA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICBvcExpc3RUYXNrLm9wZXJhdG9yTGlzdENoYW5nZWQgPSBvcGVyYXRvckxpc3RDaGFuZ2VkO1xuICAgICAgaW50ZW50U3RhdGUub3BMaXN0UmVhZENhcGFiaWxpdHkgPSBjcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSgpO1xuICAgICAgKGludGVudFN0YXRlLnJlbmRlclRhc2tzIHx8PSBuZXcgU2V0KCkpLmFkZChvcExpc3RUYXNrKTtcbiAgICAgIGludGVudFN0YXRlLm9wZXJhdG9yTGlzdCA9IHtcbiAgICAgICAgZm5BcnJheTogW10sXG4gICAgICAgIGFyZ3NBcnJheTogW10sXG4gICAgICAgIGxhc3RDaHVuazogZmFsc2UsXG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5fc3RhdHMpIHtcbiAgICAgICAgdGhpcy5fc3RhdHMudGltZShcIlBhZ2UgUmVxdWVzdFwiKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX3B1bXBPcGVyYXRvckxpc3QoaW50ZW50QXJncyk7XG4gICAgfVxuICAgIHJldHVybiBpbnRlbnRTdGF0ZS5vcExpc3RSZWFkQ2FwYWJpbGl0eS5wcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIE5PVEU6IEFsbCBvY2N1cnJlbmNlcyBvZiB3aGl0ZXNwYWNlIHdpbGwgYmUgcmVwbGFjZWQgYnlcbiAgICogc3RhbmRhcmQgc3BhY2VzICgweDIwKS5cbiAgICpcbiAgICogQHBhcmFtIHtnZXRUZXh0Q29udGVudFBhcmFtZXRlcnN9IHBhcmFtcyAtIGdldFRleHRDb250ZW50IHBhcmFtZXRlcnMuXG4gICAqIEByZXR1cm5zIHtSZWFkYWJsZVN0cmVhbX0gU3RyZWFtIGZvciByZWFkaW5nIHRleHQgY29udGVudCBjaHVua3MuXG4gICAqL1xuICBzdHJlYW1UZXh0Q29udGVudCh7XG4gICAgZGlzYWJsZUNvbWJpbmVUZXh0SXRlbXMgPSBmYWxzZSxcbiAgICBpbmNsdWRlTWFya2VkQ29udGVudCA9IGZhbHNlLFxuICB9ID0ge30pIHtcbiAgICBjb25zdCBURVhUX0NPTlRFTlRfQ0hVTktfU0laRSA9IDEwMDtcblxuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhTdHJlYW0oXG4gICAgICBcIkdldFRleHRDb250ZW50XCIsXG4gICAgICB7XG4gICAgICAgIHBhZ2VJbmRleDogdGhpcy5fcGFnZUluZGV4LFxuICAgICAgICBjb21iaW5lVGV4dEl0ZW1zOiBkaXNhYmxlQ29tYmluZVRleHRJdGVtcyAhPT0gdHJ1ZSxcbiAgICAgICAgaW5jbHVkZU1hcmtlZENvbnRlbnQ6IGluY2x1ZGVNYXJrZWRDb250ZW50ID09PSB0cnVlLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaGlnaFdhdGVyTWFyazogVEVYVF9DT05URU5UX0NIVU5LX1NJWkUsXG4gICAgICAgIHNpemUodGV4dENvbnRlbnQpIHtcbiAgICAgICAgICByZXR1cm4gdGV4dENvbnRlbnQuaXRlbXMubGVuZ3RoO1xuICAgICAgICB9LFxuICAgICAgfVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogTk9URTogQWxsIG9jY3VycmVuY2VzIG9mIHdoaXRlc3BhY2Ugd2lsbCBiZSByZXBsYWNlZCBieVxuICAgKiBzdGFuZGFyZCBzcGFjZXMgKDB4MjApLlxuICAgKlxuICAgKiBAcGFyYW0ge2dldFRleHRDb250ZW50UGFyYW1ldGVyc30gcGFyYW1zIC0gZ2V0VGV4dENvbnRlbnQgcGFyYW1ldGVycy5cbiAgICogQHJldHVybnMge1Byb21pc2U8VGV4dENvbnRlbnQ+fSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aXRoIGFcbiAgICogICB7QGxpbmsgVGV4dENvbnRlbnR9IG9iamVjdCB0aGF0IHJlcHJlc2VudHMgdGhlIHBhZ2UncyB0ZXh0IGNvbnRlbnQuXG4gICAqL1xuICBnZXRUZXh0Q29udGVudChwYXJhbXMgPSB7fSkge1xuICAgIGlmICh0aGlzLl90cmFuc3BvcnQuX2h0bWxGb3JYZmEpIHtcbiAgICAgIC8vIFRPRE86IFdlIG5lZWQgdG8gcmV2aXNpdCB0aGlzIG9uY2UgdGhlIFhGQSBmb3JlZ3JvdW5kIHBhdGNoIGxhbmRzIGFuZFxuICAgICAgLy8gb25seSBkbyB0aGlzIGZvciBub24tZm9yZWdyb3VuZCBYRkEuXG4gICAgICByZXR1cm4gdGhpcy5nZXRYZmEoKS50aGVuKHhmYSA9PiB7XG4gICAgICAgIHJldHVybiBYZmFUZXh0LnRleHRDb250ZW50KHhmYSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgcmVhZGFibGVTdHJlYW0gPSB0aGlzLnN0cmVhbVRleHRDb250ZW50KHBhcmFtcyk7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgZnVuY3Rpb24gcHVtcCgpIHtcbiAgICAgICAgcmVhZGVyLnJlYWQoKS50aGVuKGZ1bmN0aW9uICh7IHZhbHVlLCBkb25lIH0pIHtcbiAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgcmVzb2x2ZSh0ZXh0Q29udGVudCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIE9iamVjdC5hc3NpZ24odGV4dENvbnRlbnQuc3R5bGVzLCB2YWx1ZS5zdHlsZXMpO1xuICAgICAgICAgIHRleHRDb250ZW50Lml0ZW1zLnB1c2goLi4udmFsdWUuaXRlbXMpO1xuICAgICAgICAgIHB1bXAoKTtcbiAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVhZGVyID0gcmVhZGFibGVTdHJlYW0uZ2V0UmVhZGVyKCk7XG4gICAgICBjb25zdCB0ZXh0Q29udGVudCA9IHtcbiAgICAgICAgaXRlbXM6IFtdLFxuICAgICAgICBzdHlsZXM6IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgICB9O1xuICAgICAgcHVtcCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFN0cnVjdFRyZWVOb2RlPn0gQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2l0aCBhXG4gICAqICAge0BsaW5rIFN0cnVjdFRyZWVOb2RlfSBvYmplY3QgdGhhdCByZXByZXNlbnRzIHRoZSBwYWdlJ3Mgc3RydWN0dXJlIHRyZWUsXG4gICAqICAgb3IgYG51bGxgIHdoZW4gbm8gc3RydWN0dXJlIHRyZWUgaXMgcHJlc2VudCBmb3IgdGhlIGN1cnJlbnQgcGFnZS5cbiAgICovXG4gIGdldFN0cnVjdFRyZWUoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9zdHJ1Y3RUcmVlUHJvbWlzZSB8fD0gdGhpcy5fdHJhbnNwb3J0LmdldFN0cnVjdFRyZWUoXG4gICAgICB0aGlzLl9wYWdlSW5kZXhcbiAgICApKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cm95cyB0aGUgcGFnZSBvYmplY3QuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfZGVzdHJveSgpIHtcbiAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWU7XG5cbiAgICBjb25zdCB3YWl0T24gPSBbXTtcbiAgICBmb3IgKGNvbnN0IGludGVudFN0YXRlIG9mIHRoaXMuX2ludGVudFN0YXRlcy52YWx1ZXMoKSkge1xuICAgICAgdGhpcy5fYWJvcnRPcGVyYXRvckxpc3Qoe1xuICAgICAgICBpbnRlbnRTdGF0ZSxcbiAgICAgICAgcmVhc29uOiBuZXcgRXJyb3IoXCJQYWdlIHdhcyBkZXN0cm95ZWQuXCIpLFxuICAgICAgICBmb3JjZTogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoaW50ZW50U3RhdGUub3BMaXN0UmVhZENhcGFiaWxpdHkpIHtcbiAgICAgICAgLy8gQXZvaWQgZXJyb3JzIGJlbG93LCBzaW5jZSB0aGUgcmVuZGVyVGFza3MgYXJlIGp1c3Qgc3R1YnMuXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBpbnRlcm5hbFJlbmRlclRhc2sgb2YgaW50ZW50U3RhdGUucmVuZGVyVGFza3MpIHtcbiAgICAgICAgd2FpdE9uLnB1c2goaW50ZXJuYWxSZW5kZXJUYXNrLmNvbXBsZXRlZCk7XG4gICAgICAgIGludGVybmFsUmVuZGVyVGFzay5jYW5jZWwoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5vYmpzLmNsZWFyKCk7XG4gICAgZm9yIChjb25zdCBiaXRtYXAgb2YgdGhpcy5fYml0bWFwcykge1xuICAgICAgYml0bWFwLmNsb3NlKCk7XG4gICAgfVxuICAgIHRoaXMuX2JpdG1hcHMuY2xlYXIoKTtcbiAgICB0aGlzLl9hbm5vdGF0aW9uUHJvbWlzZXMuY2xlYXIoKTtcbiAgICB0aGlzLl9qc0FjdGlvbnNQcm9taXNlID0gbnVsbDtcbiAgICB0aGlzLl9zdHJ1Y3RUcmVlUHJvbWlzZSA9IG51bGw7XG4gICAgdGhpcy5wZW5kaW5nQ2xlYW51cCA9IGZhbHNlO1xuICAgIHJldHVybiBQcm9taXNlLmFsbCh3YWl0T24pO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFucyB1cCByZXNvdXJjZXMgYWxsb2NhdGVkIGJ5IHRoZSBwYWdlLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtyZXNldFN0YXRzXSAtIFJlc2V0IHBhZ2Ugc3RhdHMsIGlmIGVuYWJsZWQuXG4gICAqICAgVGhlIGRlZmF1bHQgdmFsdWUgaXMgYGZhbHNlYC5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IEluZGljYXRlcyBpZiBjbGVhbi11cCB3YXMgc3VjY2Vzc2Z1bGx5IHJ1bi5cbiAgICovXG4gIGNsZWFudXAocmVzZXRTdGF0cyA9IGZhbHNlKSB7XG4gICAgdGhpcy5wZW5kaW5nQ2xlYW51cCA9IHRydWU7XG4gICAgcmV0dXJuIHRoaXMuX3RyeUNsZWFudXAocmVzZXRTdGF0cyk7XG4gIH1cblxuICAvKipcbiAgICogQXR0ZW1wdHMgdG8gY2xlYW4gdXAgaWYgcmVuZGVyaW5nIGlzIGluIGEgc3RhdGUgd2hlcmUgdGhhdCdzIHBvc3NpYmxlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3RyeUNsZWFudXAocmVzZXRTdGF0cyA9IGZhbHNlKSB7XG4gICAgaWYgKCF0aGlzLnBlbmRpbmdDbGVhbnVwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvciAoY29uc3QgeyByZW5kZXJUYXNrcywgb3BlcmF0b3JMaXN0IH0gb2YgdGhpcy5faW50ZW50U3RhdGVzLnZhbHVlcygpKSB7XG4gICAgICBpZiAocmVuZGVyVGFza3Muc2l6ZSA+IDAgfHwgIW9wZXJhdG9yTGlzdC5sYXN0Q2h1bmspIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2ludGVudFN0YXRlcy5jbGVhcigpO1xuICAgIHRoaXMub2Jqcy5jbGVhcigpO1xuICAgIHRoaXMuX2Fubm90YXRpb25Qcm9taXNlcy5jbGVhcigpO1xuICAgIHRoaXMuX2pzQWN0aW9uc1Byb21pc2UgPSBudWxsO1xuICAgIHRoaXMuX3N0cnVjdFRyZWVQcm9taXNlID0gbnVsbDtcbiAgICBpZiAocmVzZXRTdGF0cyAmJiB0aGlzLl9zdGF0cykge1xuICAgICAgdGhpcy5fc3RhdHMgPSBuZXcgU3RhdFRpbWVyKCk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgYml0bWFwIG9mIHRoaXMuX2JpdG1hcHMpIHtcbiAgICAgIGJpdG1hcC5jbG9zZSgpO1xuICAgIH1cbiAgICB0aGlzLl9iaXRtYXBzLmNsZWFyKCk7XG4gICAgdGhpcy5wZW5kaW5nQ2xlYW51cCA9IGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfc3RhcnRSZW5kZXJQYWdlKHRyYW5zcGFyZW5jeSwgY2FjaGVLZXkpIHtcbiAgICBjb25zdCBpbnRlbnRTdGF0ZSA9IHRoaXMuX2ludGVudFN0YXRlcy5nZXQoY2FjaGVLZXkpO1xuICAgIGlmICghaW50ZW50U3RhdGUpIHtcbiAgICAgIHJldHVybjsgLy8gUmVuZGVyaW5nIHdhcyBjYW5jZWxsZWQuXG4gICAgfVxuICAgIGlmICh0aGlzLl9zdGF0cykge1xuICAgICAgdGhpcy5fc3RhdHMudGltZUVuZChcIlBhZ2UgUmVxdWVzdFwiKTtcbiAgICB9XG4gICAgLy8gVE9ETyBSZWZhY3RvciBSZW5kZXJQYWdlUmVxdWVzdCB0byBzZXBhcmF0ZSByZW5kZXJpbmdcbiAgICAvLyBhbmQgb3BlcmF0b3IgbGlzdCBsb2dpY1xuICAgIGlmIChpbnRlbnRTdGF0ZS5kaXNwbGF5UmVhZHlDYXBhYmlsaXR5KSB7XG4gICAgICBpbnRlbnRTdGF0ZS5kaXNwbGF5UmVhZHlDYXBhYmlsaXR5LnJlc29sdmUodHJhbnNwYXJlbmN5KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW5kZXJQYWdlQ2h1bmsob3BlcmF0b3JMaXN0Q2h1bmssIGludGVudFN0YXRlKSB7XG4gICAgLy8gQWRkIHRoZSBuZXcgY2h1bmsgdG8gdGhlIGN1cnJlbnQgb3BlcmF0b3IgbGlzdC5cbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBvcGVyYXRvckxpc3RDaHVuay5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICBpbnRlbnRTdGF0ZS5vcGVyYXRvckxpc3QuZm5BcnJheS5wdXNoKG9wZXJhdG9yTGlzdENodW5rLmZuQXJyYXlbaV0pO1xuICAgICAgaW50ZW50U3RhdGUub3BlcmF0b3JMaXN0LmFyZ3NBcnJheS5wdXNoKG9wZXJhdG9yTGlzdENodW5rLmFyZ3NBcnJheVtpXSk7XG4gICAgfVxuICAgIGludGVudFN0YXRlLm9wZXJhdG9yTGlzdC5sYXN0Q2h1bmsgPSBvcGVyYXRvckxpc3RDaHVuay5sYXN0Q2h1bms7XG5cbiAgICAvLyBOb3RpZnkgYWxsIHRoZSByZW5kZXJpbmcgdGFza3MgdGhlcmUgYXJlIG1vcmUgb3BlcmF0b3JzIHRvIGJlIGNvbnN1bWVkLlxuICAgIGZvciAoY29uc3QgaW50ZXJuYWxSZW5kZXJUYXNrIG9mIGludGVudFN0YXRlLnJlbmRlclRhc2tzKSB7XG4gICAgICBpbnRlcm5hbFJlbmRlclRhc2sub3BlcmF0b3JMaXN0Q2hhbmdlZCgpO1xuICAgIH1cblxuICAgIGlmIChvcGVyYXRvckxpc3RDaHVuay5sYXN0Q2h1bmspIHtcbiAgICAgIHRoaXMuX3RyeUNsZWFudXAoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9wdW1wT3BlcmF0b3JMaXN0KHsgcmVuZGVyaW5nSW50ZW50LCBjYWNoZUtleSB9KSB7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIFBERkpTRGV2ID09PSBcInVuZGVmaW5lZFwiIHx8XG4gICAgICBQREZKU0Rldi50ZXN0KFwiIVBST0RVQ1RJT04gfHwgVEVTVElOR1wiKVxuICAgICkge1xuICAgICAgYXNzZXJ0KFxuICAgICAgICBOdW1iZXIuaXNJbnRlZ2VyKHJlbmRlcmluZ0ludGVudCkgJiYgcmVuZGVyaW5nSW50ZW50ID4gMCxcbiAgICAgICAgJ19wdW1wT3BlcmF0b3JMaXN0OiBFeHBlY3RlZCB2YWxpZCBcInJlbmRlcmluZ0ludGVudFwiIGFyZ3VtZW50LidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVhZGFibGVTdHJlYW0gPSB0aGlzLl90cmFuc3BvcnQubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhTdHJlYW0oXG4gICAgICBcIkdldE9wZXJhdG9yTGlzdFwiLFxuICAgICAge1xuICAgICAgICBwYWdlSW5kZXg6IHRoaXMuX3BhZ2VJbmRleCxcbiAgICAgICAgaW50ZW50OiByZW5kZXJpbmdJbnRlbnQsXG4gICAgICAgIGNhY2hlS2V5LFxuICAgICAgICBhbm5vdGF0aW9uU3RvcmFnZTpcbiAgICAgICAgICByZW5kZXJpbmdJbnRlbnQgJiBSZW5kZXJpbmdJbnRlbnRGbGFnLkFOTk9UQVRJT05TX1NUT1JBR0VcbiAgICAgICAgICAgID8gdGhpcy5fdHJhbnNwb3J0LmFubm90YXRpb25TdG9yYWdlLnNlcmlhbGl6YWJsZVxuICAgICAgICAgICAgOiBudWxsLFxuICAgICAgfVxuICAgICk7XG4gICAgY29uc3QgcmVhZGVyID0gcmVhZGFibGVTdHJlYW0uZ2V0UmVhZGVyKCk7XG5cbiAgICBjb25zdCBpbnRlbnRTdGF0ZSA9IHRoaXMuX2ludGVudFN0YXRlcy5nZXQoY2FjaGVLZXkpO1xuICAgIGludGVudFN0YXRlLnN0cmVhbVJlYWRlciA9IHJlYWRlcjtcblxuICAgIGNvbnN0IHB1bXAgPSAoKSA9PiB7XG4gICAgICByZWFkZXIucmVhZCgpLnRoZW4oXG4gICAgICAgICh7IHZhbHVlLCBkb25lIH0pID0+IHtcbiAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgaW50ZW50U3RhdGUuc3RyZWFtUmVhZGVyID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMuX3RyYW5zcG9ydC5kZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjsgLy8gSWdub3JlIGFueSBwZW5kaW5nIHJlcXVlc3RzIGlmIHRoZSB3b3JrZXIgd2FzIHRlcm1pbmF0ZWQuXG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuX3JlbmRlclBhZ2VDaHVuayh2YWx1ZSwgaW50ZW50U3RhdGUpO1xuICAgICAgICAgIHB1bXAoKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVhc29uID0+IHtcbiAgICAgICAgICBpbnRlbnRTdGF0ZS5zdHJlYW1SZWFkZXIgPSBudWxsO1xuXG4gICAgICAgICAgaWYgKHRoaXMuX3RyYW5zcG9ydC5kZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjsgLy8gSWdub3JlIGFueSBwZW5kaW5nIHJlcXVlc3RzIGlmIHRoZSB3b3JrZXIgd2FzIHRlcm1pbmF0ZWQuXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpbnRlbnRTdGF0ZS5vcGVyYXRvckxpc3QpIHtcbiAgICAgICAgICAgIC8vIE1hcmsgb3BlcmF0b3IgbGlzdCBhcyBjb21wbGV0ZS5cbiAgICAgICAgICAgIGludGVudFN0YXRlLm9wZXJhdG9yTGlzdC5sYXN0Q2h1bmsgPSB0cnVlO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGludGVybmFsUmVuZGVyVGFzayBvZiBpbnRlbnRTdGF0ZS5yZW5kZXJUYXNrcykge1xuICAgICAgICAgICAgICBpbnRlcm5hbFJlbmRlclRhc2sub3BlcmF0b3JMaXN0Q2hhbmdlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fdHJ5Q2xlYW51cCgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChpbnRlbnRTdGF0ZS5kaXNwbGF5UmVhZHlDYXBhYmlsaXR5KSB7XG4gICAgICAgICAgICBpbnRlbnRTdGF0ZS5kaXNwbGF5UmVhZHlDYXBhYmlsaXR5LnJlamVjdChyZWFzb24pO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaW50ZW50U3RhdGUub3BMaXN0UmVhZENhcGFiaWxpdHkpIHtcbiAgICAgICAgICAgIGludGVudFN0YXRlLm9wTGlzdFJlYWRDYXBhYmlsaXR5LnJlamVjdChyZWFzb24pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyByZWFzb247XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgIH07XG4gICAgcHVtcCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfYWJvcnRPcGVyYXRvckxpc3QoeyBpbnRlbnRTdGF0ZSwgcmVhc29uLCBmb3JjZSA9IGZhbHNlIH0pIHtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgUERGSlNEZXYgPT09IFwidW5kZWZpbmVkXCIgfHxcbiAgICAgIFBERkpTRGV2LnRlc3QoXCIhUFJPRFVDVElPTiB8fCBURVNUSU5HXCIpXG4gICAgKSB7XG4gICAgICBhc3NlcnQoXG4gICAgICAgIHJlYXNvbiBpbnN0YW5jZW9mIEVycm9yLFxuICAgICAgICAnX2Fib3J0T3BlcmF0b3JMaXN0OiBFeHBlY3RlZCB2YWxpZCBcInJlYXNvblwiIGFyZ3VtZW50LidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKCFpbnRlbnRTdGF0ZS5zdHJlYW1SZWFkZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFmb3JjZSkge1xuICAgICAgLy8gRW5zdXJlIHRoYXQgYW4gRXJyb3Igb2NjdXJyaW5nIGluICpvbmx5KiBvbmUgYEludGVybmFsUmVuZGVyVGFza2AsIGUuZy5cbiAgICAgIC8vIG11bHRpcGxlIHJlbmRlcigpIGNhbGxzIG9uIHRoZSBzYW1lIGNhbnZhcywgd29uJ3QgYnJlYWsgYWxsIHJlbmRlcmluZy5cbiAgICAgIGlmIChpbnRlbnRTdGF0ZS5yZW5kZXJUYXNrcy5zaXplID4gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBEb24ndCBpbW1lZGlhdGVseSBhYm9ydCBwYXJzaW5nIG9uIHRoZSB3b3JrZXItdGhyZWFkIHdoZW4gcmVuZGVyaW5nIGlzXG4gICAgICAvLyBjYW5jZWxsZWQsIHNpbmNlIHRoYXQgd2lsbCB1bm5lY2Vzc2FyaWx5IGRlbGF5IHJlLXJlbmRlcmluZyB3aGVuIChmb3JcbiAgICAgIC8vIHBhcnRpYWxseSBwYXJzZWQgcGFnZXMpIGUuZy4gem9vbWluZy9yb3RhdGlvbiBvY2N1cnMgaW4gdGhlIHZpZXdlci5cbiAgICAgIGlmIChyZWFzb24gaW5zdGFuY2VvZiBSZW5kZXJpbmdDYW5jZWxsZWRFeGNlcHRpb24pIHtcbiAgICAgICAgaW50ZW50U3RhdGUuc3RyZWFtUmVhZGVyQ2FuY2VsVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuX2Fib3J0T3BlcmF0b3JMaXN0KHsgaW50ZW50U3RhdGUsIHJlYXNvbiwgZm9yY2U6IHRydWUgfSk7XG4gICAgICAgICAgaW50ZW50U3RhdGUuc3RyZWFtUmVhZGVyQ2FuY2VsVGltZW91dCA9IG51bGw7XG4gICAgICAgIH0sIFJFTkRFUklOR19DQU5DRUxMRURfVElNRU9VVCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgaW50ZW50U3RhdGUuc3RyZWFtUmVhZGVyXG4gICAgICAuY2FuY2VsKG5ldyBBYm9ydEV4Y2VwdGlvbihyZWFzb24ubWVzc2FnZSkpXG4gICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAvLyBBdm9pZCBcIlVuY2F1Z2h0IHByb21pc2VcIiBtZXNzYWdlcyBpbiB0aGUgY29uc29sZS5cbiAgICAgIH0pO1xuICAgIGludGVudFN0YXRlLnN0cmVhbVJlYWRlciA9IG51bGw7XG5cbiAgICBpZiAodGhpcy5fdHJhbnNwb3J0LmRlc3Ryb3llZCkge1xuICAgICAgcmV0dXJuOyAvLyBJZ25vcmUgYW55IHBlbmRpbmcgcmVxdWVzdHMgaWYgdGhlIHdvcmtlciB3YXMgdGVybWluYXRlZC5cbiAgICB9XG4gICAgLy8gUmVtb3ZlIHRoZSBjdXJyZW50IGBpbnRlbnRTdGF0ZWAsIHNpbmNlIGEgY2FuY2VsbGVkIGBnZXRPcGVyYXRvckxpc3RgXG4gICAgLy8gY2FsbCBvbiB0aGUgd29ya2VyLXRocmVhZCBjYW5ub3QgYmUgcmUtc3RhcnRlZC4uLlxuICAgIGZvciAoY29uc3QgW2N1ckNhY2hlS2V5LCBjdXJJbnRlbnRTdGF0ZV0gb2YgdGhpcy5faW50ZW50U3RhdGVzKSB7XG4gICAgICBpZiAoY3VySW50ZW50U3RhdGUgPT09IGludGVudFN0YXRlKSB7XG4gICAgICAgIHRoaXMuX2ludGVudFN0YXRlcy5kZWxldGUoY3VyQ2FjaGVLZXkpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gLi4uIGFuZCBmb3JjZSBjbGVhbi11cCB0byBlbnN1cmUgdGhhdCBhbnkgb2xkIHN0YXRlIGlzIGFsd2F5cyByZW1vdmVkLlxuICAgIHRoaXMuY2xlYW51cCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtPYmplY3R9IFJldHVybnMgcGFnZSBzdGF0cywgaWYgZW5hYmxlZDsgcmV0dXJucyBgbnVsbGAgb3RoZXJ3aXNlLlxuICAgKi9cbiAgZ2V0IHN0YXRzKCkge1xuICAgIHJldHVybiB0aGlzLl9zdGF0cztcbiAgfVxufVxuXG5jbGFzcyBMb29wYmFja1BvcnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9saXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLl9kZWZlcnJlZCA9IFByb21pc2UucmVzb2x2ZSgpO1xuICB9XG5cbiAgcG9zdE1lc3NhZ2Uob2JqLCB0cmFuc2ZlcnMpIHtcbiAgICBjb25zdCBldmVudCA9IHtcbiAgICAgIGRhdGE6IHN0cnVjdHVyZWRDbG9uZShvYmosIHRyYW5zZmVycyksXG4gICAgfTtcblxuICAgIHRoaXMuX2RlZmVycmVkLnRoZW4oKCkgPT4ge1xuICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiB0aGlzLl9saXN0ZW5lcnMpIHtcbiAgICAgICAgbGlzdGVuZXIuY2FsbCh0aGlzLCBldmVudCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBhZGRFdmVudExpc3RlbmVyKG5hbWUsIGxpc3RlbmVyKSB7XG4gICAgdGhpcy5fbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICB9XG5cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihuYW1lLCBsaXN0ZW5lcikge1xuICAgIGNvbnN0IGkgPSB0aGlzLl9saXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgdGhpcy5fbGlzdGVuZXJzLnNwbGljZShpLCAxKTtcbiAgfVxuXG4gIHRlcm1pbmF0ZSgpIHtcbiAgICB0aGlzLl9saXN0ZW5lcnMubGVuZ3RoID0gMDtcbiAgfVxufVxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFBERldvcmtlclBhcmFtZXRlcnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbmFtZV0gLSBUaGUgbmFtZSBvZiB0aGUgd29ya2VyLlxuICogQHByb3BlcnR5IHtPYmplY3R9IFtwb3J0XSAtIFRoZSBgd29ya2VyUG9ydGAgb2JqZWN0LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt2ZXJib3NpdHldIC0gQ29udHJvbHMgdGhlIGxvZ2dpbmcgbGV2ZWw7XG4gKiAgIHRoZSBjb25zdGFudHMgZnJvbSB7QGxpbmsgVmVyYm9zaXR5TGV2ZWx9IHNob3VsZCBiZSB1c2VkLlxuICovXG5cbmNvbnN0IFBERldvcmtlclV0aWwgPSB7XG4gIGlzV29ya2VyRGlzYWJsZWQ6IGZhbHNlLFxuICBmYWxsYmFja1dvcmtlclNyYzogbnVsbCxcbiAgZmFrZVdvcmtlcklkOiAwLFxufTtcbmlmICh0eXBlb2YgUERGSlNEZXYgPT09IFwidW5kZWZpbmVkXCIgfHwgUERGSlNEZXYudGVzdChcIkdFTkVSSUNcIikpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gIGlmIChpc05vZGVKUyAmJiB0eXBlb2YgX19ub25fd2VicGFja19yZXF1aXJlX18gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIC8vIFdvcmtlcnMgYXJlbid0IHN1cHBvcnRlZCBpbiBOb2RlLmpzLCBmb3JjZS1kaXNhYmxpbmcgdGhlbSB0aGVyZS5cbiAgICBQREZXb3JrZXJVdGlsLmlzV29ya2VyRGlzYWJsZWQgPSB0cnVlO1xuXG4gICAgUERGV29ya2VyVXRpbC5mYWxsYmFja1dvcmtlclNyYyA9IFBERkpTRGV2LnRlc3QoXCJMSUJcIilcbiAgICAgID8gXCIuLi9wZGYud29ya2VyLmpzXCJcbiAgICAgIDogXCIuL3BkZi53b3JrZXIuanNcIjtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09IFwib2JqZWN0XCIpIHtcbiAgICBjb25zdCBwZGZqc0ZpbGVQYXRoID0gZG9jdW1lbnQ/LmN1cnJlbnRTY3JpcHQ/LnNyYztcbiAgICBpZiAocGRmanNGaWxlUGF0aCkge1xuICAgICAgUERGV29ya2VyVXRpbC5mYWxsYmFja1dvcmtlclNyYyA9IHBkZmpzRmlsZVBhdGgucmVwbGFjZShcbiAgICAgICAgLyhcXC4oPzptaW5cXC4pP2pzKShcXD8uKik/JC9pLFxuICAgICAgICBcIi53b3JrZXIkMSQyXCJcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hlY2sgaWYgVVJMcyBoYXZlIHRoZSBzYW1lIG9yaWdpbi4gRm9yIG5vbi1IVFRQIGJhc2VkIFVSTHMsIHJldHVybnMgZmFsc2UuXG4gIFBERldvcmtlclV0aWwuaXNTYW1lT3JpZ2luID0gZnVuY3Rpb24gKGJhc2VVcmwsIG90aGVyVXJsKSB7XG4gICAgbGV0IGJhc2U7XG4gICAgdHJ5IHtcbiAgICAgIGJhc2UgPSBuZXcgVVJMKGJhc2VVcmwpO1xuICAgICAgaWYgKCFiYXNlLm9yaWdpbiB8fCBiYXNlLm9yaWdpbiA9PT0gXCJudWxsXCIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBub24tSFRUUCB1cmxcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3Qgb3RoZXIgPSBuZXcgVVJMKG90aGVyVXJsLCBiYXNlKTtcbiAgICByZXR1cm4gYmFzZS5vcmlnaW4gPT09IG90aGVyLm9yaWdpbjtcbiAgfTtcblxuICBQREZXb3JrZXJVdGlsLmNyZWF0ZUNETldyYXBwZXIgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgLy8gV2Ugd2lsbCByZWx5IG9uIGJsb2IgVVJMJ3MgcHJvcGVydHkgdG8gc3BlY2lmeSBvcmlnaW4uXG4gICAgLy8gV2Ugd2FudCB0aGlzIGZ1bmN0aW9uIHRvIGZhaWwgaW4gY2FzZSBpZiBjcmVhdGVPYmplY3RVUkwgb3IgQmxvYiBkbyBub3RcbiAgICAvLyBleGlzdCBvciBmYWlsIGZvciBzb21lIHJlYXNvbiAtLSBvdXIgV29ya2VyIGNyZWF0aW9uIHdpbGwgZmFpbCBhbnl3YXkuXG4gICAgY29uc3Qgd3JhcHBlciA9IGBpbXBvcnRTY3JpcHRzKFwiJHt1cmx9XCIpO2A7XG4gICAgcmV0dXJuIFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW3dyYXBwZXJdKSk7XG4gIH07XG59XG5cbi8qKlxuICogUERGLmpzIHdlYiB3b3JrZXIgYWJzdHJhY3Rpb24gdGhhdCBjb250cm9scyB0aGUgaW5zdGFudGlhdGlvbiBvZiBQREZcbiAqIGRvY3VtZW50cy4gTWVzc2FnZSBoYW5kbGVycyBhcmUgdXNlZCB0byBwYXNzIGluZm9ybWF0aW9uIGZyb20gdGhlIG1haW5cbiAqIHRocmVhZCB0byB0aGUgd29ya2VyIHRocmVhZCBhbmQgdmljZSB2ZXJzYS4gSWYgdGhlIGNyZWF0aW9uIG9mIGEgd2ViXG4gKiB3b3JrZXIgaXMgbm90IHBvc3NpYmxlLCBhIFwiZmFrZVwiIHdvcmtlciB3aWxsIGJlIHVzZWQgaW5zdGVhZC5cbiAqXG4gKiBAcGFyYW0ge1BERldvcmtlclBhcmFtZXRlcnN9IHBhcmFtcyAtIFRoZSB3b3JrZXIgaW5pdGlhbGl6YXRpb24gcGFyYW1ldGVycy5cbiAqL1xuY2xhc3MgUERGV29ya2VyIHtcbiAgc3RhdGljICN3b3JrZXJQb3J0cyA9IG5ldyBXZWFrTWFwKCk7XG5cbiAgY29uc3RydWN0b3Ioe1xuICAgIG5hbWUgPSBudWxsLFxuICAgIHBvcnQgPSBudWxsLFxuICAgIHZlcmJvc2l0eSA9IGdldFZlcmJvc2l0eUxldmVsKCksXG4gIH0gPSB7fSkge1xuICAgIGlmIChwb3J0ICYmIFBERldvcmtlci4jd29ya2VyUG9ydHMuaGFzKHBvcnQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgdXNlIG1vcmUgdGhhbiBvbmUgUERGV29ya2VyIHBlciBwb3J0LlwiKTtcbiAgICB9XG5cbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7XG4gICAgdGhpcy52ZXJib3NpdHkgPSB2ZXJib3NpdHk7XG5cbiAgICB0aGlzLl9yZWFkeUNhcGFiaWxpdHkgPSBjcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSgpO1xuICAgIHRoaXMuX3BvcnQgPSBudWxsO1xuICAgIHRoaXMuX3dlYldvcmtlciA9IG51bGw7XG4gICAgdGhpcy5fbWVzc2FnZUhhbmRsZXIgPSBudWxsO1xuXG4gICAgaWYgKHBvcnQpIHtcbiAgICAgIFBERldvcmtlci4jd29ya2VyUG9ydHMuc2V0KHBvcnQsIHRoaXMpO1xuICAgICAgdGhpcy5faW5pdGlhbGl6ZUZyb21Qb3J0KHBvcnQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9pbml0aWFsaXplKCk7XG4gIH1cblxuICAvKipcbiAgICogUHJvbWlzZSBmb3Igd29ya2VyIGluaXRpYWxpemF0aW9uIGNvbXBsZXRpb24uXG4gICAqIEB0eXBlIHtQcm9taXNlPHZvaWQ+fVxuICAgKi9cbiAgZ2V0IHByb21pc2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlYWR5Q2FwYWJpbGl0eS5wcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IGB3b3JrZXJQb3J0YCwgd2hlbiBpdCBleGlzdHMuXG4gICAqIEB0eXBlIHtXb3JrZXJ9XG4gICAqL1xuICBnZXQgcG9ydCgpIHtcbiAgICByZXR1cm4gdGhpcy5fcG9ydDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBNZXNzYWdlSGFuZGxlci1pbnN0YW5jZS5cbiAgICogQHR5cGUge01lc3NhZ2VIYW5kbGVyfVxuICAgKi9cbiAgZ2V0IG1lc3NhZ2VIYW5kbGVyKCkge1xuICAgIHJldHVybiB0aGlzLl9tZXNzYWdlSGFuZGxlcjtcbiAgfVxuXG4gIF9pbml0aWFsaXplRnJvbVBvcnQocG9ydCkge1xuICAgIHRoaXMuX3BvcnQgPSBwb3J0O1xuICAgIHRoaXMuX21lc3NhZ2VIYW5kbGVyID0gbmV3IE1lc3NhZ2VIYW5kbGVyKFwibWFpblwiLCBcIndvcmtlclwiLCBwb3J0KTtcbiAgICB0aGlzLl9tZXNzYWdlSGFuZGxlci5vbihcInJlYWR5XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIElnbm9yaW5nIFwicmVhZHlcIiBldmVudCAtLSBNZXNzYWdlSGFuZGxlciBzaG91bGQgYWxyZWFkeSBiZSBpbml0aWFsaXplZFxuICAgICAgLy8gYW5kIHJlYWR5IHRvIGFjY2VwdCBtZXNzYWdlcy5cbiAgICB9KTtcbiAgICB0aGlzLl9yZWFkeUNhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICB9XG5cbiAgX2luaXRpYWxpemUoKSB7XG4gICAgLy8gSWYgd29ya2VyIHN1cHBvcnQgaXNuJ3QgZGlzYWJsZWQgZXhwbGljaXQgYW5kIHRoZSBicm93c2VyIGhhcyB3b3JrZXJcbiAgICAvLyBzdXBwb3J0LCBjcmVhdGUgYSBuZXcgd2ViIHdvcmtlciBhbmQgdGVzdCBpZiBpdC90aGUgYnJvd3NlciBmdWxmaWxsc1xuICAgIC8vIGFsbCByZXF1aXJlbWVudHMgdG8gcnVuIHBhcnRzIG9mIHBkZi5qcyBpbiBhIHdlYiB3b3JrZXIuXG4gICAgLy8gUmlnaHQgbm93LCB0aGUgcmVxdWlyZW1lbnQgaXMsIHRoYXQgYW4gVWludDhBcnJheSBpcyBzdGlsbCBhblxuICAgIC8vIFVpbnQ4QXJyYXkgYXMgaXQgYXJyaXZlcyBvbiB0aGUgd29ya2VyLiAoQ2hyb21lIGFkZGVkIHRoaXMgd2l0aCB2LjE1LilcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgV29ya2VyICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAhUERGV29ya2VyVXRpbC5pc1dvcmtlckRpc2FibGVkICYmXG4gICAgICAhUERGV29ya2VyLl9tYWluVGhyZWFkV29ya2VyTWVzc2FnZUhhbmRsZXJcbiAgICApIHtcbiAgICAgIGxldCB3b3JrZXJTcmMgPSBQREZXb3JrZXIud29ya2VyU3JjO1xuXG4gICAgICB0cnkge1xuICAgICAgICAvLyBXcmFwcyB3b3JrZXJTcmMgcGF0aCBpbnRvIGJsb2IgVVJMLCBpZiB0aGUgZm9ybWVyIGRvZXMgbm90IGJlbG9uZ1xuICAgICAgICAvLyB0byB0aGUgc2FtZSBvcmlnaW4uXG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgUERGSlNEZXYgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgICAgICBQREZKU0Rldi50ZXN0KFwiR0VORVJJQ1wiKSAmJlxuICAgICAgICAgICFQREZXb3JrZXJVdGlsLmlzU2FtZU9yaWdpbih3aW5kb3cubG9jYXRpb24uaHJlZiwgd29ya2VyU3JjKVxuICAgICAgICApIHtcbiAgICAgICAgICB3b3JrZXJTcmMgPSBQREZXb3JrZXJVdGlsLmNyZWF0ZUNETldyYXBwZXIoXG4gICAgICAgICAgICBuZXcgVVJMKHdvcmtlclNyYywgd2luZG93LmxvY2F0aW9uKS5ocmVmXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgRkYgY2FuJ3QgY3JlYXRlIGEgd29ya2VyIG9uIGxvY2FsaG9zdCwgc2VlOlxuICAgICAgICAvLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02ODMyODBcbiAgICAgICAgY29uc3Qgd29ya2VyID0gbmV3IFdvcmtlcih3b3JrZXJTcmMpO1xuICAgICAgICBjb25zdCBtZXNzYWdlSGFuZGxlciA9IG5ldyBNZXNzYWdlSGFuZGxlcihcIm1haW5cIiwgXCJ3b3JrZXJcIiwgd29ya2VyKTtcbiAgICAgICAgY29uc3QgdGVybWluYXRlRWFybHkgPSAoKSA9PiB7XG4gICAgICAgICAgd29ya2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBvbldvcmtlckVycm9yKTtcbiAgICAgICAgICBtZXNzYWdlSGFuZGxlci5kZXN0cm95KCk7XG4gICAgICAgICAgd29ya2VyLnRlcm1pbmF0ZSgpO1xuICAgICAgICAgIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICAgICAgdGhpcy5fcmVhZHlDYXBhYmlsaXR5LnJlamVjdChuZXcgRXJyb3IoXCJXb3JrZXIgd2FzIGRlc3Ryb3llZFwiKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZhbGwgYmFjayB0byBmYWtlIHdvcmtlciBpZiB0aGUgdGVybWluYXRpb24gaXMgY2F1c2VkIGJ5IGFuXG4gICAgICAgICAgICAvLyBlcnJvciAoZS5nLiBOZXR3b3JrRXJyb3IgLyBTZWN1cml0eUVycm9yKS5cbiAgICAgICAgICAgIHRoaXMuX3NldHVwRmFrZVdvcmtlcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBvbldvcmtlckVycm9yID0gKCkgPT4ge1xuICAgICAgICAgIGlmICghdGhpcy5fd2ViV29ya2VyKSB7XG4gICAgICAgICAgICAvLyBXb3JrZXIgZmFpbGVkIHRvIGluaXRpYWxpemUgZHVlIHRvIGFuIGVycm9yLiBDbGVhbiB1cCBhbmQgZmFsbFxuICAgICAgICAgICAgLy8gYmFjayB0byB0aGUgZmFrZSB3b3JrZXIuXG4gICAgICAgICAgICB0ZXJtaW5hdGVFYXJseSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgd29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBvbldvcmtlckVycm9yKTtcblxuICAgICAgICBtZXNzYWdlSGFuZGxlci5vbihcInRlc3RcIiwgZGF0YSA9PiB7XG4gICAgICAgICAgd29ya2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBvbldvcmtlckVycm9yKTtcbiAgICAgICAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHRlcm1pbmF0ZUVhcmx5KCk7XG4gICAgICAgICAgICByZXR1cm47IC8vIHdvcmtlciB3YXMgZGVzdHJveWVkXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLl9tZXNzYWdlSGFuZGxlciA9IG1lc3NhZ2VIYW5kbGVyO1xuICAgICAgICAgICAgdGhpcy5fcG9ydCA9IHdvcmtlcjtcbiAgICAgICAgICAgIHRoaXMuX3dlYldvcmtlciA9IHdvcmtlcjtcblxuICAgICAgICAgICAgdGhpcy5fcmVhZHlDYXBhYmlsaXR5LnJlc29sdmUoKTtcbiAgICAgICAgICAgIC8vIFNlbmQgZ2xvYmFsIHNldHRpbmcsIGUuZy4gdmVyYm9zaXR5IGxldmVsLlxuICAgICAgICAgICAgbWVzc2FnZUhhbmRsZXIuc2VuZChcImNvbmZpZ3VyZVwiLCB7XG4gICAgICAgICAgICAgIHZlcmJvc2l0eTogdGhpcy52ZXJib3NpdHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc2V0dXBGYWtlV29ya2VyKCk7XG4gICAgICAgICAgICBtZXNzYWdlSGFuZGxlci5kZXN0cm95KCk7XG4gICAgICAgICAgICB3b3JrZXIudGVybWluYXRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBtZXNzYWdlSGFuZGxlci5vbihcInJlYWR5XCIsIGRhdGEgPT4ge1xuICAgICAgICAgIHdvcmtlci5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgb25Xb3JrZXJFcnJvcik7XG4gICAgICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgICAgICB0ZXJtaW5hdGVFYXJseSgpO1xuICAgICAgICAgICAgcmV0dXJuOyAvLyB3b3JrZXIgd2FzIGRlc3Ryb3llZFxuICAgICAgICAgIH1cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2VuZFRlc3QoKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBXZSBuZWVkIGZhbGxiYWNrIHRvIGEgZmFrZWQgd29ya2VyLlxuICAgICAgICAgICAgdGhpcy5fc2V0dXBGYWtlV29ya2VyKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBzZW5kVGVzdCA9ICgpID0+IHtcbiAgICAgICAgICBjb25zdCB0ZXN0T2JqID0gbmV3IFVpbnQ4QXJyYXkoKTtcbiAgICAgICAgICAvLyBFbnN1cmUgdGhhdCB3ZSBjYW4gdXNlIGBwb3N0TWVzc2FnZWAgdHJhbnNmZXJzLlxuICAgICAgICAgIG1lc3NhZ2VIYW5kbGVyLnNlbmQoXCJ0ZXN0XCIsIHRlc3RPYmosIFt0ZXN0T2JqLmJ1ZmZlcl0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEl0IG1pZ2h0IHRha2UgdGltZSBmb3IgdGhlIHdvcmtlciB0byBpbml0aWFsaXplLiBXZSB3aWxsIHRyeSB0byBzZW5kXG4gICAgICAgIC8vIHRoZSBcInRlc3RcIiBtZXNzYWdlIGltbWVkaWF0ZWx5LCBhbmQgb25jZSB0aGUgXCJyZWFkeVwiIG1lc3NhZ2UgYXJyaXZlcy5cbiAgICAgICAgLy8gVGhlIHdvcmtlciBzaGFsbCBwcm9jZXNzIG9ubHkgdGhlIGZpcnN0IHJlY2VpdmVkIFwidGVzdFwiIG1lc3NhZ2UuXG4gICAgICAgIHNlbmRUZXN0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaW5mbyhcIlRoZSB3b3JrZXIgaGFzIGJlZW4gZGlzYWJsZWQuXCIpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBFaXRoZXIgd29ya2VycyBhcmUgZGlzYWJsZWQsIG5vdCBzdXBwb3J0ZWQgb3IgaGF2ZSB0aHJvd24gYW4gZXhjZXB0aW9uLlxuICAgIC8vIFRodXMsIHdlIGZhbGxiYWNrIHRvIGEgZmFrZWQgd29ya2VyLlxuICAgIHRoaXMuX3NldHVwRmFrZVdvcmtlcigpO1xuICB9XG5cbiAgX3NldHVwRmFrZVdvcmtlcigpIHtcbiAgICBpZiAoIVBERldvcmtlclV0aWwuaXNXb3JrZXJEaXNhYmxlZCkge1xuICAgICAgd2FybihcIlNldHRpbmcgdXAgZmFrZSB3b3JrZXIuXCIpO1xuICAgICAgUERGV29ya2VyVXRpbC5pc1dvcmtlckRpc2FibGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBQREZXb3JrZXIuX3NldHVwRmFrZVdvcmtlckdsb2JhbFxuICAgICAgLnRoZW4oV29ya2VyTWVzc2FnZUhhbmRsZXIgPT4ge1xuICAgICAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgICAgICB0aGlzLl9yZWFkeUNhcGFiaWxpdHkucmVqZWN0KG5ldyBFcnJvcihcIldvcmtlciB3YXMgZGVzdHJveWVkXCIpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcG9ydCA9IG5ldyBMb29wYmFja1BvcnQoKTtcbiAgICAgICAgdGhpcy5fcG9ydCA9IHBvcnQ7XG5cbiAgICAgICAgLy8gQWxsIGZha2Ugd29ya2VycyB1c2UgdGhlIHNhbWUgcG9ydCwgbWFraW5nIGlkIHVuaXF1ZS5cbiAgICAgICAgY29uc3QgaWQgPSBgZmFrZSR7UERGV29ya2VyVXRpbC5mYWtlV29ya2VySWQrK31gO1xuXG4gICAgICAgIC8vIElmIHRoZSBtYWluIHRocmVhZCBpcyBvdXIgd29ya2VyLCBzZXR1cCB0aGUgaGFuZGxpbmcgZm9yIHRoZVxuICAgICAgICAvLyBtZXNzYWdlcyAtLSB0aGUgbWFpbiB0aHJlYWQgc2VuZHMgdG8gaXQgc2VsZi5cbiAgICAgICAgY29uc3Qgd29ya2VySGFuZGxlciA9IG5ldyBNZXNzYWdlSGFuZGxlcihpZCArIFwiX3dvcmtlclwiLCBpZCwgcG9ydCk7XG4gICAgICAgIFdvcmtlck1lc3NhZ2VIYW5kbGVyLnNldHVwKHdvcmtlckhhbmRsZXIsIHBvcnQpO1xuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VIYW5kbGVyID0gbmV3IE1lc3NhZ2VIYW5kbGVyKGlkLCBpZCArIFwiX3dvcmtlclwiLCBwb3J0KTtcbiAgICAgICAgdGhpcy5fbWVzc2FnZUhhbmRsZXIgPSBtZXNzYWdlSGFuZGxlcjtcbiAgICAgICAgdGhpcy5fcmVhZHlDYXBhYmlsaXR5LnJlc29sdmUoKTtcbiAgICAgICAgLy8gU2VuZCBnbG9iYWwgc2V0dGluZywgZS5nLiB2ZXJib3NpdHkgbGV2ZWwuXG4gICAgICAgIG1lc3NhZ2VIYW5kbGVyLnNlbmQoXCJjb25maWd1cmVcIiwge1xuICAgICAgICAgIHZlcmJvc2l0eTogdGhpcy52ZXJib3NpdHksXG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChyZWFzb24gPT4ge1xuICAgICAgICB0aGlzLl9yZWFkeUNhcGFiaWxpdHkucmVqZWN0KFxuICAgICAgICAgIG5ldyBFcnJvcihgU2V0dGluZyB1cCBmYWtlIHdvcmtlciBmYWlsZWQ6IFwiJHtyZWFzb24ubWVzc2FnZX1cIi5gKVxuICAgICAgICApO1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRGVzdHJveXMgdGhlIHdvcmtlciBpbnN0YW5jZS5cbiAgICovXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5kZXN0cm95ZWQgPSB0cnVlO1xuICAgIGlmICh0aGlzLl93ZWJXb3JrZXIpIHtcbiAgICAgIC8vIFdlIG5lZWQgdG8gdGVybWluYXRlIG9ubHkgd2ViIHdvcmtlciBjcmVhdGVkIHJlc291cmNlLlxuICAgICAgdGhpcy5fd2ViV29ya2VyLnRlcm1pbmF0ZSgpO1xuICAgICAgdGhpcy5fd2ViV29ya2VyID0gbnVsbDtcbiAgICB9XG4gICAgUERGV29ya2VyLiN3b3JrZXJQb3J0cy5kZWxldGUodGhpcy5fcG9ydCk7XG4gICAgdGhpcy5fcG9ydCA9IG51bGw7XG4gICAgaWYgKHRoaXMuX21lc3NhZ2VIYW5kbGVyKSB7XG4gICAgICB0aGlzLl9tZXNzYWdlSGFuZGxlci5kZXN0cm95KCk7XG4gICAgICB0aGlzLl9tZXNzYWdlSGFuZGxlciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7UERGV29ya2VyUGFyYW1ldGVyc30gcGFyYW1zIC0gVGhlIHdvcmtlciBpbml0aWFsaXphdGlvbiBwYXJhbWV0ZXJzLlxuICAgKi9cbiAgc3RhdGljIGZyb21Qb3J0KHBhcmFtcykge1xuICAgIGlmICghcGFyYW1zPy5wb3J0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQREZXb3JrZXIuZnJvbVBvcnQgLSBpbnZhbGlkIG1ldGhvZCBzaWduYXR1cmUuXCIpO1xuICAgIH1cbiAgICBpZiAodGhpcy4jd29ya2VyUG9ydHMuaGFzKHBhcmFtcy5wb3J0KSkge1xuICAgICAgcmV0dXJuIHRoaXMuI3dvcmtlclBvcnRzLmdldChwYXJhbXMucG9ydCk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUERGV29ya2VyKHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgYHdvcmtlclNyY2AsIHdoZW4gaXQgZXhpc3RzLlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIGdldCB3b3JrZXJTcmMoKSB7XG4gICAgaWYgKEdsb2JhbFdvcmtlck9wdGlvbnMud29ya2VyU3JjKSB7XG4gICAgICByZXR1cm4gR2xvYmFsV29ya2VyT3B0aW9ucy53b3JrZXJTcmM7XG4gICAgfVxuICAgIGlmIChQREZXb3JrZXJVdGlsLmZhbGxiYWNrV29ya2VyU3JjICE9PSBudWxsKSB7XG4gICAgICBpZiAoIWlzTm9kZUpTKSB7XG4gICAgICAgIGRlcHJlY2F0ZWQoJ05vIFwiR2xvYmFsV29ya2VyT3B0aW9ucy53b3JrZXJTcmNcIiBzcGVjaWZpZWQuJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUERGV29ya2VyVXRpbC5mYWxsYmFja1dvcmtlclNyYztcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCdObyBcIkdsb2JhbFdvcmtlck9wdGlvbnMud29ya2VyU3JjXCIgc3BlY2lmaWVkLicpO1xuICB9XG5cbiAgc3RhdGljIGdldCBfbWFpblRocmVhZFdvcmtlck1lc3NhZ2VIYW5kbGVyKCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZ2xvYmFsVGhpcy5wZGZqc1dvcmtlcj8uV29ya2VyTWVzc2FnZUhhbmRsZXIgfHwgbnVsbDtcbiAgICB9IGNhdGNoIChleCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLy8gTG9hZHMgd29ya2VyIGNvZGUgaW50byB0aGUgbWFpbi10aHJlYWQuXG4gIHN0YXRpYyBnZXQgX3NldHVwRmFrZVdvcmtlckdsb2JhbCgpIHtcbiAgICBjb25zdCBsb2FkZXIgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtYWluV29ya2VyTWVzc2FnZUhhbmRsZXIgPSB0aGlzLl9tYWluVGhyZWFkV29ya2VyTWVzc2FnZUhhbmRsZXI7XG5cbiAgICAgIGlmIChtYWluV29ya2VyTWVzc2FnZUhhbmRsZXIpIHtcbiAgICAgICAgLy8gVGhlIHdvcmtlciB3YXMgYWxyZWFkeSBsb2FkZWQgdXNpbmcgZS5nLiBhIGA8c2NyaXB0PmAgdGFnLlxuICAgICAgICByZXR1cm4gbWFpbldvcmtlck1lc3NhZ2VIYW5kbGVyO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBQREZKU0RldiA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhUERGSlNEZXYudGVzdChcIlBST0RVQ1RJT05cIikpIHtcbiAgICAgICAgY29uc3Qgd29ya2VyID0gYXdhaXQgaW1wb3J0KFwicGRmanMvY29yZS93b3JrZXIuanNcIik7XG4gICAgICAgIHJldHVybiB3b3JrZXIuV29ya2VyTWVzc2FnZUhhbmRsZXI7XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIFBERkpTRGV2LnRlc3QoXCJHRU5FUklDXCIpICYmXG4gICAgICAgIGlzTm9kZUpTICYmXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgICAgICB0eXBlb2YgX19ub25fd2VicGFja19yZXF1aXJlX18gPT09IFwiZnVuY3Rpb25cIlxuICAgICAgKSB7XG4gICAgICAgIC8vIFNpbmNlIGJ1bmRsZXJzLCBzdWNoIGFzIFdlYnBhY2ssIGNhbm5vdCBiZSB0b2xkIHRvIGxlYXZlIGByZXF1aXJlYFxuICAgICAgICAvLyBzdGF0ZW1lbnRzIGFsb25lIHdlIGFyZSB0aHVzIGZvcmNlZCB0byBqdW1wIHRocm91Z2ggaG9vcHMgaW4gb3JkZXJcbiAgICAgICAgLy8gdG8gcHJldmVudCBgQ3JpdGljYWwgZGVwZW5kZW5jeTogLi4uYCB3YXJuaW5ncyBpbiB0aGlyZC1wYXJ0eVxuICAgICAgICAvLyBkZXBsb3ltZW50cyBvZiB0aGUgYnVpbHQgYHBkZi5qc2AvYHBkZi53b3JrZXIuanNgIGZpbGVzOyBzZWVcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2svd2VicGFjay9pc3N1ZXMvODgyNlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGhhY2sgaXMgYmFzZWQgb24gdGhlIGFzc3VtcHRpb24gdGhhdCBjb2RlIHJ1bm5pbmcgaW5cbiAgICAgICAgLy8gTm9kZS5qcyB3b24ndCBldmVyIGJlIGFmZmVjdGVkIGJ5IGUuZy4gQ29udGVudCBTZWN1cml0eSBQb2xpY2llcyB0aGF0XG4gICAgICAgIC8vIHByZXZlbnQgdGhlIHVzZSBvZiBgZXZhbGAuIElmIHRoYXQgZXZlciBvY2N1cnMsIHdlIHNob3VsZCByZXZlcnQgdGhpc1xuICAgICAgICAvLyB0byBhIG5vcm1hbCBgX19ub25fd2VicGFja19yZXF1aXJlX19gIHN0YXRlbWVudCBhbmQgc2ltcGx5IGRvY3VtZW50XG4gICAgICAgIC8vIHRoZSBXZWJwYWNrIHdhcm5pbmdzIGluc3RlYWQgKHRlbGxpbmcgdXNlcnMgdG8gaWdub3JlIHRoZW0pLlxuICAgICAgICAvL1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZXZhbFxuICAgICAgICBjb25zdCB3b3JrZXIgPSBldmFsKFwicmVxdWlyZVwiKSh0aGlzLndvcmtlclNyYyk7XG4gICAgICAgIHJldHVybiB3b3JrZXIuV29ya2VyTWVzc2FnZUhhbmRsZXI7XG4gICAgICB9XG4gICAgICBhd2FpdCBsb2FkU2NyaXB0KHRoaXMud29ya2VyU3JjKTtcbiAgICAgIHJldHVybiB3aW5kb3cucGRmanNXb3JrZXIuV29ya2VyTWVzc2FnZUhhbmRsZXI7XG4gICAgfTtcblxuICAgIHJldHVybiBzaGFkb3codGhpcywgXCJfc2V0dXBGYWtlV29ya2VyR2xvYmFsXCIsIGxvYWRlcigpKTtcbiAgfVxufVxuaWYgKHR5cGVvZiBQREZKU0RldiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBQREZKU0Rldi50ZXN0KFwiR0VORVJJQ1wiKSkge1xuICBQREZXb3JrZXIuZ2V0V29ya2VyU3JjID0gZnVuY3Rpb24gKCkge1xuICAgIGRlcHJlY2F0ZWQoXG4gICAgICBcImBQREZXb3JrZXIuZ2V0V29ya2VyU3JjKClgLCBwbGVhc2UgdXNlIGBQREZXb3JrZXIud29ya2VyU3JjYCBpbnN0ZWFkLlwiXG4gICAgKTtcbiAgICByZXR1cm4gdGhpcy53b3JrZXJTcmM7XG4gIH07XG59XG5cbi8qKlxuICogRm9yIGludGVybmFsIHVzZSBvbmx5LlxuICogQGlnbm9yZVxuICovXG5jbGFzcyBXb3JrZXJUcmFuc3BvcnQge1xuICAjZG9jU3RhdHMgPSBudWxsO1xuXG4gICNwYWdlQ2FjaGUgPSBuZXcgTWFwKCk7XG5cbiAgI3BhZ2VQcm9taXNlcyA9IG5ldyBNYXAoKTtcblxuICAjbWV0YWRhdGFQcm9taXNlID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihtZXNzYWdlSGFuZGxlciwgbG9hZGluZ1Rhc2ssIG5ldHdvcmtTdHJlYW0sIHBhcmFtcykge1xuICAgIHRoaXMubWVzc2FnZUhhbmRsZXIgPSBtZXNzYWdlSGFuZGxlcjtcbiAgICB0aGlzLmxvYWRpbmdUYXNrID0gbG9hZGluZ1Rhc2s7XG4gICAgdGhpcy5jb21tb25PYmpzID0gbmV3IFBERk9iamVjdHMoKTtcbiAgICB0aGlzLmZvbnRMb2FkZXIgPSBuZXcgRm9udExvYWRlcih7XG4gICAgICBkb2NJZDogbG9hZGluZ1Rhc2suZG9jSWQsXG4gICAgICBvblVuc3VwcG9ydGVkRmVhdHVyZTogdGhpcy5fb25VbnN1cHBvcnRlZEZlYXR1cmUuYmluZCh0aGlzKSxcbiAgICAgIG93bmVyRG9jdW1lbnQ6IHBhcmFtcy5vd25lckRvY3VtZW50LFxuICAgICAgc3R5bGVFbGVtZW50OiBwYXJhbXMuc3R5bGVFbGVtZW50LFxuICAgIH0pO1xuICAgIHRoaXMuX3BhcmFtcyA9IHBhcmFtcztcblxuICAgIGlmICghcGFyYW1zLnVzZVdvcmtlckZldGNoKSB7XG4gICAgICB0aGlzLkNNYXBSZWFkZXJGYWN0b3J5ID0gbmV3IHBhcmFtcy5DTWFwUmVhZGVyRmFjdG9yeSh7XG4gICAgICAgIGJhc2VVcmw6IHBhcmFtcy5jTWFwVXJsLFxuICAgICAgICBpc0NvbXByZXNzZWQ6IHBhcmFtcy5jTWFwUGFja2VkLFxuICAgICAgfSk7XG4gICAgICB0aGlzLlN0YW5kYXJkRm9udERhdGFGYWN0b3J5ID0gbmV3IHBhcmFtcy5TdGFuZGFyZEZvbnREYXRhRmFjdG9yeSh7XG4gICAgICAgIGJhc2VVcmw6IHBhcmFtcy5zdGFuZGFyZEZvbnREYXRhVXJsLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmRlc3Ryb3lDYXBhYmlsaXR5ID0gbnVsbDtcbiAgICB0aGlzLl9wYXNzd29yZENhcGFiaWxpdHkgPSBudWxsO1xuXG4gICAgdGhpcy5fbmV0d29ya1N0cmVhbSA9IG5ldHdvcmtTdHJlYW07XG4gICAgdGhpcy5fZnVsbFJlYWRlciA9IG51bGw7XG4gICAgdGhpcy5fbGFzdFByb2dyZXNzID0gbnVsbDtcbiAgICB0aGlzLmRvd25sb2FkSW5mb0NhcGFiaWxpdHkgPSBjcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSgpO1xuXG4gICAgdGhpcy5zZXR1cE1lc3NhZ2VIYW5kbGVyKCk7XG4gIH1cblxuICBnZXQgYW5ub3RhdGlvblN0b3JhZ2UoKSB7XG4gICAgcmV0dXJuIHNoYWRvdyh0aGlzLCBcImFubm90YXRpb25TdG9yYWdlXCIsIG5ldyBBbm5vdGF0aW9uU3RvcmFnZSgpKTtcbiAgfVxuXG4gIGdldCBzdGF0cygpIHtcbiAgICByZXR1cm4gdGhpcy4jZG9jU3RhdHM7XG4gIH1cblxuICBnZXRSZW5kZXJpbmdJbnRlbnQoXG4gICAgaW50ZW50LFxuICAgIGFubm90YXRpb25Nb2RlID0gQW5ub3RhdGlvbk1vZGUuRU5BQkxFLFxuICAgIGlzT3BMaXN0ID0gZmFsc2VcbiAgKSB7XG4gICAgbGV0IHJlbmRlcmluZ0ludGVudCA9IFJlbmRlcmluZ0ludGVudEZsYWcuRElTUExBWTsgLy8gRGVmYXVsdCB2YWx1ZS5cbiAgICBsZXQgYW5ub3RhdGlvbkhhc2ggPSBcIlwiO1xuXG4gICAgc3dpdGNoIChpbnRlbnQpIHtcbiAgICAgIGNhc2UgXCJhbnlcIjpcbiAgICAgICAgcmVuZGVyaW5nSW50ZW50ID0gUmVuZGVyaW5nSW50ZW50RmxhZy5BTlk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImRpc3BsYXlcIjpcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwicHJpbnRcIjpcbiAgICAgICAgcmVuZGVyaW5nSW50ZW50ID0gUmVuZGVyaW5nSW50ZW50RmxhZy5QUklOVDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB3YXJuKGBnZXRSZW5kZXJpbmdJbnRlbnQgLSBpbnZhbGlkIGludGVudDogJHtpbnRlbnR9YCk7XG4gICAgfVxuXG4gICAgc3dpdGNoIChhbm5vdGF0aW9uTW9kZSkge1xuICAgICAgY2FzZSBBbm5vdGF0aW9uTW9kZS5ESVNBQkxFOlxuICAgICAgICByZW5kZXJpbmdJbnRlbnQgKz0gUmVuZGVyaW5nSW50ZW50RmxhZy5BTk5PVEFUSU9OU19ESVNBQkxFO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQW5ub3RhdGlvbk1vZGUuRU5BQkxFOlxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQW5ub3RhdGlvbk1vZGUuRU5BQkxFX0ZPUk1TOlxuICAgICAgICByZW5kZXJpbmdJbnRlbnQgKz0gUmVuZGVyaW5nSW50ZW50RmxhZy5BTk5PVEFUSU9OU19GT1JNUztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEFubm90YXRpb25Nb2RlLkVOQUJMRV9TVE9SQUdFOlxuICAgICAgICByZW5kZXJpbmdJbnRlbnQgKz0gUmVuZGVyaW5nSW50ZW50RmxhZy5BTk5PVEFUSU9OU19TVE9SQUdFO1xuXG4gICAgICAgIGFubm90YXRpb25IYXNoID0gdGhpcy5hbm5vdGF0aW9uU3RvcmFnZS5oYXNoO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHdhcm4oYGdldFJlbmRlcmluZ0ludGVudCAtIGludmFsaWQgYW5ub3RhdGlvbk1vZGU6ICR7YW5ub3RhdGlvbk1vZGV9YCk7XG4gICAgfVxuXG4gICAgaWYgKGlzT3BMaXN0KSB7XG4gICAgICByZW5kZXJpbmdJbnRlbnQgKz0gUmVuZGVyaW5nSW50ZW50RmxhZy5PUExJU1Q7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHJlbmRlcmluZ0ludGVudCxcbiAgICAgIGNhY2hlS2V5OiBgJHtyZW5kZXJpbmdJbnRlbnR9XyR7YW5ub3RhdGlvbkhhc2h9YCxcbiAgICB9O1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5kZXN0cm95Q2FwYWJpbGl0eSkge1xuICAgICAgcmV0dXJuIHRoaXMuZGVzdHJveUNhcGFiaWxpdHkucHJvbWlzZTtcbiAgICB9XG5cbiAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWU7XG4gICAgdGhpcy5kZXN0cm95Q2FwYWJpbGl0eSA9IGNyZWF0ZVByb21pc2VDYXBhYmlsaXR5KCk7XG5cbiAgICBpZiAodGhpcy5fcGFzc3dvcmRDYXBhYmlsaXR5KSB7XG4gICAgICB0aGlzLl9wYXNzd29yZENhcGFiaWxpdHkucmVqZWN0KFxuICAgICAgICBuZXcgRXJyb3IoXCJXb3JrZXIgd2FzIGRlc3Ryb3llZCBkdXJpbmcgb25QYXNzd29yZCBjYWxsYmFja1wiKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCB3YWl0T24gPSBbXTtcbiAgICAvLyBXZSBuZWVkIHRvIHdhaXQgZm9yIGFsbCByZW5kZXJpbmdzIHRvIGJlIGNvbXBsZXRlZCwgZS5nLlxuICAgIC8vIHRpbWVvdXQvckFGIGNhbiB0YWtlIGEgbG9uZyB0aW1lLlxuICAgIGZvciAoY29uc3QgcGFnZSBvZiB0aGlzLiNwYWdlQ2FjaGUudmFsdWVzKCkpIHtcbiAgICAgIHdhaXRPbi5wdXNoKHBhZ2UuX2Rlc3Ryb3koKSk7XG4gICAgfVxuICAgIHRoaXMuI3BhZ2VDYWNoZS5jbGVhcigpO1xuICAgIHRoaXMuI3BhZ2VQcm9taXNlcy5jbGVhcigpO1xuICAgIC8vIEFsbG93IGBBbm5vdGF0aW9uU3RvcmFnZWAtcmVsYXRlZCBjbGVhbi11cCB3aGVuIGRlc3Ryb3lpbmcgdGhlIGRvY3VtZW50LlxuICAgIGlmICh0aGlzLmhhc093blByb3BlcnR5KFwiYW5ub3RhdGlvblN0b3JhZ2VcIikpIHtcbiAgICAgIHRoaXMuYW5ub3RhdGlvblN0b3JhZ2UucmVzZXRNb2RpZmllZCgpO1xuICAgIH1cbiAgICAvLyBXZSBhbHNvIG5lZWQgdG8gd2FpdCBmb3IgdGhlIHdvcmtlciB0byBmaW5pc2ggaXRzIGxvbmcgcnVubmluZyB0YXNrcy5cbiAgICBjb25zdCB0ZXJtaW5hdGVkID0gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJUZXJtaW5hdGVcIiwgbnVsbCk7XG4gICAgd2FpdE9uLnB1c2godGVybWluYXRlZCk7XG5cbiAgICBQcm9taXNlLmFsbCh3YWl0T24pLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5jb21tb25PYmpzLmNsZWFyKCk7XG4gICAgICB0aGlzLmZvbnRMb2FkZXIuY2xlYXIoKTtcbiAgICAgIHRoaXMuI21ldGFkYXRhUHJvbWlzZSA9IG51bGw7XG4gICAgICB0aGlzLl9nZXRGaWVsZE9iamVjdHNQcm9taXNlID0gbnVsbDtcbiAgICAgIHRoaXMuX2hhc0pTQWN0aW9uc1Byb21pc2UgPSBudWxsO1xuXG4gICAgICBpZiAodGhpcy5fbmV0d29ya1N0cmVhbSkge1xuICAgICAgICB0aGlzLl9uZXR3b3JrU3RyZWFtLmNhbmNlbEFsbFJlcXVlc3RzKFxuICAgICAgICAgIG5ldyBBYm9ydEV4Y2VwdGlvbihcIldvcmtlciB3YXMgdGVybWluYXRlZC5cIilcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMubWVzc2FnZUhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5tZXNzYWdlSGFuZGxlci5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMubWVzc2FnZUhhbmRsZXIgPSBudWxsO1xuICAgICAgfVxuICAgICAgdGhpcy5kZXN0cm95Q2FwYWJpbGl0eS5yZXNvbHZlKCk7XG4gICAgfSwgdGhpcy5kZXN0cm95Q2FwYWJpbGl0eS5yZWplY3QpO1xuICAgIHJldHVybiB0aGlzLmRlc3Ryb3lDYXBhYmlsaXR5LnByb21pc2U7XG4gIH1cblxuICBzZXR1cE1lc3NhZ2VIYW5kbGVyKCkge1xuICAgIGNvbnN0IHsgbWVzc2FnZUhhbmRsZXIsIGxvYWRpbmdUYXNrIH0gPSB0aGlzO1xuXG4gICAgbWVzc2FnZUhhbmRsZXIub24oXCJHZXRSZWFkZXJcIiwgKGRhdGEsIHNpbmspID0+IHtcbiAgICAgIGFzc2VydChcbiAgICAgICAgdGhpcy5fbmV0d29ya1N0cmVhbSxcbiAgICAgICAgXCJHZXRSZWFkZXIgLSBubyBgSVBERlN0cmVhbWAgaW5zdGFuY2UgYXZhaWxhYmxlLlwiXG4gICAgICApO1xuICAgICAgdGhpcy5fZnVsbFJlYWRlciA9IHRoaXMuX25ldHdvcmtTdHJlYW0uZ2V0RnVsbFJlYWRlcigpO1xuICAgICAgdGhpcy5fZnVsbFJlYWRlci5vblByb2dyZXNzID0gZXZ0ID0+IHtcbiAgICAgICAgdGhpcy5fbGFzdFByb2dyZXNzID0ge1xuICAgICAgICAgIGxvYWRlZDogZXZ0LmxvYWRlZCxcbiAgICAgICAgICB0b3RhbDogZXZ0LnRvdGFsLFxuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIHNpbmsub25QdWxsID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9mdWxsUmVhZGVyXG4gICAgICAgICAgLnJlYWQoKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh7IHZhbHVlLCBkb25lIH0pIHtcbiAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgIHNpbmsuY2xvc2UoKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXNzZXJ0KFxuICAgICAgICAgICAgICBpc0FycmF5QnVmZmVyKHZhbHVlKSxcbiAgICAgICAgICAgICAgXCJHZXRSZWFkZXIgLSBleHBlY3RlZCBhbiBBcnJheUJ1ZmZlci5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIC8vIEVucXVldWUgZGF0YSBjaHVuayBpbnRvIHNpbmssIGFuZCB0cmFuc2ZlciBpdFxuICAgICAgICAgICAgLy8gdG8gb3RoZXIgc2lkZSBhcyBgVHJhbnNmZXJhYmxlYCBvYmplY3QuXG4gICAgICAgICAgICBzaW5rLmVucXVldWUobmV3IFVpbnQ4QXJyYXkodmFsdWUpLCAxLCBbdmFsdWVdKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChyZWFzb24gPT4ge1xuICAgICAgICAgICAgc2luay5lcnJvcihyZWFzb24pO1xuICAgICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgc2luay5vbkNhbmNlbCA9IHJlYXNvbiA9PiB7XG4gICAgICAgIHRoaXMuX2Z1bGxSZWFkZXIuY2FuY2VsKHJlYXNvbik7XG5cbiAgICAgICAgc2luay5yZWFkeS5jYXRjaChyZWFkeVJlYXNvbiA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIElnbm9yZSBhbnkgcGVuZGluZyByZXF1ZXN0cyBpZiB0aGUgd29ya2VyIHdhcyB0ZXJtaW5hdGVkLlxuICAgICAgICAgIH1cbiAgICAgICAgICB0aHJvdyByZWFkeVJlYXNvbjtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgbWVzc2FnZUhhbmRsZXIub24oXCJSZWFkZXJIZWFkZXJzUmVhZHlcIiwgZGF0YSA9PiB7XG4gICAgICBjb25zdCBoZWFkZXJzQ2FwYWJpbGl0eSA9IGNyZWF0ZVByb21pc2VDYXBhYmlsaXR5KCk7XG4gICAgICBjb25zdCBmdWxsUmVhZGVyID0gdGhpcy5fZnVsbFJlYWRlcjtcbiAgICAgIGZ1bGxSZWFkZXIuaGVhZGVyc1JlYWR5LnRoZW4oKCkgPT4ge1xuICAgICAgICAvLyBJZiBzdHJlYW0gb3IgcmFuZ2UgYXJlIGRpc2FibGVkLCBpdCdzIG91ciBvbmx5IHdheSB0byByZXBvcnRcbiAgICAgICAgLy8gbG9hZGluZyBwcm9ncmVzcy5cbiAgICAgICAgaWYgKCFmdWxsUmVhZGVyLmlzU3RyZWFtaW5nU3VwcG9ydGVkIHx8ICFmdWxsUmVhZGVyLmlzUmFuZ2VTdXBwb3J0ZWQpIHtcbiAgICAgICAgICBpZiAodGhpcy5fbGFzdFByb2dyZXNzKSB7XG4gICAgICAgICAgICBsb2FkaW5nVGFzay5vblByb2dyZXNzPy4odGhpcy5fbGFzdFByb2dyZXNzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZnVsbFJlYWRlci5vblByb2dyZXNzID0gZXZ0ID0+IHtcbiAgICAgICAgICAgIGxvYWRpbmdUYXNrLm9uUHJvZ3Jlc3M/Lih7XG4gICAgICAgICAgICAgIGxvYWRlZDogZXZ0LmxvYWRlZCxcbiAgICAgICAgICAgICAgdG90YWw6IGV2dC50b3RhbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBoZWFkZXJzQ2FwYWJpbGl0eS5yZXNvbHZlKHtcbiAgICAgICAgICBpc1N0cmVhbWluZ1N1cHBvcnRlZDogZnVsbFJlYWRlci5pc1N0cmVhbWluZ1N1cHBvcnRlZCxcbiAgICAgICAgICBpc1JhbmdlU3VwcG9ydGVkOiBmdWxsUmVhZGVyLmlzUmFuZ2VTdXBwb3J0ZWQsXG4gICAgICAgICAgY29udGVudExlbmd0aDogZnVsbFJlYWRlci5jb250ZW50TGVuZ3RoLFxuICAgICAgICB9KTtcbiAgICAgIH0sIGhlYWRlcnNDYXBhYmlsaXR5LnJlamVjdCk7XG5cbiAgICAgIHJldHVybiBoZWFkZXJzQ2FwYWJpbGl0eS5wcm9taXNlO1xuICAgIH0pO1xuXG4gICAgbWVzc2FnZUhhbmRsZXIub24oXCJHZXRSYW5nZVJlYWRlclwiLCAoZGF0YSwgc2luaykgPT4ge1xuICAgICAgYXNzZXJ0KFxuICAgICAgICB0aGlzLl9uZXR3b3JrU3RyZWFtLFxuICAgICAgICBcIkdldFJhbmdlUmVhZGVyIC0gbm8gYElQREZTdHJlYW1gIGluc3RhbmNlIGF2YWlsYWJsZS5cIlxuICAgICAgKTtcbiAgICAgIGNvbnN0IHJhbmdlUmVhZGVyID0gdGhpcy5fbmV0d29ya1N0cmVhbS5nZXRSYW5nZVJlYWRlcihcbiAgICAgICAgZGF0YS5iZWdpbixcbiAgICAgICAgZGF0YS5lbmRcbiAgICAgICk7XG5cbiAgICAgIC8vIFdoZW4gc3RyZWFtaW5nIGlzIGVuYWJsZWQsIGl0J3MgcG9zc2libGUgdGhhdCB0aGUgZGF0YSByZXF1ZXN0ZWQgaGVyZVxuICAgICAgLy8gaGFzIGFscmVhZHkgYmVlbiBmZXRjaGVkIHZpYSB0aGUgYF9mdWxsUmVxdWVzdFJlYWRlcmAgaW1wbGVtZW50YXRpb24uXG4gICAgICAvLyBIb3dldmVyLCBnaXZlbiB0aGF0IHRoZSBQREYgZGF0YSBpcyBsb2FkZWQgYXN5bmNocm9ub3VzbHkgb24gdGhlXG4gICAgICAvLyBtYWluLXRocmVhZCBhbmQgdGhlbiBzZW50IHZpYSBgcG9zdE1lc3NhZ2VgIHRvIHRoZSB3b3JrZXItdGhyZWFkLFxuICAgICAgLy8gaXQgbWF5IG5vdCBoYXZlIGJlZW4gYXZhaWxhYmxlIGR1cmluZyBwYXJzaW5nIChoZW5jZSB0aGUgYXR0ZW1wdCB0b1xuICAgICAgLy8gdXNlIHJhbmdlIHJlcXVlc3RzIGhlcmUpLlxuICAgICAgLy9cbiAgICAgIC8vIFRvIGF2b2lkIHdhc3RpbmcgdGltZSBhbmQgcmVzb3VyY2VzIGhlcmUsIHdlJ2xsIHRodXMgKm5vdCogZGlzcGF0Y2hcbiAgICAgIC8vIHJhbmdlIHJlcXVlc3RzIGlmIHRoZSBkYXRhIHdhcyBhbHJlYWR5IGxvYWRlZCBidXQgaGFzIG5vdCBiZWVuIHNlbnQgdG9cbiAgICAgIC8vIHRoZSB3b3JrZXItdGhyZWFkIHlldCAod2hpY2ggd2lsbCBoYXBwZW4gdmlhIHRoZSBgX2Z1bGxSZXF1ZXN0UmVhZGVyYCkuXG4gICAgICBpZiAoIXJhbmdlUmVhZGVyKSB7XG4gICAgICAgIHNpbmsuY2xvc2UoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzaW5rLm9uUHVsbCA9ICgpID0+IHtcbiAgICAgICAgcmFuZ2VSZWFkZXJcbiAgICAgICAgICAucmVhZCgpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHsgdmFsdWUsIGRvbmUgfSkge1xuICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgc2luay5jbG9zZSgpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhc3NlcnQoXG4gICAgICAgICAgICAgIGlzQXJyYXlCdWZmZXIodmFsdWUpLFxuICAgICAgICAgICAgICBcIkdldFJhbmdlUmVhZGVyIC0gZXhwZWN0ZWQgYW4gQXJyYXlCdWZmZXIuXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBzaW5rLmVucXVldWUobmV3IFVpbnQ4QXJyYXkodmFsdWUpLCAxLCBbdmFsdWVdKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChyZWFzb24gPT4ge1xuICAgICAgICAgICAgc2luay5lcnJvcihyZWFzb24pO1xuICAgICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgc2luay5vbkNhbmNlbCA9IHJlYXNvbiA9PiB7XG4gICAgICAgIHJhbmdlUmVhZGVyLmNhbmNlbChyZWFzb24pO1xuXG4gICAgICAgIHNpbmsucmVhZHkuY2F0Y2gocmVhZHlSZWFzb24gPT4ge1xuICAgICAgICAgIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBJZ25vcmUgYW55IHBlbmRpbmcgcmVxdWVzdHMgaWYgdGhlIHdvcmtlciB3YXMgdGVybWluYXRlZC5cbiAgICAgICAgICB9XG4gICAgICAgICAgdGhyb3cgcmVhZHlSZWFzb247XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIG1lc3NhZ2VIYW5kbGVyLm9uKFwiR2V0RG9jXCIsICh7IHBkZkluZm8gfSkgPT4ge1xuICAgICAgdGhpcy5fbnVtUGFnZXMgPSBwZGZJbmZvLm51bVBhZ2VzO1xuICAgICAgdGhpcy5faHRtbEZvclhmYSA9IHBkZkluZm8uaHRtbEZvclhmYTtcbiAgICAgIGRlbGV0ZSBwZGZJbmZvLmh0bWxGb3JYZmE7XG4gICAgICBsb2FkaW5nVGFzay5fY2FwYWJpbGl0eS5yZXNvbHZlKG5ldyBQREZEb2N1bWVudFByb3h5KHBkZkluZm8sIHRoaXMpKTtcbiAgICB9KTtcblxuICAgIG1lc3NhZ2VIYW5kbGVyLm9uKFwiRG9jRXhjZXB0aW9uXCIsIGZ1bmN0aW9uIChleCkge1xuICAgICAgbGV0IHJlYXNvbjtcbiAgICAgIHN3aXRjaCAoZXgubmFtZSkge1xuICAgICAgICBjYXNlIFwiUGFzc3dvcmRFeGNlcHRpb25cIjpcbiAgICAgICAgICByZWFzb24gPSBuZXcgUGFzc3dvcmRFeGNlcHRpb24oZXgubWVzc2FnZSwgZXguY29kZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJJbnZhbGlkUERGRXhjZXB0aW9uXCI6XG4gICAgICAgICAgcmVhc29uID0gbmV3IEludmFsaWRQREZFeGNlcHRpb24oZXgubWVzc2FnZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJNaXNzaW5nUERGRXhjZXB0aW9uXCI6XG4gICAgICAgICAgcmVhc29uID0gbmV3IE1pc3NpbmdQREZFeGNlcHRpb24oZXgubWVzc2FnZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJVbmV4cGVjdGVkUmVzcG9uc2VFeGNlcHRpb25cIjpcbiAgICAgICAgICByZWFzb24gPSBuZXcgVW5leHBlY3RlZFJlc3BvbnNlRXhjZXB0aW9uKGV4Lm1lc3NhZ2UsIGV4LnN0YXR1cyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJVbmtub3duRXJyb3JFeGNlcHRpb25cIjpcbiAgICAgICAgICByZWFzb24gPSBuZXcgVW5rbm93bkVycm9yRXhjZXB0aW9uKGV4Lm1lc3NhZ2UsIGV4LmRldGFpbHMpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHVucmVhY2hhYmxlKFwiRG9jRXhjZXB0aW9uIC0gZXhwZWN0ZWQgYSB2YWxpZCBFcnJvci5cIik7XG4gICAgICB9XG4gICAgICBsb2FkaW5nVGFzay5fY2FwYWJpbGl0eS5yZWplY3QocmVhc29uKTtcbiAgICB9KTtcblxuICAgIG1lc3NhZ2VIYW5kbGVyLm9uKFwiUGFzc3dvcmRSZXF1ZXN0XCIsIGV4Y2VwdGlvbiA9PiB7XG4gICAgICB0aGlzLl9wYXNzd29yZENhcGFiaWxpdHkgPSBjcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSgpO1xuXG4gICAgICBpZiAobG9hZGluZ1Rhc2sub25QYXNzd29yZCkge1xuICAgICAgICBjb25zdCB1cGRhdGVQYXNzd29yZCA9IHBhc3N3b3JkID0+IHtcbiAgICAgICAgICBpZiAocGFzc3dvcmQgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgdGhpcy5fcGFzc3dvcmRDYXBhYmlsaXR5LnJlamVjdChwYXNzd29yZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3Bhc3N3b3JkQ2FwYWJpbGl0eS5yZXNvbHZlKHsgcGFzc3dvcmQgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGxvYWRpbmdUYXNrLm9uUGFzc3dvcmQodXBkYXRlUGFzc3dvcmQsIGV4Y2VwdGlvbi5jb2RlKTtcbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICB0aGlzLl9wYXNzd29yZENhcGFiaWxpdHkucmVqZWN0KGV4KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcGFzc3dvcmRDYXBhYmlsaXR5LnJlamVjdChcbiAgICAgICAgICBuZXcgUGFzc3dvcmRFeGNlcHRpb24oZXhjZXB0aW9uLm1lc3NhZ2UsIGV4Y2VwdGlvbi5jb2RlKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuX3Bhc3N3b3JkQ2FwYWJpbGl0eS5wcm9taXNlO1xuICAgIH0pO1xuXG4gICAgbWVzc2FnZUhhbmRsZXIub24oXCJEYXRhTG9hZGVkXCIsIGRhdGEgPT4ge1xuICAgICAgLy8gRm9yIGNvbnNpc3RlbmN5OiBFbnN1cmUgdGhhdCBwcm9ncmVzcyBpcyBhbHdheXMgcmVwb3J0ZWQgd2hlbiB0aGVcbiAgICAgIC8vIGVudGlyZSBQREYgZmlsZSBoYXMgYmVlbiBsb2FkZWQsIHJlZ2FyZGxlc3Mgb2YgaG93IGl0IHdhcyBmZXRjaGVkLlxuICAgICAgbG9hZGluZ1Rhc2sub25Qcm9ncmVzcz8uKHtcbiAgICAgICAgbG9hZGVkOiBkYXRhLmxlbmd0aCxcbiAgICAgICAgdG90YWw6IGRhdGEubGVuZ3RoLFxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuZG93bmxvYWRJbmZvQ2FwYWJpbGl0eS5yZXNvbHZlKGRhdGEpO1xuICAgIH0pO1xuXG4gICAgbWVzc2FnZUhhbmRsZXIub24oXCJTdGFydFJlbmRlclBhZ2VcIiwgZGF0YSA9PiB7XG4gICAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgICAgcmV0dXJuOyAvLyBJZ25vcmUgYW55IHBlbmRpbmcgcmVxdWVzdHMgaWYgdGhlIHdvcmtlciB3YXMgdGVybWluYXRlZC5cbiAgICAgIH1cblxuICAgICAgY29uc3QgcGFnZSA9IHRoaXMuI3BhZ2VDYWNoZS5nZXQoZGF0YS5wYWdlSW5kZXgpO1xuICAgICAgcGFnZS5fc3RhcnRSZW5kZXJQYWdlKGRhdGEudHJhbnNwYXJlbmN5LCBkYXRhLmNhY2hlS2V5KTtcbiAgICB9KTtcblxuICAgIG1lc3NhZ2VIYW5kbGVyLm9uKFwiY29tbW9ub2JqXCIsIChbaWQsIHR5cGUsIGV4cG9ydGVkRGF0YV0pID0+IHtcbiAgICAgIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICByZXR1cm47IC8vIElnbm9yZSBhbnkgcGVuZGluZyByZXF1ZXN0cyBpZiB0aGUgd29ya2VyIHdhcyB0ZXJtaW5hdGVkLlxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5jb21tb25PYmpzLmhhcyhpZCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBcIkZvbnRcIjpcbiAgICAgICAgICBjb25zdCBwYXJhbXMgPSB0aGlzLl9wYXJhbXM7XG5cbiAgICAgICAgICBpZiAoXCJlcnJvclwiIGluIGV4cG9ydGVkRGF0YSkge1xuICAgICAgICAgICAgY29uc3QgZXhwb3J0ZWRFcnJvciA9IGV4cG9ydGVkRGF0YS5lcnJvcjtcbiAgICAgICAgICAgIHdhcm4oYEVycm9yIGR1cmluZyBmb250IGxvYWRpbmc6ICR7ZXhwb3J0ZWRFcnJvcn1gKTtcbiAgICAgICAgICAgIHRoaXMuY29tbW9uT2Jqcy5yZXNvbHZlKGlkLCBleHBvcnRlZEVycm9yKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxldCBmb250UmVnaXN0cnkgPSBudWxsO1xuICAgICAgICAgIGlmIChwYXJhbXMucGRmQnVnICYmIGdsb2JhbFRoaXMuRm9udEluc3BlY3Rvcj8uZW5hYmxlZCkge1xuICAgICAgICAgICAgZm9udFJlZ2lzdHJ5ID0ge1xuICAgICAgICAgICAgICByZWdpc3RlckZvbnQoZm9udCwgdXJsKSB7XG4gICAgICAgICAgICAgICAgZ2xvYmFsVGhpcy5Gb250SW5zcGVjdG9yLmZvbnRBZGRlZChmb250LCB1cmwpO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZm9udCA9IG5ldyBGb250RmFjZU9iamVjdChleHBvcnRlZERhdGEsIHtcbiAgICAgICAgICAgIGlzRXZhbFN1cHBvcnRlZDogcGFyYW1zLmlzRXZhbFN1cHBvcnRlZCxcbiAgICAgICAgICAgIGRpc2FibGVGb250RmFjZTogcGFyYW1zLmRpc2FibGVGb250RmFjZSxcbiAgICAgICAgICAgIGlnbm9yZUVycm9yczogcGFyYW1zLmlnbm9yZUVycm9ycyxcbiAgICAgICAgICAgIG9uVW5zdXBwb3J0ZWRGZWF0dXJlOiB0aGlzLl9vblVuc3VwcG9ydGVkRmVhdHVyZS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgZm9udFJlZ2lzdHJ5LFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdGhpcy5mb250TG9hZGVyXG4gICAgICAgICAgICAuYmluZChmb250KVxuICAgICAgICAgICAgLmNhdGNoKHJlYXNvbiA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJGb250RmFsbGJhY2tcIiwgeyBpZCB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICAgIGlmICghcGFyYW1zLmZvbnRFeHRyYVByb3BlcnRpZXMgJiYgZm9udC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgLy8gSW1tZWRpYXRlbHkgcmVsZWFzZSB0aGUgYGZvbnQuZGF0YWAgcHJvcGVydHkgb25jZSB0aGUgZm9udFxuICAgICAgICAgICAgICAgIC8vIGhhcyBiZWVuIGF0dGFjaGVkIHRvIHRoZSBET00sIHNpbmNlIGl0J3Mgbm8gbG9uZ2VyIG5lZWRlZCxcbiAgICAgICAgICAgICAgICAvLyByYXRoZXIgdGhhbiB3YWl0aW5nIGZvciBhIGBQREZEb2N1bWVudFByb3h5LmNsZWFudXBgIGNhbGwuXG4gICAgICAgICAgICAgICAgLy8gU2luY2UgYGZvbnQuZGF0YWAgY291bGQgYmUgdmVyeSBsYXJnZSwgZS5nLiBpbiBzb21lIGNhc2VzXG4gICAgICAgICAgICAgICAgLy8gbXVsdGlwbGUgbWVnYWJ5dGVzLCB0aGlzIHdpbGwgaGVscCByZWR1Y2UgbWVtb3J5IHVzYWdlLlxuICAgICAgICAgICAgICAgIGZvbnQuZGF0YSA9IG51bGw7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdGhpcy5jb21tb25PYmpzLnJlc29sdmUoaWQsIGZvbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJGb250UGF0aFwiOlxuICAgICAgICBjYXNlIFwiSW1hZ2VcIjpcbiAgICAgICAgICB0aGlzLmNvbW1vbk9ianMucmVzb2x2ZShpZCwgZXhwb3J0ZWREYXRhKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEdvdCB1bmtub3duIGNvbW1vbiBvYmplY3QgdHlwZSAke3R5cGV9YCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBtZXNzYWdlSGFuZGxlci5vbihcIm9ialwiLCAoW2lkLCBwYWdlSW5kZXgsIHR5cGUsIGltYWdlRGF0YV0pID0+IHtcbiAgICAgIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICAvLyBJZ25vcmUgYW55IHBlbmRpbmcgcmVxdWVzdHMgaWYgdGhlIHdvcmtlciB3YXMgdGVybWluYXRlZC5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwYWdlUHJveHkgPSB0aGlzLiNwYWdlQ2FjaGUuZ2V0KHBhZ2VJbmRleCk7XG4gICAgICBpZiAocGFnZVByb3h5Lm9ianMuaGFzKGlkKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIFwiSW1hZ2VcIjpcbiAgICAgICAgICBwYWdlUHJveHkub2Jqcy5yZXNvbHZlKGlkLCBpbWFnZURhdGEpO1xuXG4gICAgICAgICAgLy8gSGV1cmlzdGljIHRoYXQgd2lsbCBhbGxvdyB1cyBub3QgdG8gc3RvcmUgbGFyZ2UgZGF0YS5cbiAgICAgICAgICBjb25zdCBNQVhfSU1BR0VfU0laRV9UT19TVE9SRSA9IDgwMDAwMDA7XG4gICAgICAgICAgaWYgKGltYWdlRGF0YSkge1xuICAgICAgICAgICAgbGV0IGxlbmd0aDtcbiAgICAgICAgICAgIGlmIChpbWFnZURhdGEuYml0bWFwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHsgYml0bWFwLCB3aWR0aCwgaGVpZ2h0IH0gPSBpbWFnZURhdGE7XG4gICAgICAgICAgICAgIGxlbmd0aCA9IHdpZHRoICogaGVpZ2h0ICogNDtcbiAgICAgICAgICAgICAgcGFnZVByb3h5Ll9iaXRtYXBzLmFkZChiaXRtYXApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbGVuZ3RoID0gaW1hZ2VEYXRhLmRhdGE/Lmxlbmd0aCB8fCAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobGVuZ3RoID4gTUFYX0lNQUdFX1NJWkVfVE9fU1RPUkUpIHtcbiAgICAgICAgICAgICAgcGFnZVByb3h5LmNsZWFudXBBZnRlclJlbmRlciA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiUGF0dGVyblwiOlxuICAgICAgICAgIHBhZ2VQcm94eS5vYmpzLnJlc29sdmUoaWQsIGltYWdlRGF0YSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBHb3QgdW5rbm93biBvYmplY3QgdHlwZSAke3R5cGV9YCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBtZXNzYWdlSGFuZGxlci5vbihcIkRvY1Byb2dyZXNzXCIsIGRhdGEgPT4ge1xuICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgIHJldHVybjsgLy8gSWdub3JlIGFueSBwZW5kaW5nIHJlcXVlc3RzIGlmIHRoZSB3b3JrZXIgd2FzIHRlcm1pbmF0ZWQuXG4gICAgICB9XG4gICAgICBsb2FkaW5nVGFzay5vblByb2dyZXNzPy4oe1xuICAgICAgICBsb2FkZWQ6IGRhdGEubG9hZGVkLFxuICAgICAgICB0b3RhbDogZGF0YS50b3RhbCxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgbWVzc2FnZUhhbmRsZXIub24oXCJEb2NTdGF0c1wiLCBkYXRhID0+IHtcbiAgICAgIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICByZXR1cm47IC8vIElnbm9yZSBhbnkgcGVuZGluZyByZXF1ZXN0cyBpZiB0aGUgd29ya2VyIHdhcyB0ZXJtaW5hdGVkLlxuICAgICAgfVxuICAgICAgLy8gRW5zdXJlIHRoYXQgYSBgUERGRG9jdW1lbnRQcm94eS5zdGF0c2AgY2FsbC1zaXRlIGNhbm5vdCBhY2NpZGVudGFsbHlcbiAgICAgIC8vIG1vZGlmeSB0aGlzIGludGVybmFsIGRhdGEuXG4gICAgICB0aGlzLiNkb2NTdGF0cyA9IE9iamVjdC5mcmVlemUoe1xuICAgICAgICBzdHJlYW1UeXBlczogT2JqZWN0LmZyZWV6ZShkYXRhLnN0cmVhbVR5cGVzKSxcbiAgICAgICAgZm9udFR5cGVzOiBPYmplY3QuZnJlZXplKGRhdGEuZm9udFR5cGVzKSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgbWVzc2FnZUhhbmRsZXIub24oXG4gICAgICBcIlVuc3VwcG9ydGVkRmVhdHVyZVwiLFxuICAgICAgdGhpcy5fb25VbnN1cHBvcnRlZEZlYXR1cmUuYmluZCh0aGlzKVxuICAgICk7XG5cbiAgICBtZXNzYWdlSGFuZGxlci5vbihcIkZldGNoQnVpbHRJbkNNYXBcIiwgZGF0YSA9PiB7XG4gICAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIldvcmtlciB3YXMgZGVzdHJveWVkLlwiKSk7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuQ01hcFJlYWRlckZhY3RvcnkpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFxuICAgICAgICAgIG5ldyBFcnJvcihcbiAgICAgICAgICAgIFwiQ01hcFJlYWRlckZhY3Rvcnkgbm90IGluaXRpYWxpemVkLCBzZWUgdGhlIGB1c2VXb3JrZXJGZXRjaGAgcGFyYW1ldGVyLlwiXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuQ01hcFJlYWRlckZhY3RvcnkuZmV0Y2goZGF0YSk7XG4gICAgfSk7XG5cbiAgICBtZXNzYWdlSGFuZGxlci5vbihcIkZldGNoU3RhbmRhcmRGb250RGF0YVwiLCBkYXRhID0+IHtcbiAgICAgIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiV29ya2VyIHdhcyBkZXN0cm95ZWQuXCIpKTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5TdGFuZGFyZEZvbnREYXRhRmFjdG9yeSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXG4gICAgICAgICAgbmV3IEVycm9yKFxuICAgICAgICAgICAgXCJTdGFuZGFyZEZvbnREYXRhRmFjdG9yeSBub3QgaW5pdGlhbGl6ZWQsIHNlZSB0aGUgYHVzZVdvcmtlckZldGNoYCBwYXJhbWV0ZXIuXCJcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5TdGFuZGFyZEZvbnREYXRhRmFjdG9yeS5mZXRjaChkYXRhKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9vblVuc3VwcG9ydGVkRmVhdHVyZSh7IGZlYXR1cmVJZCB9KSB7XG4gICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICByZXR1cm47IC8vIElnbm9yZSBhbnkgcGVuZGluZyByZXF1ZXN0cyBpZiB0aGUgd29ya2VyIHdhcyB0ZXJtaW5hdGVkLlxuICAgIH1cbiAgICB0aGlzLmxvYWRpbmdUYXNrLm9uVW5zdXBwb3J0ZWRGZWF0dXJlPy4oZmVhdHVyZUlkKTtcbiAgfVxuXG4gIGdldERhdGEoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0RGF0YVwiLCBudWxsKTtcbiAgfVxuXG4gIGdldFBhZ2UocGFnZU51bWJlcikge1xuICAgIGlmIChcbiAgICAgICFOdW1iZXIuaXNJbnRlZ2VyKHBhZ2VOdW1iZXIpIHx8XG4gICAgICBwYWdlTnVtYmVyIDw9IDAgfHxcbiAgICAgIHBhZ2VOdW1iZXIgPiB0aGlzLl9udW1QYWdlc1xuICAgICkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIkludmFsaWQgcGFnZSByZXF1ZXN0LlwiKSk7XG4gICAgfVxuXG4gICAgY29uc3QgcGFnZUluZGV4ID0gcGFnZU51bWJlciAtIDEsXG4gICAgICBjYWNoZWRQcm9taXNlID0gdGhpcy4jcGFnZVByb21pc2VzLmdldChwYWdlSW5kZXgpO1xuICAgIGlmIChjYWNoZWRQcm9taXNlKSB7XG4gICAgICByZXR1cm4gY2FjaGVkUHJvbWlzZTtcbiAgICB9XG4gICAgY29uc3QgcHJvbWlzZSA9IHRoaXMubWVzc2FnZUhhbmRsZXJcbiAgICAgIC5zZW5kV2l0aFByb21pc2UoXCJHZXRQYWdlXCIsIHtcbiAgICAgICAgcGFnZUluZGV4LFxuICAgICAgfSlcbiAgICAgIC50aGVuKHBhZ2VJbmZvID0+IHtcbiAgICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVHJhbnNwb3J0IGRlc3Ryb3llZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWdlID0gbmV3IFBERlBhZ2VQcm94eShcbiAgICAgICAgICBwYWdlSW5kZXgsXG4gICAgICAgICAgcGFnZUluZm8sXG4gICAgICAgICAgdGhpcyxcbiAgICAgICAgICB0aGlzLl9wYXJhbXMub3duZXJEb2N1bWVudCxcbiAgICAgICAgICB0aGlzLl9wYXJhbXMucGRmQnVnXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuI3BhZ2VDYWNoZS5zZXQocGFnZUluZGV4LCBwYWdlKTtcbiAgICAgICAgcmV0dXJuIHBhZ2U7XG4gICAgICB9KTtcbiAgICB0aGlzLiNwYWdlUHJvbWlzZXMuc2V0KHBhZ2VJbmRleCwgcHJvbWlzZSk7XG4gICAgcmV0dXJuIHByb21pc2U7XG4gIH1cblxuICBnZXRQYWdlSW5kZXgocmVmKSB7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIHJlZiAhPT0gXCJvYmplY3RcIiB8fFxuICAgICAgcmVmID09PSBudWxsIHx8XG4gICAgICAhTnVtYmVyLmlzSW50ZWdlcihyZWYubnVtKSB8fFxuICAgICAgcmVmLm51bSA8IDAgfHxcbiAgICAgICFOdW1iZXIuaXNJbnRlZ2VyKHJlZi5nZW4pIHx8XG4gICAgICByZWYuZ2VuIDwgMFxuICAgICkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIkludmFsaWQgcGFnZUluZGV4IHJlcXVlc3QuXCIpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0UGFnZUluZGV4XCIsIHtcbiAgICAgIG51bTogcmVmLm51bSxcbiAgICAgIGdlbjogcmVmLmdlbixcbiAgICB9KTtcbiAgfVxuXG4gIGdldEFubm90YXRpb25zKHBhZ2VJbmRleCwgaW50ZW50KSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0QW5ub3RhdGlvbnNcIiwge1xuICAgICAgcGFnZUluZGV4LFxuICAgICAgaW50ZW50LFxuICAgIH0pO1xuICB9XG5cbiAgc2F2ZURvY3VtZW50KCkge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VIYW5kbGVyXG4gICAgICAuc2VuZFdpdGhQcm9taXNlKFwiU2F2ZURvY3VtZW50XCIsIHtcbiAgICAgICAgaXNQdXJlWGZhOiAhIXRoaXMuX2h0bWxGb3JYZmEsXG4gICAgICAgIG51bVBhZ2VzOiB0aGlzLl9udW1QYWdlcyxcbiAgICAgICAgYW5ub3RhdGlvblN0b3JhZ2U6IHRoaXMuYW5ub3RhdGlvblN0b3JhZ2Uuc2VyaWFsaXphYmxlLFxuICAgICAgICBmaWxlbmFtZTogdGhpcy5fZnVsbFJlYWRlcj8uZmlsZW5hbWUgPz8gbnVsbCxcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHRoaXMuYW5ub3RhdGlvblN0b3JhZ2UucmVzZXRNb2RpZmllZCgpO1xuICAgICAgfSk7XG4gIH1cblxuICBnZXRGaWVsZE9iamVjdHMoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9nZXRGaWVsZE9iamVjdHNQcm9taXNlIHx8PVxuICAgICAgdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXRGaWVsZE9iamVjdHNcIiwgbnVsbCkpO1xuICB9XG5cbiAgaGFzSlNBY3Rpb25zKCkge1xuICAgIHJldHVybiAodGhpcy5faGFzSlNBY3Rpb25zUHJvbWlzZSB8fD0gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXG4gICAgICBcIkhhc0pTQWN0aW9uc1wiLFxuICAgICAgbnVsbFxuICAgICkpO1xuICB9XG5cbiAgZ2V0Q2FsY3VsYXRpb25PcmRlcklkcygpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXRDYWxjdWxhdGlvbk9yZGVySWRzXCIsIG51bGwpO1xuICB9XG5cbiAgZ2V0RGVzdGluYXRpb25zKCkge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZShcIkdldERlc3RpbmF0aW9uc1wiLCBudWxsKTtcbiAgfVxuXG4gIGdldERlc3RpbmF0aW9uKGlkKSB7XG4gICAgaWYgKHR5cGVvZiBpZCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIkludmFsaWQgZGVzdGluYXRpb24gcmVxdWVzdC5cIikpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXREZXN0aW5hdGlvblwiLCB7XG4gICAgICBpZCxcbiAgICB9KTtcbiAgfVxuXG4gIGdldFBhZ2VMYWJlbHMoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0UGFnZUxhYmVsc1wiLCBudWxsKTtcbiAgfVxuXG4gIGdldFBhZ2VMYXlvdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0UGFnZUxheW91dFwiLCBudWxsKTtcbiAgfVxuXG4gIGdldFBhZ2VNb2RlKCkge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZShcIkdldFBhZ2VNb2RlXCIsIG51bGwpO1xuICB9XG5cbiAgZ2V0Vmlld2VyUHJlZmVyZW5jZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0Vmlld2VyUHJlZmVyZW5jZXNcIiwgbnVsbCk7XG4gIH1cblxuICBnZXRPcGVuQWN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZShcIkdldE9wZW5BY3Rpb25cIiwgbnVsbCk7XG4gIH1cblxuICBnZXRBdHRhY2htZW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXRBdHRhY2htZW50c1wiLCBudWxsKTtcbiAgfVxuXG4gIGdldEphdmFTY3JpcHQoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0SmF2YVNjcmlwdFwiLCBudWxsKTtcbiAgfVxuXG4gIGdldERvY0pTQWN0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXREb2NKU0FjdGlvbnNcIiwgbnVsbCk7XG4gIH1cblxuICBnZXRQYWdlSlNBY3Rpb25zKHBhZ2VJbmRleCkge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZShcIkdldFBhZ2VKU0FjdGlvbnNcIiwge1xuICAgICAgcGFnZUluZGV4LFxuICAgIH0pO1xuICB9XG5cbiAgZ2V0U3RydWN0VHJlZShwYWdlSW5kZXgpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXRTdHJ1Y3RUcmVlXCIsIHtcbiAgICAgIHBhZ2VJbmRleCxcbiAgICB9KTtcbiAgfVxuXG4gIGdldE91dGxpbmUoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0T3V0bGluZVwiLCBudWxsKTtcbiAgfVxuXG4gIGdldE9wdGlvbmFsQ29udGVudENvbmZpZygpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlclxuICAgICAgLnNlbmRXaXRoUHJvbWlzZShcIkdldE9wdGlvbmFsQ29udGVudENvbmZpZ1wiLCBudWxsKVxuICAgICAgLnRoZW4ocmVzdWx0cyA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgT3B0aW9uYWxDb250ZW50Q29uZmlnKHJlc3VsdHMpO1xuICAgICAgfSk7XG4gIH1cblxuICBnZXRQZXJtaXNzaW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXRQZXJtaXNzaW9uc1wiLCBudWxsKTtcbiAgfVxuXG4gIGdldE1ldGFkYXRhKCkge1xuICAgIHJldHVybiAodGhpcy4jbWV0YWRhdGFQcm9taXNlIHx8PSB0aGlzLm1lc3NhZ2VIYW5kbGVyXG4gICAgICAuc2VuZFdpdGhQcm9taXNlKFwiR2V0TWV0YWRhdGFcIiwgbnVsbClcbiAgICAgIC50aGVuKHJlc3VsdHMgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGluZm86IHJlc3VsdHNbMF0sXG4gICAgICAgICAgbWV0YWRhdGE6IHJlc3VsdHNbMV0gPyBuZXcgTWV0YWRhdGEocmVzdWx0c1sxXSkgOiBudWxsLFxuICAgICAgICAgIGNvbnRlbnREaXNwb3NpdGlvbkZpbGVuYW1lOiB0aGlzLl9mdWxsUmVhZGVyPy5maWxlbmFtZSA/PyBudWxsLFxuICAgICAgICAgIGNvbnRlbnRMZW5ndGg6IHRoaXMuX2Z1bGxSZWFkZXI/LmNvbnRlbnRMZW5ndGggPz8gbnVsbCxcbiAgICAgICAgfTtcbiAgICAgIH0pKTtcbiAgfVxuXG4gIGdldE1hcmtJbmZvKCkge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZShcIkdldE1hcmtJbmZvXCIsIG51bGwpO1xuICB9XG5cbiAgYXN5bmMgc3RhcnRDbGVhbnVwKGtlZXBMb2FkZWRGb250cyA9IGZhbHNlKSB7XG4gICAgYXdhaXQgdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJDbGVhbnVwXCIsIG51bGwpO1xuXG4gICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICByZXR1cm47IC8vIE5vIG5lZWQgdG8gbWFudWFsbHkgY2xlYW4tdXAgd2hlbiBkZXN0cnVjdGlvbiBoYXMgc3RhcnRlZC5cbiAgICB9XG4gICAgZm9yIChjb25zdCBwYWdlIG9mIHRoaXMuI3BhZ2VDYWNoZS52YWx1ZXMoKSkge1xuICAgICAgY29uc3QgY2xlYW51cFN1Y2Nlc3NmdWwgPSBwYWdlLmNsZWFudXAoKTtcblxuICAgICAgaWYgKCFjbGVhbnVwU3VjY2Vzc2Z1bCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYHN0YXJ0Q2xlYW51cDogUGFnZSAke3BhZ2UucGFnZU51bWJlcn0gaXMgY3VycmVudGx5IHJlbmRlcmluZy5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuY29tbW9uT2Jqcy5jbGVhcigpO1xuICAgIGlmICgha2VlcExvYWRlZEZvbnRzKSB7XG4gICAgICB0aGlzLmZvbnRMb2FkZXIuY2xlYXIoKTtcbiAgICB9XG4gICAgdGhpcy4jbWV0YWRhdGFQcm9taXNlID0gbnVsbDtcbiAgICB0aGlzLl9nZXRGaWVsZE9iamVjdHNQcm9taXNlID0gbnVsbDtcbiAgICB0aGlzLl9oYXNKU0FjdGlvbnNQcm9taXNlID0gbnVsbDtcbiAgfVxuXG4gIGdldCBsb2FkaW5nUGFyYW1zKCkge1xuICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMuX3BhcmFtcztcbiAgICByZXR1cm4gc2hhZG93KHRoaXMsIFwibG9hZGluZ1BhcmFtc1wiLCB7XG4gICAgICBkaXNhYmxlQXV0b0ZldGNoOiBwYXJhbXMuZGlzYWJsZUF1dG9GZXRjaCxcbiAgICAgIGVuYWJsZVhmYTogcGFyYW1zLmVuYWJsZVhmYSxcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIEEgUERGIGRvY3VtZW50IGFuZCBwYWdlIGlzIGJ1aWx0IG9mIG1hbnkgb2JqZWN0cy4gRS5nLiB0aGVyZSBhcmUgb2JqZWN0cyBmb3JcbiAqIGZvbnRzLCBpbWFnZXMsIHJlbmRlcmluZyBjb2RlLCBldGMuIFRoZXNlIG9iamVjdHMgbWF5IGdldCBwcm9jZXNzZWQgaW5zaWRlIG9mXG4gKiBhIHdvcmtlci4gVGhpcyBjbGFzcyBpbXBsZW1lbnRzIHNvbWUgYmFzaWMgbWV0aG9kcyB0byBtYW5hZ2UgdGhlc2Ugb2JqZWN0cy5cbiAqL1xuY2xhc3MgUERGT2JqZWN0cyB7XG4gICNvYmpzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAvKipcbiAgICogRW5zdXJlcyB0aGVyZSBpcyBhbiBvYmplY3QgZGVmaW5lZCBmb3IgYG9iaklkYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9iaklkXG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICAjZW5zdXJlT2JqKG9iaklkKSB7XG4gICAgY29uc3Qgb2JqID0gdGhpcy4jb2Jqc1tvYmpJZF07XG4gICAgaWYgKG9iaikge1xuICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG4gICAgcmV0dXJuICh0aGlzLiNvYmpzW29iaklkXSA9IHtcbiAgICAgIGNhcGFiaWxpdHk6IGNyZWF0ZVByb21pc2VDYXBhYmlsaXR5KCksXG4gICAgICBkYXRhOiBudWxsLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIElmIGNhbGxlZCAqd2l0aG91dCogY2FsbGJhY2ssIHRoaXMgcmV0dXJucyB0aGUgZGF0YSBvZiBgb2JqSWRgIGJ1dCB0aGVcbiAgICogb2JqZWN0IG5lZWRzIHRvIGJlIHJlc29sdmVkLiBJZiBpdCBpc24ndCwgdGhpcyBtZXRob2QgdGhyb3dzLlxuICAgKlxuICAgKiBJZiBjYWxsZWQgKndpdGgqIGEgY2FsbGJhY2ssIHRoZSBjYWxsYmFjayBpcyBjYWxsZWQgd2l0aCB0aGUgZGF0YSBvZiB0aGVcbiAgICogb2JqZWN0IG9uY2UgdGhlIG9iamVjdCBpcyByZXNvbHZlZC4gVGhhdCBtZWFucywgaWYgeW91IGNhbGwgdGhpcyBtZXRob2RcbiAgICogYW5kIHRoZSBvYmplY3QgaXMgYWxyZWFkeSByZXNvbHZlZCwgdGhlIGNhbGxiYWNrIGdldHMgY2FsbGVkIHJpZ2h0IGF3YXkuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvYmpJZFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbY2FsbGJhY2tdXG4gICAqIEByZXR1cm5zIHthbnl9XG4gICAqL1xuICBnZXQob2JqSWQsIGNhbGxiYWNrID0gbnVsbCkge1xuICAgIC8vIElmIHRoZXJlIGlzIGEgY2FsbGJhY2ssIHRoZW4gdGhlIGdldCBjYW4gYmUgYXN5bmMgYW5kIHRoZSBvYmplY3QgaXNcbiAgICAvLyBub3QgcmVxdWlyZWQgdG8gYmUgcmVzb2x2ZWQgcmlnaHQgbm93LlxuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgY29uc3Qgb2JqID0gdGhpcy4jZW5zdXJlT2JqKG9iaklkKTtcbiAgICAgIG9iai5jYXBhYmlsaXR5LnByb21pc2UudGhlbigoKSA9PiBjYWxsYmFjayhvYmouZGF0YSkpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8vIElmIHRoZXJlIGlzbid0IGEgY2FsbGJhY2ssIHRoZSB1c2VyIGV4cGVjdHMgdG8gZ2V0IHRoZSByZXNvbHZlZCBkYXRhXG4gICAgLy8gZGlyZWN0bHkuXG4gICAgY29uc3Qgb2JqID0gdGhpcy4jb2Jqc1tvYmpJZF07XG4gICAgLy8gSWYgdGhlcmUgaXNuJ3QgYW4gb2JqZWN0IHlldCBvciB0aGUgb2JqZWN0IGlzbid0IHJlc29sdmVkLCB0aGVuIHRoZVxuICAgIC8vIGRhdGEgaXNuJ3QgcmVhZHkgeWV0IVxuICAgIGlmICghb2JqPy5jYXBhYmlsaXR5LnNldHRsZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgUmVxdWVzdGluZyBvYmplY3QgdGhhdCBpc24ndCByZXNvbHZlZCB5ZXQgJHtvYmpJZH0uYCk7XG4gICAgfVxuICAgIHJldHVybiBvYmouZGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb2JqSWRcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBoYXMob2JqSWQpIHtcbiAgICBjb25zdCBvYmogPSB0aGlzLiNvYmpzW29iaklkXTtcbiAgICByZXR1cm4gb2JqPy5jYXBhYmlsaXR5LnNldHRsZWQgfHwgZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogUmVzb2x2ZXMgdGhlIG9iamVjdCBgb2JqSWRgIHdpdGggb3B0aW9uYWwgYGRhdGFgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb2JqSWRcbiAgICogQHBhcmFtIHthbnl9IFtkYXRhXVxuICAgKi9cbiAgcmVzb2x2ZShvYmpJZCwgZGF0YSA9IG51bGwpIHtcbiAgICBjb25zdCBvYmogPSB0aGlzLiNlbnN1cmVPYmoob2JqSWQpO1xuICAgIG9iai5kYXRhID0gZGF0YTtcbiAgICBvYmouY2FwYWJpbGl0eS5yZXNvbHZlKCk7XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICB0aGlzLiNvYmpzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfVxufVxuXG4vKipcbiAqIEFsbG93cyBjb250cm9sbGluZyBvZiB0aGUgcmVuZGVyaW5nIHRhc2tzLlxuICovXG5jbGFzcyBSZW5kZXJUYXNrIHtcbiAgY29uc3RydWN0b3IoaW50ZXJuYWxSZW5kZXJUYXNrKSB7XG4gICAgdGhpcy5faW50ZXJuYWxSZW5kZXJUYXNrID0gaW50ZXJuYWxSZW5kZXJUYXNrO1xuXG4gICAgLyoqXG4gICAgICogQ2FsbGJhY2sgZm9yIGluY3JlbWVudGFsIHJlbmRlcmluZyAtLSBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWRcbiAgICAgKiBlYWNoIHRpbWUgdGhlIHJlbmRlcmluZyBpcyBwYXVzZWQuICBUbyBjb250aW51ZSByZW5kZXJpbmcgY2FsbCB0aGVcbiAgICAgKiBmdW5jdGlvbiB0aGF0IGlzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgY2FsbGJhY2suXG4gICAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgICAqL1xuICAgIHRoaXMub25Db250aW51ZSA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUHJvbWlzZSBmb3IgcmVuZGVyaW5nIHRhc2sgY29tcGxldGlvbi5cbiAgICogQHR5cGUge1Byb21pc2U8dm9pZD59XG4gICAqL1xuICBnZXQgcHJvbWlzZSgpIHtcbiAgICByZXR1cm4gdGhpcy5faW50ZXJuYWxSZW5kZXJUYXNrLmNhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYW5jZWxzIHRoZSByZW5kZXJpbmcgdGFzay4gSWYgdGhlIHRhc2sgaXMgY3VycmVudGx5IHJlbmRlcmluZyBpdCB3aWxsXG4gICAqIG5vdCBiZSBjYW5jZWxsZWQgdW50aWwgZ3JhcGhpY3MgcGF1c2VzIHdpdGggYSB0aW1lb3V0LiBUaGUgcHJvbWlzZSB0aGF0XG4gICAqIHRoaXMgb2JqZWN0IGV4dGVuZHMgd2lsbCBiZSByZWplY3RlZCB3aGVuIGNhbmNlbGxlZC5cbiAgICovXG4gIGNhbmNlbCgpIHtcbiAgICB0aGlzLl9pbnRlcm5hbFJlbmRlclRhc2suY2FuY2VsKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBGb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gKiBAaWdub3JlXG4gKi9cbmNsYXNzIEludGVybmFsUmVuZGVyVGFzayB7XG4gIHN0YXRpYyAjY2FudmFzSW5Vc2UgPSBuZXcgV2Vha1NldCgpO1xuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBjYWxsYmFjayxcbiAgICBwYXJhbXMsXG4gICAgb2JqcyxcbiAgICBjb21tb25PYmpzLFxuICAgIGFubm90YXRpb25DYW52YXNNYXAsXG4gICAgb3BlcmF0b3JMaXN0LFxuICAgIHBhZ2VJbmRleCxcbiAgICBjYW52YXNGYWN0b3J5LFxuICAgIHVzZVJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGZhbHNlLFxuICAgIHBkZkJ1ZyA9IGZhbHNlLFxuICAgIHBhZ2VDb2xvcnMgPSBudWxsLFxuICB9KSB7XG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xuICAgIHRoaXMub2JqcyA9IG9ianM7XG4gICAgdGhpcy5jb21tb25PYmpzID0gY29tbW9uT2JqcztcbiAgICB0aGlzLmFubm90YXRpb25DYW52YXNNYXAgPSBhbm5vdGF0aW9uQ2FudmFzTWFwO1xuICAgIHRoaXMub3BlcmF0b3JMaXN0SWR4ID0gbnVsbDtcbiAgICB0aGlzLm9wZXJhdG9yTGlzdCA9IG9wZXJhdG9yTGlzdDtcbiAgICB0aGlzLl9wYWdlSW5kZXggPSBwYWdlSW5kZXg7XG4gICAgdGhpcy5jYW52YXNGYWN0b3J5ID0gY2FudmFzRmFjdG9yeTtcbiAgICB0aGlzLl9wZGZCdWcgPSBwZGZCdWc7XG4gICAgdGhpcy5wYWdlQ29sb3JzID0gcGFnZUNvbG9ycztcblxuICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xuICAgIHRoaXMuZ3JhcGhpY3NSZWFkeUNhbGxiYWNrID0gbnVsbDtcbiAgICB0aGlzLmdyYXBoaWNzUmVhZHkgPSBmYWxzZTtcbiAgICB0aGlzLl91c2VSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPVxuICAgICAgdXNlUmVxdWVzdEFuaW1hdGlvbkZyYW1lID09PSB0cnVlICYmIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCI7XG4gICAgdGhpcy5jYW5jZWxsZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNhcGFiaWxpdHkgPSBjcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSgpO1xuICAgIHRoaXMudGFzayA9IG5ldyBSZW5kZXJUYXNrKHRoaXMpO1xuICAgIC8vIGNhY2hpbmcgdGhpcy1ib3VuZCBtZXRob2RzXG4gICAgdGhpcy5fY2FuY2VsQm91bmQgPSB0aGlzLmNhbmNlbC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2NvbnRpbnVlQm91bmQgPSB0aGlzLl9jb250aW51ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX3NjaGVkdWxlTmV4dEJvdW5kID0gdGhpcy5fc2NoZWR1bGVOZXh0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5fbmV4dEJvdW5kID0gdGhpcy5fbmV4dC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2NhbnZhcyA9IHBhcmFtcy5jYW52YXNDb250ZXh0LmNhbnZhcztcbiAgfVxuXG4gIGdldCBjb21wbGV0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FwYWJpbGl0eS5wcm9taXNlLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIElnbm9yaW5nIGVycm9ycywgc2luY2Ugd2Ugb25seSB3YW50IHRvIGtub3cgd2hlbiByZW5kZXJpbmcgaXNcbiAgICAgIC8vIG5vIGxvbmdlciBwZW5kaW5nLlxuICAgIH0pO1xuICB9XG5cbiAgaW5pdGlhbGl6ZUdyYXBoaWNzKHsgdHJhbnNwYXJlbmN5ID0gZmFsc2UsIG9wdGlvbmFsQ29udGVudENvbmZpZyB9KSB7XG4gICAgaWYgKHRoaXMuY2FuY2VsbGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLl9jYW52YXMpIHtcbiAgICAgIGlmIChJbnRlcm5hbFJlbmRlclRhc2suI2NhbnZhc0luVXNlLmhhcyh0aGlzLl9jYW52YXMpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBcIkNhbm5vdCB1c2UgdGhlIHNhbWUgY2FudmFzIGR1cmluZyBtdWx0aXBsZSByZW5kZXIoKSBvcGVyYXRpb25zLiBcIiArXG4gICAgICAgICAgICBcIlVzZSBkaWZmZXJlbnQgY2FudmFzIG9yIGVuc3VyZSBwcmV2aW91cyBvcGVyYXRpb25zIHdlcmUgXCIgK1xuICAgICAgICAgICAgXCJjYW5jZWxsZWQgb3IgY29tcGxldGVkLlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBJbnRlcm5hbFJlbmRlclRhc2suI2NhbnZhc0luVXNlLmFkZCh0aGlzLl9jYW52YXMpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9wZGZCdWcgJiYgZ2xvYmFsVGhpcy5TdGVwcGVyTWFuYWdlcj8uZW5hYmxlZCkge1xuICAgICAgdGhpcy5zdGVwcGVyID0gZ2xvYmFsVGhpcy5TdGVwcGVyTWFuYWdlci5jcmVhdGUodGhpcy5fcGFnZUluZGV4KTtcbiAgICAgIHRoaXMuc3RlcHBlci5pbml0KHRoaXMub3BlcmF0b3JMaXN0KTtcbiAgICAgIHRoaXMuc3RlcHBlci5uZXh0QnJlYWtQb2ludCA9IHRoaXMuc3RlcHBlci5nZXROZXh0QnJlYWtQb2ludCgpO1xuICAgIH1cbiAgICBjb25zdCB7IGNhbnZhc0NvbnRleHQsIHZpZXdwb3J0LCB0cmFuc2Zvcm0sIGltYWdlTGF5ZXIsIGJhY2tncm91bmQgfSA9XG4gICAgICB0aGlzLnBhcmFtcztcblxuICAgIHRoaXMuZ2Z4ID0gbmV3IENhbnZhc0dyYXBoaWNzKFxuICAgICAgY2FudmFzQ29udGV4dCxcbiAgICAgIHRoaXMuY29tbW9uT2JqcyxcbiAgICAgIHRoaXMub2JqcyxcbiAgICAgIHRoaXMuY2FudmFzRmFjdG9yeSxcbiAgICAgIGltYWdlTGF5ZXIsXG4gICAgICBvcHRpb25hbENvbnRlbnRDb25maWcsXG4gICAgICB0aGlzLmFubm90YXRpb25DYW52YXNNYXAsXG4gICAgICB0aGlzLnBhZ2VDb2xvcnNcbiAgICApO1xuICAgIHRoaXMuZ2Z4LmJlZ2luRHJhd2luZyh7XG4gICAgICB0cmFuc2Zvcm0sXG4gICAgICB2aWV3cG9ydCxcbiAgICAgIHRyYW5zcGFyZW5jeSxcbiAgICAgIGJhY2tncm91bmQsXG4gICAgfSk7XG4gICAgdGhpcy5vcGVyYXRvckxpc3RJZHggPSAwO1xuICAgIHRoaXMuZ3JhcGhpY3NSZWFkeSA9IHRydWU7XG4gICAgaWYgKHRoaXMuZ3JhcGhpY3NSZWFkeUNhbGxiYWNrKSB7XG4gICAgICB0aGlzLmdyYXBoaWNzUmVhZHlDYWxsYmFjaygpO1xuICAgIH1cbiAgfVxuXG4gIGNhbmNlbChlcnJvciA9IG51bGwpIHtcbiAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcbiAgICB0aGlzLmNhbmNlbGxlZCA9IHRydWU7XG4gICAgaWYgKHRoaXMuZ2Z4KSB7XG4gICAgICB0aGlzLmdmeC5lbmREcmF3aW5nKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLl9jYW52YXMpIHtcbiAgICAgIEludGVybmFsUmVuZGVyVGFzay4jY2FudmFzSW5Vc2UuZGVsZXRlKHRoaXMuX2NhbnZhcyk7XG4gICAgfVxuICAgIHRoaXMuY2FsbGJhY2soXG4gICAgICBlcnJvciB8fFxuICAgICAgICBuZXcgUmVuZGVyaW5nQ2FuY2VsbGVkRXhjZXB0aW9uKFxuICAgICAgICAgIGBSZW5kZXJpbmcgY2FuY2VsbGVkLCBwYWdlICR7dGhpcy5fcGFnZUluZGV4ICsgMX1gLFxuICAgICAgICAgIFwiY2FudmFzXCJcbiAgICAgICAgKVxuICAgICk7XG4gIH1cblxuICBvcGVyYXRvckxpc3RDaGFuZ2VkKCkge1xuICAgIGlmICghdGhpcy5ncmFwaGljc1JlYWR5KSB7XG4gICAgICBpZiAoIXRoaXMuZ3JhcGhpY3NSZWFkeUNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuZ3JhcGhpY3NSZWFkeUNhbGxiYWNrID0gdGhpcy5fY29udGludWVCb3VuZDtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGVwcGVyKSB7XG4gICAgICB0aGlzLnN0ZXBwZXIudXBkYXRlT3BlcmF0b3JMaXN0KHRoaXMub3BlcmF0b3JMaXN0KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5ydW5uaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2NvbnRpbnVlKCk7XG4gIH1cblxuICBfY29udGludWUoKSB7XG4gICAgdGhpcy5ydW5uaW5nID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5jYW5jZWxsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMudGFzay5vbkNvbnRpbnVlKSB7XG4gICAgICB0aGlzLnRhc2sub25Db250aW51ZSh0aGlzLl9zY2hlZHVsZU5leHRCb3VuZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3NjaGVkdWxlTmV4dCgpO1xuICAgIH1cbiAgfVxuXG4gIF9zY2hlZHVsZU5leHQoKSB7XG4gICAgaWYgKHRoaXMuX3VzZVJlcXVlc3RBbmltYXRpb25GcmFtZSkge1xuICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHRoaXMuX25leHRCb3VuZCgpLmNhdGNoKHRoaXMuX2NhbmNlbEJvdW5kKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKHRoaXMuX25leHRCb3VuZCkuY2F0Y2godGhpcy5fY2FuY2VsQm91bmQpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9uZXh0KCkge1xuICAgIGlmICh0aGlzLmNhbmNlbGxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLm9wZXJhdG9yTGlzdElkeCA9IHRoaXMuZ2Z4LmV4ZWN1dGVPcGVyYXRvckxpc3QoXG4gICAgICB0aGlzLm9wZXJhdG9yTGlzdCxcbiAgICAgIHRoaXMub3BlcmF0b3JMaXN0SWR4LFxuICAgICAgdGhpcy5fY29udGludWVCb3VuZCxcbiAgICAgIHRoaXMuc3RlcHBlclxuICAgICk7XG4gICAgaWYgKHRoaXMub3BlcmF0b3JMaXN0SWR4ID09PSB0aGlzLm9wZXJhdG9yTGlzdC5hcmdzQXJyYXkubGVuZ3RoKSB7XG4gICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgIGlmICh0aGlzLm9wZXJhdG9yTGlzdC5sYXN0Q2h1bmspIHtcbiAgICAgICAgdGhpcy5nZnguZW5kRHJhd2luZygpO1xuICAgICAgICBpZiAodGhpcy5fY2FudmFzKSB7XG4gICAgICAgICAgSW50ZXJuYWxSZW5kZXJUYXNrLiNjYW52YXNJblVzZS5kZWxldGUodGhpcy5fY2FudmFzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuY29uc3QgdmVyc2lvbiA9XG4gIHR5cGVvZiBQREZKU0RldiAhPT0gXCJ1bmRlZmluZWRcIiA/IFBERkpTRGV2LmV2YWwoXCJCVU5ETEVfVkVSU0lPTlwiKSA6IG51bGw7XG4vKiogQHR5cGUge3N0cmluZ30gKi9cbmNvbnN0IGJ1aWxkID1cbiAgdHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiID8gUERGSlNEZXYuZXZhbChcIkJVTkRMRV9CVUlMRFwiKSA6IG51bGw7XG5cbmV4cG9ydCB7XG4gIGJ1aWxkLFxuICBEZWZhdWx0Q2FudmFzRmFjdG9yeSxcbiAgRGVmYXVsdENNYXBSZWFkZXJGYWN0b3J5LFxuICBEZWZhdWx0U3RhbmRhcmRGb250RGF0YUZhY3RvcnksXG4gIGdldERvY3VtZW50LFxuICBMb29wYmFja1BvcnQsXG4gIFBERkRhdGFSYW5nZVRyYW5zcG9ydCxcbiAgUERGRG9jdW1lbnRMb2FkaW5nVGFzayxcbiAgUERGRG9jdW1lbnRQcm94eSxcbiAgUERGUGFnZVByb3h5LFxuICBQREZXb3JrZXIsXG4gIFBERldvcmtlclV0aWwsXG4gIFJlbmRlclRhc2ssXG4gIHNldFBERk5ldHdvcmtTdHJlYW1GYWN0b3J5LFxuICB2ZXJzaW9uLFxufTtcbiIsICIvKiBDb3B5cmlnaHQgMjAxNSBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgQmFzZUNhbnZhc0ZhY3RvcnksXG4gIEJhc2VDTWFwUmVhZGVyRmFjdG9yeSxcbiAgQmFzZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5LFxuICBCYXNlU1ZHRmFjdG9yeSxcbn0gZnJvbSBcIi4vYmFzZV9mYWN0b3J5LmpzXCI7XG5pbXBvcnQgeyBCYXNlRXhjZXB0aW9uLCBzdHJpbmdUb0J5dGVzLCBVdGlsLCB3YXJuIH0gZnJvbSBcIi4uL3NoYXJlZC91dGlsLmpzXCI7XG5cbmNvbnN0IFNWR19OUyA9IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIjtcblxuY2xhc3MgUGl4ZWxzUGVySW5jaCB7XG4gIHN0YXRpYyBDU1MgPSA5Ni4wO1xuXG4gIHN0YXRpYyBQREYgPSA3Mi4wO1xuXG4gIHN0YXRpYyBQREZfVE9fQ1NTX1VOSVRTID0gdGhpcy5DU1MgLyB0aGlzLlBERjtcbn1cblxuY2xhc3MgRE9NQ2FudmFzRmFjdG9yeSBleHRlbmRzIEJhc2VDYW52YXNGYWN0b3J5IHtcbiAgY29uc3RydWN0b3IoeyBvd25lckRvY3VtZW50ID0gZ2xvYmFsVGhpcy5kb2N1bWVudCB9ID0ge30pIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX2RvY3VtZW50ID0gb3duZXJEb2N1bWVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBfY3JlYXRlQ2FudmFzKHdpZHRoLCBoZWlnaHQpIHtcbiAgICBjb25zdCBjYW52YXMgPSB0aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgcmV0dXJuIGNhbnZhcztcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBmZXRjaERhdGEodXJsLCBhc1R5cGVkQXJyYXkgPSBmYWxzZSkge1xuICBpZiAoXG4gICAgKHR5cGVvZiBQREZKU0RldiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBQREZKU0Rldi50ZXN0KFwiTU9aQ0VOVFJBTFwiKSkgfHxcbiAgICBpc1ZhbGlkRmV0Y2hVcmwodXJsLCBkb2N1bWVudC5iYXNlVVJJKVxuICApIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQpO1xuICAgIH1cbiAgICByZXR1cm4gYXNUeXBlZEFycmF5XG4gICAgICA/IG5ldyBVaW50OEFycmF5KGF3YWl0IHJlc3BvbnNlLmFycmF5QnVmZmVyKCkpXG4gICAgICA6IHN0cmluZ1RvQnl0ZXMoYXdhaXQgcmVzcG9uc2UudGV4dCgpKTtcbiAgfVxuXG4gIC8vIFRoZSBGZXRjaCBBUEkgaXMgbm90IHN1cHBvcnRlZC5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgcmVxdWVzdC5vcGVuKFwiR0VUXCIsIHVybCwgLyogYXNUeXBlZEFycmF5ID0gKi8gdHJ1ZSk7XG5cbiAgICBpZiAoYXNUeXBlZEFycmF5KSB7XG4gICAgICByZXF1ZXN0LnJlc3BvbnNlVHlwZSA9IFwiYXJyYXlidWZmZXJcIjtcbiAgICB9XG4gICAgcmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICBpZiAocmVxdWVzdC5yZWFkeVN0YXRlICE9PSBYTUxIdHRwUmVxdWVzdC5ET05FKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gMjAwIHx8IHJlcXVlc3Quc3RhdHVzID09PSAwKSB7XG4gICAgICAgIGxldCBkYXRhO1xuICAgICAgICBpZiAoYXNUeXBlZEFycmF5ICYmIHJlcXVlc3QucmVzcG9uc2UpIHtcbiAgICAgICAgICBkYXRhID0gbmV3IFVpbnQ4QXJyYXkocmVxdWVzdC5yZXNwb25zZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIWFzVHlwZWRBcnJheSAmJiByZXF1ZXN0LnJlc3BvbnNlVGV4dCkge1xuICAgICAgICAgIGRhdGEgPSBzdHJpbmdUb0J5dGVzKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgIHJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZWplY3QobmV3IEVycm9yKHJlcXVlc3Quc3RhdHVzVGV4dCkpO1xuICAgIH07XG5cbiAgICByZXF1ZXN0LnNlbmQobnVsbCk7XG4gIH0pO1xufVxuXG5jbGFzcyBET01DTWFwUmVhZGVyRmFjdG9yeSBleHRlbmRzIEJhc2VDTWFwUmVhZGVyRmFjdG9yeSB7XG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBfZmV0Y2hEYXRhKHVybCwgY29tcHJlc3Npb25UeXBlKSB7XG4gICAgcmV0dXJuIGZldGNoRGF0YSh1cmwsIC8qIGFzVHlwZWRBcnJheSA9ICovIHRoaXMuaXNDb21wcmVzc2VkKS50aGVuKGRhdGEgPT4ge1xuICAgICAgcmV0dXJuIHsgY01hcERhdGE6IGRhdGEsIGNvbXByZXNzaW9uVHlwZSB9O1xuICAgIH0pO1xuICB9XG59XG5cbmNsYXNzIERPTVN0YW5kYXJkRm9udERhdGFGYWN0b3J5IGV4dGVuZHMgQmFzZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5IHtcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIF9mZXRjaERhdGEodXJsKSB7XG4gICAgcmV0dXJuIGZldGNoRGF0YSh1cmwsIC8qIGFzVHlwZWRBcnJheSA9ICovIHRydWUpO1xuICB9XG59XG5cbmNsYXNzIERPTVNWR0ZhY3RvcnkgZXh0ZW5kcyBCYXNlU1ZHRmFjdG9yeSB7XG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBfY3JlYXRlU1ZHKHR5cGUpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFNWR19OUywgdHlwZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBQYWdlVmlld3BvcnRQYXJhbWV0ZXJzXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IHZpZXdCb3ggLSBUaGUgeE1pbiwgeU1pbiwgeE1heCBhbmRcbiAqICAgeU1heCBjb29yZGluYXRlcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBzY2FsZSAtIFRoZSBzY2FsZSBvZiB0aGUgdmlld3BvcnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gcm90YXRpb24gLSBUaGUgcm90YXRpb24sIGluIGRlZ3JlZXMsIG9mIHRoZSB2aWV3cG9ydC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb2Zmc2V0WF0gLSBUaGUgaG9yaXpvbnRhbCwgaS5lLiB4LWF4aXMsIG9mZnNldC4gVGhlXG4gKiAgIGRlZmF1bHQgdmFsdWUgaXMgYDBgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtvZmZzZXRZXSAtIFRoZSB2ZXJ0aWNhbCwgaS5lLiB5LWF4aXMsIG9mZnNldC4gVGhlXG4gKiAgIGRlZmF1bHQgdmFsdWUgaXMgYDBgLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZG9udEZsaXBdIC0gSWYgdHJ1ZSwgdGhlIHktYXhpcyB3aWxsIG5vdCBiZSBmbGlwcGVkLlxuICogICBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgZmFsc2VgLlxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gUGFnZVZpZXdwb3J0Q2xvbmVQYXJhbWV0ZXJzXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3NjYWxlXSAtIFRoZSBzY2FsZSwgb3ZlcnJpZGluZyB0aGUgb25lIGluIHRoZSBjbG9uZWRcbiAqICAgdmlld3BvcnQuIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGB0aGlzLnNjYWxlYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcm90YXRpb25dIC0gVGhlIHJvdGF0aW9uLCBpbiBkZWdyZWVzLCBvdmVycmlkaW5nIHRoZSBvbmVcbiAqICAgaW4gdGhlIGNsb25lZCB2aWV3cG9ydC4gVGhlIGRlZmF1bHQgdmFsdWUgaXMgYHRoaXMucm90YXRpb25gLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtvZmZzZXRYXSAtIFRoZSBob3Jpem9udGFsLCBpLmUuIHgtYXhpcywgb2Zmc2V0LlxuICogICBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgdGhpcy5vZmZzZXRYYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb2Zmc2V0WV0gLSBUaGUgdmVydGljYWwsIGkuZS4geS1heGlzLCBvZmZzZXQuXG4gKiAgIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGB0aGlzLm9mZnNldFlgLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZG9udEZsaXBdIC0gSWYgdHJ1ZSwgdGhlIHgtYXhpcyB3aWxsIG5vdCBiZSBmbGlwcGVkLlxuICogICBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgZmFsc2VgLlxuICovXG5cbi8qKlxuICogUERGIHBhZ2Ugdmlld3BvcnQgY3JlYXRlZCBiYXNlZCBvbiBzY2FsZSwgcm90YXRpb24gYW5kIG9mZnNldC5cbiAqL1xuY2xhc3MgUGFnZVZpZXdwb3J0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7UGFnZVZpZXdwb3J0UGFyYW1ldGVyc31cbiAgICovXG4gIGNvbnN0cnVjdG9yKHtcbiAgICB2aWV3Qm94LFxuICAgIHNjYWxlLFxuICAgIHJvdGF0aW9uLFxuICAgIG9mZnNldFggPSAwLFxuICAgIG9mZnNldFkgPSAwLFxuICAgIGRvbnRGbGlwID0gZmFsc2UsXG4gIH0pIHtcbiAgICB0aGlzLnZpZXdCb3ggPSB2aWV3Qm94O1xuICAgIHRoaXMuc2NhbGUgPSBzY2FsZTtcbiAgICB0aGlzLnJvdGF0aW9uID0gcm90YXRpb247XG4gICAgdGhpcy5vZmZzZXRYID0gb2Zmc2V0WDtcbiAgICB0aGlzLm9mZnNldFkgPSBvZmZzZXRZO1xuXG4gICAgLy8gY3JlYXRpbmcgdHJhbnNmb3JtIHRvIGNvbnZlcnQgcGRmIGNvb3JkaW5hdGUgc3lzdGVtIHRvIHRoZSBub3JtYWxcbiAgICAvLyBjYW52YXMgbGlrZSBjb29yZGluYXRlcyB0YWtpbmcgaW4gYWNjb3VudCBzY2FsZSBhbmQgcm90YXRpb25cbiAgICBjb25zdCBjZW50ZXJYID0gKHZpZXdCb3hbMl0gKyB2aWV3Qm94WzBdKSAvIDI7XG4gICAgY29uc3QgY2VudGVyWSA9ICh2aWV3Qm94WzNdICsgdmlld0JveFsxXSkgLyAyO1xuICAgIGxldCByb3RhdGVBLCByb3RhdGVCLCByb3RhdGVDLCByb3RhdGVEO1xuICAgIC8vIE5vcm1hbGl6ZSB0aGUgcm90YXRpb24sIGJ5IGNsYW1waW5nIGl0IHRvIHRoZSBbMCwgMzYwKSByYW5nZS5cbiAgICByb3RhdGlvbiAlPSAzNjA7XG4gICAgaWYgKHJvdGF0aW9uIDwgMCkge1xuICAgICAgcm90YXRpb24gKz0gMzYwO1xuICAgIH1cbiAgICBzd2l0Y2ggKHJvdGF0aW9uKSB7XG4gICAgICBjYXNlIDE4MDpcbiAgICAgICAgcm90YXRlQSA9IC0xO1xuICAgICAgICByb3RhdGVCID0gMDtcbiAgICAgICAgcm90YXRlQyA9IDA7XG4gICAgICAgIHJvdGF0ZUQgPSAxO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgOTA6XG4gICAgICAgIHJvdGF0ZUEgPSAwO1xuICAgICAgICByb3RhdGVCID0gMTtcbiAgICAgICAgcm90YXRlQyA9IDE7XG4gICAgICAgIHJvdGF0ZUQgPSAwO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjcwOlxuICAgICAgICByb3RhdGVBID0gMDtcbiAgICAgICAgcm90YXRlQiA9IC0xO1xuICAgICAgICByb3RhdGVDID0gLTE7XG4gICAgICAgIHJvdGF0ZUQgPSAwO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgcm90YXRlQSA9IDE7XG4gICAgICAgIHJvdGF0ZUIgPSAwO1xuICAgICAgICByb3RhdGVDID0gMDtcbiAgICAgICAgcm90YXRlRCA9IC0xO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBcIlBhZ2VWaWV3cG9ydDogSW52YWxpZCByb3RhdGlvbiwgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDkwIGRlZ3JlZXMuXCJcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoZG9udEZsaXApIHtcbiAgICAgIHJvdGF0ZUMgPSAtcm90YXRlQztcbiAgICAgIHJvdGF0ZUQgPSAtcm90YXRlRDtcbiAgICB9XG5cbiAgICBsZXQgb2Zmc2V0Q2FudmFzWCwgb2Zmc2V0Q2FudmFzWTtcbiAgICBsZXQgd2lkdGgsIGhlaWdodDtcbiAgICBpZiAocm90YXRlQSA9PT0gMCkge1xuICAgICAgb2Zmc2V0Q2FudmFzWCA9IE1hdGguYWJzKGNlbnRlclkgLSB2aWV3Qm94WzFdKSAqIHNjYWxlICsgb2Zmc2V0WDtcbiAgICAgIG9mZnNldENhbnZhc1kgPSBNYXRoLmFicyhjZW50ZXJYIC0gdmlld0JveFswXSkgKiBzY2FsZSArIG9mZnNldFk7XG4gICAgICB3aWR0aCA9IE1hdGguYWJzKHZpZXdCb3hbM10gLSB2aWV3Qm94WzFdKSAqIHNjYWxlO1xuICAgICAgaGVpZ2h0ID0gTWF0aC5hYnModmlld0JveFsyXSAtIHZpZXdCb3hbMF0pICogc2NhbGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9mZnNldENhbnZhc1ggPSBNYXRoLmFicyhjZW50ZXJYIC0gdmlld0JveFswXSkgKiBzY2FsZSArIG9mZnNldFg7XG4gICAgICBvZmZzZXRDYW52YXNZID0gTWF0aC5hYnMoY2VudGVyWSAtIHZpZXdCb3hbMV0pICogc2NhbGUgKyBvZmZzZXRZO1xuICAgICAgd2lkdGggPSBNYXRoLmFicyh2aWV3Qm94WzJdIC0gdmlld0JveFswXSkgKiBzY2FsZTtcbiAgICAgIGhlaWdodCA9IE1hdGguYWJzKHZpZXdCb3hbM10gLSB2aWV3Qm94WzFdKSAqIHNjYWxlO1xuICAgIH1cbiAgICAvLyBjcmVhdGluZyB0cmFuc2Zvcm0gZm9yIHRoZSBmb2xsb3dpbmcgb3BlcmF0aW9uczpcbiAgICAvLyB0cmFuc2xhdGUoLWNlbnRlclgsIC1jZW50ZXJZKSwgcm90YXRlIGFuZCBmbGlwIHZlcnRpY2FsbHksXG4gICAgLy8gc2NhbGUsIGFuZCB0cmFuc2xhdGUob2Zmc2V0Q2FudmFzWCwgb2Zmc2V0Q2FudmFzWSlcbiAgICB0aGlzLnRyYW5zZm9ybSA9IFtcbiAgICAgIHJvdGF0ZUEgKiBzY2FsZSxcbiAgICAgIHJvdGF0ZUIgKiBzY2FsZSxcbiAgICAgIHJvdGF0ZUMgKiBzY2FsZSxcbiAgICAgIHJvdGF0ZUQgKiBzY2FsZSxcbiAgICAgIG9mZnNldENhbnZhc1ggLSByb3RhdGVBICogc2NhbGUgKiBjZW50ZXJYIC0gcm90YXRlQyAqIHNjYWxlICogY2VudGVyWSxcbiAgICAgIG9mZnNldENhbnZhc1kgLSByb3RhdGVCICogc2NhbGUgKiBjZW50ZXJYIC0gcm90YXRlRCAqIHNjYWxlICogY2VudGVyWSxcbiAgICBdO1xuXG4gICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICB9XG5cbiAgLyoqXG4gICAqIENsb25lcyB2aWV3cG9ydCwgd2l0aCBvcHRpb25hbCBhZGRpdGlvbmFsIHByb3BlcnRpZXMuXG4gICAqIEBwYXJhbSB7UGFnZVZpZXdwb3J0Q2xvbmVQYXJhbWV0ZXJzfSBbcGFyYW1zXVxuICAgKiBAcmV0dXJucyB7UGFnZVZpZXdwb3J0fSBDbG9uZWQgdmlld3BvcnQuXG4gICAqL1xuICBjbG9uZSh7XG4gICAgc2NhbGUgPSB0aGlzLnNjYWxlLFxuICAgIHJvdGF0aW9uID0gdGhpcy5yb3RhdGlvbixcbiAgICBvZmZzZXRYID0gdGhpcy5vZmZzZXRYLFxuICAgIG9mZnNldFkgPSB0aGlzLm9mZnNldFksXG4gICAgZG9udEZsaXAgPSBmYWxzZSxcbiAgfSA9IHt9KSB7XG4gICAgcmV0dXJuIG5ldyBQYWdlVmlld3BvcnQoe1xuICAgICAgdmlld0JveDogdGhpcy52aWV3Qm94LnNsaWNlKCksXG4gICAgICBzY2FsZSxcbiAgICAgIHJvdGF0aW9uLFxuICAgICAgb2Zmc2V0WCxcbiAgICAgIG9mZnNldFksXG4gICAgICBkb250RmxpcCxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyBQREYgcG9pbnQgdG8gdGhlIHZpZXdwb3J0IGNvb3JkaW5hdGVzLiBGb3IgZXhhbXBsZXMsIHVzZWZ1bCBmb3JcbiAgICogY29udmVydGluZyBQREYgbG9jYXRpb24gaW50byBjYW52YXMgcGl4ZWwgY29vcmRpbmF0ZXMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gVGhlIHgtY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgLSBUaGUgeS1jb29yZGluYXRlLlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBPYmplY3QgY29udGFpbmluZyBgeGAgYW5kIGB5YCBwcm9wZXJ0aWVzIG9mIHRoZVxuICAgKiAgIHBvaW50IGluIHRoZSB2aWV3cG9ydCBjb29yZGluYXRlIHNwYWNlLlxuICAgKiBAc2VlIHtAbGluayBjb252ZXJ0VG9QZGZQb2ludH1cbiAgICogQHNlZSB7QGxpbmsgY29udmVydFRvVmlld3BvcnRSZWN0YW5nbGV9XG4gICAqL1xuICBjb252ZXJ0VG9WaWV3cG9ydFBvaW50KHgsIHkpIHtcbiAgICByZXR1cm4gVXRpbC5hcHBseVRyYW5zZm9ybShbeCwgeV0sIHRoaXMudHJhbnNmb3JtKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyBQREYgcmVjdGFuZ2xlIHRvIHRoZSB2aWV3cG9ydCBjb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHtBcnJheX0gcmVjdCAtIFRoZSB4TWluLCB5TWluLCB4TWF4IGFuZCB5TWF4IGNvb3JkaW5hdGVzLlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IEFycmF5IGNvbnRhaW5pbmcgY29ycmVzcG9uZGluZyBjb29yZGluYXRlcyBvZiB0aGVcbiAgICogICByZWN0YW5nbGUgaW4gdGhlIHZpZXdwb3J0IGNvb3JkaW5hdGUgc3BhY2UuXG4gICAqIEBzZWUge0BsaW5rIGNvbnZlcnRUb1ZpZXdwb3J0UG9pbnR9XG4gICAqL1xuICBjb252ZXJ0VG9WaWV3cG9ydFJlY3RhbmdsZShyZWN0KSB7XG4gICAgY29uc3QgdG9wTGVmdCA9IFV0aWwuYXBwbHlUcmFuc2Zvcm0oW3JlY3RbMF0sIHJlY3RbMV1dLCB0aGlzLnRyYW5zZm9ybSk7XG4gICAgY29uc3QgYm90dG9tUmlnaHQgPSBVdGlsLmFwcGx5VHJhbnNmb3JtKFtyZWN0WzJdLCByZWN0WzNdXSwgdGhpcy50cmFuc2Zvcm0pO1xuICAgIHJldHVybiBbdG9wTGVmdFswXSwgdG9wTGVmdFsxXSwgYm90dG9tUmlnaHRbMF0sIGJvdHRvbVJpZ2h0WzFdXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyB2aWV3cG9ydCBjb29yZGluYXRlcyB0byB0aGUgUERGIGxvY2F0aW9uLiBGb3IgZXhhbXBsZXMsIHVzZWZ1bFxuICAgKiBmb3IgY29udmVydGluZyBjYW52YXMgcGl4ZWwgbG9jYXRpb24gaW50byBQREYgb25lLlxuICAgKiBAcGFyYW0ge251bWJlcn0geCAtIFRoZSB4LWNvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gVGhlIHktY29vcmRpbmF0ZS5cbiAgICogQHJldHVybnMge09iamVjdH0gT2JqZWN0IGNvbnRhaW5pbmcgYHhgIGFuZCBgeWAgcHJvcGVydGllcyBvZiB0aGVcbiAgICogICBwb2ludCBpbiB0aGUgUERGIGNvb3JkaW5hdGUgc3BhY2UuXG4gICAqIEBzZWUge0BsaW5rIGNvbnZlcnRUb1ZpZXdwb3J0UG9pbnR9XG4gICAqL1xuICBjb252ZXJ0VG9QZGZQb2ludCh4LCB5KSB7XG4gICAgcmV0dXJuIFV0aWwuYXBwbHlJbnZlcnNlVHJhbnNmb3JtKFt4LCB5XSwgdGhpcy50cmFuc2Zvcm0pO1xuICB9XG59XG5cbmNsYXNzIFJlbmRlcmluZ0NhbmNlbGxlZEV4Y2VwdGlvbiBleHRlbmRzIEJhc2VFeGNlcHRpb24ge1xuICBjb25zdHJ1Y3Rvcihtc2csIHR5cGUpIHtcbiAgICBzdXBlcihtc2csIFwiUmVuZGVyaW5nQ2FuY2VsbGVkRXhjZXB0aW9uXCIpO1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNEYXRhU2NoZW1lKHVybCkge1xuICBjb25zdCBpaSA9IHVybC5sZW5ndGg7XG4gIGxldCBpID0gMDtcbiAgd2hpbGUgKGkgPCBpaSAmJiB1cmxbaV0udHJpbSgpID09PSBcIlwiKSB7XG4gICAgaSsrO1xuICB9XG4gIHJldHVybiB1cmwuc3Vic3RyaW5nKGksIGkgKyA1KS50b0xvd2VyQ2FzZSgpID09PSBcImRhdGE6XCI7XG59XG5cbmZ1bmN0aW9uIGlzUGRmRmlsZShmaWxlbmFtZSkge1xuICByZXR1cm4gdHlwZW9mIGZpbGVuYW1lID09PSBcInN0cmluZ1wiICYmIC9cXC5wZGYkL2kudGVzdChmaWxlbmFtZSk7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgZmlsZW5hbWUgZnJvbSBhIGdpdmVuIFVSTC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldEZpbGVuYW1lRnJvbVVybCh1cmwpIHtcbiAgY29uc3QgYW5jaG9yID0gdXJsLmluZGV4T2YoXCIjXCIpO1xuICBjb25zdCBxdWVyeSA9IHVybC5pbmRleE9mKFwiP1wiKTtcbiAgY29uc3QgZW5kID0gTWF0aC5taW4oXG4gICAgYW5jaG9yID4gMCA/IGFuY2hvciA6IHVybC5sZW5ndGgsXG4gICAgcXVlcnkgPiAwID8gcXVlcnkgOiB1cmwubGVuZ3RoXG4gICk7XG4gIHJldHVybiB1cmwuc3Vic3RyaW5nKHVybC5sYXN0SW5kZXhPZihcIi9cIiwgZW5kKSArIDEsIGVuZCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZmlsZW5hbWUgb3IgZ3Vlc3NlZCBmaWxlbmFtZSBmcm9tIHRoZSB1cmwgKHNlZSBpc3N1ZSAzNDU1KS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBUaGUgb3JpZ2luYWwgUERGIGxvY2F0aW9uLlxuICogQHBhcmFtIHtzdHJpbmd9IGRlZmF1bHRGaWxlbmFtZSAtIFRoZSB2YWx1ZSByZXR1cm5lZCBpZiB0aGUgZmlsZW5hbWUgaXNcbiAqICAgdW5rbm93biwgb3IgdGhlIHByb3RvY29sIGlzIHVuc3VwcG9ydGVkLlxuICogQHJldHVybnMge3N0cmluZ30gR3Vlc3NlZCBQREYgZmlsZW5hbWUuXG4gKi9cbmZ1bmN0aW9uIGdldFBkZkZpbGVuYW1lRnJvbVVybCh1cmwsIGRlZmF1bHRGaWxlbmFtZSA9IFwiZG9jdW1lbnQucGRmXCIpIHtcbiAgaWYgKHR5cGVvZiB1cmwgIT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gZGVmYXVsdEZpbGVuYW1lO1xuICB9XG4gIGlmIChpc0RhdGFTY2hlbWUodXJsKSkge1xuICAgIHdhcm4oJ2dldFBkZkZpbGVuYW1lRnJvbVVybDogaWdub3JlIFwiZGF0YTpcIi1VUkwgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMuJyk7XG4gICAgcmV0dXJuIGRlZmF1bHRGaWxlbmFtZTtcbiAgfVxuICBjb25zdCByZVVSSSA9IC9eKD86KD86W146XSs6KT9cXC9cXC9bXi9dKyk/KFtePyNdKikoXFw/W14jXSopPygjLiopPyQvO1xuICAvLyAgICAgICAgICAgICAgU0NIRU1FICAgICAgICBIT1NUICAgICAgICAxLlBBVEggIDIuUVVFUlkgICAzLlJFRlxuICAvLyBQYXR0ZXJuIHRvIGdldCBsYXN0IG1hdGNoaW5nIE5BTUUucGRmXG4gIGNvbnN0IHJlRmlsZW5hbWUgPSAvW14vPyM9XStcXC5wZGZcXGIoPyEuKlxcLnBkZlxcYikvaTtcbiAgY29uc3Qgc3BsaXRVUkkgPSByZVVSSS5leGVjKHVybCk7XG4gIGxldCBzdWdnZXN0ZWRGaWxlbmFtZSA9XG4gICAgcmVGaWxlbmFtZS5leGVjKHNwbGl0VVJJWzFdKSB8fFxuICAgIHJlRmlsZW5hbWUuZXhlYyhzcGxpdFVSSVsyXSkgfHxcbiAgICByZUZpbGVuYW1lLmV4ZWMoc3BsaXRVUklbM10pO1xuICBpZiAoc3VnZ2VzdGVkRmlsZW5hbWUpIHtcbiAgICBzdWdnZXN0ZWRGaWxlbmFtZSA9IHN1Z2dlc3RlZEZpbGVuYW1lWzBdO1xuICAgIGlmIChzdWdnZXN0ZWRGaWxlbmFtZS5pbmNsdWRlcyhcIiVcIikpIHtcbiAgICAgIC8vIFVSTC1lbmNvZGVkICUyRnBhdGglMkZ0byUyRmZpbGUucGRmIHNob3VsZCBiZSBmaWxlLnBkZlxuICAgICAgdHJ5IHtcbiAgICAgICAgc3VnZ2VzdGVkRmlsZW5hbWUgPSByZUZpbGVuYW1lLmV4ZWMoXG4gICAgICAgICAgZGVjb2RlVVJJQ29tcG9uZW50KHN1Z2dlc3RlZEZpbGVuYW1lKVxuICAgICAgICApWzBdO1xuICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgLy8gUG9zc2libGUgKGV4dHJlbWVseSByYXJlKSBlcnJvcnM6XG4gICAgICAgIC8vIFVSSUVycm9yIFwiTWFsZm9ybWVkIFVSSVwiLCBlLmcuIGZvciBcIiVBQS5wZGZcIlxuICAgICAgICAvLyBUeXBlRXJyb3IgXCJudWxsIGhhcyBubyBwcm9wZXJ0aWVzXCIsIGUuZy4gZm9yIFwiJTJGLnBkZlwiXG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBzdWdnZXN0ZWRGaWxlbmFtZSB8fCBkZWZhdWx0RmlsZW5hbWU7XG59XG5cbmNsYXNzIFN0YXRUaW1lciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuc3RhcnRlZCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy50aW1lcyA9IFtdO1xuICB9XG5cbiAgdGltZShuYW1lKSB7XG4gICAgaWYgKG5hbWUgaW4gdGhpcy5zdGFydGVkKSB7XG4gICAgICB3YXJuKGBUaW1lciBpcyBhbHJlYWR5IHJ1bm5pbmcgZm9yICR7bmFtZX1gKTtcbiAgICB9XG4gICAgdGhpcy5zdGFydGVkW25hbWVdID0gRGF0ZS5ub3coKTtcbiAgfVxuXG4gIHRpbWVFbmQobmFtZSkge1xuICAgIGlmICghKG5hbWUgaW4gdGhpcy5zdGFydGVkKSkge1xuICAgICAgd2FybihgVGltZXIgaGFzIG5vdCBiZWVuIHN0YXJ0ZWQgZm9yICR7bmFtZX1gKTtcbiAgICB9XG4gICAgdGhpcy50aW1lcy5wdXNoKHtcbiAgICAgIG5hbWUsXG4gICAgICBzdGFydDogdGhpcy5zdGFydGVkW25hbWVdLFxuICAgICAgZW5kOiBEYXRlLm5vdygpLFxuICAgIH0pO1xuICAgIC8vIFJlbW92ZSB0aW1lciBmcm9tIHN0YXJ0ZWQgc28gaXQgY2FuIGJlIGNhbGxlZCBhZ2Fpbi5cbiAgICBkZWxldGUgdGhpcy5zdGFydGVkW25hbWVdO1xuICB9XG5cbiAgdG9TdHJpbmcoKSB7XG4gICAgLy8gRmluZCB0aGUgbG9uZ2VzdCBuYW1lIGZvciBwYWRkaW5nIHB1cnBvc2VzLlxuICAgIGNvbnN0IG91dEJ1ZiA9IFtdO1xuICAgIGxldCBsb25nZXN0ID0gMDtcbiAgICBmb3IgKGNvbnN0IHRpbWUgb2YgdGhpcy50aW1lcykge1xuICAgICAgY29uc3QgbmFtZSA9IHRpbWUubmFtZTtcbiAgICAgIGlmIChuYW1lLmxlbmd0aCA+IGxvbmdlc3QpIHtcbiAgICAgICAgbG9uZ2VzdCA9IG5hbWUubGVuZ3RoO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IHRpbWUgb2YgdGhpcy50aW1lcykge1xuICAgICAgY29uc3QgZHVyYXRpb24gPSB0aW1lLmVuZCAtIHRpbWUuc3RhcnQ7XG4gICAgICBvdXRCdWYucHVzaChgJHt0aW1lLm5hbWUucGFkRW5kKGxvbmdlc3QpfSAke2R1cmF0aW9ufW1zXFxuYCk7XG4gICAgfVxuICAgIHJldHVybiBvdXRCdWYuam9pbihcIlwiKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc1ZhbGlkRmV0Y2hVcmwodXJsLCBiYXNlVXJsKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBwcm90b2NvbCB9ID0gYmFzZVVybCA/IG5ldyBVUkwodXJsLCBiYXNlVXJsKSA6IG5ldyBVUkwodXJsKTtcbiAgICAvLyBUaGUgRmV0Y2ggQVBJIG9ubHkgc3VwcG9ydHMgdGhlIGh0dHAvaHR0cHMgcHJvdG9jb2xzLCBhbmQgbm90IGZpbGUvZnRwLlxuICAgIHJldHVybiBwcm90b2NvbCA9PT0gXCJodHRwOlwiIHx8IHByb3RvY29sID09PSBcImh0dHBzOlwiO1xuICB9IGNhdGNoIChleCkge1xuICAgIHJldHVybiBmYWxzZTsgLy8gYG5ldyBVUkwoKWAgd2lsbCB0aHJvdyBvbiBpbmNvcnJlY3QgZGF0YS5cbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBzcmNcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3JlbW92ZVNjcmlwdEVsZW1lbnRdXG4gKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cbiAqL1xuZnVuY3Rpb24gbG9hZFNjcmlwdChzcmMsIHJlbW92ZVNjcmlwdEVsZW1lbnQgPSBmYWxzZSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgc2NyaXB0LnNyYyA9IHNyYztcblxuICAgIHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICBpZiAocmVtb3ZlU2NyaXB0RWxlbWVudCkge1xuICAgICAgICBzY3JpcHQucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgICByZXNvbHZlKGV2dCk7XG4gICAgfTtcbiAgICBzY3JpcHQub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoYENhbm5vdCBsb2FkIHNjcmlwdCBhdDogJHtzY3JpcHQuc3JjfWApKTtcbiAgICB9O1xuICAgIChkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgfSk7XG59XG5cbi8vIERlcHJlY2F0ZWQgQVBJIGZ1bmN0aW9uIC0tIGRpc3BsYXkgcmVnYXJkbGVzcyBvZiB0aGUgYHZlcmJvc2l0eWAgc2V0dGluZy5cbmZ1bmN0aW9uIGRlcHJlY2F0ZWQoZGV0YWlscykge1xuICBjb25zb2xlLmxvZyhcIkRlcHJlY2F0ZWQgQVBJIHVzYWdlOiBcIiArIGRldGFpbHMpO1xufVxuXG5sZXQgcGRmRGF0ZVN0cmluZ1JlZ2V4O1xuXG5jbGFzcyBQREZEYXRlU3RyaW5nIHtcbiAgLyoqXG4gICAqIENvbnZlcnQgYSBQREYgZGF0ZSBzdHJpbmcgdG8gYSBKYXZhU2NyaXB0IGBEYXRlYCBvYmplY3QuXG4gICAqXG4gICAqIFRoZSBQREYgZGF0ZSBzdHJpbmcgZm9ybWF0IGlzIGRlc2NyaWJlZCBpbiBzZWN0aW9uIDcuOS40IG9mIHRoZSBvZmZpY2lhbFxuICAgKiBQREYgMzIwMDAtMToyMDA4IHNwZWNpZmljYXRpb24uIEhvd2V2ZXIsIGluIHRoZSBQREYgMS43IHJlZmVyZW5jZSAoc2l4dGhcbiAgICogZWRpdGlvbikgQWRvYmUgZGVzY3JpYmVzIHRoZSBzYW1lIGZvcm1hdCBpbmNsdWRpbmcgYSB0cmFpbGluZyBhcG9zdHJvcGhlLlxuICAgKiBUaGlzIHN5bnRheCBpbiBpbmNvcnJlY3QsIGJ1dCBBZG9iZSBBY3JvYmF0IGNyZWF0ZXMgUERGIGZpbGVzIHRoYXQgY29udGFpblxuICAgKiB0aGVtLiBXZSBpZ25vcmUgYWxsIGFwb3N0cm9waGVzIGFzIHRoZXkgYXJlIG5vdCBuZWNlc3NhcnkgZm9yIGRhdGUgcGFyc2luZy5cbiAgICpcbiAgICogTW9yZW92ZXIsIEFkb2JlIEFjcm9iYXQgZG9lc24ndCBoYW5kbGUgY2hhbmdpbmcgdGhlIGRhdGUgdG8gdW5pdmVyc2FsIHRpbWVcbiAgICogYW5kIGRvZXNuJ3QgdXNlIHRoZSB1c2VyJ3MgdGltZSB6b25lIChlZmZlY3RpdmVseSBpZ25vcmluZyB0aGUgSEgnIGFuZCBtbSdcbiAgICogcGFydHMgb2YgdGhlIGRhdGUgc3RyaW5nKS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlucHV0XG4gICAqIEByZXR1cm5zIHtEYXRlfG51bGx9XG4gICAqL1xuICBzdGF0aWMgdG9EYXRlT2JqZWN0KGlucHV0KSB7XG4gICAgaWYgKCFpbnB1dCB8fCB0eXBlb2YgaW5wdXQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIExhemlseSBpbml0aWFsaXplIHRoZSByZWd1bGFyIGV4cHJlc3Npb24uXG4gICAgaWYgKCFwZGZEYXRlU3RyaW5nUmVnZXgpIHtcbiAgICAgIHBkZkRhdGVTdHJpbmdSZWdleCA9IG5ldyBSZWdFeHAoXG4gICAgICAgIFwiXkQ6XCIgKyAvLyBQcmVmaXggKHJlcXVpcmVkKVxuICAgICAgICAgIFwiKFxcXFxkezR9KVwiICsgLy8gWWVhciAocmVxdWlyZWQpXG4gICAgICAgICAgXCIoXFxcXGR7Mn0pP1wiICsgLy8gTW9udGggKG9wdGlvbmFsKVxuICAgICAgICAgIFwiKFxcXFxkezJ9KT9cIiArIC8vIERheSAob3B0aW9uYWwpXG4gICAgICAgICAgXCIoXFxcXGR7Mn0pP1wiICsgLy8gSG91ciAob3B0aW9uYWwpXG4gICAgICAgICAgXCIoXFxcXGR7Mn0pP1wiICsgLy8gTWludXRlIChvcHRpb25hbClcbiAgICAgICAgICBcIihcXFxcZHsyfSk/XCIgKyAvLyBTZWNvbmQgKG9wdGlvbmFsKVxuICAgICAgICAgIFwiKFtafCt8LV0pP1wiICsgLy8gVW5pdmVyc2FsIHRpbWUgcmVsYXRpb24gKG9wdGlvbmFsKVxuICAgICAgICAgIFwiKFxcXFxkezJ9KT9cIiArIC8vIE9mZnNldCBob3VyIChvcHRpb25hbClcbiAgICAgICAgICBcIic/XCIgKyAvLyBTcGxpdHRpbmcgYXBvc3Ryb3BoZSAob3B0aW9uYWwpXG4gICAgICAgICAgXCIoXFxcXGR7Mn0pP1wiICsgLy8gT2Zmc2V0IG1pbnV0ZSAob3B0aW9uYWwpXG4gICAgICAgICAgXCInP1wiIC8vIFRyYWlsaW5nIGFwb3N0cm9waGUgKG9wdGlvbmFsKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBPcHRpb25hbCBmaWVsZHMgdGhhdCBkb24ndCBzYXRpc2Z5IHRoZSByZXF1aXJlbWVudHMgZnJvbSB0aGUgcmVndWxhclxuICAgIC8vIGV4cHJlc3Npb24gKHN1Y2ggYXMgaW5jb3JyZWN0IGRpZ2l0IGNvdW50cyBvciBudW1iZXJzIHRoYXQgYXJlIG91dCBvZlxuICAgIC8vIHJhbmdlKSB3aWxsIGZhbGwgYmFjayB0aGUgZGVmYXVsdHMgZnJvbSB0aGUgc3BlY2lmaWNhdGlvbi5cbiAgICBjb25zdCBtYXRjaGVzID0gcGRmRGF0ZVN0cmluZ1JlZ2V4LmV4ZWMoaW5wdXQpO1xuICAgIGlmICghbWF0Y2hlcykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gSmF2YVNjcmlwdCdzIGBEYXRlYCBvYmplY3QgZXhwZWN0cyB0aGUgbW9udGggdG8gYmUgYmV0d2VlbiAwIGFuZCAxMVxuICAgIC8vIGluc3RlYWQgb2YgMSBhbmQgMTIsIHNvIHdlIGhhdmUgdG8gY29ycmVjdCBmb3IgdGhhdC5cbiAgICBjb25zdCB5ZWFyID0gcGFyc2VJbnQobWF0Y2hlc1sxXSwgMTApO1xuICAgIGxldCBtb250aCA9IHBhcnNlSW50KG1hdGNoZXNbMl0sIDEwKTtcbiAgICBtb250aCA9IG1vbnRoID49IDEgJiYgbW9udGggPD0gMTIgPyBtb250aCAtIDEgOiAwO1xuICAgIGxldCBkYXkgPSBwYXJzZUludChtYXRjaGVzWzNdLCAxMCk7XG4gICAgZGF5ID0gZGF5ID49IDEgJiYgZGF5IDw9IDMxID8gZGF5IDogMTtcbiAgICBsZXQgaG91ciA9IHBhcnNlSW50KG1hdGNoZXNbNF0sIDEwKTtcbiAgICBob3VyID0gaG91ciA+PSAwICYmIGhvdXIgPD0gMjMgPyBob3VyIDogMDtcbiAgICBsZXQgbWludXRlID0gcGFyc2VJbnQobWF0Y2hlc1s1XSwgMTApO1xuICAgIG1pbnV0ZSA9IG1pbnV0ZSA+PSAwICYmIG1pbnV0ZSA8PSA1OSA/IG1pbnV0ZSA6IDA7XG4gICAgbGV0IHNlY29uZCA9IHBhcnNlSW50KG1hdGNoZXNbNl0sIDEwKTtcbiAgICBzZWNvbmQgPSBzZWNvbmQgPj0gMCAmJiBzZWNvbmQgPD0gNTkgPyBzZWNvbmQgOiAwO1xuICAgIGNvbnN0IHVuaXZlcnNhbFRpbWVSZWxhdGlvbiA9IG1hdGNoZXNbN10gfHwgXCJaXCI7XG4gICAgbGV0IG9mZnNldEhvdXIgPSBwYXJzZUludChtYXRjaGVzWzhdLCAxMCk7XG4gICAgb2Zmc2V0SG91ciA9IG9mZnNldEhvdXIgPj0gMCAmJiBvZmZzZXRIb3VyIDw9IDIzID8gb2Zmc2V0SG91ciA6IDA7XG4gICAgbGV0IG9mZnNldE1pbnV0ZSA9IHBhcnNlSW50KG1hdGNoZXNbOV0sIDEwKSB8fCAwO1xuICAgIG9mZnNldE1pbnV0ZSA9IG9mZnNldE1pbnV0ZSA+PSAwICYmIG9mZnNldE1pbnV0ZSA8PSA1OSA/IG9mZnNldE1pbnV0ZSA6IDA7XG5cbiAgICAvLyBVbml2ZXJzYWwgdGltZSByZWxhdGlvbiAnWicgbWVhbnMgdGhhdCB0aGUgbG9jYWwgdGltZSBpcyBlcXVhbCB0byB0aGVcbiAgICAvLyB1bml2ZXJzYWwgdGltZSwgd2hlcmVhcyB0aGUgcmVsYXRpb25zICcrJy8nLScgaW5kaWNhdGUgdGhhdCB0aGUgbG9jYWxcbiAgICAvLyB0aW1lIGlzIGxhdGVyIHJlc3BlY3RpdmVseSBlYXJsaWVyIHRoYW4gdGhlIHVuaXZlcnNhbCB0aW1lLiBFdmVyeSBkYXRlXG4gICAgLy8gaXMgbm9ybWFsaXplZCB0byB1bml2ZXJzYWwgdGltZS5cbiAgICBpZiAodW5pdmVyc2FsVGltZVJlbGF0aW9uID09PSBcIi1cIikge1xuICAgICAgaG91ciArPSBvZmZzZXRIb3VyO1xuICAgICAgbWludXRlICs9IG9mZnNldE1pbnV0ZTtcbiAgICB9IGVsc2UgaWYgKHVuaXZlcnNhbFRpbWVSZWxhdGlvbiA9PT0gXCIrXCIpIHtcbiAgICAgIGhvdXIgLT0gb2Zmc2V0SG91cjtcbiAgICAgIG1pbnV0ZSAtPSBvZmZzZXRNaW51dGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBEYXRlKERhdGUuVVRDKHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kKSk7XG4gIH1cbn1cblxuLyoqXG4gKiBOT1RFOiBUaGlzIGlzIChtb3N0bHkpIGludGVuZGVkIHRvIHN1cHBvcnQgcHJpbnRpbmcgb2YgWEZBIGZvcm1zLlxuICovXG5mdW5jdGlvbiBnZXRYZmFQYWdlVmlld3BvcnQoeGZhUGFnZSwgeyBzY2FsZSA9IDEsIHJvdGF0aW9uID0gMCB9KSB7XG4gIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0geGZhUGFnZS5hdHRyaWJ1dGVzLnN0eWxlO1xuICBjb25zdCB2aWV3Qm94ID0gWzAsIDAsIHBhcnNlSW50KHdpZHRoKSwgcGFyc2VJbnQoaGVpZ2h0KV07XG5cbiAgcmV0dXJuIG5ldyBQYWdlVmlld3BvcnQoe1xuICAgIHZpZXdCb3gsXG4gICAgc2NhbGUsXG4gICAgcm90YXRpb24sXG4gIH0pO1xufVxuXG5leHBvcnQge1xuICBkZXByZWNhdGVkLFxuICBET01DYW52YXNGYWN0b3J5LFxuICBET01DTWFwUmVhZGVyRmFjdG9yeSxcbiAgRE9NU3RhbmRhcmRGb250RGF0YUZhY3RvcnksXG4gIERPTVNWR0ZhY3RvcnksXG4gIGdldEZpbGVuYW1lRnJvbVVybCxcbiAgZ2V0UGRmRmlsZW5hbWVGcm9tVXJsLFxuICBnZXRYZmFQYWdlVmlld3BvcnQsXG4gIGlzRGF0YVNjaGVtZSxcbiAgaXNQZGZGaWxlLFxuICBpc1ZhbGlkRmV0Y2hVcmwsXG4gIGxvYWRTY3JpcHQsXG4gIFBhZ2VWaWV3cG9ydCxcbiAgUERGRGF0ZVN0cmluZyxcbiAgUGl4ZWxzUGVySW5jaCxcbiAgUmVuZGVyaW5nQ2FuY2VsbGVkRXhjZXB0aW9uLFxuICBTdGF0VGltZXIsXG59O1xuIiwgIi8qIENvcHlyaWdodCAyMDE1IE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDTWFwQ29tcHJlc3Npb25UeXBlLCB1bnJlYWNoYWJsZSB9IGZyb20gXCIuLi9zaGFyZWQvdXRpbC5qc1wiO1xuXG5jbGFzcyBCYXNlQ2FudmFzRmFjdG9yeSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yID09PSBCYXNlQ2FudmFzRmFjdG9yeSkge1xuICAgICAgdW5yZWFjaGFibGUoXCJDYW5ub3QgaW5pdGlhbGl6ZSBCYXNlQ2FudmFzRmFjdG9yeS5cIik7XG4gICAgfVxuICB9XG5cbiAgY3JlYXRlKHdpZHRoLCBoZWlnaHQpIHtcbiAgICBpZiAod2lkdGggPD0gMCB8fCBoZWlnaHQgPD0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjYW52YXMgc2l6ZVwiKTtcbiAgICB9XG4gICAgY29uc3QgY2FudmFzID0gdGhpcy5fY3JlYXRlQ2FudmFzKHdpZHRoLCBoZWlnaHQpO1xuICAgIHJldHVybiB7XG4gICAgICBjYW52YXMsXG4gICAgICBjb250ZXh0OiBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLFxuICAgIH07XG4gIH1cblxuICByZXNldChjYW52YXNBbmRDb250ZXh0LCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgaWYgKCFjYW52YXNBbmRDb250ZXh0LmNhbnZhcykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FudmFzIGlzIG5vdCBzcGVjaWZpZWRcIik7XG4gICAgfVxuICAgIGlmICh3aWR0aCA8PSAwIHx8IGhlaWdodCA8PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNhbnZhcyBzaXplXCIpO1xuICAgIH1cbiAgICBjYW52YXNBbmRDb250ZXh0LmNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICAgIGNhbnZhc0FuZENvbnRleHQuY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgfVxuXG4gIGRlc3Ryb3koY2FudmFzQW5kQ29udGV4dCkge1xuICAgIGlmICghY2FudmFzQW5kQ29udGV4dC5jYW52YXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbnZhcyBpcyBub3Qgc3BlY2lmaWVkXCIpO1xuICAgIH1cbiAgICAvLyBaZXJvaW5nIHRoZSB3aWR0aCBhbmQgaGVpZ2h0IGNhdXNlIEZpcmVmb3ggdG8gcmVsZWFzZSBncmFwaGljc1xuICAgIC8vIHJlc291cmNlcyBpbW1lZGlhdGVseSwgd2hpY2ggY2FuIGdyZWF0bHkgcmVkdWNlIG1lbW9yeSBjb25zdW1wdGlvbi5cbiAgICBjYW52YXNBbmRDb250ZXh0LmNhbnZhcy53aWR0aCA9IDA7XG4gICAgY2FudmFzQW5kQ29udGV4dC5jYW52YXMuaGVpZ2h0ID0gMDtcbiAgICBjYW52YXNBbmRDb250ZXh0LmNhbnZhcyA9IG51bGw7XG4gICAgY2FudmFzQW5kQ29udGV4dC5jb250ZXh0ID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBfY3JlYXRlQ2FudmFzKHdpZHRoLCBoZWlnaHQpIHtcbiAgICB1bnJlYWNoYWJsZShcIkFic3RyYWN0IG1ldGhvZCBgX2NyZWF0ZUNhbnZhc2AgY2FsbGVkLlwiKTtcbiAgfVxufVxuXG5jbGFzcyBCYXNlQ01hcFJlYWRlckZhY3Rvcnkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwgPSBudWxsLCBpc0NvbXByZXNzZWQgPSBmYWxzZSB9KSB7XG4gICAgaWYgKHRoaXMuY29uc3RydWN0b3IgPT09IEJhc2VDTWFwUmVhZGVyRmFjdG9yeSkge1xuICAgICAgdW5yZWFjaGFibGUoXCJDYW5ub3QgaW5pdGlhbGl6ZSBCYXNlQ01hcFJlYWRlckZhY3RvcnkuXCIpO1xuICAgIH1cbiAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuaXNDb21wcmVzc2VkID0gaXNDb21wcmVzc2VkO1xuICB9XG5cbiAgYXN5bmMgZmV0Y2goeyBuYW1lIH0pIHtcbiAgICBpZiAoIXRoaXMuYmFzZVVybCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnVGhlIENNYXAgXCJiYXNlVXJsXCIgcGFyYW1ldGVyIG11c3QgYmUgc3BlY2lmaWVkLCBlbnN1cmUgdGhhdCAnICtcbiAgICAgICAgICAndGhlIFwiY01hcFVybFwiIGFuZCBcImNNYXBQYWNrZWRcIiBBUEkgcGFyYW1ldGVycyBhcmUgcHJvdmlkZWQuJ1xuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKCFuYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDTWFwIG5hbWUgbXVzdCBiZSBzcGVjaWZpZWQuXCIpO1xuICAgIH1cbiAgICBjb25zdCB1cmwgPSB0aGlzLmJhc2VVcmwgKyBuYW1lICsgKHRoaXMuaXNDb21wcmVzc2VkID8gXCIuYmNtYXBcIiA6IFwiXCIpO1xuICAgIGNvbnN0IGNvbXByZXNzaW9uVHlwZSA9IHRoaXMuaXNDb21wcmVzc2VkXG4gICAgICA/IENNYXBDb21wcmVzc2lvblR5cGUuQklOQVJZXG4gICAgICA6IENNYXBDb21wcmVzc2lvblR5cGUuTk9ORTtcblxuICAgIHJldHVybiB0aGlzLl9mZXRjaERhdGEodXJsLCBjb21wcmVzc2lvblR5cGUpLmNhdGNoKHJlYXNvbiA9PiB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBVbmFibGUgdG8gbG9hZCAke3RoaXMuaXNDb21wcmVzc2VkID8gXCJiaW5hcnkgXCIgOiBcIlwifUNNYXAgYXQ6ICR7dXJsfWBcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgX2ZldGNoRGF0YSh1cmwsIGNvbXByZXNzaW9uVHlwZSkge1xuICAgIHVucmVhY2hhYmxlKFwiQWJzdHJhY3QgbWV0aG9kIGBfZmV0Y2hEYXRhYCBjYWxsZWQuXCIpO1xuICB9XG59XG5cbmNsYXNzIEJhc2VTdGFuZGFyZEZvbnREYXRhRmFjdG9yeSB7XG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCA9IG51bGwgfSkge1xuICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yID09PSBCYXNlU3RhbmRhcmRGb250RGF0YUZhY3RvcnkpIHtcbiAgICAgIHVucmVhY2hhYmxlKFwiQ2Fubm90IGluaXRpYWxpemUgQmFzZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5LlwiKTtcbiAgICB9XG4gICAgdGhpcy5iYXNlVXJsID0gYmFzZVVybDtcbiAgfVxuXG4gIGFzeW5jIGZldGNoKHsgZmlsZW5hbWUgfSkge1xuICAgIGlmICghdGhpcy5iYXNlVXJsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdUaGUgc3RhbmRhcmQgZm9udCBcImJhc2VVcmxcIiBwYXJhbWV0ZXIgbXVzdCBiZSBzcGVjaWZpZWQsIGVuc3VyZSB0aGF0ICcgK1xuICAgICAgICAgICd0aGUgXCJzdGFuZGFyZEZvbnREYXRhVXJsXCIgQVBJIHBhcmFtZXRlciBpcyBwcm92aWRlZC4nXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoIWZpbGVuYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGb250IGZpbGVuYW1lIG11c3QgYmUgc3BlY2lmaWVkLlwiKTtcbiAgICB9XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsfSR7ZmlsZW5hbWV9YDtcblxuICAgIHJldHVybiB0aGlzLl9mZXRjaERhdGEodXJsKS5jYXRjaChyZWFzb24gPT4ge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gbG9hZCBmb250IGRhdGEgYXQ6ICR7dXJsfWApO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIF9mZXRjaERhdGEodXJsKSB7XG4gICAgdW5yZWFjaGFibGUoXCJBYnN0cmFjdCBtZXRob2QgYF9mZXRjaERhdGFgIGNhbGxlZC5cIik7XG4gIH1cbn1cblxuY2xhc3MgQmFzZVNWR0ZhY3Rvcnkge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBpZiAodGhpcy5jb25zdHJ1Y3RvciA9PT0gQmFzZVNWR0ZhY3RvcnkpIHtcbiAgICAgIHVucmVhY2hhYmxlKFwiQ2Fubm90IGluaXRpYWxpemUgQmFzZVNWR0ZhY3RvcnkuXCIpO1xuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZSh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgaWYgKHdpZHRoIDw9IDAgfHwgaGVpZ2h0IDw9IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgU1ZHIGRpbWVuc2lvbnNcIik7XG4gICAgfVxuICAgIGNvbnN0IHN2ZyA9IHRoaXMuX2NyZWF0ZVNWRyhcInN2ZzpzdmdcIik7XG4gICAgc3ZnLnNldEF0dHJpYnV0ZShcInZlcnNpb25cIiwgXCIxLjFcIik7XG4gICAgc3ZnLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIGAke3dpZHRofXB4YCk7XG4gICAgc3ZnLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBgJHtoZWlnaHR9cHhgKTtcbiAgICBzdmcuc2V0QXR0cmlidXRlKFwicHJlc2VydmVBc3BlY3RSYXRpb1wiLCBcIm5vbmVcIik7XG4gICAgc3ZnLnNldEF0dHJpYnV0ZShcInZpZXdCb3hcIiwgYDAgMCAke3dpZHRofSAke2hlaWdodH1gKTtcblxuICAgIHJldHVybiBzdmc7XG4gIH1cblxuICBjcmVhdGVFbGVtZW50KHR5cGUpIHtcbiAgICBpZiAodHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgU1ZHIGVsZW1lbnQgdHlwZVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2NyZWF0ZVNWRyh0eXBlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBfY3JlYXRlU1ZHKHR5cGUpIHtcbiAgICB1bnJlYWNoYWJsZShcIkFic3RyYWN0IG1ldGhvZCBgX2NyZWF0ZVNWR2AgY2FsbGVkLlwiKTtcbiAgfVxufVxuXG5leHBvcnQge1xuICBCYXNlQ2FudmFzRmFjdG9yeSxcbiAgQmFzZUNNYXBSZWFkZXJGYWN0b3J5LFxuICBCYXNlU3RhbmRhcmRGb250RGF0YUZhY3RvcnksXG4gIEJhc2VTVkdGYWN0b3J5LFxufTtcbiIsICIvKiBDb3B5cmlnaHQgMjAxMiBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgYXNzZXJ0LFxuICBieXRlc1RvU3RyaW5nLFxuICBGZWF0dXJlVGVzdCxcbiAgc2hhZG93LFxuICBzdHJpbmczMixcbiAgdW5yZWFjaGFibGUsXG4gIFVOU1VQUE9SVEVEX0ZFQVRVUkVTLFxuICB3YXJuLFxufSBmcm9tIFwiLi4vc2hhcmVkL3V0aWwuanNcIjtcblxuY2xhc3MgQmFzZUZvbnRMb2FkZXIge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgZG9jSWQsXG4gICAgb25VbnN1cHBvcnRlZEZlYXR1cmUsXG4gICAgb3duZXJEb2N1bWVudCA9IGdsb2JhbFRoaXMuZG9jdW1lbnQsXG4gICAgLy8gRm9yIHRlc3Rpbmcgb25seS5cbiAgICBzdHlsZUVsZW1lbnQgPSBudWxsLFxuICB9KSB7XG4gICAgaWYgKHRoaXMuY29uc3RydWN0b3IgPT09IEJhc2VGb250TG9hZGVyKSB7XG4gICAgICB1bnJlYWNoYWJsZShcIkNhbm5vdCBpbml0aWFsaXplIEJhc2VGb250TG9hZGVyLlwiKTtcbiAgICB9XG4gICAgdGhpcy5kb2NJZCA9IGRvY0lkO1xuICAgIHRoaXMuX29uVW5zdXBwb3J0ZWRGZWF0dXJlID0gb25VbnN1cHBvcnRlZEZlYXR1cmU7XG4gICAgdGhpcy5fZG9jdW1lbnQgPSBvd25lckRvY3VtZW50O1xuXG4gICAgdGhpcy5uYXRpdmVGb250RmFjZXMgPSBbXTtcbiAgICB0aGlzLnN0eWxlRWxlbWVudCA9XG4gICAgICB0eXBlb2YgUERGSlNEZXYgPT09IFwidW5kZWZpbmVkXCIgfHwgUERGSlNEZXYudGVzdChcIiFQUk9EVUNUSU9OIHx8IFRFU1RJTkdcIilcbiAgICAgICAgPyBzdHlsZUVsZW1lbnRcbiAgICAgICAgOiBudWxsO1xuICB9XG5cbiAgYWRkTmF0aXZlRm9udEZhY2UobmF0aXZlRm9udEZhY2UpIHtcbiAgICB0aGlzLm5hdGl2ZUZvbnRGYWNlcy5wdXNoKG5hdGl2ZUZvbnRGYWNlKTtcbiAgICB0aGlzLl9kb2N1bWVudC5mb250cy5hZGQobmF0aXZlRm9udEZhY2UpO1xuICB9XG5cbiAgaW5zZXJ0UnVsZShydWxlKSB7XG4gICAgbGV0IHN0eWxlRWxlbWVudCA9IHRoaXMuc3R5bGVFbGVtZW50O1xuICAgIGlmICghc3R5bGVFbGVtZW50KSB7XG4gICAgICBzdHlsZUVsZW1lbnQgPSB0aGlzLnN0eWxlRWxlbWVudCA9IHRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgIHN0eWxlRWxlbWVudC5pZCA9IGBQREZKU19GT05UX1NUWUxFX1RBR18ke3RoaXMuZG9jSWR9YDtcbiAgICAgIHRoaXMuX2RvY3VtZW50LmRvY3VtZW50RWxlbWVudFxuICAgICAgICAuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdXG4gICAgICAgIC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xuICAgIH1cbiAgICBjb25zdCBzdHlsZVNoZWV0ID0gc3R5bGVFbGVtZW50LnNoZWV0O1xuICAgIHN0eWxlU2hlZXQuaW5zZXJ0UnVsZShydWxlLCBzdHlsZVNoZWV0LmNzc1J1bGVzLmxlbmd0aCk7XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICBmb3IgKGNvbnN0IG5hdGl2ZUZvbnRGYWNlIG9mIHRoaXMubmF0aXZlRm9udEZhY2VzKSB7XG4gICAgICB0aGlzLl9kb2N1bWVudC5mb250cy5kZWxldGUobmF0aXZlRm9udEZhY2UpO1xuICAgIH1cbiAgICB0aGlzLm5hdGl2ZUZvbnRGYWNlcy5sZW5ndGggPSAwO1xuXG4gICAgaWYgKHRoaXMuc3R5bGVFbGVtZW50KSB7XG4gICAgICAvLyBOb3RlOiBDaGlsZE5vZGUucmVtb3ZlIGRvZXNuJ3QgdGhyb3cgaWYgdGhlIHBhcmVudE5vZGUgaXMgdW5kZWZpbmVkLlxuICAgICAgdGhpcy5zdHlsZUVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICB0aGlzLnN0eWxlRWxlbWVudCA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYmluZChmb250KSB7XG4gICAgLy8gQWRkIHRoZSBmb250IHRvIHRoZSBET00gb25seSBvbmNlOyBza2lwIGlmIHRoZSBmb250IGlzIGFscmVhZHkgbG9hZGVkLlxuICAgIGlmIChmb250LmF0dGFjaGVkIHx8IGZvbnQubWlzc2luZ0ZpbGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9udC5hdHRhY2hlZCA9IHRydWU7XG5cbiAgICBpZiAodGhpcy5pc0ZvbnRMb2FkaW5nQVBJU3VwcG9ydGVkKSB7XG4gICAgICBjb25zdCBuYXRpdmVGb250RmFjZSA9IGZvbnQuY3JlYXRlTmF0aXZlRm9udEZhY2UoKTtcbiAgICAgIGlmIChuYXRpdmVGb250RmFjZSkge1xuICAgICAgICB0aGlzLmFkZE5hdGl2ZUZvbnRGYWNlKG5hdGl2ZUZvbnRGYWNlKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCBuYXRpdmVGb250RmFjZS5sb2FkZWQ7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgdGhpcy5fb25VbnN1cHBvcnRlZEZlYXR1cmUoe1xuICAgICAgICAgICAgZmVhdHVyZUlkOiBVTlNVUFBPUlRFRF9GRUFUVVJFUy5lcnJvckZvbnRMb2FkTmF0aXZlLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHdhcm4oYEZhaWxlZCB0byBsb2FkIGZvbnQgJyR7bmF0aXZlRm9udEZhY2UuZmFtaWx5fSc6ICcke2V4fScuYCk7XG5cbiAgICAgICAgICAvLyBXaGVuIGZvbnQgbG9hZGluZyBmYWlsZWQsIGZhbGwgYmFjayB0byB0aGUgYnVpbHQtaW4gZm9udCByZW5kZXJlci5cbiAgICAgICAgICBmb250LmRpc2FibGVGb250RmFjZSA9IHRydWU7XG4gICAgICAgICAgdGhyb3cgZXg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybjsgLy8gVGhlIGZvbnQgd2FzLCBhc3luY2hyb25vdXNseSwgbG9hZGVkLlxuICAgIH1cblxuICAgIC8vICF0aGlzLmlzRm9udExvYWRpbmdBUElTdXBwb3J0ZWRcbiAgICBjb25zdCBydWxlID0gZm9udC5jcmVhdGVGb250RmFjZVJ1bGUoKTtcbiAgICBpZiAocnVsZSkge1xuICAgICAgdGhpcy5pbnNlcnRSdWxlKHJ1bGUpO1xuXG4gICAgICBpZiAodGhpcy5pc1N5bmNGb250TG9hZGluZ1N1cHBvcnRlZCkge1xuICAgICAgICByZXR1cm47IC8vIFRoZSBmb250IHdhcywgc3luY2hyb25vdXNseSwgbG9hZGVkLlxuICAgICAgfVxuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLl9xdWV1ZUxvYWRpbmdDYWxsYmFjayhyZXNvbHZlKTtcbiAgICAgICAgdGhpcy5fcHJlcGFyZUZvbnRMb2FkRXZlbnQoW3J1bGVdLCBbZm9udF0sIHJlcXVlc3QpO1xuICAgICAgfSk7XG4gICAgICAvLyBUaGUgZm9udCB3YXMsIGFzeW5jaHJvbm91c2x5LCBsb2FkZWQuXG4gICAgfVxuICB9XG5cbiAgX3F1ZXVlTG9hZGluZ0NhbGxiYWNrKGNhbGxiYWNrKSB7XG4gICAgdW5yZWFjaGFibGUoXCJBYnN0cmFjdCBtZXRob2QgYF9xdWV1ZUxvYWRpbmdDYWxsYmFja2AuXCIpO1xuICB9XG5cbiAgZ2V0IGlzRm9udExvYWRpbmdBUElTdXBwb3J0ZWQoKSB7XG4gICAgY29uc3QgaGFzRm9udHMgPSAhIXRoaXMuX2RvY3VtZW50Py5mb250cztcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgUERGSlNEZXYgPT09IFwidW5kZWZpbmVkXCIgfHxcbiAgICAgIFBERkpTRGV2LnRlc3QoXCIhUFJPRFVDVElPTiB8fCBURVNUSU5HXCIpXG4gICAgKSB7XG4gICAgICByZXR1cm4gc2hhZG93KFxuICAgICAgICB0aGlzLFxuICAgICAgICBcImlzRm9udExvYWRpbmdBUElTdXBwb3J0ZWRcIixcbiAgICAgICAgaGFzRm9udHMgJiYgIXRoaXMuc3R5bGVFbGVtZW50XG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gc2hhZG93KHRoaXMsIFwiaXNGb250TG9hZGluZ0FQSVN1cHBvcnRlZFwiLCBoYXNGb250cyk7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZ2V0dGVyLXJldHVyblxuICBnZXQgaXNTeW5jRm9udExvYWRpbmdTdXBwb3J0ZWQoKSB7XG4gICAgdW5yZWFjaGFibGUoXCJBYnN0cmFjdCBtZXRob2QgYGlzU3luY0ZvbnRMb2FkaW5nU3VwcG9ydGVkYC5cIik7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZ2V0dGVyLXJldHVyblxuICBnZXQgX2xvYWRUZXN0Rm9udCgpIHtcbiAgICB1bnJlYWNoYWJsZShcIkFic3RyYWN0IG1ldGhvZCBgX2xvYWRUZXN0Rm9udGAuXCIpO1xuICB9XG5cbiAgX3ByZXBhcmVGb250TG9hZEV2ZW50KHJ1bGVzLCBmb250c1RvTG9hZCwgcmVxdWVzdCkge1xuICAgIHVucmVhY2hhYmxlKFwiQWJzdHJhY3QgbWV0aG9kIGBfcHJlcGFyZUZvbnRMb2FkRXZlbnRgLlwiKTtcbiAgfVxufVxuXG5sZXQgRm9udExvYWRlcjtcbmlmICh0eXBlb2YgUERGSlNEZXYgIT09IFwidW5kZWZpbmVkXCIgJiYgUERGSlNEZXYudGVzdChcIk1PWkNFTlRSQUxcIikpIHtcbiAgRm9udExvYWRlciA9IGNsYXNzIE1vemNlbnRyYWxGb250TG9hZGVyIGV4dGVuZHMgQmFzZUZvbnRMb2FkZXIge1xuICAgIGdldCBpc1N5bmNGb250TG9hZGluZ1N1cHBvcnRlZCgpIHtcbiAgICAgIHJldHVybiBzaGFkb3codGhpcywgXCJpc1N5bmNGb250TG9hZGluZ1N1cHBvcnRlZFwiLCB0cnVlKTtcbiAgICB9XG4gIH07XG59IGVsc2Uge1xuICAvLyBQREZKU0Rldi50ZXN0KCdDSFJPTUUgfHwgR0VORVJJQycpXG5cbiAgRm9udExvYWRlciA9IGNsYXNzIEdlbmVyaWNGb250TG9hZGVyIGV4dGVuZHMgQmFzZUZvbnRMb2FkZXIge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgc3VwZXIocGFyYW1zKTtcbiAgICAgIHRoaXMubG9hZGluZ0NvbnRleHQgPSB7XG4gICAgICAgIHJlcXVlc3RzOiBbXSxcbiAgICAgICAgbmV4dFJlcXVlc3RJZDogMCxcbiAgICAgIH07XG4gICAgICB0aGlzLmxvYWRUZXN0Rm9udElkID0gMDtcbiAgICB9XG5cbiAgICBnZXQgaXNTeW5jRm9udExvYWRpbmdTdXBwb3J0ZWQoKSB7XG4gICAgICBsZXQgc3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICBpZiAodHlwZW9mIFBERkpTRGV2ID09PSBcInVuZGVmaW5lZFwiIHx8ICFQREZKU0Rldi50ZXN0KFwiQ0hST01FXCIpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgLy8gTm9kZS5qcyAtIHdlIGNhbiBwcmV0ZW5kIHRoYXQgc3luYyBmb250IGxvYWRpbmcgaXMgc3VwcG9ydGVkLlxuICAgICAgICAgIHN1cHBvcnRlZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gVXNlciBhZ2VudCBzdHJpbmcgc25pZmZpbmcgaXMgYmFkLCBidXQgdGhlcmUgaXMgbm8gcmVsaWFibGUgd2F5IHRvXG4gICAgICAgICAgLy8gdGVsbCBpZiB0aGUgZm9udCBpcyBmdWxseSBsb2FkZWQgYW5kIHJlYWR5IHRvIGJlIHVzZWQgd2l0aCBjYW52YXMuXG4gICAgICAgICAgY29uc3QgbSA9IC9Nb3ppbGxhXFwvNS4wLio/cnY6KFxcZCspLio/IEdlY2tvLy5leGVjKFxuICAgICAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudFxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKG0/LlsxXSA+PSAxNCkge1xuICAgICAgICAgICAgc3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gVE9ETyAtIG90aGVyIGJyb3dzZXJzLi4uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBzaGFkb3codGhpcywgXCJpc1N5bmNGb250TG9hZGluZ1N1cHBvcnRlZFwiLCBzdXBwb3J0ZWQpO1xuICAgIH1cblxuICAgIF9xdWV1ZUxvYWRpbmdDYWxsYmFjayhjYWxsYmFjaykge1xuICAgICAgZnVuY3Rpb24gY29tcGxldGVSZXF1ZXN0KCkge1xuICAgICAgICBhc3NlcnQoIXJlcXVlc3QuZG9uZSwgXCJjb21wbGV0ZVJlcXVlc3QoKSBjYW5ub3QgYmUgY2FsbGVkIHR3aWNlLlwiKTtcbiAgICAgICAgcmVxdWVzdC5kb25lID0gdHJ1ZTtcblxuICAgICAgICAvLyBTZW5kaW5nIGFsbCBjb21wbGV0ZWQgcmVxdWVzdHMgaW4gb3JkZXIgb2YgaG93IHRoZXkgd2VyZSBxdWV1ZWQuXG4gICAgICAgIHdoaWxlIChjb250ZXh0LnJlcXVlc3RzLmxlbmd0aCA+IDAgJiYgY29udGV4dC5yZXF1ZXN0c1swXS5kb25lKSB7XG4gICAgICAgICAgY29uc3Qgb3RoZXJSZXF1ZXN0ID0gY29udGV4dC5yZXF1ZXN0cy5zaGlmdCgpO1xuICAgICAgICAgIHNldFRpbWVvdXQob3RoZXJSZXF1ZXN0LmNhbGxiYWNrLCAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5sb2FkaW5nQ29udGV4dDtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICAgIGlkOiBgcGRmanMtZm9udC1sb2FkaW5nLSR7Y29udGV4dC5uZXh0UmVxdWVzdElkKyt9YCxcbiAgICAgICAgZG9uZTogZmFsc2UsXG4gICAgICAgIGNvbXBsZXRlOiBjb21wbGV0ZVJlcXVlc3QsXG4gICAgICAgIGNhbGxiYWNrLFxuICAgICAgfTtcbiAgICAgIGNvbnRleHQucmVxdWVzdHMucHVzaChyZXF1ZXN0KTtcbiAgICAgIHJldHVybiByZXF1ZXN0O1xuICAgIH1cblxuICAgIGdldCBfbG9hZFRlc3RGb250KCkge1xuICAgICAgY29uc3QgZ2V0TG9hZFRlc3RGb250ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBUaGlzIGlzIGEgQ0ZGIGZvbnQgd2l0aCAxIGdseXBoIGZvciAnLicgdGhhdCBmaWxscyBpdHMgZW50aXJlIHdpZHRoXG4gICAgICAgIC8vIGFuZCBoZWlnaHQuXG4gICAgICAgIHJldHVybiBhdG9iKFxuICAgICAgICAgIFwiVDFSVVR3QUxBSUFBQXdBd1EwWkdJREh0Wmc0QUFBT1lBQUFBZ1VaR1ZFMWxrelp3QUFBRUhBQUFBQnhIUkVWR0FCUUFcIiArXG4gICAgICAgICAgICBcIkZRQUFCRGdBQUFBZVQxTXZNbFlOWXdrQUFBRWdBQUFBWUdOdFlYQUJEUUxVQUFBQ05BQUFBVUpvWldGay94VkZEUUFBXCIgK1xuICAgICAgICAgICAgXCJBTHdBQUFBMmFHaGxZUWRrQStvQUFBRDBBQUFBSkdodGRIZ0Q2QUFBQUFBRVdBQUFBQVp0WVhod0FBSlFBQUFBQVJnQVwiICtcbiAgICAgICAgICAgIFwiQUFBR2JtRnRaVmptZEg0QUFBR0FBQUFBc1hCdmMzVC9oZ0F6QUFBRGVBQUFBQ0FBQVFBQUFBRUFBTFpSRnNSZkR6ejFcIiArXG4gICAgICAgICAgICBcIkFBc0Q2QUFBQUFET0JPVExBQUFBQU00S0hEd0FBQUFBQStnRElRQUFBQWdBQWdBQUFBQUFBQUFCQUFBRElRQUFBRm9EXCIgK1xuICAgICAgICAgICAgXCI2QUFBQUFBRDZBQUJBQUFBQUFBQUFBQUFBQUFBQUFBQUFRQUFVQUFBQWdBQUFBUUQ2QUgwQUFVQUFBS0tBcndBQUFDTVwiICtcbiAgICAgICAgICAgIFwiQW9vQ3ZBQUFBZUFBTVFFQ0FBQUNBQVlKQUFBQUFBQUFBQUFBQVFBQUFBQUFBQUFBQUFBQUFGQm1SV1FBd0FBdUFDNERcIiArXG4gICAgICAgICAgICBcIklQODRBRm9ESVFBQUFBQUFBUUFBQUFBQUFBQUFBQ0FBSUFBQkFBQUFEZ0N1QUFFQUFBQUFBQUFBQVFBQUFBRUFBQUFBXCIgK1xuICAgICAgICAgICAgXCJBQUVBQVFBQUFBRUFBQUFBQUFJQUFRQUFBQUVBQUFBQUFBTUFBUUFBQUFFQUFBQUFBQVFBQVFBQUFBRUFBQUFBQUFVQVwiICtcbiAgICAgICAgICAgIFwiQVFBQUFBRUFBQUFBQUFZQUFRQUFBQU1BQVFRSkFBQUFBZ0FCQUFNQUFRUUpBQUVBQWdBQkFBTUFBUVFKQUFJQUFnQUJcIiArXG4gICAgICAgICAgICBcIkFBTUFBUVFKQUFNQUFnQUJBQU1BQVFRSkFBUUFBZ0FCQUFNQUFRUUpBQVVBQWdBQkFBTUFBUVFKQUFZQUFnQUJXQUJZXCIgK1xuICAgICAgICAgICAgXCJBQUFBQUFBQUF3QUFBQU1BQUFBY0FBRUFBQUFBQUR3QUF3QUJBQUFBSEFBRUFDQUFBQUFFQUFRQUFRQUFBQzcvL3dBQVwiICtcbiAgICAgICAgICAgIFwiQUM3Ly8vL1RBQUVBQUFBQUFBQUJCZ0FBQVFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFcIiArXG4gICAgICAgICAgICBcIkFBQUFBQUFBQUFBQUFBQUFBQUVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBXCIgK1xuICAgICAgICAgICAgXCJBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQVwiICtcbiAgICAgICAgICAgIFwiQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFcIiArXG4gICAgICAgICAgICBcIkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBXCIgK1xuICAgICAgICAgICAgXCJBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFNQUFBQUFBQUQvZ3dBeUFBQUFBUUFBQUFBQUFBQUFBQUFBQUFBQVwiICtcbiAgICAgICAgICAgIFwiQUFBQkFBUUVBQUVCQVFKWUFBRUJBU0g0RHdENEd3SEVBdmdjQS9nWEJJd01BWXVMK256NXRRWGtENWozQ0JMbkVRQUNcIiArXG4gICAgICAgICAgICBcIkFRRUJJVmhZV0ZoWVdGaFlXRmhZV0ZoWVdGaFlXRmhZV0ZoWVdGaFlXRmhZV0ZoWUFBQUJBUUFBRHdBQ0FRRUVFL3QzXCIgK1xuICAgICAgICAgICAgXCJEb3Y2ZkFINmZBVCtmUHA4K253SERvc01Ddm0xQ3ZtMURBejZmQlFBQUFBQUFBQUJBQUFBQU1tSmJ6RUFBQUFBemdUalwiICtcbiAgICAgICAgICAgIFwiRlFBQUFBRE9CT1FwQUFFQUFBQUFBQUFBREFBVUFBUUFBQUFCQUFBQUFnQUJBQUFBQUFBQUFBQUQ2QUFBQUFBQUFBPT1cIlxuICAgICAgICApO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBzaGFkb3codGhpcywgXCJfbG9hZFRlc3RGb250XCIsIGdldExvYWRUZXN0Rm9udCgpKTtcbiAgICB9XG5cbiAgICBfcHJlcGFyZUZvbnRMb2FkRXZlbnQocnVsZXMsIGZvbnRzLCByZXF1ZXN0KSB7XG4gICAgICAvKiogSGFjayBiZWdpbiAqL1xuICAgICAgLy8gVGhlcmUncyBjdXJyZW50bHkgbm8gZXZlbnQgd2hlbiBhIGZvbnQgaGFzIGZpbmlzaGVkIGRvd25sb2FkaW5nIHNvIHRoZVxuICAgICAgLy8gZm9sbG93aW5nIGNvZGUgaXMgYSBkaXJ0eSBoYWNrIHRvICdndWVzcycgd2hlbiBhIGZvbnQgaXMgcmVhZHkuXG4gICAgICAvLyBJdCdzIGFzc3VtZWQgZm9udHMgYXJlIGxvYWRlZCBpbiBvcmRlciwgc28gYWRkIGEga25vd24gdGVzdCBmb250IGFmdGVyXG4gICAgICAvLyB0aGUgZGVzaXJlZCBmb250cyBhbmQgdGhlbiB0ZXN0IGZvciB0aGUgbG9hZGluZyBvZiB0aGF0IHRlc3QgZm9udC5cblxuICAgICAgZnVuY3Rpb24gaW50MzIoZGF0YSwgb2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgKGRhdGEuY2hhckNvZGVBdChvZmZzZXQpIDw8IDI0KSB8XG4gICAgICAgICAgKGRhdGEuY2hhckNvZGVBdChvZmZzZXQgKyAxKSA8PCAxNikgfFxuICAgICAgICAgIChkYXRhLmNoYXJDb2RlQXQob2Zmc2V0ICsgMikgPDwgOCkgfFxuICAgICAgICAgIChkYXRhLmNoYXJDb2RlQXQob2Zmc2V0ICsgMykgJiAweGZmKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gc3BsaWNlU3RyaW5nKHMsIG9mZnNldCwgcmVtb3ZlLCBpbnNlcnQpIHtcbiAgICAgICAgY29uc3QgY2h1bmsxID0gcy5zdWJzdHJpbmcoMCwgb2Zmc2V0KTtcbiAgICAgICAgY29uc3QgY2h1bmsyID0gcy5zdWJzdHJpbmcob2Zmc2V0ICsgcmVtb3ZlKTtcbiAgICAgICAgcmV0dXJuIGNodW5rMSArIGluc2VydCArIGNodW5rMjtcbiAgICAgIH1cbiAgICAgIGxldCBpLCBpaTtcblxuICAgICAgLy8gVGhlIHRlbXBvcmFyeSBjYW52YXMgaXMgdXNlZCB0byBkZXRlcm1pbmUgaWYgZm9udHMgYXJlIGxvYWRlZC5cbiAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgICBjYW52YXMud2lkdGggPSAxO1xuICAgICAgY2FudmFzLmhlaWdodCA9IDE7XG4gICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgICBsZXQgY2FsbGVkID0gMDtcbiAgICAgIGZ1bmN0aW9uIGlzRm9udFJlYWR5KG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxlZCsrO1xuICAgICAgICAvLyBXaXRoIHNldFRpbWVvdXQgY2xhbXBpbmcgdGhpcyBnaXZlcyB0aGUgZm9udCB+MTAwbXMgdG8gbG9hZC5cbiAgICAgICAgaWYgKGNhbGxlZCA+IDMwKSB7XG4gICAgICAgICAgd2FybihcIkxvYWQgdGVzdCBmb250IG5ldmVyIGxvYWRlZC5cIik7XG4gICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmZvbnQgPSBcIjMwcHggXCIgKyBuYW1lO1xuICAgICAgICBjdHguZmlsbFRleHQoXCIuXCIsIDAsIDIwKTtcbiAgICAgICAgY29uc3QgaW1hZ2VEYXRhID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCAxLCAxKTtcbiAgICAgICAgaWYgKGltYWdlRGF0YS5kYXRhWzNdID4gMCkge1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNldFRpbWVvdXQoaXNGb250UmVhZHkuYmluZChudWxsLCBuYW1lLCBjYWxsYmFjaykpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBsb2FkVGVzdEZvbnRJZCA9IGBsdCR7RGF0ZS5ub3coKX0ke3RoaXMubG9hZFRlc3RGb250SWQrK31gO1xuICAgICAgLy8gQ2hyb21pdW0gc2VlbXMgdG8gY2FjaGUgZm9udHMgYmFzZWQgb24gYSBoYXNoIG9mIHRoZSBhY3R1YWwgZm9udCBkYXRhLFxuICAgICAgLy8gc28gdGhlIGZvbnQgbXVzdCBiZSBtb2RpZmllZCBmb3IgZWFjaCBsb2FkIHRlc3QgZWxzZSBpdCB3aWxsIGFwcGVhciB0b1xuICAgICAgLy8gYmUgbG9hZGVkIGFscmVhZHkuXG4gICAgICAvLyBUT0RPOiBUaGlzIGNvdWxkIG1heWJlIGJlIG1hZGUgZmFzdGVyIGJ5IGF2b2lkaW5nIHRoZSBidG9hIG9mIHRoZSBmdWxsXG4gICAgICAvLyBmb250IGJ5IHNwbGl0dGluZyBpdCBpbiBjaHVua3MgYmVmb3JlIGhhbmQgYW5kIHBhZGRpbmcgdGhlIGZvbnQgaWQuXG4gICAgICBsZXQgZGF0YSA9IHRoaXMuX2xvYWRUZXN0Rm9udDtcbiAgICAgIGNvbnN0IENPTU1FTlRfT0ZGU0VUID0gOTc2OyAvLyBoYXMgdG8gYmUgb24gNCBieXRlIGJvdW5kYXJ5IChmb3IgY2hlY2tzdW0pXG4gICAgICBkYXRhID0gc3BsaWNlU3RyaW5nKFxuICAgICAgICBkYXRhLFxuICAgICAgICBDT01NRU5UX09GRlNFVCxcbiAgICAgICAgbG9hZFRlc3RGb250SWQubGVuZ3RoLFxuICAgICAgICBsb2FkVGVzdEZvbnRJZFxuICAgICAgKTtcbiAgICAgIC8vIENGRiBjaGVja3N1bSBpcyBpbXBvcnRhbnQgZm9yIElFLCBhZGp1c3RpbmcgaXRcbiAgICAgIGNvbnN0IENGRl9DSEVDS1NVTV9PRkZTRVQgPSAxNjtcbiAgICAgIGNvbnN0IFhYWFhfVkFMVUUgPSAweDU4NTg1ODU4OyAvLyB0aGUgXCJjb21tZW50XCIgZmlsbGVkIHdpdGggJ1gnXG4gICAgICBsZXQgY2hlY2tzdW0gPSBpbnQzMihkYXRhLCBDRkZfQ0hFQ0tTVU1fT0ZGU0VUKTtcbiAgICAgIGZvciAoaSA9IDAsIGlpID0gbG9hZFRlc3RGb250SWQubGVuZ3RoIC0gMzsgaSA8IGlpOyBpICs9IDQpIHtcbiAgICAgICAgY2hlY2tzdW0gPSAoY2hlY2tzdW0gLSBYWFhYX1ZBTFVFICsgaW50MzIobG9hZFRlc3RGb250SWQsIGkpKSB8IDA7XG4gICAgICB9XG4gICAgICBpZiAoaSA8IGxvYWRUZXN0Rm9udElkLmxlbmd0aCkge1xuICAgICAgICAvLyBhbGlnbiB0byA0IGJ5dGVzIGJvdW5kYXJ5XG4gICAgICAgIGNoZWNrc3VtID1cbiAgICAgICAgICAoY2hlY2tzdW0gLSBYWFhYX1ZBTFVFICsgaW50MzIobG9hZFRlc3RGb250SWQgKyBcIlhYWFwiLCBpKSkgfCAwO1xuICAgICAgfVxuICAgICAgZGF0YSA9IHNwbGljZVN0cmluZyhkYXRhLCBDRkZfQ0hFQ0tTVU1fT0ZGU0VULCA0LCBzdHJpbmczMihjaGVja3N1bSkpO1xuXG4gICAgICBjb25zdCB1cmwgPSBgdXJsKGRhdGE6Zm9udC9vcGVudHlwZTtiYXNlNjQsJHtidG9hKGRhdGEpfSk7YDtcbiAgICAgIGNvbnN0IHJ1bGUgPSBgQGZvbnQtZmFjZSB7Zm9udC1mYW1pbHk6XCIke2xvYWRUZXN0Rm9udElkfVwiO3NyYzoke3VybH19YDtcbiAgICAgIHRoaXMuaW5zZXJ0UnVsZShydWxlKTtcblxuICAgICAgY29uc3QgbmFtZXMgPSBbXTtcbiAgICAgIGZvciAoY29uc3QgZm9udCBvZiBmb250cykge1xuICAgICAgICBuYW1lcy5wdXNoKGZvbnQubG9hZGVkTmFtZSk7XG4gICAgICB9XG4gICAgICBuYW1lcy5wdXNoKGxvYWRUZXN0Rm9udElkKTtcblxuICAgICAgY29uc3QgZGl2ID0gdGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGRpdi5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbiAgICAgIGRpdi5zdHlsZS53aWR0aCA9IGRpdi5zdHlsZS5oZWlnaHQgPSBcIjEwcHhcIjtcbiAgICAgIGRpdi5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICAgIGRpdi5zdHlsZS50b3AgPSBkaXYuc3R5bGUubGVmdCA9IFwiMHB4XCI7XG5cbiAgICAgIGZvciAoY29uc3QgbmFtZSBvZiBuYW1lcykge1xuICAgICAgICBjb25zdCBzcGFuID0gdGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIHNwYW4udGV4dENvbnRlbnQgPSBcIkhpXCI7XG4gICAgICAgIHNwYW4uc3R5bGUuZm9udEZhbWlseSA9IG5hbWU7XG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChzcGFuKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcblxuICAgICAgaXNGb250UmVhZHkobG9hZFRlc3RGb250SWQsICgpID0+IHtcbiAgICAgICAgZGl2LnJlbW92ZSgpO1xuICAgICAgICByZXF1ZXN0LmNvbXBsZXRlKCk7XG4gICAgICB9KTtcbiAgICAgIC8qKiBIYWNrIGVuZCAqL1xuICAgIH1cbiAgfTtcbn0gLy8gRW5kIG9mIFBERkpTRGV2LnRlc3QoJ0NIUk9NRSB8fCBHRU5FUklDJylcblxuY2xhc3MgRm9udEZhY2VPYmplY3Qge1xuICBjb25zdHJ1Y3RvcihcbiAgICB0cmFuc2xhdGVkRGF0YSxcbiAgICB7XG4gICAgICBpc0V2YWxTdXBwb3J0ZWQgPSB0cnVlLFxuICAgICAgZGlzYWJsZUZvbnRGYWNlID0gZmFsc2UsXG4gICAgICBpZ25vcmVFcnJvcnMgPSBmYWxzZSxcbiAgICAgIG9uVW5zdXBwb3J0ZWRGZWF0dXJlLFxuICAgICAgZm9udFJlZ2lzdHJ5ID0gbnVsbCxcbiAgICB9XG4gICkge1xuICAgIHRoaXMuY29tcGlsZWRHbHlwaHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIC8vIGltcG9ydGluZyB0cmFuc2xhdGVkIGRhdGFcbiAgICBmb3IgKGNvbnN0IGkgaW4gdHJhbnNsYXRlZERhdGEpIHtcbiAgICAgIHRoaXNbaV0gPSB0cmFuc2xhdGVkRGF0YVtpXTtcbiAgICB9XG4gICAgdGhpcy5pc0V2YWxTdXBwb3J0ZWQgPSBpc0V2YWxTdXBwb3J0ZWQgIT09IGZhbHNlO1xuICAgIHRoaXMuZGlzYWJsZUZvbnRGYWNlID0gZGlzYWJsZUZvbnRGYWNlID09PSB0cnVlO1xuICAgIHRoaXMuaWdub3JlRXJyb3JzID0gaWdub3JlRXJyb3JzID09PSB0cnVlO1xuICAgIHRoaXMuX29uVW5zdXBwb3J0ZWRGZWF0dXJlID0gb25VbnN1cHBvcnRlZEZlYXR1cmU7XG4gICAgdGhpcy5mb250UmVnaXN0cnkgPSBmb250UmVnaXN0cnk7XG4gIH1cblxuICBjcmVhdGVOYXRpdmVGb250RmFjZSgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YSB8fCB0aGlzLmRpc2FibGVGb250RmFjZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGxldCBuYXRpdmVGb250RmFjZTtcbiAgICBpZiAoIXRoaXMuY3NzRm9udEluZm8pIHtcbiAgICAgIG5hdGl2ZUZvbnRGYWNlID0gbmV3IEZvbnRGYWNlKHRoaXMubG9hZGVkTmFtZSwgdGhpcy5kYXRhLCB7fSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNzcyA9IHtcbiAgICAgICAgd2VpZ2h0OiB0aGlzLmNzc0ZvbnRJbmZvLmZvbnRXZWlnaHQsXG4gICAgICB9O1xuICAgICAgaWYgKHRoaXMuY3NzRm9udEluZm8uaXRhbGljQW5nbGUpIHtcbiAgICAgICAgY3NzLnN0eWxlID0gYG9ibGlxdWUgJHt0aGlzLmNzc0ZvbnRJbmZvLml0YWxpY0FuZ2xlfWRlZ2A7XG4gICAgICB9XG4gICAgICBuYXRpdmVGb250RmFjZSA9IG5ldyBGb250RmFjZShcbiAgICAgICAgdGhpcy5jc3NGb250SW5mby5mb250RmFtaWx5LFxuICAgICAgICB0aGlzLmRhdGEsXG4gICAgICAgIGNzc1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5mb250UmVnaXN0cnkpIHtcbiAgICAgIHRoaXMuZm9udFJlZ2lzdHJ5LnJlZ2lzdGVyRm9udCh0aGlzKTtcbiAgICB9XG4gICAgcmV0dXJuIG5hdGl2ZUZvbnRGYWNlO1xuICB9XG5cbiAgY3JlYXRlRm9udEZhY2VSdWxlKCkge1xuICAgIGlmICghdGhpcy5kYXRhIHx8IHRoaXMuZGlzYWJsZUZvbnRGYWNlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IGJ5dGVzVG9TdHJpbmcodGhpcy5kYXRhKTtcbiAgICAvLyBBZGQgdGhlIEBmb250LWZhY2UgcnVsZSB0byB0aGUgZG9jdW1lbnQuXG4gICAgY29uc3QgdXJsID0gYHVybChkYXRhOiR7dGhpcy5taW1ldHlwZX07YmFzZTY0LCR7YnRvYShkYXRhKX0pO2A7XG4gICAgbGV0IHJ1bGU7XG4gICAgaWYgKCF0aGlzLmNzc0ZvbnRJbmZvKSB7XG4gICAgICBydWxlID0gYEBmb250LWZhY2Uge2ZvbnQtZmFtaWx5OlwiJHt0aGlzLmxvYWRlZE5hbWV9XCI7c3JjOiR7dXJsfX1gO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgY3NzID0gYGZvbnQtd2VpZ2h0OiAke3RoaXMuY3NzRm9udEluZm8uZm9udFdlaWdodH07YDtcbiAgICAgIGlmICh0aGlzLmNzc0ZvbnRJbmZvLml0YWxpY0FuZ2xlKSB7XG4gICAgICAgIGNzcyArPSBgZm9udC1zdHlsZTogb2JsaXF1ZSAke3RoaXMuY3NzRm9udEluZm8uaXRhbGljQW5nbGV9ZGVnO2A7XG4gICAgICB9XG4gICAgICBydWxlID0gYEBmb250LWZhY2Uge2ZvbnQtZmFtaWx5OlwiJHt0aGlzLmNzc0ZvbnRJbmZvLmZvbnRGYW1pbHl9XCI7JHtjc3N9c3JjOiR7dXJsfX1gO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmZvbnRSZWdpc3RyeSkge1xuICAgICAgdGhpcy5mb250UmVnaXN0cnkucmVnaXN0ZXJGb250KHRoaXMsIHVybCk7XG4gICAgfVxuICAgIHJldHVybiBydWxlO1xuICB9XG5cbiAgZ2V0UGF0aEdlbmVyYXRvcihvYmpzLCBjaGFyYWN0ZXIpIHtcbiAgICBpZiAodGhpcy5jb21waWxlZEdseXBoc1tjaGFyYWN0ZXJdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVkR2x5cGhzW2NoYXJhY3Rlcl07XG4gICAgfVxuXG4gICAgbGV0IGNtZHM7XG4gICAgdHJ5IHtcbiAgICAgIGNtZHMgPSBvYmpzLmdldCh0aGlzLmxvYWRlZE5hbWUgKyBcIl9wYXRoX1wiICsgY2hhcmFjdGVyKTtcbiAgICB9IGNhdGNoIChleCkge1xuICAgICAgaWYgKCF0aGlzLmlnbm9yZUVycm9ycykge1xuICAgICAgICB0aHJvdyBleDtcbiAgICAgIH1cbiAgICAgIHRoaXMuX29uVW5zdXBwb3J0ZWRGZWF0dXJlKHtcbiAgICAgICAgZmVhdHVyZUlkOiBVTlNVUFBPUlRFRF9GRUFUVVJFUy5lcnJvckZvbnRHZXRQYXRoLFxuICAgICAgfSk7XG4gICAgICB3YXJuKGBnZXRQYXRoR2VuZXJhdG9yIC0gaWdub3JpbmcgY2hhcmFjdGVyOiBcIiR7ZXh9XCIuYCk7XG5cbiAgICAgIHJldHVybiAodGhpcy5jb21waWxlZEdseXBoc1tjaGFyYWN0ZXJdID0gZnVuY3Rpb24gKGMsIHNpemUpIHtcbiAgICAgICAgLy8gTm8tb3AgZnVuY3Rpb24sIHRvIGFsbG93IHJlbmRlcmluZyB0byBjb250aW51ZS5cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIElmIHdlIGNhbiwgY29tcGlsZSBjbWRzIGludG8gSlMgZm9yIE1BWElNVU0gU1BFRUQuLi5cbiAgICBpZiAodGhpcy5pc0V2YWxTdXBwb3J0ZWQgJiYgRmVhdHVyZVRlc3QuaXNFdmFsU3VwcG9ydGVkKSB7XG4gICAgICBjb25zdCBqc0J1ZiA9IFtdO1xuICAgICAgZm9yIChjb25zdCBjdXJyZW50IG9mIGNtZHMpIHtcbiAgICAgICAgY29uc3QgYXJncyA9IGN1cnJlbnQuYXJncyAhPT0gdW5kZWZpbmVkID8gY3VycmVudC5hcmdzLmpvaW4oXCIsXCIpIDogXCJcIjtcbiAgICAgICAganNCdWYucHVzaChcImMuXCIsIGN1cnJlbnQuY21kLCBcIihcIiwgYXJncywgXCIpO1xcblwiKTtcbiAgICAgIH1cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXctZnVuY1xuICAgICAgcmV0dXJuICh0aGlzLmNvbXBpbGVkR2x5cGhzW2NoYXJhY3Rlcl0gPSBuZXcgRnVuY3Rpb24oXG4gICAgICAgIFwiY1wiLFxuICAgICAgICBcInNpemVcIixcbiAgICAgICAganNCdWYuam9pbihcIlwiKVxuICAgICAgKSk7XG4gICAgfVxuICAgIC8vIC4uLiBidXQgZmFsbCBiYWNrIG9uIHVzaW5nIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseSgpIGlmIHdlJ3JlXG4gICAgLy8gYmxvY2tlZCBmcm9tIHVzaW5nIGV2YWwoKSBmb3Igd2hhdGV2ZXIgcmVhc29uIChsaWtlIENTUCBwb2xpY2llcykuXG4gICAgcmV0dXJuICh0aGlzLmNvbXBpbGVkR2x5cGhzW2NoYXJhY3Rlcl0gPSBmdW5jdGlvbiAoYywgc2l6ZSkge1xuICAgICAgZm9yIChjb25zdCBjdXJyZW50IG9mIGNtZHMpIHtcbiAgICAgICAgaWYgKGN1cnJlbnQuY21kID09PSBcInNjYWxlXCIpIHtcbiAgICAgICAgICBjdXJyZW50LmFyZ3MgPSBbc2l6ZSwgLXNpemVdO1xuICAgICAgICB9XG4gICAgICAgIGNbY3VycmVudC5jbWRdLmFwcGx5KGMsIGN1cnJlbnQuYXJncyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IHsgRm9udEZhY2VPYmplY3QsIEZvbnRMb2FkZXIgfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAyMCBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgTXVybXVySGFzaDNfNjQgfSBmcm9tIFwiLi4vc2hhcmVkL211cm11cmhhc2gzLmpzXCI7XG5pbXBvcnQgeyBvYmplY3RGcm9tTWFwIH0gZnJvbSBcIi4uL3NoYXJlZC91dGlsLmpzXCI7XG5cbi8qKlxuICogS2V5L3ZhbHVlIHN0b3JhZ2UgZm9yIGFubm90YXRpb24gZGF0YSBpbiBmb3Jtcy5cbiAqL1xuY2xhc3MgQW5ub3RhdGlvblN0b3JhZ2Uge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9zdG9yYWdlID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuX21vZGlmaWVkID0gZmFsc2U7XG5cbiAgICAvLyBDYWxsYmFja3MgdG8gc2lnbmFsIHdoZW4gdGhlIG1vZGlmaWNhdGlvbiBzdGF0ZSBpcyBzZXQgb3IgcmVzZXQuXG4gICAgLy8gVGhpcyBpcyB1c2VkIGJ5IHRoZSB2aWV3ZXIgdG8gb25seSBiaW5kIG9uIGBiZWZvcmV1bmxvYWRgIGlmIGZvcm1zXG4gICAgLy8gYXJlIGFjdHVhbGx5IGVkaXRlZCB0byBwcmV2ZW50IGRvaW5nIHNvIHVuY29uZGl0aW9uYWxseSBzaW5jZSB0aGF0XG4gICAgLy8gY2FuIGhhdmUgdW5kZXNpcmFibGUgZWZmZWN0cy5cbiAgICB0aGlzLm9uU2V0TW9kaWZpZWQgPSBudWxsO1xuICAgIHRoaXMub25SZXNldE1vZGlmaWVkID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIGZvciBhIGdpdmVuIGtleSBpZiBpdCBleGlzdHMsIG9yIHJldHVybiB0aGUgZGVmYXVsdCB2YWx1ZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWVtYmVyb2YgQW5ub3RhdGlvblN0b3JhZ2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICAgKiBAcGFyYW0ge09iamVjdH0gZGVmYXVsdFZhbHVlXG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBnZXRWYWx1ZShrZXksIGRlZmF1bHRWYWx1ZSkge1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5fc3RvcmFnZS5nZXQoa2V5KTtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihkZWZhdWx0VmFsdWUsIHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIGZvciBhIGdpdmVuIGtleS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWVtYmVyb2YgQW5ub3RhdGlvblN0b3JhZ2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgZ2V0UmF3VmFsdWUoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0b3JhZ2UuZ2V0KGtleSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSB2YWx1ZSBmb3IgYSBnaXZlbiBrZXlcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWVtYmVyb2YgQW5ub3RhdGlvblN0b3JhZ2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICAgKiBAcGFyYW0ge09iamVjdH0gdmFsdWVcbiAgICovXG4gIHNldFZhbHVlKGtleSwgdmFsdWUpIHtcbiAgICBjb25zdCBvYmogPSB0aGlzLl9zdG9yYWdlLmdldChrZXkpO1xuICAgIGxldCBtb2RpZmllZCA9IGZhbHNlO1xuICAgIGlmIChvYmogIT09IHVuZGVmaW5lZCkge1xuICAgICAgZm9yIChjb25zdCBbZW50cnksIHZhbF0gb2YgT2JqZWN0LmVudHJpZXModmFsdWUpKSB7XG4gICAgICAgIGlmIChvYmpbZW50cnldICE9PSB2YWwpIHtcbiAgICAgICAgICBtb2RpZmllZCA9IHRydWU7XG4gICAgICAgICAgb2JqW2VudHJ5XSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBtb2RpZmllZCA9IHRydWU7XG4gICAgICB0aGlzLl9zdG9yYWdlLnNldChrZXksIHZhbHVlKTtcbiAgICB9XG4gICAgaWYgKG1vZGlmaWVkKSB7XG4gICAgICB0aGlzLl9zZXRNb2RpZmllZCgpO1xuICAgIH1cbiAgfVxuXG4gIGdldEFsbCgpIHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcmFnZS5zaXplID4gMCA/IG9iamVjdEZyb21NYXAodGhpcy5fc3RvcmFnZSkgOiBudWxsO1xuICB9XG5cbiAgZ2V0IHNpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0b3JhZ2Uuc2l6ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3NldE1vZGlmaWVkKCkge1xuICAgIGlmICghdGhpcy5fbW9kaWZpZWQpIHtcbiAgICAgIHRoaXMuX21vZGlmaWVkID0gdHJ1ZTtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5vblNldE1vZGlmaWVkID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhpcy5vblNldE1vZGlmaWVkKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmVzZXRNb2RpZmllZCgpIHtcbiAgICBpZiAodGhpcy5fbW9kaWZpZWQpIHtcbiAgICAgIHRoaXMuX21vZGlmaWVkID0gZmFsc2U7XG4gICAgICBpZiAodHlwZW9mIHRoaXMub25SZXNldE1vZGlmaWVkID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhpcy5vblJlc2V0TW9kaWZpZWQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUExFQVNFIE5PVEU6IE9ubHkgaW50ZW5kZWQgZm9yIHVzYWdlIHdpdGhpbiB0aGUgQVBJIGl0c2VsZi5cbiAgICogQGlnbm9yZVxuICAgKi9cbiAgZ2V0IHNlcmlhbGl6YWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcmFnZS5zaXplID4gMCA/IHRoaXMuX3N0b3JhZ2UgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFBMRUFTRSBOT1RFOiBPbmx5IGludGVuZGVkIGZvciB1c2FnZSB3aXRoaW4gdGhlIEFQSSBpdHNlbGYuXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGdldCBoYXNoKCkge1xuICAgIGNvbnN0IGhhc2ggPSBuZXcgTXVybXVySGFzaDNfNjQoKTtcblxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIHRoaXMuX3N0b3JhZ2UpIHtcbiAgICAgIGhhc2gudXBkYXRlKGAke2tleX06JHtKU09OLnN0cmluZ2lmeSh2YWx1ZSl9YCk7XG4gICAgfVxuICAgIHJldHVybiBoYXNoLmhleGRpZ2VzdCgpO1xuICB9XG59XG5cbmV4cG9ydCB7IEFubm90YXRpb25TdG9yYWdlIH07XG4iLCAiLyogQ29weXJpZ2h0IDIwMTQgT3BlcmEgU29mdHdhcmUgQVNBXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICpcbiAqXG4gKiBCYXNlZCBvbiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3NtaGFzaGVyL3dpa2kvTXVybXVySGFzaDMuXG4gKiBIYXNoZXMgcm91Z2hseSAxMDAgS0IgcGVyIG1pbGxpc2Vjb25kIG9uIGk3IDMuNCBHSHouXG4gKi9cblxuaW1wb3J0IHsgaXNBcnJheUJ1ZmZlciB9IGZyb20gXCIuL3V0aWwuanNcIjtcblxuY29uc3QgU0VFRCA9IDB4YzNkMmUxZjA7XG4vLyBXb3JrYXJvdW5kIGZvciBtaXNzaW5nIG1hdGggcHJlY2lzaW9uIGluIEpTLlxuY29uc3QgTUFTS19ISUdIID0gMHhmZmZmMDAwMDtcbmNvbnN0IE1BU0tfTE9XID0gMHhmZmZmO1xuXG5jbGFzcyBNdXJtdXJIYXNoM182NCB7XG4gIGNvbnN0cnVjdG9yKHNlZWQpIHtcbiAgICB0aGlzLmgxID0gc2VlZCA/IHNlZWQgJiAweGZmZmZmZmZmIDogU0VFRDtcbiAgICB0aGlzLmgyID0gc2VlZCA/IHNlZWQgJiAweGZmZmZmZmZmIDogU0VFRDtcbiAgfVxuXG4gIHVwZGF0ZShpbnB1dCkge1xuICAgIGxldCBkYXRhLCBsZW5ndGg7XG4gICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgZGF0YSA9IG5ldyBVaW50OEFycmF5KGlucHV0Lmxlbmd0aCAqIDIpO1xuICAgICAgbGVuZ3RoID0gMDtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGlucHV0Lmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgY29uc3QgY29kZSA9IGlucHV0LmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIGlmIChjb2RlIDw9IDB4ZmYpIHtcbiAgICAgICAgICBkYXRhW2xlbmd0aCsrXSA9IGNvZGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGF0YVtsZW5ndGgrK10gPSBjb2RlID4+PiA4O1xuICAgICAgICAgIGRhdGFbbGVuZ3RoKytdID0gY29kZSAmIDB4ZmY7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzQXJyYXlCdWZmZXIoaW5wdXQpKSB7XG4gICAgICBkYXRhID0gaW5wdXQuc2xpY2UoKTtcbiAgICAgIGxlbmd0aCA9IGRhdGEuYnl0ZUxlbmd0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIldyb25nIGRhdGEgZm9ybWF0IGluIE11cm11ckhhc2gzXzY0X3VwZGF0ZS4gXCIgK1xuICAgICAgICAgIFwiSW5wdXQgbXVzdCBiZSBhIHN0cmluZyBvciBhcnJheS5cIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBibG9ja0NvdW50cyA9IGxlbmd0aCA+PiAyO1xuICAgIGNvbnN0IHRhaWxMZW5ndGggPSBsZW5ndGggLSBibG9ja0NvdW50cyAqIDQ7XG4gICAgLy8gV2UgZG9uJ3QgY2FyZSBhYm91dCBlbmRpYW5uZXNzIGhlcmUuXG4gICAgY29uc3QgZGF0YVVpbnQzMiA9IG5ldyBVaW50MzJBcnJheShkYXRhLmJ1ZmZlciwgMCwgYmxvY2tDb3VudHMpO1xuICAgIGxldCBrMSA9IDAsXG4gICAgICBrMiA9IDA7XG4gICAgbGV0IGgxID0gdGhpcy5oMSxcbiAgICAgIGgyID0gdGhpcy5oMjtcbiAgICBjb25zdCBDMSA9IDB4Y2M5ZTJkNTEsXG4gICAgICBDMiA9IDB4MWI4NzM1OTM7XG4gICAgY29uc3QgQzFfTE9XID0gQzEgJiBNQVNLX0xPVyxcbiAgICAgIEMyX0xPVyA9IEMyICYgTUFTS19MT1c7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJsb2NrQ291bnRzOyBpKyspIHtcbiAgICAgIGlmIChpICYgMSkge1xuICAgICAgICBrMSA9IGRhdGFVaW50MzJbaV07XG4gICAgICAgIGsxID0gKChrMSAqIEMxKSAmIE1BU0tfSElHSCkgfCAoKGsxICogQzFfTE9XKSAmIE1BU0tfTE9XKTtcbiAgICAgICAgazEgPSAoazEgPDwgMTUpIHwgKGsxID4+PiAxNyk7XG4gICAgICAgIGsxID0gKChrMSAqIEMyKSAmIE1BU0tfSElHSCkgfCAoKGsxICogQzJfTE9XKSAmIE1BU0tfTE9XKTtcbiAgICAgICAgaDEgXj0gazE7XG4gICAgICAgIGgxID0gKGgxIDw8IDEzKSB8IChoMSA+Pj4gMTkpO1xuICAgICAgICBoMSA9IGgxICogNSArIDB4ZTY1NDZiNjQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBrMiA9IGRhdGFVaW50MzJbaV07XG4gICAgICAgIGsyID0gKChrMiAqIEMxKSAmIE1BU0tfSElHSCkgfCAoKGsyICogQzFfTE9XKSAmIE1BU0tfTE9XKTtcbiAgICAgICAgazIgPSAoazIgPDwgMTUpIHwgKGsyID4+PiAxNyk7XG4gICAgICAgIGsyID0gKChrMiAqIEMyKSAmIE1BU0tfSElHSCkgfCAoKGsyICogQzJfTE9XKSAmIE1BU0tfTE9XKTtcbiAgICAgICAgaDIgXj0gazI7XG4gICAgICAgIGgyID0gKGgyIDw8IDEzKSB8IChoMiA+Pj4gMTkpO1xuICAgICAgICBoMiA9IGgyICogNSArIDB4ZTY1NDZiNjQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgazEgPSAwO1xuXG4gICAgc3dpdGNoICh0YWlsTGVuZ3RoKSB7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIGsxIF49IGRhdGFbYmxvY2tDb3VudHMgKiA0ICsgMl0gPDwgMTY7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlIDI6XG4gICAgICAgIGsxIF49IGRhdGFbYmxvY2tDb3VudHMgKiA0ICsgMV0gPDwgODtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgIGNhc2UgMTpcbiAgICAgICAgazEgXj0gZGF0YVtibG9ja0NvdW50cyAqIDRdO1xuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG5cbiAgICAgICAgazEgPSAoKGsxICogQzEpICYgTUFTS19ISUdIKSB8ICgoazEgKiBDMV9MT1cpICYgTUFTS19MT1cpO1xuICAgICAgICBrMSA9IChrMSA8PCAxNSkgfCAoazEgPj4+IDE3KTtcbiAgICAgICAgazEgPSAoKGsxICogQzIpICYgTUFTS19ISUdIKSB8ICgoazEgKiBDMl9MT1cpICYgTUFTS19MT1cpO1xuICAgICAgICBpZiAoYmxvY2tDb3VudHMgJiAxKSB7XG4gICAgICAgICAgaDEgXj0gazE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaDIgXj0gazE7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmgxID0gaDE7XG4gICAgdGhpcy5oMiA9IGgyO1xuICB9XG5cbiAgaGV4ZGlnZXN0KCkge1xuICAgIGxldCBoMSA9IHRoaXMuaDEsXG4gICAgICBoMiA9IHRoaXMuaDI7XG5cbiAgICBoMSBePSBoMiA+Pj4gMTtcbiAgICBoMSA9ICgoaDEgKiAweGVkNTU4Y2NkKSAmIE1BU0tfSElHSCkgfCAoKGgxICogMHg4Y2NkKSAmIE1BU0tfTE9XKTtcbiAgICBoMiA9XG4gICAgICAoKGgyICogMHhmZjUxYWZkNykgJiBNQVNLX0hJR0gpIHxcbiAgICAgICgoKCgoaDIgPDwgMTYpIHwgKGgxID4+PiAxNikpICogMHhhZmQ3ZWQ1NSkgJiBNQVNLX0hJR0gpID4+PiAxNik7XG4gICAgaDEgXj0gaDIgPj4+IDE7XG4gICAgaDEgPSAoKGgxICogMHgxYTg1ZWM1MykgJiBNQVNLX0hJR0gpIHwgKChoMSAqIDB4ZWM1MykgJiBNQVNLX0xPVyk7XG4gICAgaDIgPVxuICAgICAgKChoMiAqIDB4YzRjZWI5ZmUpICYgTUFTS19ISUdIKSB8XG4gICAgICAoKCgoKGgyIDw8IDE2KSB8IChoMSA+Pj4gMTYpKSAqIDB4YjlmZTFhODUpICYgTUFTS19ISUdIKSA+Pj4gMTYpO1xuICAgIGgxIF49IGgyID4+PiAxO1xuXG4gICAgY29uc3QgaGV4MSA9IChoMSA+Pj4gMCkudG9TdHJpbmcoMTYpLFxuICAgICAgaGV4MiA9IChoMiA+Pj4gMCkudG9TdHJpbmcoMTYpO1xuICAgIHJldHVybiBoZXgxLnBhZFN0YXJ0KDgsIFwiMFwiKSArIGhleDIucGFkU3RhcnQoOCwgXCIwXCIpO1xuICB9XG59XG5cbmV4cG9ydCB7IE11cm11ckhhc2gzXzY0IH07XG4iLCAiLyogQ29weXJpZ2h0IDIwMTIgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIEZlYXR1cmVUZXN0LFxuICBGT05UX0lERU5USVRZX01BVFJJWCxcbiAgSURFTlRJVFlfTUFUUklYLFxuICBJbWFnZUtpbmQsXG4gIGluZm8sXG4gIE9QUyxcbiAgc2hhZG93LFxuICBUZXh0UmVuZGVyaW5nTW9kZSxcbiAgdW5yZWFjaGFibGUsXG4gIFV0aWwsXG4gIHdhcm4sXG59IGZyb20gXCIuLi9zaGFyZWQvdXRpbC5qc1wiO1xuaW1wb3J0IHtcbiAgZ2V0U2hhZGluZ1BhdHRlcm4sXG4gIFBhdGhUeXBlLFxuICBUaWxpbmdQYXR0ZXJuLFxufSBmcm9tIFwiLi9wYXR0ZXJuX2hlbHBlci5qc1wiO1xuaW1wb3J0IHsgYXBwbHlNYXNrSW1hZ2VEYXRhIH0gZnJvbSBcIi4uL3NoYXJlZC9pbWFnZV91dGlscy5qc1wiO1xuaW1wb3J0IHsgaXNOb2RlSlMgfSBmcm9tIFwiLi4vc2hhcmVkL2lzX25vZGUuanNcIjtcbmltcG9ydCB7IFBpeGVsc1BlckluY2ggfSBmcm9tIFwiLi9kaXNwbGF5X3V0aWxzLmpzXCI7XG5cbi8vIDxjYW52YXM+IGNvbnRleHRzIHN0b3JlIG1vc3Qgb2YgdGhlIHN0YXRlIHdlIG5lZWQgbmF0aXZlbHkuXG4vLyBIb3dldmVyLCBQREYgbmVlZHMgYSBiaXQgbW9yZSBzdGF0ZSwgd2hpY2ggd2Ugc3RvcmUgaGVyZS5cbi8vIE1pbmltYWwgZm9udCBzaXplIHRoYXQgd291bGQgYmUgdXNlZCBkdXJpbmcgY2FudmFzIGZpbGxUZXh0IG9wZXJhdGlvbnMuXG5jb25zdCBNSU5fRk9OVF9TSVpFID0gMTY7XG4vLyBNYXhpbXVtIGZvbnQgc2l6ZSB0aGF0IHdvdWxkIGJlIHVzZWQgZHVyaW5nIGNhbnZhcyBmaWxsVGV4dCBvcGVyYXRpb25zLlxuY29uc3QgTUFYX0ZPTlRfU0laRSA9IDEwMDtcbmNvbnN0IE1BWF9HUk9VUF9TSVpFID0gNDA5NjtcblxuLy8gRGVmaW5lcyB0aGUgdGltZSB0aGUgYGV4ZWN1dGVPcGVyYXRvckxpc3RgLW1ldGhvZCBpcyBnb2luZyB0byBiZSBleGVjdXRpbmdcbi8vIGJlZm9yZSBpdCBzdG9wcyBhbmQgc2NoZWR1bGVzIGEgY29udGludWUgb2YgZXhlY3V0aW9uLlxuY29uc3QgRVhFQ1VUSU9OX1RJTUUgPSAxNTsgLy8gbXNcbi8vIERlZmluZXMgdGhlIG51bWJlciBvZiBzdGVwcyBiZWZvcmUgY2hlY2tpbmcgdGhlIGV4ZWN1dGlvbiB0aW1lLlxuY29uc3QgRVhFQ1VUSU9OX1NURVBTID0gMTA7XG5cbmNvbnN0IENPTVBJTEVfVFlQRTNfR0xZUEhTID0gdHJ1ZTtcbmNvbnN0IE1BWF9TSVpFX1RPX0NPTVBJTEUgPSAxMDAwO1xuXG5jb25zdCBGVUxMX0NIVU5LX0hFSUdIVCA9IDE2O1xuXG4vLyBCZWNhdXNlIG9mIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTExNzAzOTZcbi8vIHNvbWUgY3VydmVzIGFyZW4ndCByZW5kZXJlZCBjb3JyZWN0bHkuXG4vLyBNdWx0aXBseWluZyBsaW5lV2lkdGggYnkgdGhpcyBmYWN0b3Igc2hvdWxkIGhlbHAgdG8gaGF2ZSBcImNvcnJlY3RcIlxuLy8gcmVuZGVyaW5nIHdpdGggbm8gYXJ0aWZhY3RzLlxuLy8gT25jZSB0aGUgYnVnIGlzIGZpeGVkIHVwc3RyZWFtLCB3ZSBjYW4gcmVtb3ZlIHRoaXMgY29uc3RhbnQgYW5kIGl0cyB1c2UuXG5jb25zdCBMSU5FV0lEVEhfU0NBTEVfRkFDVE9SID0gMS4wMDAwMDE7XG5cbi8qKlxuICogT3ZlcnJpZGVzIGNlcnRhaW4gbWV0aG9kcyBvbiBhIDJkIGN0eCBzbyB0aGF0IHdoZW4gdGhleSBhcmUgY2FsbGVkIHRoZXlcbiAqIHdpbGwgYWxzbyBjYWxsIHRoZSBzYW1lIG1ldGhvZCBvbiB0aGUgZGVzdEN0eC4gVGhlIG1ldGhvZHMgdGhhdCBhcmVcbiAqIG92ZXJyaWRkZW4gYXJlIGFsbCB0aGUgdHJhbnNmb3JtYXRpb24gc3RhdGUgbW9kaWZpZXJzLCBwYXRoIGNyZWF0aW9uLCBhbmRcbiAqIHNhdmUvcmVzdG9yZS4gV2Ugb25seSBmb3J3YXJkIHRoZXNlIHNwZWNpZmljIG1ldGhvZHMgYmVjYXVzZSB0aGV5IGFyZSB0aGVcbiAqIG9ubHkgc3RhdGUgbW9kaWZpZXJzIHRoYXQgd2UgY2Fubm90IGNvcHkgb3ZlciB3aGVuIHdlIHN3aXRjaCBjb250ZXh0cy5cbiAqXG4gKiBUbyByZW1vdmUgbWlycm9yaW5nIGNhbGwgYGN0eC5fcmVtb3ZlTWlycm9yaW5nKClgLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBjdHggLSBUaGUgMmQgY2FudmFzIGNvbnRleHQgdGhhdCB3aWxsIGR1cGxpY2F0ZSBpdHMgY2FsbHMgb25cbiAqICAgdGhlIGRlc3RDdHguXG4gKiBAcGFyYW0ge09iamVjdH0gZGVzdEN0eCAtIFRoZSAyZCBjYW52YXMgY29udGV4dCB0aGF0IHdpbGwgcmVjZWl2ZSB0aGVcbiAqICAgZm9yd2FyZGVkIGNhbGxzLlxuICovXG5mdW5jdGlvbiBtaXJyb3JDb250ZXh0T3BlcmF0aW9ucyhjdHgsIGRlc3RDdHgpIHtcbiAgaWYgKGN0eC5fcmVtb3ZlTWlycm9yaW5nKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ29udGV4dCBpcyBhbHJlYWR5IGZvcndhcmRpbmcgb3BlcmF0aW9ucy5cIik7XG4gIH1cbiAgY3R4Ll9fb3JpZ2luYWxTYXZlID0gY3R4LnNhdmU7XG4gIGN0eC5fX29yaWdpbmFsUmVzdG9yZSA9IGN0eC5yZXN0b3JlO1xuICBjdHguX19vcmlnaW5hbFJvdGF0ZSA9IGN0eC5yb3RhdGU7XG4gIGN0eC5fX29yaWdpbmFsU2NhbGUgPSBjdHguc2NhbGU7XG4gIGN0eC5fX29yaWdpbmFsVHJhbnNsYXRlID0gY3R4LnRyYW5zbGF0ZTtcbiAgY3R4Ll9fb3JpZ2luYWxUcmFuc2Zvcm0gPSBjdHgudHJhbnNmb3JtO1xuICBjdHguX19vcmlnaW5hbFNldFRyYW5zZm9ybSA9IGN0eC5zZXRUcmFuc2Zvcm07XG4gIGN0eC5fX29yaWdpbmFsUmVzZXRUcmFuc2Zvcm0gPSBjdHgucmVzZXRUcmFuc2Zvcm07XG4gIGN0eC5fX29yaWdpbmFsQ2xpcCA9IGN0eC5jbGlwO1xuICBjdHguX19vcmlnaW5hbE1vdmVUbyA9IGN0eC5tb3ZlVG87XG4gIGN0eC5fX29yaWdpbmFsTGluZVRvID0gY3R4LmxpbmVUbztcbiAgY3R4Ll9fb3JpZ2luYWxCZXppZXJDdXJ2ZVRvID0gY3R4LmJlemllckN1cnZlVG87XG4gIGN0eC5fX29yaWdpbmFsUmVjdCA9IGN0eC5yZWN0O1xuICBjdHguX19vcmlnaW5hbENsb3NlUGF0aCA9IGN0eC5jbG9zZVBhdGg7XG4gIGN0eC5fX29yaWdpbmFsQmVnaW5QYXRoID0gY3R4LmJlZ2luUGF0aDtcblxuICBjdHguX3JlbW92ZU1pcnJvcmluZyA9ICgpID0+IHtcbiAgICBjdHguc2F2ZSA9IGN0eC5fX29yaWdpbmFsU2F2ZTtcbiAgICBjdHgucmVzdG9yZSA9IGN0eC5fX29yaWdpbmFsUmVzdG9yZTtcbiAgICBjdHgucm90YXRlID0gY3R4Ll9fb3JpZ2luYWxSb3RhdGU7XG4gICAgY3R4LnNjYWxlID0gY3R4Ll9fb3JpZ2luYWxTY2FsZTtcbiAgICBjdHgudHJhbnNsYXRlID0gY3R4Ll9fb3JpZ2luYWxUcmFuc2xhdGU7XG4gICAgY3R4LnRyYW5zZm9ybSA9IGN0eC5fX29yaWdpbmFsVHJhbnNmb3JtO1xuICAgIGN0eC5zZXRUcmFuc2Zvcm0gPSBjdHguX19vcmlnaW5hbFNldFRyYW5zZm9ybTtcbiAgICBjdHgucmVzZXRUcmFuc2Zvcm0gPSBjdHguX19vcmlnaW5hbFJlc2V0VHJhbnNmb3JtO1xuXG4gICAgY3R4LmNsaXAgPSBjdHguX19vcmlnaW5hbENsaXA7XG4gICAgY3R4Lm1vdmVUbyA9IGN0eC5fX29yaWdpbmFsTW92ZVRvO1xuICAgIGN0eC5saW5lVG8gPSBjdHguX19vcmlnaW5hbExpbmVUbztcbiAgICBjdHguYmV6aWVyQ3VydmVUbyA9IGN0eC5fX29yaWdpbmFsQmV6aWVyQ3VydmVUbztcbiAgICBjdHgucmVjdCA9IGN0eC5fX29yaWdpbmFsUmVjdDtcbiAgICBjdHguY2xvc2VQYXRoID0gY3R4Ll9fb3JpZ2luYWxDbG9zZVBhdGg7XG4gICAgY3R4LmJlZ2luUGF0aCA9IGN0eC5fX29yaWdpbmFsQmVnaW5QYXRoO1xuICAgIGRlbGV0ZSBjdHguX3JlbW92ZU1pcnJvcmluZztcbiAgfTtcblxuICBjdHguc2F2ZSA9IGZ1bmN0aW9uIGN0eFNhdmUoKSB7XG4gICAgZGVzdEN0eC5zYXZlKCk7XG4gICAgdGhpcy5fX29yaWdpbmFsU2F2ZSgpO1xuICB9O1xuXG4gIGN0eC5yZXN0b3JlID0gZnVuY3Rpb24gY3R4UmVzdG9yZSgpIHtcbiAgICBkZXN0Q3R4LnJlc3RvcmUoKTtcbiAgICB0aGlzLl9fb3JpZ2luYWxSZXN0b3JlKCk7XG4gIH07XG5cbiAgY3R4LnRyYW5zbGF0ZSA9IGZ1bmN0aW9uIGN0eFRyYW5zbGF0ZSh4LCB5KSB7XG4gICAgZGVzdEN0eC50cmFuc2xhdGUoeCwgeSk7XG4gICAgdGhpcy5fX29yaWdpbmFsVHJhbnNsYXRlKHgsIHkpO1xuICB9O1xuXG4gIGN0eC5zY2FsZSA9IGZ1bmN0aW9uIGN0eFNjYWxlKHgsIHkpIHtcbiAgICBkZXN0Q3R4LnNjYWxlKHgsIHkpO1xuICAgIHRoaXMuX19vcmlnaW5hbFNjYWxlKHgsIHkpO1xuICB9O1xuXG4gIGN0eC50cmFuc2Zvcm0gPSBmdW5jdGlvbiBjdHhUcmFuc2Zvcm0oYSwgYiwgYywgZCwgZSwgZikge1xuICAgIGRlc3RDdHgudHJhbnNmb3JtKGEsIGIsIGMsIGQsIGUsIGYpO1xuICAgIHRoaXMuX19vcmlnaW5hbFRyYW5zZm9ybShhLCBiLCBjLCBkLCBlLCBmKTtcbiAgfTtcblxuICBjdHguc2V0VHJhbnNmb3JtID0gZnVuY3Rpb24gY3R4U2V0VHJhbnNmb3JtKGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICBkZXN0Q3R4LnNldFRyYW5zZm9ybShhLCBiLCBjLCBkLCBlLCBmKTtcbiAgICB0aGlzLl9fb3JpZ2luYWxTZXRUcmFuc2Zvcm0oYSwgYiwgYywgZCwgZSwgZik7XG4gIH07XG5cbiAgY3R4LnJlc2V0VHJhbnNmb3JtID0gZnVuY3Rpb24gY3R4UmVzZXRUcmFuc2Zvcm0oKSB7XG4gICAgZGVzdEN0eC5yZXNldFRyYW5zZm9ybSgpO1xuICAgIHRoaXMuX19vcmlnaW5hbFJlc2V0VHJhbnNmb3JtKCk7XG4gIH07XG5cbiAgY3R4LnJvdGF0ZSA9IGZ1bmN0aW9uIGN0eFJvdGF0ZShhbmdsZSkge1xuICAgIGRlc3RDdHgucm90YXRlKGFuZ2xlKTtcbiAgICB0aGlzLl9fb3JpZ2luYWxSb3RhdGUoYW5nbGUpO1xuICB9O1xuXG4gIGN0eC5jbGlwID0gZnVuY3Rpb24gY3R4Um90YXRlKHJ1bGUpIHtcbiAgICBkZXN0Q3R4LmNsaXAocnVsZSk7XG4gICAgdGhpcy5fX29yaWdpbmFsQ2xpcChydWxlKTtcbiAgfTtcblxuICBjdHgubW92ZVRvID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICBkZXN0Q3R4Lm1vdmVUbyh4LCB5KTtcbiAgICB0aGlzLl9fb3JpZ2luYWxNb3ZlVG8oeCwgeSk7XG4gIH07XG5cbiAgY3R4LmxpbmVUbyA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgZGVzdEN0eC5saW5lVG8oeCwgeSk7XG4gICAgdGhpcy5fX29yaWdpbmFsTGluZVRvKHgsIHkpO1xuICB9O1xuXG4gIGN0eC5iZXppZXJDdXJ2ZVRvID0gZnVuY3Rpb24gKGNwMXgsIGNwMXksIGNwMngsIGNwMnksIHgsIHkpIHtcbiAgICBkZXN0Q3R4LmJlemllckN1cnZlVG8oY3AxeCwgY3AxeSwgY3AyeCwgY3AyeSwgeCwgeSk7XG4gICAgdGhpcy5fX29yaWdpbmFsQmV6aWVyQ3VydmVUbyhjcDF4LCBjcDF5LCBjcDJ4LCBjcDJ5LCB4LCB5KTtcbiAgfTtcblxuICBjdHgucmVjdCA9IGZ1bmN0aW9uICh4LCB5LCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgZGVzdEN0eC5yZWN0KHgsIHksIHdpZHRoLCBoZWlnaHQpO1xuICAgIHRoaXMuX19vcmlnaW5hbFJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gIH07XG5cbiAgY3R4LmNsb3NlUGF0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICBkZXN0Q3R4LmNsb3NlUGF0aCgpO1xuICAgIHRoaXMuX19vcmlnaW5hbENsb3NlUGF0aCgpO1xuICB9O1xuXG4gIGN0eC5iZWdpblBhdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgZGVzdEN0eC5iZWdpblBhdGgoKTtcbiAgICB0aGlzLl9fb3JpZ2luYWxCZWdpblBhdGgoKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYWRkQ29udGV4dEN1cnJlbnRUcmFuc2Zvcm0oY3R4KSB7XG4gIGlmIChjdHguX3RyYW5zZm9ybVN0YWNrKSB7XG4gICAgLy8gUmVzZXQgdGhlIHRyYW5zZm9ybSBzdGFjay5cbiAgICBjdHguX3RyYW5zZm9ybVN0YWNrID0gW107XG4gIH1cbiAgLy8gSWYgdGhlIGNvbnRleHQgZG9lc24ndCBleHBvc2UgYSBgbW96Q3VycmVudFRyYW5zZm9ybWAsIGFkZCBhIEpTIGJhc2VkIG9uZS5cbiAgaWYgKGN0eC5tb3pDdXJyZW50VHJhbnNmb3JtKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGN0eC5fb3JpZ2luYWxTYXZlID0gY3R4LnNhdmU7XG4gIGN0eC5fb3JpZ2luYWxSZXN0b3JlID0gY3R4LnJlc3RvcmU7XG4gIGN0eC5fb3JpZ2luYWxSb3RhdGUgPSBjdHgucm90YXRlO1xuICBjdHguX29yaWdpbmFsU2NhbGUgPSBjdHguc2NhbGU7XG4gIGN0eC5fb3JpZ2luYWxUcmFuc2xhdGUgPSBjdHgudHJhbnNsYXRlO1xuICBjdHguX29yaWdpbmFsVHJhbnNmb3JtID0gY3R4LnRyYW5zZm9ybTtcbiAgY3R4Ll9vcmlnaW5hbFNldFRyYW5zZm9ybSA9IGN0eC5zZXRUcmFuc2Zvcm07XG4gIGN0eC5fb3JpZ2luYWxSZXNldFRyYW5zZm9ybSA9IGN0eC5yZXNldFRyYW5zZm9ybTtcblxuICBjdHguX3RyYW5zZm9ybU1hdHJpeCA9IGN0eC5fdHJhbnNmb3JtTWF0cml4IHx8IFsxLCAwLCAwLCAxLCAwLCAwXTtcbiAgY3R4Ll90cmFuc2Zvcm1TdGFjayA9IFtdO1xuXG4gIHRyeSB7XG4gICAgLy8gVGhlIGNhbGwgdG8gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIHRocm93cyBhbiBleGNlcHRpb24gaW4gTm9kZS5qczpcbiAgICAvLyBcIlR5cGVFcnJvcjogTWV0aG9kIGxpbmVXaWR0aCBjYWxsZWQgb24gaW5jb21wYXRpYmxlIHJlY2VpdmVyXG4gICAgLy8gICM8Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEPlwiLlxuICAgIGNvbnN0IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKFxuICAgICAgT2JqZWN0LmdldFByb3RvdHlwZU9mKGN0eCksXG4gICAgICBcImxpbmVXaWR0aFwiXG4gICAgKTtcblxuICAgIGN0eC5fc2V0TGluZVdpZHRoID0gZGVzYy5zZXQ7XG4gICAgY3R4Ll9nZXRMaW5lV2lkdGggPSBkZXNjLmdldDtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIFwibGluZVdpZHRoXCIsIHtcbiAgICAgIHNldDogZnVuY3Rpb24gc2V0TGluZVdpZHRoKHdpZHRoKSB7XG4gICAgICAgIHRoaXMuX3NldExpbmVXaWR0aCh3aWR0aCAqIExJTkVXSURUSF9TQ0FMRV9GQUNUT1IpO1xuICAgICAgfSxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0TGluZVdpZHRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0TGluZVdpZHRoKCk7XG4gICAgICB9LFxuICAgIH0pO1xuICB9IGNhdGNoIChfKSB7fVxuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIFwibW96Q3VycmVudFRyYW5zZm9ybVwiLCB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXRDdXJyZW50VHJhbnNmb3JtKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zZm9ybU1hdHJpeDtcbiAgICB9LFxuICB9KTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBcIm1vekN1cnJlbnRUcmFuc2Zvcm1JbnZlcnNlXCIsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldEN1cnJlbnRUcmFuc2Zvcm1JbnZlcnNlKCkge1xuICAgICAgLy8gQ2FsY3VsYXRpb24gZG9uZSB1c2luZyBXb2xmcmFtQWxwaGE6XG4gICAgICAvLyBodHRwOi8vd3d3LndvbGZyYW1hbHBoYS5jb20vaW5wdXQvP1xuICAgICAgLy8gICBpPUludmVyc2Ure3thJTJDK2MlMkMrZX0lMkMre2IlMkMrZCUyQytmfSUyQyt7MCUyQyswJTJDKzF9fVxuXG4gICAgICBjb25zdCBbYSwgYiwgYywgZCwgZSwgZl0gPSB0aGlzLl90cmFuc2Zvcm1NYXRyaXg7XG4gICAgICBjb25zdCBhZF9iYyA9IGEgKiBkIC0gYiAqIGM7XG4gICAgICBjb25zdCBiY19hZCA9IGIgKiBjIC0gYSAqIGQ7XG5cbiAgICAgIHJldHVybiBbXG4gICAgICAgIGQgLyBhZF9iYyxcbiAgICAgICAgYiAvIGJjX2FkLFxuICAgICAgICBjIC8gYmNfYWQsXG4gICAgICAgIGEgLyBhZF9iYyxcbiAgICAgICAgKGQgKiBlIC0gYyAqIGYpIC8gYmNfYWQsXG4gICAgICAgIChiICogZSAtIGEgKiBmKSAvIGFkX2JjLFxuICAgICAgXTtcbiAgICB9LFxuICB9KTtcblxuICBjdHguc2F2ZSA9IGZ1bmN0aW9uIGN0eFNhdmUoKSB7XG4gICAgY29uc3Qgb2xkID0gdGhpcy5fdHJhbnNmb3JtTWF0cml4O1xuICAgIHRoaXMuX3RyYW5zZm9ybVN0YWNrLnB1c2gob2xkKTtcbiAgICB0aGlzLl90cmFuc2Zvcm1NYXRyaXggPSBvbGQuc2xpY2UoMCwgNik7XG5cbiAgICB0aGlzLl9vcmlnaW5hbFNhdmUoKTtcbiAgfTtcblxuICBjdHgucmVzdG9yZSA9IGZ1bmN0aW9uIGN0eFJlc3RvcmUoKSB7XG4gICAgaWYgKHRoaXMuX3RyYW5zZm9ybVN0YWNrLmxlbmd0aCA9PT0gMCkge1xuICAgICAgd2FybihcIlRyaWVkIHRvIHJlc3RvcmUgYSBjdHggd2hlbiB0aGUgc3RhY2sgd2FzIGFscmVhZHkgZW1wdHkuXCIpO1xuICAgIH1cbiAgICBjb25zdCBwcmV2ID0gdGhpcy5fdHJhbnNmb3JtU3RhY2sucG9wKCk7XG4gICAgaWYgKHByZXYpIHtcbiAgICAgIHRoaXMuX3RyYW5zZm9ybU1hdHJpeCA9IHByZXY7XG4gICAgICB0aGlzLl9vcmlnaW5hbFJlc3RvcmUoKTtcbiAgICB9XG4gIH07XG5cbiAgY3R4LnRyYW5zbGF0ZSA9IGZ1bmN0aW9uIGN0eFRyYW5zbGF0ZSh4LCB5KSB7XG4gICAgY29uc3QgbSA9IHRoaXMuX3RyYW5zZm9ybU1hdHJpeDtcbiAgICBtWzRdID0gbVswXSAqIHggKyBtWzJdICogeSArIG1bNF07XG4gICAgbVs1XSA9IG1bMV0gKiB4ICsgbVszXSAqIHkgKyBtWzVdO1xuXG4gICAgdGhpcy5fb3JpZ2luYWxUcmFuc2xhdGUoeCwgeSk7XG4gIH07XG5cbiAgY3R4LnNjYWxlID0gZnVuY3Rpb24gY3R4U2NhbGUoeCwgeSkge1xuICAgIGNvbnN0IG0gPSB0aGlzLl90cmFuc2Zvcm1NYXRyaXg7XG4gICAgbVswXSAqPSB4O1xuICAgIG1bMV0gKj0geDtcbiAgICBtWzJdICo9IHk7XG4gICAgbVszXSAqPSB5O1xuXG4gICAgdGhpcy5fb3JpZ2luYWxTY2FsZSh4LCB5KTtcbiAgfTtcblxuICBjdHgudHJhbnNmb3JtID0gZnVuY3Rpb24gY3R4VHJhbnNmb3JtKGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICBjb25zdCBtID0gdGhpcy5fdHJhbnNmb3JtTWF0cml4O1xuICAgIHRoaXMuX3RyYW5zZm9ybU1hdHJpeCA9IFtcbiAgICAgIG1bMF0gKiBhICsgbVsyXSAqIGIsXG4gICAgICBtWzFdICogYSArIG1bM10gKiBiLFxuICAgICAgbVswXSAqIGMgKyBtWzJdICogZCxcbiAgICAgIG1bMV0gKiBjICsgbVszXSAqIGQsXG4gICAgICBtWzBdICogZSArIG1bMl0gKiBmICsgbVs0XSxcbiAgICAgIG1bMV0gKiBlICsgbVszXSAqIGYgKyBtWzVdLFxuICAgIF07XG5cbiAgICBjdHguX29yaWdpbmFsVHJhbnNmb3JtKGEsIGIsIGMsIGQsIGUsIGYpO1xuICB9O1xuXG4gIGN0eC5zZXRUcmFuc2Zvcm0gPSBmdW5jdGlvbiBjdHhTZXRUcmFuc2Zvcm0oYSwgYiwgYywgZCwgZSwgZikge1xuICAgIHRoaXMuX3RyYW5zZm9ybU1hdHJpeCA9IFthLCBiLCBjLCBkLCBlLCBmXTtcblxuICAgIGN0eC5fb3JpZ2luYWxTZXRUcmFuc2Zvcm0oYSwgYiwgYywgZCwgZSwgZik7XG4gIH07XG5cbiAgY3R4LnJlc2V0VHJhbnNmb3JtID0gZnVuY3Rpb24gY3R4UmVzZXRUcmFuc2Zvcm0oKSB7XG4gICAgdGhpcy5fdHJhbnNmb3JtTWF0cml4ID0gWzEsIDAsIDAsIDEsIDAsIDBdO1xuXG4gICAgY3R4Ll9vcmlnaW5hbFJlc2V0VHJhbnNmb3JtKCk7XG4gIH07XG5cbiAgY3R4LnJvdGF0ZSA9IGZ1bmN0aW9uIGN0eFJvdGF0ZShhbmdsZSkge1xuICAgIGNvbnN0IGNvc1ZhbHVlID0gTWF0aC5jb3MoYW5nbGUpO1xuICAgIGNvbnN0IHNpblZhbHVlID0gTWF0aC5zaW4oYW5nbGUpO1xuXG4gICAgY29uc3QgbSA9IHRoaXMuX3RyYW5zZm9ybU1hdHJpeDtcbiAgICB0aGlzLl90cmFuc2Zvcm1NYXRyaXggPSBbXG4gICAgICBtWzBdICogY29zVmFsdWUgKyBtWzJdICogc2luVmFsdWUsXG4gICAgICBtWzFdICogY29zVmFsdWUgKyBtWzNdICogc2luVmFsdWUsXG4gICAgICBtWzBdICogLXNpblZhbHVlICsgbVsyXSAqIGNvc1ZhbHVlLFxuICAgICAgbVsxXSAqIC1zaW5WYWx1ZSArIG1bM10gKiBjb3NWYWx1ZSxcbiAgICAgIG1bNF0sXG4gICAgICBtWzVdLFxuICAgIF07XG5cbiAgICB0aGlzLl9vcmlnaW5hbFJvdGF0ZShhbmdsZSk7XG4gIH07XG59XG5cbmNsYXNzIENhY2hlZENhbnZhc2VzIHtcbiAgY29uc3RydWN0b3IoY2FudmFzRmFjdG9yeSkge1xuICAgIHRoaXMuY2FudmFzRmFjdG9yeSA9IGNhbnZhc0ZhY3Rvcnk7XG4gICAgdGhpcy5jYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH1cblxuICBnZXRDYW52YXMoaWQsIHdpZHRoLCBoZWlnaHQsIHRyYWNrVHJhbnNmb3JtKSB7XG4gICAgbGV0IGNhbnZhc0VudHJ5O1xuICAgIGlmICh0aGlzLmNhY2hlW2lkXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjYW52YXNFbnRyeSA9IHRoaXMuY2FjaGVbaWRdO1xuICAgICAgdGhpcy5jYW52YXNGYWN0b3J5LnJlc2V0KGNhbnZhc0VudHJ5LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIC8vIHJlc2V0IGNhbnZhcyB0cmFuc2Zvcm0gZm9yIGVtdWxhdGVkIG1vekN1cnJlbnRUcmFuc2Zvcm0sIGlmIG5lZWRlZFxuICAgICAgY2FudmFzRW50cnkuY29udGV4dC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbnZhc0VudHJ5ID0gdGhpcy5jYW52YXNGYWN0b3J5LmNyZWF0ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIHRoaXMuY2FjaGVbaWRdID0gY2FudmFzRW50cnk7XG4gICAgfVxuICAgIGlmICh0cmFja1RyYW5zZm9ybSkge1xuICAgICAgYWRkQ29udGV4dEN1cnJlbnRUcmFuc2Zvcm0oY2FudmFzRW50cnkuY29udGV4dCk7XG4gICAgfVxuICAgIHJldHVybiBjYW52YXNFbnRyeTtcbiAgfVxuXG4gIGRlbGV0ZShpZCkge1xuICAgIGRlbGV0ZSB0aGlzLmNhY2hlW2lkXTtcbiAgfVxuXG4gIGNsZWFyKCkge1xuICAgIGZvciAoY29uc3QgaWQgaW4gdGhpcy5jYWNoZSkge1xuICAgICAgY29uc3QgY2FudmFzRW50cnkgPSB0aGlzLmNhY2hlW2lkXTtcbiAgICAgIHRoaXMuY2FudmFzRmFjdG9yeS5kZXN0cm95KGNhbnZhc0VudHJ5KTtcbiAgICAgIGRlbGV0ZSB0aGlzLmNhY2hlW2lkXTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZHJhd0ltYWdlQXRJbnRlZ2VyQ29vcmRzKFxuICBjdHgsXG4gIHNyY0ltZyxcbiAgc3JjWCxcbiAgc3JjWSxcbiAgc3JjVyxcbiAgc3JjSCxcbiAgZGVzdFgsXG4gIGRlc3RZLFxuICBkZXN0VyxcbiAgZGVzdEhcbikge1xuICBjb25zdCBbYSwgYiwgYywgZCwgdHgsIHR5XSA9IGN0eC5tb3pDdXJyZW50VHJhbnNmb3JtO1xuICBpZiAoYiA9PT0gMCAmJiBjID09PSAwKSB7XG4gICAgLy8gdG9wLWxlZnQgY29ybmVyIGlzIGF0IChYLCBZKSBhbmRcbiAgICAvLyBib3R0b20tcmlnaHQgb25lIGlzIGF0IChYICsgd2lkdGgsIFkgKyBoZWlnaHQpLlxuXG4gICAgLy8gSWYgbGVmdFggaXMgNC4zMjEgdGhlbiBpdCdzIHJvdW5kZWQgdG8gNC5cbiAgICAvLyBJZiB3aWR0aCBpcyAxMC40MzIgdGhlbiBpdCdzIHJvdW5kZWQgdG8gMTEgYmVjYXVzZVxuICAgIC8vIHJpZ2h0WCA9IGxlZnRYICsgd2lkdGggPSAxNC43NTMgd2hpY2ggaXMgcm91bmRlZCB0byAxNVxuICAgIC8vIHNvIGFmdGVyIHJvdW5kaW5nIHRoZSB0b3RhbCB3aWR0aCBpcyAxMSAoMTUgLSA0KS5cbiAgICAvLyBJdCdzIHdoeSB3ZSBjYW4ndCBqdXN0IGZsb29yL2NlaWwgdW5pZm9ybWx5LCBpdCBqdXN0IGRlcGVuZHNcbiAgICAvLyBvbiB0aGUgdmFsdWVzIHdlJ3ZlLlxuXG4gICAgY29uc3QgdGxYID0gZGVzdFggKiBhICsgdHg7XG4gICAgY29uc3QgclRsWCA9IE1hdGgucm91bmQodGxYKTtcbiAgICBjb25zdCB0bFkgPSBkZXN0WSAqIGQgKyB0eTtcbiAgICBjb25zdCByVGxZID0gTWF0aC5yb3VuZCh0bFkpO1xuICAgIGNvbnN0IGJyWCA9IChkZXN0WCArIGRlc3RXKSAqIGEgKyB0eDtcblxuICAgIC8vIFNvbWUgcGRmIGNvbnRhaW5zIGltYWdlcyB3aXRoIDF4MSBpbWFnZXMgc28gaW4gY2FzZSBvZiAwLXdpZHRoIGFmdGVyXG4gICAgLy8gc2NhbGluZyB3ZSBtdXN0IGZhbGxiYWNrIG9uIDEgdG8gYmUgc3VyZSB0aGVyZSBpcyBzb21ldGhpbmcuXG4gICAgY29uc3QgcldpZHRoID0gTWF0aC5hYnMoTWF0aC5yb3VuZChiclgpIC0gclRsWCkgfHwgMTtcbiAgICBjb25zdCBiclkgPSAoZGVzdFkgKyBkZXN0SCkgKiBkICsgdHk7XG4gICAgY29uc3QgckhlaWdodCA9IE1hdGguYWJzKE1hdGgucm91bmQoYnJZKSAtIHJUbFkpIHx8IDE7XG5cbiAgICAvLyBXZSBtdXN0IGFwcGx5IGEgdHJhbnNmb3JtYXRpb24gaW4gb3JkZXIgdG8gYXBwbHkgaXQgb24gdGhlIGltYWdlIGl0c2VsZi5cbiAgICAvLyBGb3IgZXhhbXBsZSBpZiBhID09IDEgJiYgZCA9PSAtMSwgaXQgbWVhbnMgdGhhdCB0aGUgaW1hZ2UgaXRzZWxmIGlzXG4gICAgLy8gbWlycm9yZWQgdy5yLnQuIHRoZSB4LWF4aXMuXG4gICAgY3R4LnNldFRyYW5zZm9ybShNYXRoLnNpZ24oYSksIDAsIDAsIE1hdGguc2lnbihkKSwgclRsWCwgclRsWSk7XG4gICAgY3R4LmRyYXdJbWFnZShzcmNJbWcsIHNyY1gsIHNyY1ksIHNyY1csIHNyY0gsIDAsIDAsIHJXaWR0aCwgckhlaWdodCk7XG4gICAgY3R4LnNldFRyYW5zZm9ybShhLCBiLCBjLCBkLCB0eCwgdHkpO1xuXG4gICAgcmV0dXJuIFtyV2lkdGgsIHJIZWlnaHRdO1xuICB9XG5cbiAgaWYgKGEgPT09IDAgJiYgZCA9PT0gMCkge1xuICAgIC8vIFRoaXMgcGF0aCBpcyB0YWtlbiBpbiBpc3N1ZTk0NjIucGRmIChwYWdlIDMpLlxuICAgIGNvbnN0IHRsWCA9IGRlc3RZICogYyArIHR4O1xuICAgIGNvbnN0IHJUbFggPSBNYXRoLnJvdW5kKHRsWCk7XG4gICAgY29uc3QgdGxZID0gZGVzdFggKiBiICsgdHk7XG4gICAgY29uc3QgclRsWSA9IE1hdGgucm91bmQodGxZKTtcbiAgICBjb25zdCBiclggPSAoZGVzdFkgKyBkZXN0SCkgKiBjICsgdHg7XG4gICAgY29uc3QgcldpZHRoID0gTWF0aC5hYnMoTWF0aC5yb3VuZChiclgpIC0gclRsWCkgfHwgMTtcbiAgICBjb25zdCBiclkgPSAoZGVzdFggKyBkZXN0VykgKiBiICsgdHk7XG4gICAgY29uc3QgckhlaWdodCA9IE1hdGguYWJzKE1hdGgucm91bmQoYnJZKSAtIHJUbFkpIHx8IDE7XG5cbiAgICBjdHguc2V0VHJhbnNmb3JtKDAsIE1hdGguc2lnbihiKSwgTWF0aC5zaWduKGMpLCAwLCByVGxYLCByVGxZKTtcbiAgICBjdHguZHJhd0ltYWdlKHNyY0ltZywgc3JjWCwgc3JjWSwgc3JjVywgc3JjSCwgMCwgMCwgckhlaWdodCwgcldpZHRoKTtcbiAgICBjdHguc2V0VHJhbnNmb3JtKGEsIGIsIGMsIGQsIHR4LCB0eSk7XG5cbiAgICByZXR1cm4gW3JIZWlnaHQsIHJXaWR0aF07XG4gIH1cblxuICAvLyBOb3QgYSBzY2FsZSBtYXRyaXggc28gbGV0IHRoZSByZW5kZXIgaGFuZGxlIHRoZSBjYXNlIHdpdGhvdXQgcm91bmRpbmcuXG4gIGN0eC5kcmF3SW1hZ2Uoc3JjSW1nLCBzcmNYLCBzcmNZLCBzcmNXLCBzcmNILCBkZXN0WCwgZGVzdFksIGRlc3RXLCBkZXN0SCk7XG5cbiAgY29uc3Qgc2NhbGVYID0gTWF0aC5oeXBvdChhLCBiKTtcbiAgY29uc3Qgc2NhbGVZID0gTWF0aC5oeXBvdChjLCBkKTtcbiAgcmV0dXJuIFtzY2FsZVggKiBkZXN0Vywgc2NhbGVZICogZGVzdEhdO1xufVxuXG5mdW5jdGlvbiBjb21waWxlVHlwZTNHbHlwaChpbWdEYXRhKSB7XG4gIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gaW1nRGF0YTtcbiAgaWYgKFxuICAgICFDT01QSUxFX1RZUEUzX0dMWVBIUyB8fFxuICAgIHdpZHRoID4gTUFYX1NJWkVfVE9fQ09NUElMRSB8fFxuICAgIGhlaWdodCA+IE1BWF9TSVpFX1RPX0NPTVBJTEVcbiAgKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBQT0lOVF9UT19QUk9DRVNTX0xJTUlUID0gMTAwMDtcbiAgY29uc3QgUE9JTlRfVFlQRVMgPSBuZXcgVWludDhBcnJheShbXG4gICAgMCwgMiwgNCwgMCwgMSwgMCwgNSwgNCwgOCwgMTAsIDAsIDgsIDAsIDIsIDEsIDAsXG4gIF0pO1xuXG4gIGNvbnN0IHdpZHRoMSA9IHdpZHRoICsgMTtcbiAgbGV0IHBvaW50cyA9IG5ldyBVaW50OEFycmF5KHdpZHRoMSAqIChoZWlnaHQgKyAxKSk7XG4gIGxldCBpLCBqLCBqMDtcblxuICAvLyBkZWNvZGVzIGJpdC1wYWNrZWQgbWFzayBkYXRhXG4gIGNvbnN0IGxpbmVTaXplID0gKHdpZHRoICsgNykgJiB+NztcbiAgbGV0IGRhdGEgPSBuZXcgVWludDhBcnJheShsaW5lU2l6ZSAqIGhlaWdodCksXG4gICAgcG9zID0gMDtcbiAgZm9yIChjb25zdCBlbGVtIG9mIGltZ0RhdGEuZGF0YSkge1xuICAgIGxldCBtYXNrID0gMTI4O1xuICAgIHdoaWxlIChtYXNrID4gMCkge1xuICAgICAgZGF0YVtwb3MrK10gPSBlbGVtICYgbWFzayA/IDAgOiAyNTU7XG4gICAgICBtYXNrID4+PSAxO1xuICAgIH1cbiAgfVxuXG4gIC8vIGZpbmRpbmcgaW50ZXJlc3RpbmcgcG9pbnRzOiBldmVyeSBwb2ludCBpcyBsb2NhdGVkIGJldHdlZW4gbWFzayBwaXhlbHMsXG4gIC8vIHNvIHRoZXJlIHdpbGwgYmUgcG9pbnRzIG9mIHRoZSAod2lkdGggKyAxKXgoaGVpZ2h0ICsgMSkgZ3JpZC4gRXZlcnkgcG9pbnRcbiAgLy8gd2lsbCBoYXZlIGZsYWdzIGFzc2lnbmVkIGJhc2VkIG9uIG5laWdoYm9yaW5nIG1hc2sgcGl4ZWxzOlxuICAvLyAgIDQgfCA4XG4gIC8vICAgLS1QLS1cbiAgLy8gICAyIHwgMVxuICAvLyBXZSBhcmUgaW50ZXJlc3RlZCBvbmx5IGluIHBvaW50cyB3aXRoIHRoZSBmbGFnczpcbiAgLy8gICAtIG91dHNpZGUgY29ybmVyczogMSwgMiwgNCwgODtcbiAgLy8gICAtIGluc2lkZSBjb3JuZXJzOiA3LCAxMSwgMTMsIDE0O1xuICAvLyAgIC0gYW5kLCBpbnRlcnNlY3Rpb25zOiA1LCAxMC5cbiAgbGV0IGNvdW50ID0gMDtcbiAgcG9zID0gMDtcbiAgaWYgKGRhdGFbcG9zXSAhPT0gMCkge1xuICAgIHBvaW50c1swXSA9IDE7XG4gICAgKytjb3VudDtcbiAgfVxuICBmb3IgKGogPSAxOyBqIDwgd2lkdGg7IGorKykge1xuICAgIGlmIChkYXRhW3Bvc10gIT09IGRhdGFbcG9zICsgMV0pIHtcbiAgICAgIHBvaW50c1tqXSA9IGRhdGFbcG9zXSA/IDIgOiAxO1xuICAgICAgKytjb3VudDtcbiAgICB9XG4gICAgcG9zKys7XG4gIH1cbiAgaWYgKGRhdGFbcG9zXSAhPT0gMCkge1xuICAgIHBvaW50c1tqXSA9IDI7XG4gICAgKytjb3VudDtcbiAgfVxuICBmb3IgKGkgPSAxOyBpIDwgaGVpZ2h0OyBpKyspIHtcbiAgICBwb3MgPSBpICogbGluZVNpemU7XG4gICAgajAgPSBpICogd2lkdGgxO1xuICAgIGlmIChkYXRhW3BvcyAtIGxpbmVTaXplXSAhPT0gZGF0YVtwb3NdKSB7XG4gICAgICBwb2ludHNbajBdID0gZGF0YVtwb3NdID8gMSA6IDg7XG4gICAgICArK2NvdW50O1xuICAgIH1cbiAgICAvLyAnc3VtJyBpcyB0aGUgcG9zaXRpb24gb2YgdGhlIGN1cnJlbnQgcGl4ZWwgY29uZmlndXJhdGlvbiBpbiB0aGUgJ1RZUEVTJ1xuICAgIC8vIGFycmF5IChpbiBvcmRlciA4LTEtMi00LCBzbyB3ZSBjYW4gdXNlICc+PjInIHRvIHNoaWZ0IHRoZSBjb2x1bW4pLlxuICAgIGxldCBzdW0gPSAoZGF0YVtwb3NdID8gNCA6IDApICsgKGRhdGFbcG9zIC0gbGluZVNpemVdID8gOCA6IDApO1xuICAgIGZvciAoaiA9IDE7IGogPCB3aWR0aDsgaisrKSB7XG4gICAgICBzdW0gPVxuICAgICAgICAoc3VtID4+IDIpICtcbiAgICAgICAgKGRhdGFbcG9zICsgMV0gPyA0IDogMCkgK1xuICAgICAgICAoZGF0YVtwb3MgLSBsaW5lU2l6ZSArIDFdID8gOCA6IDApO1xuICAgICAgaWYgKFBPSU5UX1RZUEVTW3N1bV0pIHtcbiAgICAgICAgcG9pbnRzW2owICsgal0gPSBQT0lOVF9UWVBFU1tzdW1dO1xuICAgICAgICArK2NvdW50O1xuICAgICAgfVxuICAgICAgcG9zKys7XG4gICAgfVxuICAgIGlmIChkYXRhW3BvcyAtIGxpbmVTaXplXSAhPT0gZGF0YVtwb3NdKSB7XG4gICAgICBwb2ludHNbajAgKyBqXSA9IGRhdGFbcG9zXSA/IDIgOiA0O1xuICAgICAgKytjb3VudDtcbiAgICB9XG5cbiAgICBpZiAoY291bnQgPiBQT0lOVF9UT19QUk9DRVNTX0xJTUlUKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwb3MgPSBsaW5lU2l6ZSAqIChoZWlnaHQgLSAxKTtcbiAgajAgPSBpICogd2lkdGgxO1xuICBpZiAoZGF0YVtwb3NdICE9PSAwKSB7XG4gICAgcG9pbnRzW2owXSA9IDg7XG4gICAgKytjb3VudDtcbiAgfVxuICBmb3IgKGogPSAxOyBqIDwgd2lkdGg7IGorKykge1xuICAgIGlmIChkYXRhW3Bvc10gIT09IGRhdGFbcG9zICsgMV0pIHtcbiAgICAgIHBvaW50c1tqMCArIGpdID0gZGF0YVtwb3NdID8gNCA6IDg7XG4gICAgICArK2NvdW50O1xuICAgIH1cbiAgICBwb3MrKztcbiAgfVxuICBpZiAoZGF0YVtwb3NdICE9PSAwKSB7XG4gICAgcG9pbnRzW2owICsgal0gPSA0O1xuICAgICsrY291bnQ7XG4gIH1cbiAgaWYgKGNvdW50ID4gUE9JTlRfVE9fUFJPQ0VTU19MSU1JVCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gYnVpbGRpbmcgb3V0bGluZXNcbiAgY29uc3Qgc3RlcHMgPSBuZXcgSW50MzJBcnJheShbMCwgd2lkdGgxLCAtMSwgMCwgLXdpZHRoMSwgMCwgMCwgMCwgMV0pO1xuICBsZXQgcGF0aCwgb3V0bGluZXMsIGNvb3JkcztcbiAgaWYgKCFpc05vZGVKUykge1xuICAgIHBhdGggPSBuZXcgUGF0aDJEKCk7XG4gIH0gZWxzZSB7XG4gICAgb3V0bGluZXMgPSBbXTtcbiAgfVxuXG4gIGZvciAoaSA9IDA7IGNvdW50ICYmIGkgPD0gaGVpZ2h0OyBpKyspIHtcbiAgICBsZXQgcCA9IGkgKiB3aWR0aDE7XG4gICAgY29uc3QgZW5kID0gcCArIHdpZHRoO1xuICAgIHdoaWxlIChwIDwgZW5kICYmICFwb2ludHNbcF0pIHtcbiAgICAgIHArKztcbiAgICB9XG4gICAgaWYgKHAgPT09IGVuZCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKHBhdGgpIHtcbiAgICAgIHBhdGgubW92ZVRvKHAgJSB3aWR0aDEsIGkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb29yZHMgPSBbcCAlIHdpZHRoMSwgaV07XG4gICAgfVxuXG4gICAgY29uc3QgcDAgPSBwO1xuICAgIGxldCB0eXBlID0gcG9pbnRzW3BdO1xuICAgIGRvIHtcbiAgICAgIGNvbnN0IHN0ZXAgPSBzdGVwc1t0eXBlXTtcbiAgICAgIGRvIHtcbiAgICAgICAgcCArPSBzdGVwO1xuICAgICAgfSB3aGlsZSAoIXBvaW50c1twXSk7XG5cbiAgICAgIGNvbnN0IHBwID0gcG9pbnRzW3BdO1xuICAgICAgaWYgKHBwICE9PSA1ICYmIHBwICE9PSAxMCkge1xuICAgICAgICAvLyBzZXQgbmV3IGRpcmVjdGlvblxuICAgICAgICB0eXBlID0gcHA7XG4gICAgICAgIC8vIGRlbGV0ZSBtYXJrXG4gICAgICAgIHBvaW50c1twXSA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyB0eXBlIGlzIDUgb3IgMTAsIGllLCBhIGNyb3NzaW5nXG4gICAgICAgIC8vIHNldCBuZXcgZGlyZWN0aW9uXG4gICAgICAgIHR5cGUgPSBwcCAmICgoMHgzMyAqIHR5cGUpID4+IDQpO1xuICAgICAgICAvLyBzZXQgbmV3IHR5cGUgZm9yIFwiZnV0dXJlIGhpdFwiXG4gICAgICAgIHBvaW50c1twXSAmPSAodHlwZSA+PiAyKSB8ICh0eXBlIDw8IDIpO1xuICAgICAgfVxuXG4gICAgICBpZiAocGF0aCkge1xuICAgICAgICBwYXRoLmxpbmVUbyhwICUgd2lkdGgxLCAocCAvIHdpZHRoMSkgfCAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvb3Jkcy5wdXNoKHAgJSB3aWR0aDEsIChwIC8gd2lkdGgxKSB8IDApO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXBvaW50c1twXSkge1xuICAgICAgICAtLWNvdW50O1xuICAgICAgfVxuICAgIH0gd2hpbGUgKHAwICE9PSBwKTtcblxuICAgIGlmICghcGF0aCkge1xuICAgICAgb3V0bGluZXMucHVzaChjb29yZHMpO1xuICAgIH1cbiAgICAtLWk7XG4gIH1cblxuICAvLyBJbW1lZGlhdGVseSByZWxlYXNlIHRoZSwgcG90ZW50aWFsbHkgbGFyZ2UsIGBVaW50OEFycmF5YHMgYWZ0ZXIgcGFyc2luZy5cbiAgZGF0YSA9IG51bGw7XG4gIHBvaW50cyA9IG51bGw7XG5cbiAgY29uc3QgZHJhd091dGxpbmUgPSBmdW5jdGlvbiAoYykge1xuICAgIGMuc2F2ZSgpO1xuICAgIC8vIHRoZSBwYXRoIHNoYWxsIGJlIHBhaW50ZWQgaW4gWzAuLjFdeFswLi4xXSBzcGFjZVxuICAgIGMuc2NhbGUoMSAvIHdpZHRoLCAtMSAvIGhlaWdodCk7XG4gICAgYy50cmFuc2xhdGUoMCwgLWhlaWdodCk7XG4gICAgaWYgKHBhdGgpIHtcbiAgICAgIGMuZmlsbChwYXRoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYy5iZWdpblBhdGgoKTtcbiAgICAgIGZvciAoY29uc3QgbyBvZiBvdXRsaW5lcykge1xuICAgICAgICBjLm1vdmVUbyhvWzBdLCBvWzFdKTtcbiAgICAgICAgZm9yIChsZXQgbCA9IDIsIGxsID0gby5sZW5ndGg7IGwgPCBsbDsgbCArPSAyKSB7XG4gICAgICAgICAgYy5saW5lVG8ob1tsXSwgb1tsICsgMV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjLmZpbGwoKTtcbiAgICB9XG4gICAgYy5iZWdpblBhdGgoKTtcbiAgICBjLnJlc3RvcmUoKTtcbiAgfTtcblxuICByZXR1cm4gZHJhd091dGxpbmU7XG59XG5cbmNsYXNzIENhbnZhc0V4dHJhU3RhdGUge1xuICBjb25zdHJ1Y3Rvcih3aWR0aCwgaGVpZ2h0KSB7XG4gICAgLy8gQXJlIHNvZnQgbWFza3MgYW5kIGFscGhhIHZhbHVlcyBzaGFwZXMgb3Igb3BhY2l0aWVzP1xuICAgIHRoaXMuYWxwaGFJc1NoYXBlID0gZmFsc2U7XG4gICAgdGhpcy5mb250U2l6ZSA9IDA7XG4gICAgdGhpcy5mb250U2l6ZVNjYWxlID0gMTtcbiAgICB0aGlzLnRleHRNYXRyaXggPSBJREVOVElUWV9NQVRSSVg7XG4gICAgdGhpcy50ZXh0TWF0cml4U2NhbGUgPSAxO1xuICAgIHRoaXMuZm9udE1hdHJpeCA9IEZPTlRfSURFTlRJVFlfTUFUUklYO1xuICAgIHRoaXMubGVhZGluZyA9IDA7XG4gICAgLy8gQ3VycmVudCBwb2ludCAoaW4gdXNlciBjb29yZGluYXRlcylcbiAgICB0aGlzLnggPSAwO1xuICAgIHRoaXMueSA9IDA7XG4gICAgLy8gU3RhcnQgb2YgdGV4dCBsaW5lIChpbiB0ZXh0IGNvb3JkaW5hdGVzKVxuICAgIHRoaXMubGluZVggPSAwO1xuICAgIHRoaXMubGluZVkgPSAwO1xuICAgIC8vIENoYXJhY3RlciBhbmQgd29yZCBzcGFjaW5nXG4gICAgdGhpcy5jaGFyU3BhY2luZyA9IDA7XG4gICAgdGhpcy53b3JkU3BhY2luZyA9IDA7XG4gICAgdGhpcy50ZXh0SFNjYWxlID0gMTtcbiAgICB0aGlzLnRleHRSZW5kZXJpbmdNb2RlID0gVGV4dFJlbmRlcmluZ01vZGUuRklMTDtcbiAgICB0aGlzLnRleHRSaXNlID0gMDtcbiAgICAvLyBEZWZhdWx0IGZvcmUgYW5kIGJhY2tncm91bmQgY29sb3JzXG4gICAgdGhpcy5maWxsQ29sb3IgPSBcIiMwMDAwMDBcIjtcbiAgICB0aGlzLnN0cm9rZUNvbG9yID0gXCIjMDAwMDAwXCI7XG4gICAgdGhpcy5wYXR0ZXJuRmlsbCA9IGZhbHNlO1xuICAgIC8vIE5vdGU6IGZpbGwgYWxwaGEgYXBwbGllcyB0byBhbGwgbm9uLXN0cm9raW5nIG9wZXJhdGlvbnNcbiAgICB0aGlzLmZpbGxBbHBoYSA9IDE7XG4gICAgdGhpcy5zdHJva2VBbHBoYSA9IDE7XG4gICAgdGhpcy5saW5lV2lkdGggPSAxO1xuICAgIHRoaXMuYWN0aXZlU01hc2sgPSBudWxsO1xuICAgIHRoaXMudHJhbnNmZXJNYXBzID0gbnVsbDtcblxuICAgIHRoaXMuc3RhcnROZXdQYXRoQW5kQ2xpcEJveChbMCwgMCwgd2lkdGgsIGhlaWdodF0pO1xuICB9XG5cbiAgY2xvbmUoKSB7XG4gICAgY29uc3QgY2xvbmUgPSBPYmplY3QuY3JlYXRlKHRoaXMpO1xuICAgIGNsb25lLmNsaXBCb3ggPSB0aGlzLmNsaXBCb3guc2xpY2UoKTtcbiAgICByZXR1cm4gY2xvbmU7XG4gIH1cblxuICBzZXRDdXJyZW50UG9pbnQoeCwgeSkge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgfVxuXG4gIHVwZGF0ZVBhdGhNaW5NYXgodHJhbnNmb3JtLCB4LCB5KSB7XG4gICAgW3gsIHldID0gVXRpbC5hcHBseVRyYW5zZm9ybShbeCwgeV0sIHRyYW5zZm9ybSk7XG4gICAgdGhpcy5taW5YID0gTWF0aC5taW4odGhpcy5taW5YLCB4KTtcbiAgICB0aGlzLm1pblkgPSBNYXRoLm1pbih0aGlzLm1pblksIHkpO1xuICAgIHRoaXMubWF4WCA9IE1hdGgubWF4KHRoaXMubWF4WCwgeCk7XG4gICAgdGhpcy5tYXhZID0gTWF0aC5tYXgodGhpcy5tYXhZLCB5KTtcbiAgfVxuXG4gIHVwZGF0ZVJlY3RNaW5NYXgodHJhbnNmb3JtLCByZWN0KSB7XG4gICAgY29uc3QgcDEgPSBVdGlsLmFwcGx5VHJhbnNmb3JtKHJlY3QsIHRyYW5zZm9ybSk7XG4gICAgY29uc3QgcDIgPSBVdGlsLmFwcGx5VHJhbnNmb3JtKHJlY3Quc2xpY2UoMiksIHRyYW5zZm9ybSk7XG4gICAgdGhpcy5taW5YID0gTWF0aC5taW4odGhpcy5taW5YLCBwMVswXSwgcDJbMF0pO1xuICAgIHRoaXMubWluWSA9IE1hdGgubWluKHRoaXMubWluWSwgcDFbMV0sIHAyWzFdKTtcbiAgICB0aGlzLm1heFggPSBNYXRoLm1heCh0aGlzLm1heFgsIHAxWzBdLCBwMlswXSk7XG4gICAgdGhpcy5tYXhZID0gTWF0aC5tYXgodGhpcy5tYXhZLCBwMVsxXSwgcDJbMV0pO1xuICB9XG5cbiAgdXBkYXRlU2NhbGluZ1BhdGhNaW5NYXgodHJhbnNmb3JtLCBtaW5NYXgpIHtcbiAgICBVdGlsLnNjYWxlTWluTWF4KHRyYW5zZm9ybSwgbWluTWF4KTtcbiAgICB0aGlzLm1pblggPSBNYXRoLm1pbih0aGlzLm1pblgsIG1pbk1heFswXSk7XG4gICAgdGhpcy5tYXhYID0gTWF0aC5tYXgodGhpcy5tYXhYLCBtaW5NYXhbMV0pO1xuICAgIHRoaXMubWluWSA9IE1hdGgubWluKHRoaXMubWluWSwgbWluTWF4WzJdKTtcbiAgICB0aGlzLm1heFkgPSBNYXRoLm1heCh0aGlzLm1heFksIG1pbk1heFszXSk7XG4gIH1cblxuICB1cGRhdGVDdXJ2ZVBhdGhNaW5NYXgodHJhbnNmb3JtLCB4MCwgeTAsIHgxLCB5MSwgeDIsIHkyLCB4MywgeTMsIG1pbk1heCkge1xuICAgIGNvbnN0IGJveCA9IFV0aWwuYmV6aWVyQm91bmRpbmdCb3goeDAsIHkwLCB4MSwgeTEsIHgyLCB5MiwgeDMsIHkzKTtcbiAgICBpZiAobWluTWF4KSB7XG4gICAgICBtaW5NYXhbMF0gPSBNYXRoLm1pbihtaW5NYXhbMF0sIGJveFswXSwgYm94WzJdKTtcbiAgICAgIG1pbk1heFsxXSA9IE1hdGgubWF4KG1pbk1heFsxXSwgYm94WzBdLCBib3hbMl0pO1xuICAgICAgbWluTWF4WzJdID0gTWF0aC5taW4obWluTWF4WzJdLCBib3hbMV0sIGJveFszXSk7XG4gICAgICBtaW5NYXhbM10gPSBNYXRoLm1heChtaW5NYXhbM10sIGJveFsxXSwgYm94WzNdKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVSZWN0TWluTWF4KHRyYW5zZm9ybSwgYm94KTtcbiAgfVxuXG4gIGdldFBhdGhCb3VuZGluZ0JveChwYXRoVHlwZSA9IFBhdGhUeXBlLkZJTEwsIHRyYW5zZm9ybSA9IG51bGwpIHtcbiAgICBjb25zdCBib3ggPSBbdGhpcy5taW5YLCB0aGlzLm1pblksIHRoaXMubWF4WCwgdGhpcy5tYXhZXTtcbiAgICBpZiAocGF0aFR5cGUgPT09IFBhdGhUeXBlLlNUUk9LRSkge1xuICAgICAgaWYgKCF0cmFuc2Zvcm0pIHtcbiAgICAgICAgdW5yZWFjaGFibGUoXCJTdHJva2UgYm91bmRpbmcgYm94IG11c3QgaW5jbHVkZSB0cmFuc2Zvcm0uXCIpO1xuICAgICAgfVxuICAgICAgLy8gU3Ryb2tlZCBwYXRocyBjYW4gYmUgb3V0c2lkZSBvZiB0aGUgcGF0aCBib3VuZGluZyBib3ggYnkgMS8yIHRoZSBsaW5lXG4gICAgICAvLyB3aWR0aC5cbiAgICAgIGNvbnN0IHNjYWxlID0gVXRpbC5zaW5ndWxhclZhbHVlRGVjb21wb3NlMmRTY2FsZSh0cmFuc2Zvcm0pO1xuICAgICAgY29uc3QgeFN0cm9rZVBhZCA9IChzY2FsZVswXSAqIHRoaXMubGluZVdpZHRoKSAvIDI7XG4gICAgICBjb25zdCB5U3Ryb2tlUGFkID0gKHNjYWxlWzFdICogdGhpcy5saW5lV2lkdGgpIC8gMjtcbiAgICAgIGJveFswXSAtPSB4U3Ryb2tlUGFkO1xuICAgICAgYm94WzFdIC09IHlTdHJva2VQYWQ7XG4gICAgICBib3hbMl0gKz0geFN0cm9rZVBhZDtcbiAgICAgIGJveFszXSArPSB5U3Ryb2tlUGFkO1xuICAgIH1cbiAgICByZXR1cm4gYm94O1xuICB9XG5cbiAgdXBkYXRlQ2xpcEZyb21QYXRoKCkge1xuICAgIGNvbnN0IGludGVyc2VjdCA9IFV0aWwuaW50ZXJzZWN0KHRoaXMuY2xpcEJveCwgdGhpcy5nZXRQYXRoQm91bmRpbmdCb3goKSk7XG4gICAgdGhpcy5zdGFydE5ld1BhdGhBbmRDbGlwQm94KGludGVyc2VjdCB8fCBbMCwgMCwgMCwgMF0pO1xuICB9XG5cbiAgaXNFbXB0eUNsaXAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWluWCA9PT0gSW5maW5pdHk7XG4gIH1cblxuICBzdGFydE5ld1BhdGhBbmRDbGlwQm94KGJveCkge1xuICAgIHRoaXMuY2xpcEJveCA9IGJveDtcbiAgICB0aGlzLm1pblggPSBJbmZpbml0eTtcbiAgICB0aGlzLm1pblkgPSBJbmZpbml0eTtcbiAgICB0aGlzLm1heFggPSAwO1xuICAgIHRoaXMubWF4WSA9IDA7XG4gIH1cblxuICBnZXRDbGlwcGVkUGF0aEJvdW5kaW5nQm94KHBhdGhUeXBlID0gUGF0aFR5cGUuRklMTCwgdHJhbnNmb3JtID0gbnVsbCkge1xuICAgIHJldHVybiBVdGlsLmludGVyc2VjdChcbiAgICAgIHRoaXMuY2xpcEJveCxcbiAgICAgIHRoaXMuZ2V0UGF0aEJvdW5kaW5nQm94KHBhdGhUeXBlLCB0cmFuc2Zvcm0pXG4gICAgKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwdXRCaW5hcnlJbWFnZURhdGEoY3R4LCBpbWdEYXRhLCB0cmFuc2Zlck1hcHMgPSBudWxsKSB7XG4gIGlmICh0eXBlb2YgSW1hZ2VEYXRhICE9PSBcInVuZGVmaW5lZFwiICYmIGltZ0RhdGEgaW5zdGFuY2VvZiBJbWFnZURhdGEpIHtcbiAgICBjdHgucHV0SW1hZ2VEYXRhKGltZ0RhdGEsIDAsIDApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIFB1dCB0aGUgaW1hZ2UgZGF0YSB0byB0aGUgY2FudmFzIGluIGNodW5rcywgcmF0aGVyIHRoYW4gcHV0dGluZyB0aGVcbiAgLy8gd2hvbGUgaW1hZ2UgYXQgb25jZS4gIFRoaXMgc2F2ZXMgSlMgbWVtb3J5LCBiZWNhdXNlIHRoZSBJbWFnZURhdGEgb2JqZWN0XG4gIC8vIGlzIHNtYWxsZXIuIEl0IGFsc28gcG9zc2libHkgc2F2ZXMgQysrIG1lbW9yeSB3aXRoaW4gdGhlIGltcGxlbWVudGF0aW9uXG4gIC8vIG9mIHB1dEltYWdlRGF0YSgpLiAoRS5nLiBpbiBGaXJlZm94IHdlIG1ha2UgdHdvIHNob3J0LWxpdmVkIGNvcGllcyBvZlxuICAvLyB0aGUgZGF0YSBwYXNzZWQgdG8gcHV0SW1hZ2VEYXRhKCkpLiB8bnwgc2hvdWxkbid0IGJlIHRvbyBzbWFsbCwgaG93ZXZlcixcbiAgLy8gYmVjYXVzZSB0b28gbWFueSBwdXRJbWFnZURhdGEoKSBjYWxscyB3aWxsIHNsb3cgdGhpbmdzIGRvd24uXG4gIC8vXG4gIC8vIE5vdGU6IGFzIHdyaXR0ZW4sIGlmIHRoZSBsYXN0IGNodW5rIGlzIHBhcnRpYWwsIHRoZSBwdXRJbWFnZURhdGEoKSBjYWxsXG4gIC8vIHdpbGwgKGNvbmNlcHR1YWxseSkgcHV0IHBpeGVscyBwYXN0IHRoZSBib3VuZHMgb2YgdGhlIGNhbnZhcy4gIEJ1dFxuICAvLyB0aGF0J3Mgb2s7IGFueSBzdWNoIHBpeGVscyBhcmUgaWdub3JlZC5cblxuICBjb25zdCBoZWlnaHQgPSBpbWdEYXRhLmhlaWdodCxcbiAgICB3aWR0aCA9IGltZ0RhdGEud2lkdGg7XG4gIGNvbnN0IHBhcnRpYWxDaHVua0hlaWdodCA9IGhlaWdodCAlIEZVTExfQ0hVTktfSEVJR0hUO1xuICBjb25zdCBmdWxsQ2h1bmtzID0gKGhlaWdodCAtIHBhcnRpYWxDaHVua0hlaWdodCkgLyBGVUxMX0NIVU5LX0hFSUdIVDtcbiAgY29uc3QgdG90YWxDaHVua3MgPSBwYXJ0aWFsQ2h1bmtIZWlnaHQgPT09IDAgPyBmdWxsQ2h1bmtzIDogZnVsbENodW5rcyArIDE7XG5cbiAgY29uc3QgY2h1bmtJbWdEYXRhID0gY3R4LmNyZWF0ZUltYWdlRGF0YSh3aWR0aCwgRlVMTF9DSFVOS19IRUlHSFQpO1xuICBsZXQgc3JjUG9zID0gMCxcbiAgICBkZXN0UG9zO1xuICBjb25zdCBzcmMgPSBpbWdEYXRhLmRhdGE7XG4gIGNvbnN0IGRlc3QgPSBjaHVua0ltZ0RhdGEuZGF0YTtcbiAgbGV0IGksIGosIHRoaXNDaHVua0hlaWdodCwgZWxlbXNJblRoaXNDaHVuaztcblxuICBsZXQgdHJhbnNmZXJNYXBSZWQsIHRyYW5zZmVyTWFwR3JlZW4sIHRyYW5zZmVyTWFwQmx1ZSwgdHJhbnNmZXJNYXBHcmF5O1xuICBpZiAodHJhbnNmZXJNYXBzKSB7XG4gICAgc3dpdGNoICh0cmFuc2Zlck1hcHMubGVuZ3RoKSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIHRyYW5zZmVyTWFwUmVkID0gdHJhbnNmZXJNYXBzWzBdO1xuICAgICAgICB0cmFuc2Zlck1hcEdyZWVuID0gdHJhbnNmZXJNYXBzWzBdO1xuICAgICAgICB0cmFuc2Zlck1hcEJsdWUgPSB0cmFuc2Zlck1hcHNbMF07XG4gICAgICAgIHRyYW5zZmVyTWFwR3JheSA9IHRyYW5zZmVyTWFwc1swXTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDQ6XG4gICAgICAgIHRyYW5zZmVyTWFwUmVkID0gdHJhbnNmZXJNYXBzWzBdO1xuICAgICAgICB0cmFuc2Zlck1hcEdyZWVuID0gdHJhbnNmZXJNYXBzWzFdO1xuICAgICAgICB0cmFuc2Zlck1hcEJsdWUgPSB0cmFuc2Zlck1hcHNbMl07XG4gICAgICAgIHRyYW5zZmVyTWFwR3JheSA9IHRyYW5zZmVyTWFwc1szXTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLy8gVGhlcmUgYXJlIG11bHRpcGxlIGZvcm1zIGluIHdoaWNoIHRoZSBwaXhlbCBkYXRhIGNhbiBiZSBwYXNzZWQsIGFuZFxuICAvLyBpbWdEYXRhLmtpbmQgdGVsbHMgdXMgd2hpY2ggb25lIHRoaXMgaXMuXG4gIGlmIChpbWdEYXRhLmtpbmQgPT09IEltYWdlS2luZC5HUkFZU0NBTEVfMUJQUCkge1xuICAgIC8vIEdyYXlzY2FsZSwgMSBiaXQgcGVyIHBpeGVsIChpLmUuIGJsYWNrLWFuZC13aGl0ZSkuXG4gICAgY29uc3Qgc3JjTGVuZ3RoID0gc3JjLmJ5dGVMZW5ndGg7XG4gICAgY29uc3QgZGVzdDMyID0gbmV3IFVpbnQzMkFycmF5KGRlc3QuYnVmZmVyLCAwLCBkZXN0LmJ5dGVMZW5ndGggPj4gMik7XG4gICAgY29uc3QgZGVzdDMyRGF0YUxlbmd0aCA9IGRlc3QzMi5sZW5ndGg7XG4gICAgY29uc3QgZnVsbFNyY0RpZmYgPSAod2lkdGggKyA3KSA+PiAzO1xuICAgIGxldCB3aGl0ZSA9IDB4ZmZmZmZmZmY7XG4gICAgbGV0IGJsYWNrID0gRmVhdHVyZVRlc3QuaXNMaXR0bGVFbmRpYW4gPyAweGZmMDAwMDAwIDogMHgwMDAwMDBmZjtcblxuICAgIGlmICh0cmFuc2Zlck1hcEdyYXkpIHtcbiAgICAgIGlmICh0cmFuc2Zlck1hcEdyYXlbMF0gPT09IDB4ZmYgJiYgdHJhbnNmZXJNYXBHcmF5WzB4ZmZdID09PSAwKSB7XG4gICAgICAgIFt3aGl0ZSwgYmxhY2tdID0gW2JsYWNrLCB3aGl0ZV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChpID0gMDsgaSA8IHRvdGFsQ2h1bmtzOyBpKyspIHtcbiAgICAgIHRoaXNDaHVua0hlaWdodCA9IGkgPCBmdWxsQ2h1bmtzID8gRlVMTF9DSFVOS19IRUlHSFQgOiBwYXJ0aWFsQ2h1bmtIZWlnaHQ7XG4gICAgICBkZXN0UG9zID0gMDtcbiAgICAgIGZvciAoaiA9IDA7IGogPCB0aGlzQ2h1bmtIZWlnaHQ7IGorKykge1xuICAgICAgICBjb25zdCBzcmNEaWZmID0gc3JjTGVuZ3RoIC0gc3JjUG9zO1xuICAgICAgICBsZXQgayA9IDA7XG4gICAgICAgIGNvbnN0IGtFbmQgPSBzcmNEaWZmID4gZnVsbFNyY0RpZmYgPyB3aWR0aCA6IHNyY0RpZmYgKiA4IC0gNztcbiAgICAgICAgY29uc3Qga0VuZFVucm9sbGVkID0ga0VuZCAmIH43O1xuICAgICAgICBsZXQgbWFzayA9IDA7XG4gICAgICAgIGxldCBzcmNCeXRlID0gMDtcbiAgICAgICAgZm9yICg7IGsgPCBrRW5kVW5yb2xsZWQ7IGsgKz0gOCkge1xuICAgICAgICAgIHNyY0J5dGUgPSBzcmNbc3JjUG9zKytdO1xuICAgICAgICAgIGRlc3QzMltkZXN0UG9zKytdID0gc3JjQnl0ZSAmIDEyOCA/IHdoaXRlIDogYmxhY2s7XG4gICAgICAgICAgZGVzdDMyW2Rlc3RQb3MrK10gPSBzcmNCeXRlICYgNjQgPyB3aGl0ZSA6IGJsYWNrO1xuICAgICAgICAgIGRlc3QzMltkZXN0UG9zKytdID0gc3JjQnl0ZSAmIDMyID8gd2hpdGUgOiBibGFjaztcbiAgICAgICAgICBkZXN0MzJbZGVzdFBvcysrXSA9IHNyY0J5dGUgJiAxNiA/IHdoaXRlIDogYmxhY2s7XG4gICAgICAgICAgZGVzdDMyW2Rlc3RQb3MrK10gPSBzcmNCeXRlICYgOCA/IHdoaXRlIDogYmxhY2s7XG4gICAgICAgICAgZGVzdDMyW2Rlc3RQb3MrK10gPSBzcmNCeXRlICYgNCA/IHdoaXRlIDogYmxhY2s7XG4gICAgICAgICAgZGVzdDMyW2Rlc3RQb3MrK10gPSBzcmNCeXRlICYgMiA/IHdoaXRlIDogYmxhY2s7XG4gICAgICAgICAgZGVzdDMyW2Rlc3RQb3MrK10gPSBzcmNCeXRlICYgMSA/IHdoaXRlIDogYmxhY2s7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICg7IGsgPCBrRW5kOyBrKyspIHtcbiAgICAgICAgICBpZiAobWFzayA9PT0gMCkge1xuICAgICAgICAgICAgc3JjQnl0ZSA9IHNyY1tzcmNQb3MrK107XG4gICAgICAgICAgICBtYXNrID0gMTI4O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGRlc3QzMltkZXN0UG9zKytdID0gc3JjQnl0ZSAmIG1hc2sgPyB3aGl0ZSA6IGJsYWNrO1xuICAgICAgICAgIG1hc2sgPj49IDE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIFdlIHJhbiBvdXQgb2YgaW5wdXQuIE1ha2UgYWxsIHJlbWFpbmluZyBwaXhlbHMgdHJhbnNwYXJlbnQuXG4gICAgICB3aGlsZSAoZGVzdFBvcyA8IGRlc3QzMkRhdGFMZW5ndGgpIHtcbiAgICAgICAgZGVzdDMyW2Rlc3RQb3MrK10gPSAwO1xuICAgICAgfVxuXG4gICAgICBjdHgucHV0SW1hZ2VEYXRhKGNodW5rSW1nRGF0YSwgMCwgaSAqIEZVTExfQ0hVTktfSEVJR0hUKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaW1nRGF0YS5raW5kID09PSBJbWFnZUtpbmQuUkdCQV8zMkJQUCkge1xuICAgIC8vIFJHQkEsIDMyLWJpdHMgcGVyIHBpeGVsLlxuICAgIGNvbnN0IGhhc1RyYW5zZmVyTWFwcyA9ICEhKFxuICAgICAgdHJhbnNmZXJNYXBSZWQgfHxcbiAgICAgIHRyYW5zZmVyTWFwR3JlZW4gfHxcbiAgICAgIHRyYW5zZmVyTWFwQmx1ZVxuICAgICk7XG5cbiAgICBqID0gMDtcbiAgICBlbGVtc0luVGhpc0NodW5rID0gd2lkdGggKiBGVUxMX0NIVU5LX0hFSUdIVCAqIDQ7XG4gICAgZm9yIChpID0gMDsgaSA8IGZ1bGxDaHVua3M7IGkrKykge1xuICAgICAgZGVzdC5zZXQoc3JjLnN1YmFycmF5KHNyY1Bvcywgc3JjUG9zICsgZWxlbXNJblRoaXNDaHVuaykpO1xuICAgICAgc3JjUG9zICs9IGVsZW1zSW5UaGlzQ2h1bms7XG5cbiAgICAgIGlmIChoYXNUcmFuc2Zlck1hcHMpIHtcbiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBlbGVtc0luVGhpc0NodW5rOyBrICs9IDQpIHtcbiAgICAgICAgICBpZiAodHJhbnNmZXJNYXBSZWQpIHtcbiAgICAgICAgICAgIGRlc3RbayArIDBdID0gdHJhbnNmZXJNYXBSZWRbZGVzdFtrICsgMF1dO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodHJhbnNmZXJNYXBHcmVlbikge1xuICAgICAgICAgICAgZGVzdFtrICsgMV0gPSB0cmFuc2Zlck1hcEdyZWVuW2Rlc3RbayArIDFdXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRyYW5zZmVyTWFwQmx1ZSkge1xuICAgICAgICAgICAgZGVzdFtrICsgMl0gPSB0cmFuc2Zlck1hcEJsdWVbZGVzdFtrICsgMl1dO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjdHgucHV0SW1hZ2VEYXRhKGNodW5rSW1nRGF0YSwgMCwgaik7XG4gICAgICBqICs9IEZVTExfQ0hVTktfSEVJR0hUO1xuICAgIH1cbiAgICBpZiAoaSA8IHRvdGFsQ2h1bmtzKSB7XG4gICAgICBlbGVtc0luVGhpc0NodW5rID0gd2lkdGggKiBwYXJ0aWFsQ2h1bmtIZWlnaHQgKiA0O1xuICAgICAgZGVzdC5zZXQoc3JjLnN1YmFycmF5KHNyY1Bvcywgc3JjUG9zICsgZWxlbXNJblRoaXNDaHVuaykpO1xuXG4gICAgICBpZiAoaGFzVHJhbnNmZXJNYXBzKSB7XG4gICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgZWxlbXNJblRoaXNDaHVuazsgayArPSA0KSB7XG4gICAgICAgICAgaWYgKHRyYW5zZmVyTWFwUmVkKSB7XG4gICAgICAgICAgICBkZXN0W2sgKyAwXSA9IHRyYW5zZmVyTWFwUmVkW2Rlc3RbayArIDBdXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRyYW5zZmVyTWFwR3JlZW4pIHtcbiAgICAgICAgICAgIGRlc3RbayArIDFdID0gdHJhbnNmZXJNYXBHcmVlbltkZXN0W2sgKyAxXV07XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0cmFuc2Zlck1hcEJsdWUpIHtcbiAgICAgICAgICAgIGRlc3RbayArIDJdID0gdHJhbnNmZXJNYXBCbHVlW2Rlc3RbayArIDJdXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY3R4LnB1dEltYWdlRGF0YShjaHVua0ltZ0RhdGEsIDAsIGopO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpbWdEYXRhLmtpbmQgPT09IEltYWdlS2luZC5SR0JfMjRCUFApIHtcbiAgICAvLyBSR0IsIDI0LWJpdHMgcGVyIHBpeGVsLlxuICAgIGNvbnN0IGhhc1RyYW5zZmVyTWFwcyA9ICEhKFxuICAgICAgdHJhbnNmZXJNYXBSZWQgfHxcbiAgICAgIHRyYW5zZmVyTWFwR3JlZW4gfHxcbiAgICAgIHRyYW5zZmVyTWFwQmx1ZVxuICAgICk7XG5cbiAgICB0aGlzQ2h1bmtIZWlnaHQgPSBGVUxMX0NIVU5LX0hFSUdIVDtcbiAgICBlbGVtc0luVGhpc0NodW5rID0gd2lkdGggKiB0aGlzQ2h1bmtIZWlnaHQ7XG4gICAgZm9yIChpID0gMDsgaSA8IHRvdGFsQ2h1bmtzOyBpKyspIHtcbiAgICAgIGlmIChpID49IGZ1bGxDaHVua3MpIHtcbiAgICAgICAgdGhpc0NodW5rSGVpZ2h0ID0gcGFydGlhbENodW5rSGVpZ2h0O1xuICAgICAgICBlbGVtc0luVGhpc0NodW5rID0gd2lkdGggKiB0aGlzQ2h1bmtIZWlnaHQ7XG4gICAgICB9XG5cbiAgICAgIGRlc3RQb3MgPSAwO1xuICAgICAgZm9yIChqID0gZWxlbXNJblRoaXNDaHVuazsgai0tOyApIHtcbiAgICAgICAgZGVzdFtkZXN0UG9zKytdID0gc3JjW3NyY1BvcysrXTtcbiAgICAgICAgZGVzdFtkZXN0UG9zKytdID0gc3JjW3NyY1BvcysrXTtcbiAgICAgICAgZGVzdFtkZXN0UG9zKytdID0gc3JjW3NyY1BvcysrXTtcbiAgICAgICAgZGVzdFtkZXN0UG9zKytdID0gMjU1O1xuICAgICAgfVxuXG4gICAgICBpZiAoaGFzVHJhbnNmZXJNYXBzKSB7XG4gICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgZGVzdFBvczsgayArPSA0KSB7XG4gICAgICAgICAgaWYgKHRyYW5zZmVyTWFwUmVkKSB7XG4gICAgICAgICAgICBkZXN0W2sgKyAwXSA9IHRyYW5zZmVyTWFwUmVkW2Rlc3RbayArIDBdXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRyYW5zZmVyTWFwR3JlZW4pIHtcbiAgICAgICAgICAgIGRlc3RbayArIDFdID0gdHJhbnNmZXJNYXBHcmVlbltkZXN0W2sgKyAxXV07XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0cmFuc2Zlck1hcEJsdWUpIHtcbiAgICAgICAgICAgIGRlc3RbayArIDJdID0gdHJhbnNmZXJNYXBCbHVlW2Rlc3RbayArIDJdXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY3R4LnB1dEltYWdlRGF0YShjaHVua0ltZ0RhdGEsIDAsIGkgKiBGVUxMX0NIVU5LX0hFSUdIVCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihgYmFkIGltYWdlIGtpbmQ6ICR7aW1nRGF0YS5raW5kfWApO1xuICB9XG59XG5cbmZ1bmN0aW9uIHB1dEJpbmFyeUltYWdlTWFzayhjdHgsIGltZ0RhdGEpIHtcbiAgaWYgKGltZ0RhdGEuYml0bWFwKSB7XG4gICAgLy8gVGhlIGJpdG1hcCBoYXMgYmVlbiBjcmVhdGVkIGluIHRoZSB3b3JrZXIuXG4gICAgY3R4LmRyYXdJbWFnZShpbWdEYXRhLmJpdG1hcCwgMCwgMCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gU2xvdyBwYXRoOiBPZmZzY3JlZW5DYW52YXMgaXNuJ3QgYXZhaWxhYmxlIGluIHRoZSB3b3JrZXIuXG4gIGNvbnN0IGhlaWdodCA9IGltZ0RhdGEuaGVpZ2h0LFxuICAgIHdpZHRoID0gaW1nRGF0YS53aWR0aDtcbiAgY29uc3QgcGFydGlhbENodW5rSGVpZ2h0ID0gaGVpZ2h0ICUgRlVMTF9DSFVOS19IRUlHSFQ7XG4gIGNvbnN0IGZ1bGxDaHVua3MgPSAoaGVpZ2h0IC0gcGFydGlhbENodW5rSGVpZ2h0KSAvIEZVTExfQ0hVTktfSEVJR0hUO1xuICBjb25zdCB0b3RhbENodW5rcyA9IHBhcnRpYWxDaHVua0hlaWdodCA9PT0gMCA/IGZ1bGxDaHVua3MgOiBmdWxsQ2h1bmtzICsgMTtcblxuICBjb25zdCBjaHVua0ltZ0RhdGEgPSBjdHguY3JlYXRlSW1hZ2VEYXRhKHdpZHRoLCBGVUxMX0NIVU5LX0hFSUdIVCk7XG4gIGxldCBzcmNQb3MgPSAwO1xuICBjb25zdCBzcmMgPSBpbWdEYXRhLmRhdGE7XG4gIGNvbnN0IGRlc3QgPSBjaHVua0ltZ0RhdGEuZGF0YTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdGFsQ2h1bmtzOyBpKyspIHtcbiAgICBjb25zdCB0aGlzQ2h1bmtIZWlnaHQgPVxuICAgICAgaSA8IGZ1bGxDaHVua3MgPyBGVUxMX0NIVU5LX0hFSUdIVCA6IHBhcnRpYWxDaHVua0hlaWdodDtcblxuICAgIC8vIEV4cGFuZCB0aGUgbWFzayBzbyBpdCBjYW4gYmUgdXNlZCBieSB0aGUgY2FudmFzLiAgQW55IHJlcXVpcmVkXG4gICAgLy8gaW52ZXJzaW9uIGhhcyBhbHJlYWR5IGJlZW4gaGFuZGxlZC5cblxuICAgICh7IHNyY1BvcyB9ID0gYXBwbHlNYXNrSW1hZ2VEYXRhKHtcbiAgICAgIHNyYyxcbiAgICAgIHNyY1BvcyxcbiAgICAgIGRlc3QsXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodDogdGhpc0NodW5rSGVpZ2h0LFxuICAgIH0pKTtcblxuICAgIGN0eC5wdXRJbWFnZURhdGEoY2h1bmtJbWdEYXRhLCAwLCBpICogRlVMTF9DSFVOS19IRUlHSFQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNvcHlDdHhTdGF0ZShzb3VyY2VDdHgsIGRlc3RDdHgpIHtcbiAgY29uc3QgcHJvcGVydGllcyA9IFtcbiAgICBcInN0cm9rZVN0eWxlXCIsXG4gICAgXCJmaWxsU3R5bGVcIixcbiAgICBcImZpbGxSdWxlXCIsXG4gICAgXCJnbG9iYWxBbHBoYVwiLFxuICAgIFwibGluZVdpZHRoXCIsXG4gICAgXCJsaW5lQ2FwXCIsXG4gICAgXCJsaW5lSm9pblwiLFxuICAgIFwibWl0ZXJMaW1pdFwiLFxuICAgIFwiZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uXCIsXG4gICAgXCJmb250XCIsXG4gIF07XG4gIGZvciAobGV0IGkgPSAwLCBpaSA9IHByb3BlcnRpZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgIGNvbnN0IHByb3BlcnR5ID0gcHJvcGVydGllc1tpXTtcbiAgICBpZiAoc291cmNlQ3R4W3Byb3BlcnR5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBkZXN0Q3R4W3Byb3BlcnR5XSA9IHNvdXJjZUN0eFtwcm9wZXJ0eV07XG4gICAgfVxuICB9XG4gIGlmIChzb3VyY2VDdHguc2V0TGluZURhc2ggIT09IHVuZGVmaW5lZCkge1xuICAgIGRlc3RDdHguc2V0TGluZURhc2goc291cmNlQ3R4LmdldExpbmVEYXNoKCkpO1xuICAgIGRlc3RDdHgubGluZURhc2hPZmZzZXQgPSBzb3VyY2VDdHgubGluZURhc2hPZmZzZXQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVzZXRDdHhUb0RlZmF1bHQoY3R4LCBmb3JlZ3JvdW5kQ29sb3IpIHtcbiAgY3R4LnN0cm9rZVN0eWxlID0gY3R4LmZpbGxTdHlsZSA9IGZvcmVncm91bmRDb2xvciB8fCBcIiMwMDAwMDBcIjtcbiAgY3R4LmZpbGxSdWxlID0gXCJub256ZXJvXCI7XG4gIGN0eC5nbG9iYWxBbHBoYSA9IDE7XG4gIGN0eC5saW5lV2lkdGggPSAxO1xuICBjdHgubGluZUNhcCA9IFwiYnV0dFwiO1xuICBjdHgubGluZUpvaW4gPSBcIm1pdGVyXCI7XG4gIGN0eC5taXRlckxpbWl0ID0gMTA7XG4gIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcInNvdXJjZS1vdmVyXCI7XG4gIGN0eC5mb250ID0gXCIxMHB4IHNhbnMtc2VyaWZcIjtcbiAgaWYgKGN0eC5zZXRMaW5lRGFzaCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY3R4LnNldExpbmVEYXNoKFtdKTtcbiAgICBjdHgubGluZURhc2hPZmZzZXQgPSAwO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNvbXBvc2VTTWFza0JhY2tkcm9wKGJ5dGVzLCByMCwgZzAsIGIwKSB7XG4gIGNvbnN0IGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDtcbiAgZm9yIChsZXQgaSA9IDM7IGkgPCBsZW5ndGg7IGkgKz0gNCkge1xuICAgIGNvbnN0IGFscGhhID0gYnl0ZXNbaV07XG4gICAgaWYgKGFscGhhID09PSAwKSB7XG4gICAgICBieXRlc1tpIC0gM10gPSByMDtcbiAgICAgIGJ5dGVzW2kgLSAyXSA9IGcwO1xuICAgICAgYnl0ZXNbaSAtIDFdID0gYjA7XG4gICAgfSBlbHNlIGlmIChhbHBoYSA8IDI1NSkge1xuICAgICAgY29uc3QgYWxwaGFfID0gMjU1IC0gYWxwaGE7XG4gICAgICBieXRlc1tpIC0gM10gPSAoYnl0ZXNbaSAtIDNdICogYWxwaGEgKyByMCAqIGFscGhhXykgPj4gODtcbiAgICAgIGJ5dGVzW2kgLSAyXSA9IChieXRlc1tpIC0gMl0gKiBhbHBoYSArIGcwICogYWxwaGFfKSA+PiA4O1xuICAgICAgYnl0ZXNbaSAtIDFdID0gKGJ5dGVzW2kgLSAxXSAqIGFscGhhICsgYjAgKiBhbHBoYV8pID4+IDg7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNvbXBvc2VTTWFza0FscGhhKG1hc2tEYXRhLCBsYXllckRhdGEsIHRyYW5zZmVyTWFwKSB7XG4gIGNvbnN0IGxlbmd0aCA9IG1hc2tEYXRhLmxlbmd0aDtcbiAgY29uc3Qgc2NhbGUgPSAxIC8gMjU1O1xuICBmb3IgKGxldCBpID0gMzsgaSA8IGxlbmd0aDsgaSArPSA0KSB7XG4gICAgY29uc3QgYWxwaGEgPSB0cmFuc2Zlck1hcCA/IHRyYW5zZmVyTWFwW21hc2tEYXRhW2ldXSA6IG1hc2tEYXRhW2ldO1xuICAgIGxheWVyRGF0YVtpXSA9IChsYXllckRhdGFbaV0gKiBhbHBoYSAqIHNjYWxlKSB8IDA7XG4gIH1cbn1cblxuZnVuY3Rpb24gY29tcG9zZVNNYXNrTHVtaW5vc2l0eShtYXNrRGF0YSwgbGF5ZXJEYXRhLCB0cmFuc2Zlck1hcCkge1xuICBjb25zdCBsZW5ndGggPSBtYXNrRGF0YS5sZW5ndGg7XG4gIGZvciAobGV0IGkgPSAzOyBpIDwgbGVuZ3RoOyBpICs9IDQpIHtcbiAgICBjb25zdCB5ID1cbiAgICAgIG1hc2tEYXRhW2kgLSAzXSAqIDc3ICsgLy8gKiAwLjMgLyAyNTUgKiAweDEwMDAwXG4gICAgICBtYXNrRGF0YVtpIC0gMl0gKiAxNTIgKyAvLyAqIDAuNTkgLi4uLlxuICAgICAgbWFza0RhdGFbaSAtIDFdICogMjg7IC8vICogMC4xMSAuLi4uXG4gICAgbGF5ZXJEYXRhW2ldID0gdHJhbnNmZXJNYXBcbiAgICAgID8gKGxheWVyRGF0YVtpXSAqIHRyYW5zZmVyTWFwW3kgPj4gOF0pID4+IDhcbiAgICAgIDogKGxheWVyRGF0YVtpXSAqIHkpID4+IDE2O1xuICB9XG59XG5cbmZ1bmN0aW9uIGdlbmVyaWNDb21wb3NlU01hc2soXG4gIG1hc2tDdHgsXG4gIGxheWVyQ3R4LFxuICB3aWR0aCxcbiAgaGVpZ2h0LFxuICBzdWJ0eXBlLFxuICBiYWNrZHJvcCxcbiAgdHJhbnNmZXJNYXAsXG4gIGxheWVyT2Zmc2V0WCxcbiAgbGF5ZXJPZmZzZXRZLFxuICBtYXNrT2Zmc2V0WCxcbiAgbWFza09mZnNldFlcbikge1xuICBjb25zdCBoYXNCYWNrZHJvcCA9ICEhYmFja2Ryb3A7XG4gIGNvbnN0IHIwID0gaGFzQmFja2Ryb3AgPyBiYWNrZHJvcFswXSA6IDA7XG4gIGNvbnN0IGcwID0gaGFzQmFja2Ryb3AgPyBiYWNrZHJvcFsxXSA6IDA7XG4gIGNvbnN0IGIwID0gaGFzQmFja2Ryb3AgPyBiYWNrZHJvcFsyXSA6IDA7XG5cbiAgbGV0IGNvbXBvc2VGbjtcbiAgaWYgKHN1YnR5cGUgPT09IFwiTHVtaW5vc2l0eVwiKSB7XG4gICAgY29tcG9zZUZuID0gY29tcG9zZVNNYXNrTHVtaW5vc2l0eTtcbiAgfSBlbHNlIHtcbiAgICBjb21wb3NlRm4gPSBjb21wb3NlU01hc2tBbHBoYTtcbiAgfVxuXG4gIC8vIHByb2Nlc3NpbmcgaW1hZ2UgaW4gY2h1bmtzIHRvIHNhdmUgbWVtb3J5XG4gIGNvbnN0IFBJWEVMU19UT19QUk9DRVNTID0gMTA0ODU3NjtcbiAgY29uc3QgY2h1bmtTaXplID0gTWF0aC5taW4oaGVpZ2h0LCBNYXRoLmNlaWwoUElYRUxTX1RPX1BST0NFU1MgLyB3aWR0aCkpO1xuICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCBoZWlnaHQ7IHJvdyArPSBjaHVua1NpemUpIHtcbiAgICBjb25zdCBjaHVua0hlaWdodCA9IE1hdGgubWluKGNodW5rU2l6ZSwgaGVpZ2h0IC0gcm93KTtcbiAgICBjb25zdCBtYXNrRGF0YSA9IG1hc2tDdHguZ2V0SW1hZ2VEYXRhKFxuICAgICAgbGF5ZXJPZmZzZXRYIC0gbWFza09mZnNldFgsXG4gICAgICByb3cgKyAobGF5ZXJPZmZzZXRZIC0gbWFza09mZnNldFkpLFxuICAgICAgd2lkdGgsXG4gICAgICBjaHVua0hlaWdodFxuICAgICk7XG4gICAgY29uc3QgbGF5ZXJEYXRhID0gbGF5ZXJDdHguZ2V0SW1hZ2VEYXRhKFxuICAgICAgbGF5ZXJPZmZzZXRYLFxuICAgICAgcm93ICsgbGF5ZXJPZmZzZXRZLFxuICAgICAgd2lkdGgsXG4gICAgICBjaHVua0hlaWdodFxuICAgICk7XG5cbiAgICBpZiAoaGFzQmFja2Ryb3ApIHtcbiAgICAgIGNvbXBvc2VTTWFza0JhY2tkcm9wKG1hc2tEYXRhLmRhdGEsIHIwLCBnMCwgYjApO1xuICAgIH1cbiAgICBjb21wb3NlRm4obWFza0RhdGEuZGF0YSwgbGF5ZXJEYXRhLmRhdGEsIHRyYW5zZmVyTWFwKTtcblxuICAgIGxheWVyQ3R4LnB1dEltYWdlRGF0YShsYXllckRhdGEsIGxheWVyT2Zmc2V0WCwgcm93ICsgbGF5ZXJPZmZzZXRZKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb21wb3NlU01hc2soY3R4LCBzbWFzaywgbGF5ZXJDdHgsIGxheWVyQm94KSB7XG4gIGNvbnN0IGxheWVyT2Zmc2V0WCA9IGxheWVyQm94WzBdO1xuICBjb25zdCBsYXllck9mZnNldFkgPSBsYXllckJveFsxXTtcbiAgY29uc3QgbGF5ZXJXaWR0aCA9IGxheWVyQm94WzJdIC0gbGF5ZXJPZmZzZXRYO1xuICBjb25zdCBsYXllckhlaWdodCA9IGxheWVyQm94WzNdIC0gbGF5ZXJPZmZzZXRZO1xuICBpZiAobGF5ZXJXaWR0aCA9PT0gMCB8fCBsYXllckhlaWdodCA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuICBnZW5lcmljQ29tcG9zZVNNYXNrKFxuICAgIHNtYXNrLmNvbnRleHQsXG4gICAgbGF5ZXJDdHgsXG4gICAgbGF5ZXJXaWR0aCxcbiAgICBsYXllckhlaWdodCxcbiAgICBzbWFzay5zdWJ0eXBlLFxuICAgIHNtYXNrLmJhY2tkcm9wLFxuICAgIHNtYXNrLnRyYW5zZmVyTWFwLFxuICAgIGxheWVyT2Zmc2V0WCxcbiAgICBsYXllck9mZnNldFksXG4gICAgc21hc2sub2Zmc2V0WCxcbiAgICBzbWFzay5vZmZzZXRZXG4gICk7XG4gIGN0eC5zYXZlKCk7XG4gIGN0eC5nbG9iYWxBbHBoYSA9IDE7XG4gIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcInNvdXJjZS1vdmVyXCI7XG4gIGN0eC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7XG4gIGN0eC5kcmF3SW1hZ2UobGF5ZXJDdHguY2FudmFzLCAwLCAwKTtcbiAgY3R4LnJlc3RvcmUoKTtcbn1cblxuZnVuY3Rpb24gZ2V0SW1hZ2VTbW9vdGhpbmdFbmFibGVkKHRyYW5zZm9ybSwgaW50ZXJwb2xhdGUpIHtcbiAgY29uc3Qgc2NhbGUgPSBVdGlsLnNpbmd1bGFyVmFsdWVEZWNvbXBvc2UyZFNjYWxlKHRyYW5zZm9ybSk7XG4gIC8vIFJvdW5kIHRvIGEgMzJiaXQgZmxvYXQgc28gdGhhdCBgPD1gIGNoZWNrIGJlbG93IHdpbGwgcGFzcyBmb3IgbnVtYmVycyB0aGF0XG4gIC8vIGFyZSB2ZXJ5IGNsb3NlLCBidXQgbm90IGV4YWN0bHkgdGhlIHNhbWUgNjRiaXQgZmxvYXRzLlxuICBzY2FsZVswXSA9IE1hdGguZnJvdW5kKHNjYWxlWzBdKTtcbiAgc2NhbGVbMV0gPSBNYXRoLmZyb3VuZChzY2FsZVsxXSk7XG4gIGNvbnN0IGFjdHVhbFNjYWxlID0gTWF0aC5mcm91bmQoXG4gICAgKGdsb2JhbFRoaXMuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxKSAqIFBpeGVsc1BlckluY2guUERGX1RPX0NTU19VTklUU1xuICApO1xuICBpZiAoaW50ZXJwb2xhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgIC8vIElmIHRoZSB2YWx1ZSBpcyBleHBsaWNpdGx5IHNldCB1c2UgaXQuXG4gICAgcmV0dXJuIGludGVycG9sYXRlO1xuICB9IGVsc2UgaWYgKHNjYWxlWzBdIDw9IGFjdHVhbFNjYWxlIHx8IHNjYWxlWzFdIDw9IGFjdHVhbFNjYWxlKSB7XG4gICAgLy8gU21vb3RoIHdoZW4gZG93bnNjYWxpbmcuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLy8gRG9uJ3Qgc21vb3RoIHdoZW4gdXBzY2FsaW5nLlxuICByZXR1cm4gZmFsc2U7XG59XG5cbmNvbnN0IExJTkVfQ0FQX1NUWUxFUyA9IFtcImJ1dHRcIiwgXCJyb3VuZFwiLCBcInNxdWFyZVwiXTtcbmNvbnN0IExJTkVfSk9JTl9TVFlMRVMgPSBbXCJtaXRlclwiLCBcInJvdW5kXCIsIFwiYmV2ZWxcIl07XG5jb25zdCBOT1JNQUxfQ0xJUCA9IHt9O1xuY29uc3QgRU9fQ0xJUCA9IHt9O1xuXG5jbGFzcyBDYW52YXNHcmFwaGljcyB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGNhbnZhc0N0eCxcbiAgICBjb21tb25PYmpzLFxuICAgIG9ianMsXG4gICAgY2FudmFzRmFjdG9yeSxcbiAgICBpbWFnZUxheWVyLFxuICAgIG9wdGlvbmFsQ29udGVudENvbmZpZyxcbiAgICBhbm5vdGF0aW9uQ2FudmFzTWFwLFxuICAgIHBhZ2VDb2xvcnNcbiAgKSB7XG4gICAgdGhpcy5jdHggPSBjYW52YXNDdHg7XG4gICAgdGhpcy5jdXJyZW50ID0gbmV3IENhbnZhc0V4dHJhU3RhdGUoXG4gICAgICB0aGlzLmN0eC5jYW52YXMud2lkdGgsXG4gICAgICB0aGlzLmN0eC5jYW52YXMuaGVpZ2h0XG4gICAgKTtcbiAgICB0aGlzLnN0YXRlU3RhY2sgPSBbXTtcbiAgICB0aGlzLnBlbmRpbmdDbGlwID0gbnVsbDtcbiAgICB0aGlzLnBlbmRpbmdFT0ZpbGwgPSBmYWxzZTtcbiAgICB0aGlzLnJlcyA9IG51bGw7XG4gICAgdGhpcy54b2JqcyA9IG51bGw7XG4gICAgdGhpcy5jb21tb25PYmpzID0gY29tbW9uT2JqcztcbiAgICB0aGlzLm9ianMgPSBvYmpzO1xuICAgIHRoaXMuY2FudmFzRmFjdG9yeSA9IGNhbnZhc0ZhY3Rvcnk7XG4gICAgdGhpcy5pbWFnZUxheWVyID0gaW1hZ2VMYXllcjtcbiAgICB0aGlzLmdyb3VwU3RhY2sgPSBbXTtcbiAgICB0aGlzLnByb2Nlc3NpbmdUeXBlMyA9IG51bGw7XG4gICAgLy8gUGF0dGVybnMgYXJlIHBhaW50ZWQgcmVsYXRpdmUgdG8gdGhlIGluaXRpYWwgcGFnZS9mb3JtIHRyYW5zZm9ybSwgc2VlXG4gICAgLy8gUERGIHNwZWMgOC43LjIgTk9URSAxLlxuICAgIHRoaXMuYmFzZVRyYW5zZm9ybSA9IG51bGw7XG4gICAgdGhpcy5iYXNlVHJhbnNmb3JtU3RhY2sgPSBbXTtcbiAgICB0aGlzLmdyb3VwTGV2ZWwgPSAwO1xuICAgIHRoaXMuc21hc2tTdGFjayA9IFtdO1xuICAgIHRoaXMuc21hc2tDb3VudGVyID0gMDtcbiAgICB0aGlzLnRlbXBTTWFzayA9IG51bGw7XG4gICAgdGhpcy5zdXNwZW5kZWRDdHggPSBudWxsO1xuICAgIHRoaXMuY29udGVudFZpc2libGUgPSB0cnVlO1xuICAgIHRoaXMubWFya2VkQ29udGVudFN0YWNrID0gW107XG4gICAgdGhpcy5vcHRpb25hbENvbnRlbnRDb25maWcgPSBvcHRpb25hbENvbnRlbnRDb25maWc7XG4gICAgdGhpcy5jYWNoZWRDYW52YXNlcyA9IG5ldyBDYWNoZWRDYW52YXNlcyh0aGlzLmNhbnZhc0ZhY3RvcnkpO1xuICAgIHRoaXMuY2FjaGVkUGF0dGVybnMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5hbm5vdGF0aW9uQ2FudmFzTWFwID0gYW5ub3RhdGlvbkNhbnZhc01hcDtcbiAgICB0aGlzLnZpZXdwb3J0U2NhbGUgPSAxO1xuICAgIHRoaXMub3V0cHV0U2NhbGVYID0gMTtcbiAgICB0aGlzLm91dHB1dFNjYWxlWSA9IDE7XG4gICAgdGhpcy5iYWNrZ3JvdW5kQ29sb3IgPSBwYWdlQ29sb3JzPy5iYWNrZ3JvdW5kIHx8IG51bGw7XG4gICAgdGhpcy5mb3JlZ3JvdW5kQ29sb3IgPSBwYWdlQ29sb3JzPy5mb3JlZ3JvdW5kIHx8IG51bGw7XG4gICAgaWYgKGNhbnZhc0N0eCkge1xuICAgICAgLy8gTk9URTogaWYgbW96Q3VycmVudFRyYW5zZm9ybSBpcyBwb2x5ZmlsbGVkLCB0aGVuIHRoZSBjdXJyZW50IHN0YXRlIG9mXG4gICAgICAvLyB0aGUgdHJhbnNmb3JtYXRpb24gbXVzdCBhbHJlYWR5IGJlIHNldCBpbiBjYW52YXNDdHguX3RyYW5zZm9ybU1hdHJpeC5cbiAgICAgIGFkZENvbnRleHRDdXJyZW50VHJhbnNmb3JtKGNhbnZhc0N0eCk7XG4gICAgfVxuICAgIHRoaXMuX2NhY2hlZFNjYWxlRm9yU3Ryb2tpbmcgPSBudWxsO1xuICAgIHRoaXMuX2NhY2hlZEdldFNpbmdsZVBpeGVsV2lkdGggPSBudWxsO1xuICAgIHRoaXMuX2NhY2hlZEJpdG1hcHNNYXAgPSBuZXcgTWFwKCk7XG4gIH1cblxuICBnZXRPYmplY3QoZGF0YSwgZmFsbGJhY2sgPSBudWxsKSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gZGF0YS5zdGFydHNXaXRoKFwiZ19cIilcbiAgICAgICAgPyB0aGlzLmNvbW1vbk9ianMuZ2V0KGRhdGEpXG4gICAgICAgIDogdGhpcy5vYmpzLmdldChkYXRhKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbGxiYWNrO1xuICB9XG5cbiAgYmVnaW5EcmF3aW5nKHtcbiAgICB0cmFuc2Zvcm0sXG4gICAgdmlld3BvcnQsXG4gICAgdHJhbnNwYXJlbmN5ID0gZmFsc2UsXG4gICAgYmFja2dyb3VuZCA9IG51bGwsXG4gIH0pIHtcbiAgICAvLyBGb3IgcGRmcyB0aGF0IHVzZSBibGVuZCBtb2RlcyB3ZSBoYXZlIHRvIGNsZWFyIHRoZSBjYW52YXMgZWxzZSBjZXJ0YWluXG4gICAgLy8gYmxlbmQgbW9kZXMgY2FuIGxvb2sgd3Jvbmcgc2luY2Ugd2UnZCBiZSBibGVuZGluZyB3aXRoIGEgd2hpdGVcbiAgICAvLyBiYWNrZHJvcC4gVGhlIHByb2JsZW0gd2l0aCBhIHRyYW5zcGFyZW50IGJhY2tkcm9wIHRob3VnaCBpcyB3ZSB0aGVuXG4gICAgLy8gZG9uJ3QgZ2V0IHN1YiBwaXhlbCBhbnRpIGFsaWFzaW5nIG9uIHRleHQsIGNyZWF0aW5nIHRlbXBvcmFyeVxuICAgIC8vIHRyYW5zcGFyZW50IGNhbnZhcyB3aGVuIHdlIGhhdmUgYmxlbmQgbW9kZXMuXG4gICAgY29uc3Qgd2lkdGggPSB0aGlzLmN0eC5jYW52YXMud2lkdGg7XG4gICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5jdHguY2FudmFzLmhlaWdodDtcbiAgICBjb25zdCBkZWZhdWx0QmFja2dyb3VuZENvbG9yID0gYmFja2dyb3VuZCB8fCBcIiNmZmZmZmZcIjtcbiAgICB0aGlzLmN0eC5zYXZlKCk7XG5cbiAgICBpZiAodGhpcy5mb3JlZ3JvdW5kQ29sb3IgJiYgdGhpcy5iYWNrZ3JvdW5kQ29sb3IpIHtcbiAgICAgIC8vIEdldCB0aGUgI1JSR0dCQiB2YWx1ZSBvZiB0aGUgY29sb3IuIElmIGl0J3MgYSBuYW1lIChlLmcuIENhbnZhc1RleHQpXG4gICAgICAvLyB0aGVuIGl0J2xsIGJlIGNvbnZlcnRlZCB0byBpdHMgcmdiIHZhbHVlLlxuICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gdGhpcy5mb3JlZ3JvdW5kQ29sb3I7XG4gICAgICBjb25zdCBmZyA9ICh0aGlzLmZvcmVncm91bmRDb2xvciA9IHRoaXMuY3R4LmZpbGxTdHlsZSk7XG4gICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSB0aGlzLmJhY2tncm91bmRDb2xvcjtcbiAgICAgIGNvbnN0IGJnID0gKHRoaXMuYmFja2dyb3VuZENvbG9yID0gdGhpcy5jdHguZmlsbFN0eWxlKTtcbiAgICAgIGxldCBpc1ZhbGlkRGVmYXVsdEJnID0gdHJ1ZTtcbiAgICAgIGxldCBkZWZhdWx0QmcgPSBkZWZhdWx0QmFja2dyb3VuZENvbG9yO1xuXG4gICAgICBpZiAodHlwZW9mIFBERkpTRGV2ID09PSBcInVuZGVmaW5lZFwiIHx8ICFQREZKU0Rldi50ZXN0KFwiTU9aQ0VOVFJBTFwiKSkge1xuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBkZWZhdWx0QmFja2dyb3VuZENvbG9yO1xuICAgICAgICBkZWZhdWx0QmcgPSB0aGlzLmN0eC5maWxsU3R5bGU7XG4gICAgICAgIGlzVmFsaWREZWZhdWx0QmcgPVxuICAgICAgICAgIHR5cGVvZiBkZWZhdWx0QmcgPT09IFwic3RyaW5nXCIgJiYgL14jWzAtOUEtRmEtZl17Nn0kLy50ZXN0KGRlZmF1bHRCZyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgKGZnID09PSBcIiMwMDAwMDBcIiAmJiBiZyA9PT0gXCIjZmZmZmZmXCIpIHx8XG4gICAgICAgIGZnID09PSBiZyB8fFxuICAgICAgICAhaXNWYWxpZERlZmF1bHRCZ1xuICAgICAgKSB7XG4gICAgICAgIC8vIElnbm9yZSB0aGUgYHBhZ2VDb2xvcnNgLW9wdGlvbiB3aGVuOlxuICAgICAgICAvLyAgLSBUaGUgY29tcHV0ZWQgYmFja2dyb3VuZC9mb3JlZ3JvdW5kIGNvbG9ycyBoYXZlIHRoZWlyIGRlZmF1bHRcbiAgICAgICAgLy8gICAgdmFsdWVzLCBpLmUuIHdoaXRlL2JsYWNrLlxuICAgICAgICAvLyAgLSBUaGUgY29tcHV0ZWQgYmFja2dyb3VuZC9mb3JlZ3JvdW5kIGNvbG9ycyBhcmUgaWRlbnRpY2FsLFxuICAgICAgICAvLyAgICBzaW5jZSB0aGF0J2QgcmVuZGVyIHRoZSBgY2FudmFzYCBtb3N0bHkgYmxhbmsuXG4gICAgICAgIC8vICAtIFRoZSBgYmFja2dyb3VuZGAtb3B0aW9uIGhhcyBhIHZhbHVlIHRoYXQncyBpbmNvbXBhdGlibGUgd2l0aFxuICAgICAgICAvLyAgICB0aGUgYHBhZ2VDb2xvcnNgLXZhbHVlcy5cbiAgICAgICAgLy9cbiAgICAgICAgdGhpcy5mb3JlZ3JvdW5kQ29sb3IgPSB0aGlzLmJhY2tncm91bmRDb2xvciA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BY2Nlc3NpYmlsaXR5L1VuZGVyc3RhbmRpbmdfQ29sb3JzX2FuZF9MdW1pbmFuY2VcbiAgICAgICAgLy9cbiAgICAgICAgLy8gUmVsYXRpdmUgbHVtaW5hbmNlOlxuICAgICAgICAvLyBodHRwczovL3d3dy53My5vcmcvVFIvV0NBRzIwLyNyZWxhdGl2ZWx1bWluYW5jZWRlZlxuICAgICAgICAvL1xuICAgICAgICAvLyBXZSBjb21wdXRlIHRoZSByb3VuZGVkIGx1bWluYW5jZSBvZiB0aGUgZGVmYXVsdCBiYWNrZ3JvdW5kIGNvbG9yLlxuICAgICAgICAvLyBUaGVuIGZvciBldmVyeSBjb2xvciBpbiB0aGUgcGRmLCBpZiBpdHMgcm91bmRlZCBsdW1pbmFuY2UgaXMgdGhlXG4gICAgICAgIC8vIHNhbWUgYXMgdGhlIGJhY2tncm91bmQgb25lIHRoZW4gaXQncyByZXBsYWNlZCBieSB0aGUgbmV3XG4gICAgICAgIC8vIGJhY2tncm91bmQgY29sb3IgZWxzZSBieSB0aGUgZm9yZWdyb3VuZCBvbmUuXG4gICAgICAgIGNvbnN0IGNCID0gcGFyc2VJbnQoZGVmYXVsdEJnLnNsaWNlKDEpLCAxNik7XG4gICAgICAgIGNvbnN0IHJCID0gKGNCICYmIDB4ZmYwMDAwKSA+PiAxNjtcbiAgICAgICAgY29uc3QgZ0IgPSAoY0IgJiYgMHgwMGZmMDApID4+IDg7XG4gICAgICAgIGNvbnN0IGJCID0gY0IgJiYgMHgwMDAwZmY7XG4gICAgICAgIGNvbnN0IG5ld0NvbXAgPSB4ID0+IHtcbiAgICAgICAgICB4IC89IDI1NTtcbiAgICAgICAgICByZXR1cm4geCA8PSAwLjAzOTI4ID8geCAvIDEyLjkyIDogKCh4ICsgMC4wNTUpIC8gMS4wNTUpICoqIDIuNDtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgbHVtQiA9IE1hdGgucm91bmQoXG4gICAgICAgICAgMC4yMTI2ICogbmV3Q29tcChyQikgKyAwLjcxNTIgKiBuZXdDb21wKGdCKSArIDAuMDcyMiAqIG5ld0NvbXAoYkIpXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuc2VsZWN0Q29sb3IgPSAociwgZywgYikgPT4ge1xuICAgICAgICAgIGNvbnN0IGx1bUMgPVxuICAgICAgICAgICAgMC4yMTI2ICogbmV3Q29tcChyKSArIDAuNzE1MiAqIG5ld0NvbXAoZykgKyAwLjA3MjIgKiBuZXdDb21wKGIpO1xuICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKGx1bUMpID09PSBsdW1CID8gYmcgOiBmZztcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSB0aGlzLmJhY2tncm91bmRDb2xvciB8fCBkZWZhdWx0QmFja2dyb3VuZENvbG9yO1xuICAgIHRoaXMuY3R4LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgIHRoaXMuY3R4LnJlc3RvcmUoKTtcblxuICAgIGlmICh0cmFuc3BhcmVuY3kpIHtcbiAgICAgIGNvbnN0IHRyYW5zcGFyZW50Q2FudmFzID0gdGhpcy5jYWNoZWRDYW52YXNlcy5nZXRDYW52YXMoXG4gICAgICAgIFwidHJhbnNwYXJlbnRcIixcbiAgICAgICAgd2lkdGgsXG4gICAgICAgIGhlaWdodCxcbiAgICAgICAgLyogdHJhY2tUcmFuc2Zvcm0gKi8gdHJ1ZVxuICAgICAgKTtcbiAgICAgIHRoaXMuY29tcG9zaXRlQ3R4ID0gdGhpcy5jdHg7XG4gICAgICB0aGlzLnRyYW5zcGFyZW50Q2FudmFzID0gdHJhbnNwYXJlbnRDYW52YXMuY2FudmFzO1xuICAgICAgdGhpcy5jdHggPSB0cmFuc3BhcmVudENhbnZhcy5jb250ZXh0O1xuICAgICAgdGhpcy5jdHguc2F2ZSgpO1xuICAgICAgLy8gVGhlIHRyYW5zZm9ybSBjYW4gYmUgYXBwbGllZCBiZWZvcmUgcmVuZGVyaW5nLCB0cmFuc2ZlcnJpbmcgaXQgdG9cbiAgICAgIC8vIHRoZSBuZXcgY2FudmFzLlxuICAgICAgdGhpcy5jdHgudHJhbnNmb3JtLmFwcGx5KHRoaXMuY3R4LCB0aGlzLmNvbXBvc2l0ZUN0eC5tb3pDdXJyZW50VHJhbnNmb3JtKTtcbiAgICB9XG5cbiAgICB0aGlzLmN0eC5zYXZlKCk7XG4gICAgcmVzZXRDdHhUb0RlZmF1bHQodGhpcy5jdHgsIHRoaXMuZm9yZWdyb3VuZENvbG9yKTtcbiAgICBpZiAodHJhbnNmb3JtKSB7XG4gICAgICB0aGlzLmN0eC50cmFuc2Zvcm0uYXBwbHkodGhpcy5jdHgsIHRyYW5zZm9ybSk7XG4gICAgICB0aGlzLm91dHB1dFNjYWxlWCA9IHRyYW5zZm9ybVswXTtcbiAgICAgIHRoaXMub3V0cHV0U2NhbGVZID0gdHJhbnNmb3JtWzBdO1xuICAgIH1cbiAgICB0aGlzLmN0eC50cmFuc2Zvcm0uYXBwbHkodGhpcy5jdHgsIHZpZXdwb3J0LnRyYW5zZm9ybSk7XG4gICAgdGhpcy52aWV3cG9ydFNjYWxlID0gdmlld3BvcnQuc2NhbGU7XG5cbiAgICB0aGlzLmJhc2VUcmFuc2Zvcm0gPSB0aGlzLmN0eC5tb3pDdXJyZW50VHJhbnNmb3JtLnNsaWNlKCk7XG5cbiAgICBpZiAodGhpcy5pbWFnZUxheWVyKSB7XG4gICAgICB0aGlzLmltYWdlTGF5ZXIuYmVnaW5MYXlvdXQoKTtcbiAgICB9XG4gIH1cblxuICBleGVjdXRlT3BlcmF0b3JMaXN0KFxuICAgIG9wZXJhdG9yTGlzdCxcbiAgICBleGVjdXRpb25TdGFydElkeCxcbiAgICBjb250aW51ZUNhbGxiYWNrLFxuICAgIHN0ZXBwZXJcbiAgKSB7XG4gICAgY29uc3QgYXJnc0FycmF5ID0gb3BlcmF0b3JMaXN0LmFyZ3NBcnJheTtcbiAgICBjb25zdCBmbkFycmF5ID0gb3BlcmF0b3JMaXN0LmZuQXJyYXk7XG4gICAgbGV0IGkgPSBleGVjdXRpb25TdGFydElkeCB8fCAwO1xuICAgIGNvbnN0IGFyZ3NBcnJheUxlbiA9IGFyZ3NBcnJheS5sZW5ndGg7XG5cbiAgICAvLyBTb21ldGltZXMgdGhlIE9wZXJhdG9yTGlzdCB0byBleGVjdXRlIGlzIGVtcHR5LlxuICAgIGlmIChhcmdzQXJyYXlMZW4gPT09IGkpIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cblxuICAgIGNvbnN0IGNodW5rT3BlcmF0aW9ucyA9XG4gICAgICBhcmdzQXJyYXlMZW4gLSBpID4gRVhFQ1VUSU9OX1NURVBTICYmXG4gICAgICB0eXBlb2YgY29udGludWVDYWxsYmFjayA9PT0gXCJmdW5jdGlvblwiO1xuICAgIGNvbnN0IGVuZFRpbWUgPSBjaHVua09wZXJhdGlvbnMgPyBEYXRlLm5vdygpICsgRVhFQ1VUSU9OX1RJTUUgOiAwO1xuICAgIGxldCBzdGVwcyA9IDA7XG5cbiAgICBjb25zdCBjb21tb25PYmpzID0gdGhpcy5jb21tb25PYmpzO1xuICAgIGNvbnN0IG9ianMgPSB0aGlzLm9ianM7XG4gICAgbGV0IGZuSWQ7XG5cbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgaWYgKHN0ZXBwZXIgIT09IHVuZGVmaW5lZCAmJiBpID09PSBzdGVwcGVyLm5leHRCcmVha1BvaW50KSB7XG4gICAgICAgIHN0ZXBwZXIuYnJlYWtJdChpLCBjb250aW51ZUNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9XG5cbiAgICAgIGZuSWQgPSBmbkFycmF5W2ldO1xuXG4gICAgICBpZiAoZm5JZCAhPT0gT1BTLmRlcGVuZGVuY3kpIHtcbiAgICAgICAgdGhpc1tmbklkXS5hcHBseSh0aGlzLCBhcmdzQXJyYXlbaV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChjb25zdCBkZXBPYmpJZCBvZiBhcmdzQXJyYXlbaV0pIHtcbiAgICAgICAgICBjb25zdCBvYmpzUG9vbCA9IGRlcE9iaklkLnN0YXJ0c1dpdGgoXCJnX1wiKSA/IGNvbW1vbk9ianMgOiBvYmpzO1xuXG4gICAgICAgICAgLy8gSWYgdGhlIHByb21pc2UgaXNuJ3QgcmVzb2x2ZWQgeWV0LCBhZGQgdGhlIGNvbnRpbnVlQ2FsbGJhY2tcbiAgICAgICAgICAvLyB0byB0aGUgcHJvbWlzZSBhbmQgYmFpbCBvdXQuXG4gICAgICAgICAgaWYgKCFvYmpzUG9vbC5oYXMoZGVwT2JqSWQpKSB7XG4gICAgICAgICAgICBvYmpzUG9vbC5nZXQoZGVwT2JqSWQsIGNvbnRpbnVlQ2FsbGJhY2spO1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGkrKztcblxuICAgICAgLy8gSWYgdGhlIGVudGlyZSBvcGVyYXRvckxpc3Qgd2FzIGV4ZWN1dGVkLCBzdG9wIGFzIHdlcmUgZG9uZS5cbiAgICAgIGlmIChpID09PSBhcmdzQXJyYXlMZW4pIHtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZSBleGVjdXRpb24gdG9vayBsb25nZXIgdGhlbiBhIGNlcnRhaW4gYW1vdW50IG9mIHRpbWUgYW5kXG4gICAgICAvLyBgY29udGludWVDYWxsYmFja2AgaXMgc3BlY2lmaWVkLCBpbnRlcnJ1cHQgdGhlIGV4ZWN1dGlvbi5cbiAgICAgIGlmIChjaHVua09wZXJhdGlvbnMgJiYgKytzdGVwcyA+IEVYRUNVVElPTl9TVEVQUykge1xuICAgICAgICBpZiAoRGF0ZS5ub3coKSA+IGVuZFRpbWUpIHtcbiAgICAgICAgICBjb250aW51ZUNhbGxiYWNrKCk7XG4gICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICAgICAgc3RlcHMgPSAwO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGUgb3BlcmF0b3JMaXN0IGlzbid0IGV4ZWN1dGVkIGNvbXBsZXRlbHkgeWV0IE9SIHRoZSBleGVjdXRpb25cbiAgICAgIC8vIHRpbWUgd2FzIHNob3J0IGVub3VnaCwgZG8gYW5vdGhlciBleGVjdXRpb24gcm91bmQuXG4gICAgfVxuICB9XG5cbiAgZW5kRHJhd2luZygpIHtcbiAgICAvLyBGaW5pc2hpbmcgYWxsIG9wZW5lZCBvcGVyYXRpb25zIHN1Y2ggYXMgU01hc2sgZ3JvdXAgcGFpbnRpbmcuXG4gICAgd2hpbGUgKHRoaXMuc3RhdGVTdGFjay5sZW5ndGggfHwgdGhpcy5pblNNYXNrTW9kZSkge1xuICAgICAgdGhpcy5yZXN0b3JlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5jdHgucmVzdG9yZSgpO1xuXG4gICAgaWYgKHRoaXMudHJhbnNwYXJlbnRDYW52YXMpIHtcbiAgICAgIHRoaXMuY3R4ID0gdGhpcy5jb21wb3NpdGVDdHg7XG4gICAgICB0aGlzLmN0eC5zYXZlKCk7XG4gICAgICB0aGlzLmN0eC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7IC8vIEF2b2lkIGFwcGx5IHRyYW5zZm9ybSB0d2ljZVxuICAgICAgdGhpcy5jdHguZHJhd0ltYWdlKHRoaXMudHJhbnNwYXJlbnRDYW52YXMsIDAsIDApO1xuICAgICAgdGhpcy5jdHgucmVzdG9yZSgpO1xuICAgICAgdGhpcy50cmFuc3BhcmVudENhbnZhcyA9IG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy5jYWNoZWRDYW52YXNlcy5jbGVhcigpO1xuICAgIHRoaXMuY2FjaGVkUGF0dGVybnMuY2xlYXIoKTtcblxuICAgIGZvciAoY29uc3QgY2FjaGUgb2YgdGhpcy5fY2FjaGVkQml0bWFwc01hcC52YWx1ZXMoKSkge1xuICAgICAgZm9yIChjb25zdCBjYW52YXMgb2YgY2FjaGUudmFsdWVzKCkpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBIVE1MQ2FudmFzRWxlbWVudCAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICAgIGNhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50XG4gICAgICAgICkge1xuICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGNhbnZhcy5oZWlnaHQgPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjYWNoZS5jbGVhcigpO1xuICAgIH1cbiAgICB0aGlzLl9jYWNoZWRCaXRtYXBzTWFwLmNsZWFyKCk7XG5cbiAgICBpZiAodGhpcy5pbWFnZUxheWVyKSB7XG4gICAgICB0aGlzLmltYWdlTGF5ZXIuZW5kTGF5b3V0KCk7XG4gICAgfVxuICB9XG5cbiAgX3NjYWxlSW1hZ2UoaW1nLCBpbnZlcnNlVHJhbnNmb3JtKSB7XG4gICAgLy8gVmVydGljYWwgb3IgaG9yaXpvbnRhbCBzY2FsaW5nIHNoYWxsIG5vdCBiZSBtb3JlIHRoYW4gMiB0byBub3QgbG9zZSB0aGVcbiAgICAvLyBwaXhlbHMgZHVyaW5nIGRyYXdJbWFnZSBvcGVyYXRpb24sIHBhaW50aW5nIG9uIHRoZSB0ZW1wb3JhcnkgY2FudmFzKGVzKVxuICAgIC8vIHRoYXQgYXJlIHR3aWNlIHNtYWxsZXIgaW4gc2l6ZS5cbiAgICBjb25zdCB3aWR0aCA9IGltZy53aWR0aDtcbiAgICBjb25zdCBoZWlnaHQgPSBpbWcuaGVpZ2h0O1xuICAgIGxldCB3aWR0aFNjYWxlID0gTWF0aC5tYXgoXG4gICAgICBNYXRoLmh5cG90KGludmVyc2VUcmFuc2Zvcm1bMF0sIGludmVyc2VUcmFuc2Zvcm1bMV0pLFxuICAgICAgMVxuICAgICk7XG4gICAgbGV0IGhlaWdodFNjYWxlID0gTWF0aC5tYXgoXG4gICAgICBNYXRoLmh5cG90KGludmVyc2VUcmFuc2Zvcm1bMl0sIGludmVyc2VUcmFuc2Zvcm1bM10pLFxuICAgICAgMVxuICAgICk7XG5cbiAgICBsZXQgcGFpbnRXaWR0aCA9IHdpZHRoLFxuICAgICAgcGFpbnRIZWlnaHQgPSBoZWlnaHQ7XG4gICAgbGV0IHRtcENhbnZhc0lkID0gXCJwcmVzY2FsZTFcIjtcbiAgICBsZXQgdG1wQ2FudmFzLCB0bXBDdHg7XG4gICAgd2hpbGUgKFxuICAgICAgKHdpZHRoU2NhbGUgPiAyICYmIHBhaW50V2lkdGggPiAxKSB8fFxuICAgICAgKGhlaWdodFNjYWxlID4gMiAmJiBwYWludEhlaWdodCA+IDEpXG4gICAgKSB7XG4gICAgICBsZXQgbmV3V2lkdGggPSBwYWludFdpZHRoLFxuICAgICAgICBuZXdIZWlnaHQgPSBwYWludEhlaWdodDtcbiAgICAgIGlmICh3aWR0aFNjYWxlID4gMiAmJiBwYWludFdpZHRoID4gMSkge1xuICAgICAgICBuZXdXaWR0aCA9IE1hdGguY2VpbChwYWludFdpZHRoIC8gMik7XG4gICAgICAgIHdpZHRoU2NhbGUgLz0gcGFpbnRXaWR0aCAvIG5ld1dpZHRoO1xuICAgICAgfVxuICAgICAgaWYgKGhlaWdodFNjYWxlID4gMiAmJiBwYWludEhlaWdodCA+IDEpIHtcbiAgICAgICAgbmV3SGVpZ2h0ID0gTWF0aC5jZWlsKHBhaW50SGVpZ2h0IC8gMik7XG4gICAgICAgIGhlaWdodFNjYWxlIC89IHBhaW50SGVpZ2h0IC8gbmV3SGVpZ2h0O1xuICAgICAgfVxuICAgICAgdG1wQ2FudmFzID0gdGhpcy5jYWNoZWRDYW52YXNlcy5nZXRDYW52YXMoXG4gICAgICAgIHRtcENhbnZhc0lkLFxuICAgICAgICBuZXdXaWR0aCxcbiAgICAgICAgbmV3SGVpZ2h0LFxuICAgICAgICAvKiB0cmFja1RyYW5zZm9ybSAqLyBmYWxzZVxuICAgICAgKTtcbiAgICAgIHRtcEN0eCA9IHRtcENhbnZhcy5jb250ZXh0O1xuICAgICAgdG1wQ3R4LmNsZWFyUmVjdCgwLCAwLCBuZXdXaWR0aCwgbmV3SGVpZ2h0KTtcbiAgICAgIHRtcEN0eC5kcmF3SW1hZ2UoXG4gICAgICAgIGltZyxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgcGFpbnRXaWR0aCxcbiAgICAgICAgcGFpbnRIZWlnaHQsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIG5ld1dpZHRoLFxuICAgICAgICBuZXdIZWlnaHRcbiAgICAgICk7XG4gICAgICBpbWcgPSB0bXBDYW52YXMuY2FudmFzO1xuICAgICAgcGFpbnRXaWR0aCA9IG5ld1dpZHRoO1xuICAgICAgcGFpbnRIZWlnaHQgPSBuZXdIZWlnaHQ7XG4gICAgICB0bXBDYW52YXNJZCA9IHRtcENhbnZhc0lkID09PSBcInByZXNjYWxlMVwiID8gXCJwcmVzY2FsZTJcIiA6IFwicHJlc2NhbGUxXCI7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBpbWcsXG4gICAgICBwYWludFdpZHRoLFxuICAgICAgcGFpbnRIZWlnaHQsXG4gICAgfTtcbiAgfVxuXG4gIF9jcmVhdGVNYXNrQ2FudmFzKGltZykge1xuICAgIGNvbnN0IGN0eCA9IHRoaXMuY3R4O1xuICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gaW1nO1xuICAgIGNvbnN0IGZpbGxDb2xvciA9IHRoaXMuY3VycmVudC5maWxsQ29sb3I7XG4gICAgY29uc3QgaXNQYXR0ZXJuRmlsbCA9IHRoaXMuY3VycmVudC5wYXR0ZXJuRmlsbDtcbiAgICBjb25zdCBjdXJyZW50VHJhbnNmb3JtID0gY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm07XG5cbiAgICBsZXQgY2FjaGUsIGNhY2hlS2V5LCBzY2FsZWQsIG1hc2tDYW52YXM7XG4gICAgaWYgKChpbWcuYml0bWFwIHx8IGltZy5kYXRhKSAmJiBpbWcuY291bnQgPiAxKSB7XG4gICAgICBjb25zdCBtYWluS2V5ID0gaW1nLmJpdG1hcCB8fCBpbWcuZGF0YS5idWZmZXI7XG4gICAgICAvLyBXZSdyZSByZXVzaW5nIHRoZSBzYW1lIGltYWdlIHNldmVyYWwgdGltZXMsIHNvIHdlIGNhbiBjYWNoZSBpdC5cbiAgICAgIC8vIEluIGNhc2Ugd2UndmUgYSBwYXR0ZXJuIGZpbGwgd2UganVzdCBrZWVwIHRoZSBzY2FsZWQgdmVyc2lvbiBvZlxuICAgICAgLy8gdGhlIGltYWdlLlxuICAgICAgLy8gT25seSB0aGUgc2NhbGluZyBwYXJ0IG1hdHRlcnMsIHRoZSB0cmFuc2xhdGlvbiBwYXJ0IGlzIGp1c3QgdXNlZFxuICAgICAgLy8gdG8gY29tcHV0ZSBvZmZzZXRzLlxuICAgICAgLy8gVE9ETzogaGFuZGxlIHRoZSBjYXNlIG9mIGEgcGF0dGVybiBmaWxsIGlmIGl0J3MgcG9zc2libGUuXG4gICAgICBjb25zdCB3aXRob3V0VHJhbnNsYXRpb24gPSBjdXJyZW50VHJhbnNmb3JtLnNsaWNlKDAsIDQpO1xuICAgICAgY2FjaGVLZXkgPSBKU09OLnN0cmluZ2lmeShcbiAgICAgICAgaXNQYXR0ZXJuRmlsbCA/IHdpdGhvdXRUcmFuc2xhdGlvbiA6IFt3aXRob3V0VHJhbnNsYXRpb24sIGZpbGxDb2xvcl1cbiAgICAgICk7XG5cbiAgICAgIGNhY2hlID0gdGhpcy5fY2FjaGVkQml0bWFwc01hcC5nZXQobWFpbktleSk7XG4gICAgICBpZiAoIWNhY2hlKSB7XG4gICAgICAgIGNhY2hlID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9jYWNoZWRCaXRtYXBzTWFwLnNldChtYWluS2V5LCBjYWNoZSk7XG4gICAgICB9XG4gICAgICBjb25zdCBjYWNoZWRJbWFnZSA9IGNhY2hlLmdldChjYWNoZUtleSk7XG4gICAgICBpZiAoY2FjaGVkSW1hZ2UgJiYgIWlzUGF0dGVybkZpbGwpIHtcbiAgICAgICAgY29uc3Qgb2Zmc2V0WCA9IE1hdGgucm91bmQoXG4gICAgICAgICAgTWF0aC5taW4oY3VycmVudFRyYW5zZm9ybVswXSwgY3VycmVudFRyYW5zZm9ybVsyXSkgK1xuICAgICAgICAgICAgY3VycmVudFRyYW5zZm9ybVs0XVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBvZmZzZXRZID0gTWF0aC5yb3VuZChcbiAgICAgICAgICBNYXRoLm1pbihjdXJyZW50VHJhbnNmb3JtWzFdLCBjdXJyZW50VHJhbnNmb3JtWzNdKSArXG4gICAgICAgICAgICBjdXJyZW50VHJhbnNmb3JtWzVdXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY2FudmFzOiBjYWNoZWRJbWFnZSxcbiAgICAgICAgICBvZmZzZXRYLFxuICAgICAgICAgIG9mZnNldFksXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBzY2FsZWQgPSBjYWNoZWRJbWFnZTtcbiAgICB9XG5cbiAgICBpZiAoIXNjYWxlZCkge1xuICAgICAgbWFza0NhbnZhcyA9IHRoaXMuY2FjaGVkQ2FudmFzZXMuZ2V0Q2FudmFzKFxuICAgICAgICBcIm1hc2tDYW52YXNcIixcbiAgICAgICAgd2lkdGgsXG4gICAgICAgIGhlaWdodCxcbiAgICAgICAgLyogdHJhY2tUcmFuc2Zvcm0gKi8gZmFsc2VcbiAgICAgICk7XG4gICAgICBwdXRCaW5hcnlJbWFnZU1hc2sobWFza0NhbnZhcy5jb250ZXh0LCBpbWcpO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSB0aGUgbWFzayBjYW52YXMgYXQgdGhlIHNpemUgaXQgd2lsbCBiZSBkcmF3biBhdCBhbmQgYWxzbyBzZXRcbiAgICAvLyBpdHMgdHJhbnNmb3JtIHRvIG1hdGNoIHRoZSBjdXJyZW50IHRyYW5zZm9ybSBzbyBpZiB0aGVyZSBhcmUgYW55XG4gICAgLy8gcGF0dGVybnMgYXBwbGllZCB0aGV5IHdpbGwgYmUgYXBwbGllZCByZWxhdGl2ZSB0byB0aGUgY29ycmVjdFxuICAgIC8vIHRyYW5zZm9ybS5cblxuICAgIGxldCBtYXNrVG9DYW52YXMgPSBVdGlsLnRyYW5zZm9ybShjdXJyZW50VHJhbnNmb3JtLCBbXG4gICAgICAxIC8gd2lkdGgsXG4gICAgICAwLFxuICAgICAgMCxcbiAgICAgIC0xIC8gaGVpZ2h0LFxuICAgICAgMCxcbiAgICAgIDAsXG4gICAgXSk7XG4gICAgbWFza1RvQ2FudmFzID0gVXRpbC50cmFuc2Zvcm0obWFza1RvQ2FudmFzLCBbMSwgMCwgMCwgMSwgMCwgLWhlaWdodF0pO1xuICAgIGNvbnN0IGNvcmQxID0gVXRpbC5hcHBseVRyYW5zZm9ybShbMCwgMF0sIG1hc2tUb0NhbnZhcyk7XG4gICAgY29uc3QgY29yZDIgPSBVdGlsLmFwcGx5VHJhbnNmb3JtKFt3aWR0aCwgaGVpZ2h0XSwgbWFza1RvQ2FudmFzKTtcbiAgICBjb25zdCByZWN0ID0gVXRpbC5ub3JtYWxpemVSZWN0KFtjb3JkMVswXSwgY29yZDFbMV0sIGNvcmQyWzBdLCBjb3JkMlsxXV0pO1xuICAgIGNvbnN0IGRyYXduV2lkdGggPSBNYXRoLnJvdW5kKHJlY3RbMl0gLSByZWN0WzBdKSB8fCAxO1xuICAgIGNvbnN0IGRyYXduSGVpZ2h0ID0gTWF0aC5yb3VuZChyZWN0WzNdIC0gcmVjdFsxXSkgfHwgMTtcbiAgICBjb25zdCBmaWxsQ2FudmFzID0gdGhpcy5jYWNoZWRDYW52YXNlcy5nZXRDYW52YXMoXG4gICAgICBcImZpbGxDYW52YXNcIixcbiAgICAgIGRyYXduV2lkdGgsXG4gICAgICBkcmF3bkhlaWdodCxcbiAgICAgIC8qIHRyYWNrVHJhbnNmb3JtICovIHRydWVcbiAgICApO1xuICAgIGNvbnN0IGZpbGxDdHggPSBmaWxsQ2FudmFzLmNvbnRleHQ7XG5cbiAgICAvLyBUaGUgb2Zmc2V0IHdpbGwgYmUgdGhlIHRvcC1sZWZ0IGNvcmRpbmF0ZSBtYXNrLlxuICAgIC8vIElmIG9ialRvQ2FudmFzIGlzIFthLGIsYyxkLGUsZl0gdGhlbjpcbiAgICAvLyAgIC0gb2Zmc2V0WCA9IG1pbihhLCBjKSArIGVcbiAgICAvLyAgIC0gb2Zmc2V0WSA9IG1pbihiLCBkKSArIGZcbiAgICBjb25zdCBvZmZzZXRYID0gTWF0aC5taW4oY29yZDFbMF0sIGNvcmQyWzBdKTtcbiAgICBjb25zdCBvZmZzZXRZID0gTWF0aC5taW4oY29yZDFbMV0sIGNvcmQyWzFdKTtcbiAgICBmaWxsQ3R4LnRyYW5zbGF0ZSgtb2Zmc2V0WCwgLW9mZnNldFkpO1xuICAgIGZpbGxDdHgudHJhbnNmb3JtLmFwcGx5KGZpbGxDdHgsIG1hc2tUb0NhbnZhcyk7XG5cbiAgICBpZiAoIXNjYWxlZCkge1xuICAgICAgLy8gUHJlLXNjYWxlIGlmIG5lZWRlZCB0byBpbXByb3ZlIGltYWdlIHNtb290aGluZy5cbiAgICAgIHNjYWxlZCA9IHRoaXMuX3NjYWxlSW1hZ2UoXG4gICAgICAgIG1hc2tDYW52YXMuY2FudmFzLFxuICAgICAgICBmaWxsQ3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm1JbnZlcnNlXG4gICAgICApO1xuICAgICAgc2NhbGVkID0gc2NhbGVkLmltZztcbiAgICAgIGlmIChjYWNoZSAmJiBpc1BhdHRlcm5GaWxsKSB7XG4gICAgICAgIGNhY2hlLnNldChjYWNoZUtleSwgc2NhbGVkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmaWxsQ3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGdldEltYWdlU21vb3RoaW5nRW5hYmxlZChcbiAgICAgIGZpbGxDdHgubW96Q3VycmVudFRyYW5zZm9ybSxcbiAgICAgIGltZy5pbnRlcnBvbGF0ZVxuICAgICk7XG5cbiAgICBkcmF3SW1hZ2VBdEludGVnZXJDb29yZHMoXG4gICAgICBmaWxsQ3R4LFxuICAgICAgc2NhbGVkLFxuICAgICAgMCxcbiAgICAgIDAsXG4gICAgICBzY2FsZWQud2lkdGgsXG4gICAgICBzY2FsZWQuaGVpZ2h0LFxuICAgICAgMCxcbiAgICAgIDAsXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodFxuICAgICk7XG4gICAgZmlsbEN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcInNvdXJjZS1pblwiO1xuXG4gICAgY29uc3QgaW52ZXJzZSA9IFV0aWwudHJhbnNmb3JtKGZpbGxDdHgubW96Q3VycmVudFRyYW5zZm9ybUludmVyc2UsIFtcbiAgICAgIDEsXG4gICAgICAwLFxuICAgICAgMCxcbiAgICAgIDEsXG4gICAgICAtb2Zmc2V0WCxcbiAgICAgIC1vZmZzZXRZLFxuICAgIF0pO1xuICAgIGZpbGxDdHguZmlsbFN0eWxlID0gaXNQYXR0ZXJuRmlsbFxuICAgICAgPyBmaWxsQ29sb3IuZ2V0UGF0dGVybihjdHgsIHRoaXMsIGludmVyc2UsIFBhdGhUeXBlLkZJTEwpXG4gICAgICA6IGZpbGxDb2xvcjtcblxuICAgIGZpbGxDdHguZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG5cbiAgICBpZiAoY2FjaGUgJiYgIWlzUGF0dGVybkZpbGwpIHtcbiAgICAgIC8vIFRoZSBmaWxsIGNhbnZhcyBpcyBwdXQgaW4gdGhlIGNhY2hlIGFzc29jaWF0ZWQgdG8gdGhlIG1hc2sgaW1hZ2VcbiAgICAgIC8vIHNvIHdlIG11c3QgcmVtb3ZlIGZyb20gdGhlIGNhY2hlZCBjYW52YXM6IGl0IG11c3RuJ3QgYmUgdXNlZCBhZ2Fpbi5cbiAgICAgIHRoaXMuY2FjaGVkQ2FudmFzZXMuZGVsZXRlKFwiZmlsbENhbnZhc1wiKTtcbiAgICAgIGNhY2hlLnNldChjYWNoZUtleSwgZmlsbENhbnZhcy5jYW52YXMpO1xuICAgIH1cblxuICAgIC8vIFJvdW5kIHRoZSBvZmZzZXRzIHRvIGF2b2lkIGRyYXdpbmcgZnJhY3Rpb25hbCBwaXhlbHMuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNhbnZhczogZmlsbENhbnZhcy5jYW52YXMsXG4gICAgICBvZmZzZXRYOiBNYXRoLnJvdW5kKG9mZnNldFgpLFxuICAgICAgb2Zmc2V0WTogTWF0aC5yb3VuZChvZmZzZXRZKSxcbiAgICB9O1xuICB9XG5cbiAgLy8gR3JhcGhpY3Mgc3RhdGVcbiAgc2V0TGluZVdpZHRoKHdpZHRoKSB7XG4gICAgaWYgKHdpZHRoICE9PSB0aGlzLmN1cnJlbnQubGluZVdpZHRoKSB7XG4gICAgICB0aGlzLl9jYWNoZWRTY2FsZUZvclN0cm9raW5nID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5jdXJyZW50LmxpbmVXaWR0aCA9IHdpZHRoO1xuICAgIHRoaXMuY3R4LmxpbmVXaWR0aCA9IHdpZHRoO1xuICB9XG5cbiAgc2V0TGluZUNhcChzdHlsZSkge1xuICAgIHRoaXMuY3R4LmxpbmVDYXAgPSBMSU5FX0NBUF9TVFlMRVNbc3R5bGVdO1xuICB9XG5cbiAgc2V0TGluZUpvaW4oc3R5bGUpIHtcbiAgICB0aGlzLmN0eC5saW5lSm9pbiA9IExJTkVfSk9JTl9TVFlMRVNbc3R5bGVdO1xuICB9XG5cbiAgc2V0TWl0ZXJMaW1pdChsaW1pdCkge1xuICAgIHRoaXMuY3R4Lm1pdGVyTGltaXQgPSBsaW1pdDtcbiAgfVxuXG4gIHNldERhc2goZGFzaEFycmF5LCBkYXNoUGhhc2UpIHtcbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICBpZiAoY3R4LnNldExpbmVEYXNoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGN0eC5zZXRMaW5lRGFzaChkYXNoQXJyYXkpO1xuICAgICAgY3R4LmxpbmVEYXNoT2Zmc2V0ID0gZGFzaFBoYXNlO1xuICAgIH1cbiAgfVxuXG4gIHNldFJlbmRlcmluZ0ludGVudChpbnRlbnQpIHtcbiAgICAvLyBUaGlzIG9wZXJhdGlvbiBpcyBpZ25vcmVkIHNpbmNlIHdlIGhhdmVuJ3QgZm91bmQgYSB1c2UgY2FzZSBmb3IgaXQgeWV0LlxuICB9XG5cbiAgc2V0RmxhdG5lc3MoZmxhdG5lc3MpIHtcbiAgICAvLyBUaGlzIG9wZXJhdGlvbiBpcyBpZ25vcmVkIHNpbmNlIHdlIGhhdmVuJ3QgZm91bmQgYSB1c2UgY2FzZSBmb3IgaXQgeWV0LlxuICB9XG5cbiAgc2V0R1N0YXRlKHN0YXRlcykge1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHN0YXRlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICBjb25zdCBzdGF0ZSA9IHN0YXRlc1tpXTtcbiAgICAgIGNvbnN0IGtleSA9IHN0YXRlWzBdO1xuICAgICAgY29uc3QgdmFsdWUgPSBzdGF0ZVsxXTtcblxuICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgY2FzZSBcIkxXXCI6XG4gICAgICAgICAgdGhpcy5zZXRMaW5lV2lkdGgodmFsdWUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiTENcIjpcbiAgICAgICAgICB0aGlzLnNldExpbmVDYXAodmFsdWUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiTEpcIjpcbiAgICAgICAgICB0aGlzLnNldExpbmVKb2luKHZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIk1MXCI6XG4gICAgICAgICAgdGhpcy5zZXRNaXRlckxpbWl0KHZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkRcIjpcbiAgICAgICAgICB0aGlzLnNldERhc2godmFsdWVbMF0sIHZhbHVlWzFdKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIlJJXCI6XG4gICAgICAgICAgdGhpcy5zZXRSZW5kZXJpbmdJbnRlbnQodmFsdWUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiRkxcIjpcbiAgICAgICAgICB0aGlzLnNldEZsYXRuZXNzKHZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkZvbnRcIjpcbiAgICAgICAgICB0aGlzLnNldEZvbnQodmFsdWVbMF0sIHZhbHVlWzFdKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkNBXCI6XG4gICAgICAgICAgdGhpcy5jdXJyZW50LnN0cm9rZUFscGhhID0gc3RhdGVbMV07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJjYVwiOlxuICAgICAgICAgIHRoaXMuY3VycmVudC5maWxsQWxwaGEgPSBzdGF0ZVsxXTtcbiAgICAgICAgICB0aGlzLmN0eC5nbG9iYWxBbHBoYSA9IHN0YXRlWzFdO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiQk1cIjpcbiAgICAgICAgICB0aGlzLmN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSB2YWx1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIlNNYXNrXCI6XG4gICAgICAgICAgdGhpcy5jdXJyZW50LmFjdGl2ZVNNYXNrID0gdmFsdWUgPyB0aGlzLnRlbXBTTWFzayA6IG51bGw7XG4gICAgICAgICAgdGhpcy50ZW1wU01hc2sgPSBudWxsO1xuICAgICAgICAgIHRoaXMuY2hlY2tTTWFza1N0YXRlKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJUUlwiOlxuICAgICAgICAgIHRoaXMuY3VycmVudC50cmFuc2Zlck1hcHMgPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXQgaW5TTWFza01vZGUoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5zdXNwZW5kZWRDdHg7XG4gIH1cblxuICBjaGVja1NNYXNrU3RhdGUoKSB7XG4gICAgY29uc3QgaW5TTWFza01vZGUgPSB0aGlzLmluU01hc2tNb2RlO1xuICAgIGlmICh0aGlzLmN1cnJlbnQuYWN0aXZlU01hc2sgJiYgIWluU01hc2tNb2RlKSB7XG4gICAgICB0aGlzLmJlZ2luU01hc2tNb2RlKCk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5jdXJyZW50LmFjdGl2ZVNNYXNrICYmIGluU01hc2tNb2RlKSB7XG4gICAgICB0aGlzLmVuZFNNYXNrTW9kZSgpO1xuICAgIH1cbiAgICAvLyBFbHNlLCB0aGUgc3RhdGUgaXMgb2theSBhbmQgbm90aGluZyBuZWVkcyB0byBiZSBkb25lLlxuICB9XG5cbiAgLyoqXG4gICAqIFNvZnQgbWFzayBtb2RlIHRha2VzIHRoZSBjdXJyZW50IG1haW4gZHJhd2luZyBjYW52YXMgYW5kIHJlcGxhY2VzIGl0IHdpdGhcbiAgICogYSB0ZW1wb3JhcnkgY2FudmFzLiBBbnkgZHJhd2luZyBvcGVyYXRpb25zIHRoYXQgaGFwcGVuIG9uIHRoZSB0ZW1wb3JhcnlcbiAgICogY2FudmFzIG5lZWQgdG8gYmUgY29tcG9zZWQgd2l0aCB0aGUgbWFpbiBjYW52YXMgdGhhdCB3YXMgc3VzcGVuZGVkIChzZWVcbiAgICogYGNvbXBvc2UoKWApLiBUaGUgdGVtcG9yYXJ5IGNhbnZhcyBhbHNvIGR1cGxpY2F0ZXMgbWFueSBvZiBpdHMgb3BlcmF0aW9uc1xuICAgKiBvbiB0aGUgc3VzcGVuZGVkIGNhbnZhcyB0byBrZWVwIHRoZW0gaW4gc3luYywgc28gdGhhdCB3aGVuIHRoZSBzb2Z0IG1hc2tcbiAgICogbW9kZSBlbmRzIGFueSBjbGlwcGluZyBwYXRocyBvciB0cmFuc2Zvcm1hdGlvbnMgd2lsbCBzdGlsbCBiZSBhY3RpdmUgYW5kIGluXG4gICAqIHRoZSByaWdodCBvcmRlciBvbiB0aGUgY2FudmFzJyBncmFwaGljcyBzdGF0ZSBzdGFjay5cbiAgICovXG4gIGJlZ2luU01hc2tNb2RlKCkge1xuICAgIGlmICh0aGlzLmluU01hc2tNb2RlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJiZWdpblNNYXNrTW9kZSBjYWxsZWQgd2hpbGUgYWxyZWFkeSBpbiBzbWFzayBtb2RlXCIpO1xuICAgIH1cbiAgICBjb25zdCBkcmF3bldpZHRoID0gdGhpcy5jdHguY2FudmFzLndpZHRoO1xuICAgIGNvbnN0IGRyYXduSGVpZ2h0ID0gdGhpcy5jdHguY2FudmFzLmhlaWdodDtcbiAgICBjb25zdCBjYWNoZUlkID0gXCJzbWFza0dyb3VwQXRcIiArIHRoaXMuZ3JvdXBMZXZlbDtcbiAgICBjb25zdCBzY3JhdGNoQ2FudmFzID0gdGhpcy5jYWNoZWRDYW52YXNlcy5nZXRDYW52YXMoXG4gICAgICBjYWNoZUlkLFxuICAgICAgZHJhd25XaWR0aCxcbiAgICAgIGRyYXduSGVpZ2h0LFxuICAgICAgLyogdHJhY2tUcmFuc2Zvcm0gKi8gdHJ1ZVxuICAgICk7XG4gICAgdGhpcy5zdXNwZW5kZWRDdHggPSB0aGlzLmN0eDtcbiAgICB0aGlzLmN0eCA9IHNjcmF0Y2hDYW52YXMuY29udGV4dDtcbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICBjdHguc2V0VHJhbnNmb3JtLmFwcGx5KGN0eCwgdGhpcy5zdXNwZW5kZWRDdHgubW96Q3VycmVudFRyYW5zZm9ybSk7XG4gICAgY29weUN0eFN0YXRlKHRoaXMuc3VzcGVuZGVkQ3R4LCBjdHgpO1xuICAgIG1pcnJvckNvbnRleHRPcGVyYXRpb25zKGN0eCwgdGhpcy5zdXNwZW5kZWRDdHgpO1xuXG4gICAgdGhpcy5zZXRHU3RhdGUoW1xuICAgICAgW1wiQk1cIiwgXCJzb3VyY2Utb3ZlclwiXSxcbiAgICAgIFtcImNhXCIsIDFdLFxuICAgICAgW1wiQ0FcIiwgMV0sXG4gICAgXSk7XG4gIH1cblxuICBlbmRTTWFza01vZGUoKSB7XG4gICAgaWYgKCF0aGlzLmluU01hc2tNb2RlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJlbmRTTWFza01vZGUgY2FsbGVkIHdoaWxlIG5vdCBpbiBzbWFzayBtb2RlXCIpO1xuICAgIH1cbiAgICAvLyBUaGUgc29mdCBtYXNrIGlzIGRvbmUsIG5vdyByZXN0b3JlIHRoZSBzdXNwZW5kZWQgY2FudmFzIGFzIHRoZSBtYWluXG4gICAgLy8gZHJhd2luZyBjYW52YXMuXG4gICAgdGhpcy5jdHguX3JlbW92ZU1pcnJvcmluZygpO1xuICAgIGNvcHlDdHhTdGF0ZSh0aGlzLmN0eCwgdGhpcy5zdXNwZW5kZWRDdHgpO1xuICAgIHRoaXMuY3R4ID0gdGhpcy5zdXNwZW5kZWRDdHg7XG5cbiAgICB0aGlzLnN1c3BlbmRlZEN0eCA9IG51bGw7XG4gIH1cblxuICBjb21wb3NlKGRpcnR5Qm94KSB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnQuYWN0aXZlU01hc2spIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWRpcnR5Qm94KSB7XG4gICAgICBkaXJ0eUJveCA9IFswLCAwLCB0aGlzLmN0eC5jYW52YXMud2lkdGgsIHRoaXMuY3R4LmNhbnZhcy5oZWlnaHRdO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaXJ0eUJveFswXSA9IE1hdGguZmxvb3IoZGlydHlCb3hbMF0pO1xuICAgICAgZGlydHlCb3hbMV0gPSBNYXRoLmZsb29yKGRpcnR5Qm94WzFdKTtcbiAgICAgIGRpcnR5Qm94WzJdID0gTWF0aC5jZWlsKGRpcnR5Qm94WzJdKTtcbiAgICAgIGRpcnR5Qm94WzNdID0gTWF0aC5jZWlsKGRpcnR5Qm94WzNdKTtcbiAgICB9XG4gICAgY29uc3Qgc21hc2sgPSB0aGlzLmN1cnJlbnQuYWN0aXZlU01hc2s7XG4gICAgY29uc3Qgc3VzcGVuZGVkQ3R4ID0gdGhpcy5zdXNwZW5kZWRDdHg7XG5cbiAgICBjb21wb3NlU01hc2soc3VzcGVuZGVkQ3R4LCBzbWFzaywgdGhpcy5jdHgsIGRpcnR5Qm94KTtcbiAgICAvLyBXaGF0ZXZlciB3YXMgZHJhd24gaGFzIGJlZW4gbW92ZWQgdG8gdGhlIHN1c3BlbmRlZCBjYW52YXMsIG5vdyBjbGVhciBpdFxuICAgIC8vIG91dCBvZiB0aGUgY3VycmVudCBjYW52YXMuXG4gICAgdGhpcy5jdHguc2F2ZSgpO1xuICAgIHRoaXMuY3R4LnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCAwLCAwKTtcbiAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jdHguY2FudmFzLndpZHRoLCB0aGlzLmN0eC5jYW52YXMuaGVpZ2h0KTtcbiAgICB0aGlzLmN0eC5yZXN0b3JlKCk7XG4gIH1cblxuICBzYXZlKCkge1xuICAgIGlmICh0aGlzLmluU01hc2tNb2RlKSB7XG4gICAgICAvLyBTTWFzayBtb2RlIG1heSBiZSB0dXJuZWQgb24vb2ZmIGNhdXNpbmcgdXMgdG8gbG9zZSBncmFwaGljcyBzdGF0ZS5cbiAgICAgIC8vIENvcHkgdGhlIHRlbXBvcmFyeSBjYW52YXMgc3RhdGUgdG8gdGhlIG1haW4oc3VzcGVuZGVkKSBjYW52YXMgdG8ga2VlcFxuICAgICAgLy8gaXQgaW4gc3luYy5cbiAgICAgIGNvcHlDdHhTdGF0ZSh0aGlzLmN0eCwgdGhpcy5zdXNwZW5kZWRDdHgpO1xuICAgICAgLy8gRG9uJ3QgYm90aGVyIGNhbGxpbmcgc2F2ZSBvbiB0aGUgdGVtcG9yYXJ5IGNhbnZhcyBzaW5jZSBzdGF0ZSBpcyBub3RcbiAgICAgIC8vIHNhdmVkIHRoZXJlLlxuICAgICAgdGhpcy5zdXNwZW5kZWRDdHguc2F2ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmN0eC5zYXZlKCk7XG4gICAgfVxuICAgIGNvbnN0IG9sZCA9IHRoaXMuY3VycmVudDtcbiAgICB0aGlzLnN0YXRlU3RhY2sucHVzaChvbGQpO1xuICAgIHRoaXMuY3VycmVudCA9IG9sZC5jbG9uZSgpO1xuICB9XG5cbiAgcmVzdG9yZSgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZVN0YWNrLmxlbmd0aCA9PT0gMCAmJiB0aGlzLmluU01hc2tNb2RlKSB7XG4gICAgICB0aGlzLmVuZFNNYXNrTW9kZSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zdGF0ZVN0YWNrLmxlbmd0aCAhPT0gMCkge1xuICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5zdGF0ZVN0YWNrLnBvcCgpO1xuICAgICAgaWYgKHRoaXMuaW5TTWFza01vZGUpIHtcbiAgICAgICAgLy8gR3JhcGhpY3Mgc3RhdGUgaXMgc3RvcmVkIG9uIHRoZSBtYWluKHN1c3BlbmRlZCkgY2FudmFzLiBSZXN0b3JlIGl0c1xuICAgICAgICAvLyBzdGF0ZSB0aGVuIGNvcHkgaXQgb3ZlciB0byB0aGUgdGVtcG9yYXJ5IGNhbnZhcy5cbiAgICAgICAgdGhpcy5zdXNwZW5kZWRDdHgucmVzdG9yZSgpO1xuICAgICAgICBjb3B5Q3R4U3RhdGUodGhpcy5zdXNwZW5kZWRDdHgsIHRoaXMuY3R4KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY3R4LnJlc3RvcmUoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2hlY2tTTWFza1N0YXRlKCk7XG5cbiAgICAgIC8vIEVuc3VyZSB0aGF0IHRoZSBjbGlwcGluZyBwYXRoIGlzIHJlc2V0IChmaXhlcyBpc3N1ZTY0MTMucGRmKS5cbiAgICAgIHRoaXMucGVuZGluZ0NsaXAgPSBudWxsO1xuXG4gICAgICB0aGlzLl9jYWNoZWRTY2FsZUZvclN0cm9raW5nID0gbnVsbDtcbiAgICAgIHRoaXMuX2NhY2hlZEdldFNpbmdsZVBpeGVsV2lkdGggPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHRyYW5zZm9ybShhLCBiLCBjLCBkLCBlLCBmKSB7XG4gICAgdGhpcy5jdHgudHJhbnNmb3JtKGEsIGIsIGMsIGQsIGUsIGYpO1xuXG4gICAgdGhpcy5fY2FjaGVkU2NhbGVGb3JTdHJva2luZyA9IG51bGw7XG4gICAgdGhpcy5fY2FjaGVkR2V0U2luZ2xlUGl4ZWxXaWR0aCA9IG51bGw7XG4gIH1cblxuICAvLyBQYXRoXG4gIGNvbnN0cnVjdFBhdGgob3BzLCBhcmdzLCBtaW5NYXgpIHtcbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50O1xuICAgIGxldCB4ID0gY3VycmVudC54LFxuICAgICAgeSA9IGN1cnJlbnQueTtcbiAgICBsZXQgc3RhcnRYLCBzdGFydFk7XG4gICAgY29uc3QgY3VycmVudFRyYW5zZm9ybSA9IGN0eC5tb3pDdXJyZW50VHJhbnNmb3JtO1xuXG4gICAgLy8gTW9zdCBvZiB0aGUgdGltZSB0aGUgY3VycmVudCB0cmFuc2Zvcm0gaXMgYSBzY2FsaW5nIG1hdHJpeFxuICAgIC8vIHNvIHdlIGRvbid0IG5lZWQgdG8gdHJhbnNmb3JtIHBvaW50cyBiZWZvcmUgY29tcHV0aW5nIG1pbi9tYXg6XG4gICAgLy8gd2UgY2FuIGNvbXB1dGUgbWluL21heCBmaXJzdCBhbmQgdGhlbiBzbWFydGx5IFwiYXBwbHlcIiB0aGVcbiAgICAvLyB0cmFuc2Zvcm0gKHNlZSBVdGlsLnNjYWxlTWluTWF4KS5cbiAgICAvLyBGb3IgcmVjdGFuZ2xlLCBtb3ZlVG8gYW5kIGxpbmVUbywgbWluL21heCBhcmUgY29tcHV0ZWQgaW4gdGhlXG4gICAgLy8gd29ya2VyIChzZWUgZXZhbHVhdG9yLmpzKS5cbiAgICBjb25zdCBpc1NjYWxpbmdNYXRyaXggPVxuICAgICAgKGN1cnJlbnRUcmFuc2Zvcm1bMF0gPT09IDAgJiYgY3VycmVudFRyYW5zZm9ybVszXSA9PT0gMCkgfHxcbiAgICAgIChjdXJyZW50VHJhbnNmb3JtWzFdID09PSAwICYmIGN1cnJlbnRUcmFuc2Zvcm1bMl0gPT09IDApO1xuICAgIGNvbnN0IG1pbk1heEZvckJlemllciA9IGlzU2NhbGluZ01hdHJpeCA/IG1pbk1heC5zbGljZSgwKSA6IG51bGw7XG5cbiAgICBmb3IgKGxldCBpID0gMCwgaiA9IDAsIGlpID0gb3BzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgIHN3aXRjaCAob3BzW2ldIHwgMCkge1xuICAgICAgICBjYXNlIE9QUy5yZWN0YW5nbGU6XG4gICAgICAgICAgeCA9IGFyZ3NbaisrXTtcbiAgICAgICAgICB5ID0gYXJnc1tqKytdO1xuICAgICAgICAgIGNvbnN0IHdpZHRoID0gYXJnc1tqKytdO1xuICAgICAgICAgIGNvbnN0IGhlaWdodCA9IGFyZ3NbaisrXTtcblxuICAgICAgICAgIGNvbnN0IHh3ID0geCArIHdpZHRoO1xuICAgICAgICAgIGNvbnN0IHloID0geSArIGhlaWdodDtcbiAgICAgICAgICBjdHgubW92ZVRvKHgsIHkpO1xuICAgICAgICAgIGlmICh3aWR0aCA9PT0gMCB8fCBoZWlnaHQgPT09IDApIHtcbiAgICAgICAgICAgIGN0eC5saW5lVG8oeHcsIHloKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3R4LmxpbmVUbyh4dywgeSk7XG4gICAgICAgICAgICBjdHgubGluZVRvKHh3LCB5aCk7XG4gICAgICAgICAgICBjdHgubGluZVRvKHgsIHloKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFpc1NjYWxpbmdNYXRyaXgpIHtcbiAgICAgICAgICAgIGN1cnJlbnQudXBkYXRlUmVjdE1pbk1heChjdXJyZW50VHJhbnNmb3JtLCBbeCwgeSwgeHcsIHloXSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBPUFMubW92ZVRvOlxuICAgICAgICAgIHggPSBhcmdzW2orK107XG4gICAgICAgICAgeSA9IGFyZ3NbaisrXTtcbiAgICAgICAgICBjdHgubW92ZVRvKHgsIHkpO1xuICAgICAgICAgIGlmICghaXNTY2FsaW5nTWF0cml4KSB7XG4gICAgICAgICAgICBjdXJyZW50LnVwZGF0ZVBhdGhNaW5NYXgoY3VycmVudFRyYW5zZm9ybSwgeCwgeSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIE9QUy5saW5lVG86XG4gICAgICAgICAgeCA9IGFyZ3NbaisrXTtcbiAgICAgICAgICB5ID0gYXJnc1tqKytdO1xuICAgICAgICAgIGN0eC5saW5lVG8oeCwgeSk7XG4gICAgICAgICAgaWYgKCFpc1NjYWxpbmdNYXRyaXgpIHtcbiAgICAgICAgICAgIGN1cnJlbnQudXBkYXRlUGF0aE1pbk1heChjdXJyZW50VHJhbnNmb3JtLCB4LCB5KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgT1BTLmN1cnZlVG86XG4gICAgICAgICAgc3RhcnRYID0geDtcbiAgICAgICAgICBzdGFydFkgPSB5O1xuICAgICAgICAgIHggPSBhcmdzW2ogKyA0XTtcbiAgICAgICAgICB5ID0gYXJnc1tqICsgNV07XG4gICAgICAgICAgY3R4LmJlemllckN1cnZlVG8oXG4gICAgICAgICAgICBhcmdzW2pdLFxuICAgICAgICAgICAgYXJnc1tqICsgMV0sXG4gICAgICAgICAgICBhcmdzW2ogKyAyXSxcbiAgICAgICAgICAgIGFyZ3NbaiArIDNdLFxuICAgICAgICAgICAgeCxcbiAgICAgICAgICAgIHlcbiAgICAgICAgICApO1xuICAgICAgICAgIGN1cnJlbnQudXBkYXRlQ3VydmVQYXRoTWluTWF4KFxuICAgICAgICAgICAgY3VycmVudFRyYW5zZm9ybSxcbiAgICAgICAgICAgIHN0YXJ0WCxcbiAgICAgICAgICAgIHN0YXJ0WSxcbiAgICAgICAgICAgIGFyZ3Nbal0sXG4gICAgICAgICAgICBhcmdzW2ogKyAxXSxcbiAgICAgICAgICAgIGFyZ3NbaiArIDJdLFxuICAgICAgICAgICAgYXJnc1tqICsgM10sXG4gICAgICAgICAgICB4LFxuICAgICAgICAgICAgeSxcbiAgICAgICAgICAgIG1pbk1heEZvckJlemllclxuICAgICAgICAgICk7XG4gICAgICAgICAgaiArPSA2O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIE9QUy5jdXJ2ZVRvMjpcbiAgICAgICAgICBzdGFydFggPSB4O1xuICAgICAgICAgIHN0YXJ0WSA9IHk7XG4gICAgICAgICAgY3R4LmJlemllckN1cnZlVG8oXG4gICAgICAgICAgICB4LFxuICAgICAgICAgICAgeSxcbiAgICAgICAgICAgIGFyZ3Nbal0sXG4gICAgICAgICAgICBhcmdzW2ogKyAxXSxcbiAgICAgICAgICAgIGFyZ3NbaiArIDJdLFxuICAgICAgICAgICAgYXJnc1tqICsgM11cbiAgICAgICAgICApO1xuICAgICAgICAgIGN1cnJlbnQudXBkYXRlQ3VydmVQYXRoTWluTWF4KFxuICAgICAgICAgICAgY3VycmVudFRyYW5zZm9ybSxcbiAgICAgICAgICAgIHN0YXJ0WCxcbiAgICAgICAgICAgIHN0YXJ0WSxcbiAgICAgICAgICAgIHgsXG4gICAgICAgICAgICB5LFxuICAgICAgICAgICAgYXJnc1tqXSxcbiAgICAgICAgICAgIGFyZ3NbaiArIDFdLFxuICAgICAgICAgICAgYXJnc1tqICsgMl0sXG4gICAgICAgICAgICBhcmdzW2ogKyAzXSxcbiAgICAgICAgICAgIG1pbk1heEZvckJlemllclxuICAgICAgICAgICk7XG4gICAgICAgICAgeCA9IGFyZ3NbaiArIDJdO1xuICAgICAgICAgIHkgPSBhcmdzW2ogKyAzXTtcbiAgICAgICAgICBqICs9IDQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgT1BTLmN1cnZlVG8zOlxuICAgICAgICAgIHN0YXJ0WCA9IHg7XG4gICAgICAgICAgc3RhcnRZID0geTtcbiAgICAgICAgICB4ID0gYXJnc1tqICsgMl07XG4gICAgICAgICAgeSA9IGFyZ3NbaiArIDNdO1xuICAgICAgICAgIGN0eC5iZXppZXJDdXJ2ZVRvKGFyZ3Nbal0sIGFyZ3NbaiArIDFdLCB4LCB5LCB4LCB5KTtcbiAgICAgICAgICBjdXJyZW50LnVwZGF0ZUN1cnZlUGF0aE1pbk1heChcbiAgICAgICAgICAgIGN1cnJlbnRUcmFuc2Zvcm0sXG4gICAgICAgICAgICBzdGFydFgsXG4gICAgICAgICAgICBzdGFydFksXG4gICAgICAgICAgICBhcmdzW2pdLFxuICAgICAgICAgICAgYXJnc1tqICsgMV0sXG4gICAgICAgICAgICB4LFxuICAgICAgICAgICAgeSxcbiAgICAgICAgICAgIHgsXG4gICAgICAgICAgICB5LFxuICAgICAgICAgICAgbWluTWF4Rm9yQmV6aWVyXG4gICAgICAgICAgKTtcbiAgICAgICAgICBqICs9IDQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgT1BTLmNsb3NlUGF0aDpcbiAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGlzU2NhbGluZ01hdHJpeCkge1xuICAgICAgY3VycmVudC51cGRhdGVTY2FsaW5nUGF0aE1pbk1heChjdXJyZW50VHJhbnNmb3JtLCBtaW5NYXhGb3JCZXppZXIpO1xuICAgIH1cblxuICAgIGN1cnJlbnQuc2V0Q3VycmVudFBvaW50KHgsIHkpO1xuICB9XG5cbiAgY2xvc2VQYXRoKCkge1xuICAgIHRoaXMuY3R4LmNsb3NlUGF0aCgpO1xuICB9XG5cbiAgc3Ryb2tlKGNvbnN1bWVQYXRoKSB7XG4gICAgY29uc3VtZVBhdGggPSB0eXBlb2YgY29uc3VtZVBhdGggIT09IFwidW5kZWZpbmVkXCIgPyBjb25zdW1lUGF0aCA6IHRydWU7XG4gICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XG4gICAgY29uc3Qgc3Ryb2tlQ29sb3IgPSB0aGlzLmN1cnJlbnQuc3Ryb2tlQ29sb3I7XG4gICAgLy8gRm9yIHN0cm9rZSB3ZSB3YW50IHRvIHRlbXBvcmFyaWx5IGNoYW5nZSB0aGUgZ2xvYmFsIGFscGhhIHRvIHRoZVxuICAgIC8vIHN0cm9raW5nIGFscGhhLlxuICAgIGN0eC5nbG9iYWxBbHBoYSA9IHRoaXMuY3VycmVudC5zdHJva2VBbHBoYTtcbiAgICBpZiAodGhpcy5jb250ZW50VmlzaWJsZSkge1xuICAgICAgaWYgKHR5cGVvZiBzdHJva2VDb2xvciA9PT0gXCJvYmplY3RcIiAmJiBzdHJva2VDb2xvcj8uZ2V0UGF0dGVybikge1xuICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBzdHJva2VDb2xvci5nZXRQYXR0ZXJuKFxuICAgICAgICAgIGN0eCxcbiAgICAgICAgICB0aGlzLFxuICAgICAgICAgIGN0eC5tb3pDdXJyZW50VHJhbnNmb3JtSW52ZXJzZSxcbiAgICAgICAgICBQYXRoVHlwZS5TVFJPS0VcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5yZXNjYWxlQW5kU3Ryb2tlKC8qIHNhdmVSZXN0b3JlICovIGZhbHNlKTtcbiAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVzY2FsZUFuZFN0cm9rZSgvKiBzYXZlUmVzdG9yZSAqLyB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNvbnN1bWVQYXRoKSB7XG4gICAgICB0aGlzLmNvbnN1bWVQYXRoKHRoaXMuY3VycmVudC5nZXRDbGlwcGVkUGF0aEJvdW5kaW5nQm94KCkpO1xuICAgIH1cbiAgICAvLyBSZXN0b3JlIHRoZSBnbG9iYWwgYWxwaGEgdG8gdGhlIGZpbGwgYWxwaGFcbiAgICBjdHguZ2xvYmFsQWxwaGEgPSB0aGlzLmN1cnJlbnQuZmlsbEFscGhhO1xuICB9XG5cbiAgY2xvc2VTdHJva2UoKSB7XG4gICAgdGhpcy5jbG9zZVBhdGgoKTtcbiAgICB0aGlzLnN0cm9rZSgpO1xuICB9XG5cbiAgZmlsbChjb25zdW1lUGF0aCkge1xuICAgIGNvbnN1bWVQYXRoID0gdHlwZW9mIGNvbnN1bWVQYXRoICE9PSBcInVuZGVmaW5lZFwiID8gY29uc3VtZVBhdGggOiB0cnVlO1xuICAgIGNvbnN0IGN0eCA9IHRoaXMuY3R4O1xuICAgIGNvbnN0IGZpbGxDb2xvciA9IHRoaXMuY3VycmVudC5maWxsQ29sb3I7XG4gICAgY29uc3QgaXNQYXR0ZXJuRmlsbCA9IHRoaXMuY3VycmVudC5wYXR0ZXJuRmlsbDtcbiAgICBsZXQgbmVlZFJlc3RvcmUgPSBmYWxzZTtcblxuICAgIGlmIChpc1BhdHRlcm5GaWxsKSB7XG4gICAgICBjdHguc2F2ZSgpO1xuICAgICAgY3R4LmZpbGxTdHlsZSA9IGZpbGxDb2xvci5nZXRQYXR0ZXJuKFxuICAgICAgICBjdHgsXG4gICAgICAgIHRoaXMsXG4gICAgICAgIGN0eC5tb3pDdXJyZW50VHJhbnNmb3JtSW52ZXJzZSxcbiAgICAgICAgUGF0aFR5cGUuRklMTFxuICAgICAgKTtcbiAgICAgIG5lZWRSZXN0b3JlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBpbnRlcnNlY3QgPSB0aGlzLmN1cnJlbnQuZ2V0Q2xpcHBlZFBhdGhCb3VuZGluZ0JveCgpO1xuICAgIGlmICh0aGlzLmNvbnRlbnRWaXNpYmxlICYmIGludGVyc2VjdCAhPT0gbnVsbCkge1xuICAgICAgaWYgKHRoaXMucGVuZGluZ0VPRmlsbCkge1xuICAgICAgICBjdHguZmlsbChcImV2ZW5vZGRcIik7XG4gICAgICAgIHRoaXMucGVuZGluZ0VPRmlsbCA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3R4LmZpbGwoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobmVlZFJlc3RvcmUpIHtcbiAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgfVxuICAgIGlmIChjb25zdW1lUGF0aCkge1xuICAgICAgdGhpcy5jb25zdW1lUGF0aChpbnRlcnNlY3QpO1xuICAgIH1cbiAgfVxuXG4gIGVvRmlsbCgpIHtcbiAgICB0aGlzLnBlbmRpbmdFT0ZpbGwgPSB0cnVlO1xuICAgIHRoaXMuZmlsbCgpO1xuICB9XG5cbiAgZmlsbFN0cm9rZSgpIHtcbiAgICB0aGlzLmZpbGwoZmFsc2UpO1xuICAgIHRoaXMuc3Ryb2tlKGZhbHNlKTtcblxuICAgIHRoaXMuY29uc3VtZVBhdGgoKTtcbiAgfVxuXG4gIGVvRmlsbFN0cm9rZSgpIHtcbiAgICB0aGlzLnBlbmRpbmdFT0ZpbGwgPSB0cnVlO1xuICAgIHRoaXMuZmlsbFN0cm9rZSgpO1xuICB9XG5cbiAgY2xvc2VGaWxsU3Ryb2tlKCkge1xuICAgIHRoaXMuY2xvc2VQYXRoKCk7XG4gICAgdGhpcy5maWxsU3Ryb2tlKCk7XG4gIH1cblxuICBjbG9zZUVPRmlsbFN0cm9rZSgpIHtcbiAgICB0aGlzLnBlbmRpbmdFT0ZpbGwgPSB0cnVlO1xuICAgIHRoaXMuY2xvc2VQYXRoKCk7XG4gICAgdGhpcy5maWxsU3Ryb2tlKCk7XG4gIH1cblxuICBlbmRQYXRoKCkge1xuICAgIHRoaXMuY29uc3VtZVBhdGgoKTtcbiAgfVxuXG4gIC8vIENsaXBwaW5nXG4gIGNsaXAoKSB7XG4gICAgdGhpcy5wZW5kaW5nQ2xpcCA9IE5PUk1BTF9DTElQO1xuICB9XG5cbiAgZW9DbGlwKCkge1xuICAgIHRoaXMucGVuZGluZ0NsaXAgPSBFT19DTElQO1xuICB9XG5cbiAgLy8gVGV4dFxuICBiZWdpblRleHQoKSB7XG4gICAgdGhpcy5jdXJyZW50LnRleHRNYXRyaXggPSBJREVOVElUWV9NQVRSSVg7XG4gICAgdGhpcy5jdXJyZW50LnRleHRNYXRyaXhTY2FsZSA9IDE7XG4gICAgdGhpcy5jdXJyZW50LnggPSB0aGlzLmN1cnJlbnQubGluZVggPSAwO1xuICAgIHRoaXMuY3VycmVudC55ID0gdGhpcy5jdXJyZW50LmxpbmVZID0gMDtcbiAgfVxuXG4gIGVuZFRleHQoKSB7XG4gICAgY29uc3QgcGF0aHMgPSB0aGlzLnBlbmRpbmdUZXh0UGF0aHM7XG4gICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XG4gICAgaWYgKHBhdGhzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGhzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBwYXRoID0gcGF0aHNbaV07XG4gICAgICBjdHguc2V0VHJhbnNmb3JtLmFwcGx5KGN0eCwgcGF0aC50cmFuc2Zvcm0pO1xuICAgICAgY3R4LnRyYW5zbGF0ZShwYXRoLngsIHBhdGgueSk7XG4gICAgICBwYXRoLmFkZFRvUGF0aChjdHgsIHBhdGguZm9udFNpemUpO1xuICAgIH1cbiAgICBjdHgucmVzdG9yZSgpO1xuICAgIGN0eC5jbGlwKCk7XG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGRlbGV0ZSB0aGlzLnBlbmRpbmdUZXh0UGF0aHM7XG4gIH1cblxuICBzZXRDaGFyU3BhY2luZyhzcGFjaW5nKSB7XG4gICAgdGhpcy5jdXJyZW50LmNoYXJTcGFjaW5nID0gc3BhY2luZztcbiAgfVxuXG4gIHNldFdvcmRTcGFjaW5nKHNwYWNpbmcpIHtcbiAgICB0aGlzLmN1cnJlbnQud29yZFNwYWNpbmcgPSBzcGFjaW5nO1xuICB9XG5cbiAgc2V0SFNjYWxlKHNjYWxlKSB7XG4gICAgdGhpcy5jdXJyZW50LnRleHRIU2NhbGUgPSBzY2FsZSAvIDEwMDtcbiAgfVxuXG4gIHNldExlYWRpbmcobGVhZGluZykge1xuICAgIHRoaXMuY3VycmVudC5sZWFkaW5nID0gLWxlYWRpbmc7XG4gIH1cblxuICBzZXRGb250KGZvbnRSZWZOYW1lLCBzaXplKSB7XG4gICAgY29uc3QgZm9udE9iaiA9IHRoaXMuY29tbW9uT2Jqcy5nZXQoZm9udFJlZk5hbWUpO1xuICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmN1cnJlbnQ7XG5cbiAgICBpZiAoIWZvbnRPYmopIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgZmluZCBmb250IGZvciAke2ZvbnRSZWZOYW1lfWApO1xuICAgIH1cbiAgICBjdXJyZW50LmZvbnRNYXRyaXggPSBmb250T2JqLmZvbnRNYXRyaXggfHwgRk9OVF9JREVOVElUWV9NQVRSSVg7XG5cbiAgICAvLyBBIHZhbGlkIG1hdHJpeCBuZWVkcyBhbGwgbWFpbiBkaWFnb25hbCBlbGVtZW50cyB0byBiZSBub24temVyb1xuICAgIC8vIFRoaXMgYWxzbyBlbnN1cmVzIHdlIGJ5cGFzcyBGRiBidWd6aWxsYSBidWcgIzcxOTg0NC5cbiAgICBpZiAoY3VycmVudC5mb250TWF0cml4WzBdID09PSAwIHx8IGN1cnJlbnQuZm9udE1hdHJpeFszXSA9PT0gMCkge1xuICAgICAgd2FybihcIkludmFsaWQgZm9udCBtYXRyaXggZm9yIGZvbnQgXCIgKyBmb250UmVmTmFtZSk7XG4gICAgfVxuXG4gICAgLy8gVGhlIHNwZWMgZm9yIFRmIChzZXRGb250KSBzYXlzIHRoYXQgJ3NpemUnIHNwZWNpZmllcyB0aGUgZm9udCAnc2NhbGUnLFxuICAgIC8vIGFuZCBpbiBzb21lIGRvY3MgdGhpcyBjYW4gYmUgbmVnYXRpdmUgKGludmVydGVkIHgteSBheGVzKS5cbiAgICBpZiAoc2l6ZSA8IDApIHtcbiAgICAgIHNpemUgPSAtc2l6ZTtcbiAgICAgIGN1cnJlbnQuZm9udERpcmVjdGlvbiA9IC0xO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50LmZvbnREaXJlY3Rpb24gPSAxO1xuICAgIH1cblxuICAgIHRoaXMuY3VycmVudC5mb250ID0gZm9udE9iajtcbiAgICB0aGlzLmN1cnJlbnQuZm9udFNpemUgPSBzaXplO1xuXG4gICAgaWYgKGZvbnRPYmouaXNUeXBlM0ZvbnQpIHtcbiAgICAgIHJldHVybjsgLy8gd2UgZG9uJ3QgbmVlZCBjdHguZm9udCBmb3IgVHlwZTMgZm9udHNcbiAgICB9XG5cbiAgICBjb25zdCBuYW1lID0gZm9udE9iai5sb2FkZWROYW1lIHx8IFwic2Fucy1zZXJpZlwiO1xuXG4gICAgbGV0IGJvbGQgPSBcIm5vcm1hbFwiO1xuICAgIGlmIChmb250T2JqLmJsYWNrKSB7XG4gICAgICBib2xkID0gXCI5MDBcIjtcbiAgICB9IGVsc2UgaWYgKGZvbnRPYmouYm9sZCkge1xuICAgICAgYm9sZCA9IFwiYm9sZFwiO1xuICAgIH1cbiAgICBjb25zdCBpdGFsaWMgPSBmb250T2JqLml0YWxpYyA/IFwiaXRhbGljXCIgOiBcIm5vcm1hbFwiO1xuICAgIGNvbnN0IHR5cGVmYWNlID0gYFwiJHtuYW1lfVwiLCAke2ZvbnRPYmouZmFsbGJhY2tOYW1lfWA7XG5cbiAgICAvLyBTb21lIGZvbnQgYmFja2VuZHMgY2Fubm90IGhhbmRsZSBmb250cyBiZWxvdyBjZXJ0YWluIHNpemUuXG4gICAgLy8gS2VlcGluZyB0aGUgZm9udCBhdCBtaW5pbWFsIHNpemUgYW5kIHVzaW5nIHRoZSBmb250U2l6ZVNjYWxlIHRvIGNoYW5nZVxuICAgIC8vIHRoZSBjdXJyZW50IHRyYW5zZm9ybWF0aW9uIG1hdHJpeCBiZWZvcmUgdGhlIGZpbGxUZXh0L3N0cm9rZVRleHQuXG4gICAgLy8gU2VlIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTcyNjIyN1xuICAgIGxldCBicm93c2VyRm9udFNpemUgPSBzaXplO1xuICAgIGlmIChzaXplIDwgTUlOX0ZPTlRfU0laRSkge1xuICAgICAgYnJvd3NlckZvbnRTaXplID0gTUlOX0ZPTlRfU0laRTtcbiAgICB9IGVsc2UgaWYgKHNpemUgPiBNQVhfRk9OVF9TSVpFKSB7XG4gICAgICBicm93c2VyRm9udFNpemUgPSBNQVhfRk9OVF9TSVpFO1xuICAgIH1cbiAgICB0aGlzLmN1cnJlbnQuZm9udFNpemVTY2FsZSA9IHNpemUgLyBicm93c2VyRm9udFNpemU7XG5cbiAgICB0aGlzLmN0eC5mb250ID0gYCR7aXRhbGljfSAke2JvbGR9ICR7YnJvd3NlckZvbnRTaXplfXB4ICR7dHlwZWZhY2V9YDtcbiAgfVxuXG4gIHNldFRleHRSZW5kZXJpbmdNb2RlKG1vZGUpIHtcbiAgICB0aGlzLmN1cnJlbnQudGV4dFJlbmRlcmluZ01vZGUgPSBtb2RlO1xuICB9XG5cbiAgc2V0VGV4dFJpc2UocmlzZSkge1xuICAgIHRoaXMuY3VycmVudC50ZXh0UmlzZSA9IHJpc2U7XG4gIH1cblxuICBtb3ZlVGV4dCh4LCB5KSB7XG4gICAgdGhpcy5jdXJyZW50LnggPSB0aGlzLmN1cnJlbnQubGluZVggKz0geDtcbiAgICB0aGlzLmN1cnJlbnQueSA9IHRoaXMuY3VycmVudC5saW5lWSArPSB5O1xuICB9XG5cbiAgc2V0TGVhZGluZ01vdmVUZXh0KHgsIHkpIHtcbiAgICB0aGlzLnNldExlYWRpbmcoLXkpO1xuICAgIHRoaXMubW92ZVRleHQoeCwgeSk7XG4gIH1cblxuICBzZXRUZXh0TWF0cml4KGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICB0aGlzLmN1cnJlbnQudGV4dE1hdHJpeCA9IFthLCBiLCBjLCBkLCBlLCBmXTtcbiAgICB0aGlzLmN1cnJlbnQudGV4dE1hdHJpeFNjYWxlID0gTWF0aC5oeXBvdChhLCBiKTtcblxuICAgIHRoaXMuY3VycmVudC54ID0gdGhpcy5jdXJyZW50LmxpbmVYID0gMDtcbiAgICB0aGlzLmN1cnJlbnQueSA9IHRoaXMuY3VycmVudC5saW5lWSA9IDA7XG4gIH1cblxuICBuZXh0TGluZSgpIHtcbiAgICB0aGlzLm1vdmVUZXh0KDAsIHRoaXMuY3VycmVudC5sZWFkaW5nKTtcbiAgfVxuXG4gIHBhaW50Q2hhcihjaGFyYWN0ZXIsIHgsIHksIHBhdHRlcm5UcmFuc2Zvcm0pIHtcbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50O1xuICAgIGNvbnN0IGZvbnQgPSBjdXJyZW50LmZvbnQ7XG4gICAgY29uc3QgdGV4dFJlbmRlcmluZ01vZGUgPSBjdXJyZW50LnRleHRSZW5kZXJpbmdNb2RlO1xuICAgIGNvbnN0IGZvbnRTaXplID0gY3VycmVudC5mb250U2l6ZSAvIGN1cnJlbnQuZm9udFNpemVTY2FsZTtcbiAgICBjb25zdCBmaWxsU3Ryb2tlTW9kZSA9XG4gICAgICB0ZXh0UmVuZGVyaW5nTW9kZSAmIFRleHRSZW5kZXJpbmdNb2RlLkZJTExfU1RST0tFX01BU0s7XG4gICAgY29uc3QgaXNBZGRUb1BhdGhTZXQgPSAhIShcbiAgICAgIHRleHRSZW5kZXJpbmdNb2RlICYgVGV4dFJlbmRlcmluZ01vZGUuQUREX1RPX1BBVEhfRkxBR1xuICAgICk7XG4gICAgY29uc3QgcGF0dGVybkZpbGwgPSBjdXJyZW50LnBhdHRlcm5GaWxsICYmICFmb250Lm1pc3NpbmdGaWxlO1xuXG4gICAgbGV0IGFkZFRvUGF0aDtcbiAgICBpZiAoZm9udC5kaXNhYmxlRm9udEZhY2UgfHwgaXNBZGRUb1BhdGhTZXQgfHwgcGF0dGVybkZpbGwpIHtcbiAgICAgIGFkZFRvUGF0aCA9IGZvbnQuZ2V0UGF0aEdlbmVyYXRvcih0aGlzLmNvbW1vbk9ianMsIGNoYXJhY3Rlcik7XG4gICAgfVxuXG4gICAgaWYgKGZvbnQuZGlzYWJsZUZvbnRGYWNlIHx8IHBhdHRlcm5GaWxsKSB7XG4gICAgICBjdHguc2F2ZSgpO1xuICAgICAgY3R4LnRyYW5zbGF0ZSh4LCB5KTtcbiAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgIGFkZFRvUGF0aChjdHgsIGZvbnRTaXplKTtcbiAgICAgIGlmIChwYXR0ZXJuVHJhbnNmb3JtKSB7XG4gICAgICAgIGN0eC5zZXRUcmFuc2Zvcm0uYXBwbHkoY3R4LCBwYXR0ZXJuVHJhbnNmb3JtKTtcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgZmlsbFN0cm9rZU1vZGUgPT09IFRleHRSZW5kZXJpbmdNb2RlLkZJTEwgfHxcbiAgICAgICAgZmlsbFN0cm9rZU1vZGUgPT09IFRleHRSZW5kZXJpbmdNb2RlLkZJTExfU1RST0tFXG4gICAgICApIHtcbiAgICAgICAgY3R4LmZpbGwoKTtcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgZmlsbFN0cm9rZU1vZGUgPT09IFRleHRSZW5kZXJpbmdNb2RlLlNUUk9LRSB8fFxuICAgICAgICBmaWxsU3Ryb2tlTW9kZSA9PT0gVGV4dFJlbmRlcmluZ01vZGUuRklMTF9TVFJPS0VcbiAgICAgICkge1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICB9XG4gICAgICBjdHgucmVzdG9yZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoXG4gICAgICAgIGZpbGxTdHJva2VNb2RlID09PSBUZXh0UmVuZGVyaW5nTW9kZS5GSUxMIHx8XG4gICAgICAgIGZpbGxTdHJva2VNb2RlID09PSBUZXh0UmVuZGVyaW5nTW9kZS5GSUxMX1NUUk9LRVxuICAgICAgKSB7XG4gICAgICAgIGN0eC5maWxsVGV4dChjaGFyYWN0ZXIsIHgsIHkpO1xuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICBmaWxsU3Ryb2tlTW9kZSA9PT0gVGV4dFJlbmRlcmluZ01vZGUuU1RST0tFIHx8XG4gICAgICAgIGZpbGxTdHJva2VNb2RlID09PSBUZXh0UmVuZGVyaW5nTW9kZS5GSUxMX1NUUk9LRVxuICAgICAgKSB7XG4gICAgICAgIGN0eC5zdHJva2VUZXh0KGNoYXJhY3RlciwgeCwgeSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGlzQWRkVG9QYXRoU2V0KSB7XG4gICAgICBjb25zdCBwYXRocyA9IHRoaXMucGVuZGluZ1RleHRQYXRocyB8fCAodGhpcy5wZW5kaW5nVGV4dFBhdGhzID0gW10pO1xuICAgICAgcGF0aHMucHVzaCh7XG4gICAgICAgIHRyYW5zZm9ybTogY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm0sXG4gICAgICAgIHgsXG4gICAgICAgIHksXG4gICAgICAgIGZvbnRTaXplLFxuICAgICAgICBhZGRUb1BhdGgsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBnZXQgaXNGb250U3VicGl4ZWxBQUVuYWJsZWQoKSB7XG4gICAgLy8gQ2hlY2tzIGlmIGFudGktYWxpYXNpbmcgaXMgZW5hYmxlZCB3aGVuIHNjYWxlZCB0ZXh0IGlzIHBhaW50ZWQuXG4gICAgLy8gT24gV2luZG93cyBHREkgc2NhbGVkIGZvbnRzIGxvb2tzIGJhZC5cbiAgICBjb25zdCB7IGNvbnRleHQ6IGN0eCB9ID0gdGhpcy5jYWNoZWRDYW52YXNlcy5nZXRDYW52YXMoXG4gICAgICBcImlzRm9udFN1YnBpeGVsQUFFbmFibGVkXCIsXG4gICAgICAxMCxcbiAgICAgIDEwLFxuICAgICAgLyogdHJhY2tUcmFuc2Zvcm0gKi8gZmFsc2VcbiAgICApO1xuICAgIGN0eC5zY2FsZSgxLjUsIDEpO1xuICAgIGN0eC5maWxsVGV4dChcIklcIiwgMCwgMTApO1xuICAgIGNvbnN0IGRhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIDEwLCAxMCkuZGF0YTtcbiAgICBsZXQgZW5hYmxlZCA9IGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSAzOyBpIDwgZGF0YS5sZW5ndGg7IGkgKz0gNCkge1xuICAgICAgaWYgKGRhdGFbaV0gPiAwICYmIGRhdGFbaV0gPCAyNTUpIHtcbiAgICAgICAgZW5hYmxlZCA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2hhZG93KHRoaXMsIFwiaXNGb250U3VicGl4ZWxBQUVuYWJsZWRcIiwgZW5hYmxlZCk7XG4gIH1cblxuICBzaG93VGV4dChnbHlwaHMpIHtcbiAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50O1xuICAgIGNvbnN0IGZvbnQgPSBjdXJyZW50LmZvbnQ7XG4gICAgaWYgKGZvbnQuaXNUeXBlM0ZvbnQpIHtcbiAgICAgIHJldHVybiB0aGlzLnNob3dUeXBlM1RleHQoZ2x5cGhzKTtcbiAgICB9XG5cbiAgICBjb25zdCBmb250U2l6ZSA9IGN1cnJlbnQuZm9udFNpemU7XG4gICAgaWYgKGZvbnRTaXplID09PSAwKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGNvbnN0IGN0eCA9IHRoaXMuY3R4O1xuICAgIGNvbnN0IGZvbnRTaXplU2NhbGUgPSBjdXJyZW50LmZvbnRTaXplU2NhbGU7XG4gICAgY29uc3QgY2hhclNwYWNpbmcgPSBjdXJyZW50LmNoYXJTcGFjaW5nO1xuICAgIGNvbnN0IHdvcmRTcGFjaW5nID0gY3VycmVudC53b3JkU3BhY2luZztcbiAgICBjb25zdCBmb250RGlyZWN0aW9uID0gY3VycmVudC5mb250RGlyZWN0aW9uO1xuICAgIGNvbnN0IHRleHRIU2NhbGUgPSBjdXJyZW50LnRleHRIU2NhbGUgKiBmb250RGlyZWN0aW9uO1xuICAgIGNvbnN0IGdseXBoc0xlbmd0aCA9IGdseXBocy5sZW5ndGg7XG4gICAgY29uc3QgdmVydGljYWwgPSBmb250LnZlcnRpY2FsO1xuICAgIGNvbnN0IHNwYWNpbmdEaXIgPSB2ZXJ0aWNhbCA/IDEgOiAtMTtcbiAgICBjb25zdCBkZWZhdWx0Vk1ldHJpY3MgPSBmb250LmRlZmF1bHRWTWV0cmljcztcbiAgICBjb25zdCB3aWR0aEFkdmFuY2VTY2FsZSA9IGZvbnRTaXplICogY3VycmVudC5mb250TWF0cml4WzBdO1xuXG4gICAgY29uc3Qgc2ltcGxlRmlsbFRleHQgPVxuICAgICAgY3VycmVudC50ZXh0UmVuZGVyaW5nTW9kZSA9PT0gVGV4dFJlbmRlcmluZ01vZGUuRklMTCAmJlxuICAgICAgIWZvbnQuZGlzYWJsZUZvbnRGYWNlICYmXG4gICAgICAhY3VycmVudC5wYXR0ZXJuRmlsbDtcblxuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LnRyYW5zZm9ybS5hcHBseShjdHgsIGN1cnJlbnQudGV4dE1hdHJpeCk7XG4gICAgY3R4LnRyYW5zbGF0ZShjdXJyZW50LngsIGN1cnJlbnQueSArIGN1cnJlbnQudGV4dFJpc2UpO1xuXG4gICAgaWYgKGZvbnREaXJlY3Rpb24gPiAwKSB7XG4gICAgICBjdHguc2NhbGUodGV4dEhTY2FsZSwgLTEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdHguc2NhbGUodGV4dEhTY2FsZSwgMSk7XG4gICAgfVxuXG4gICAgbGV0IHBhdHRlcm5UcmFuc2Zvcm07XG4gICAgaWYgKGN1cnJlbnQucGF0dGVybkZpbGwpIHtcbiAgICAgIGN0eC5zYXZlKCk7XG4gICAgICBjb25zdCBwYXR0ZXJuID0gY3VycmVudC5maWxsQ29sb3IuZ2V0UGF0dGVybihcbiAgICAgICAgY3R4LFxuICAgICAgICB0aGlzLFxuICAgICAgICBjdHgubW96Q3VycmVudFRyYW5zZm9ybUludmVyc2UsXG4gICAgICAgIFBhdGhUeXBlLkZJTExcbiAgICAgICk7XG4gICAgICBwYXR0ZXJuVHJhbnNmb3JtID0gY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm07XG4gICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgY3R4LmZpbGxTdHlsZSA9IHBhdHRlcm47XG4gICAgfVxuXG4gICAgbGV0IGxpbmVXaWR0aCA9IGN1cnJlbnQubGluZVdpZHRoO1xuICAgIGNvbnN0IHNjYWxlID0gY3VycmVudC50ZXh0TWF0cml4U2NhbGU7XG4gICAgaWYgKHNjYWxlID09PSAwIHx8IGxpbmVXaWR0aCA9PT0gMCkge1xuICAgICAgY29uc3QgZmlsbFN0cm9rZU1vZGUgPVxuICAgICAgICBjdXJyZW50LnRleHRSZW5kZXJpbmdNb2RlICYgVGV4dFJlbmRlcmluZ01vZGUuRklMTF9TVFJPS0VfTUFTSztcbiAgICAgIGlmIChcbiAgICAgICAgZmlsbFN0cm9rZU1vZGUgPT09IFRleHRSZW5kZXJpbmdNb2RlLlNUUk9LRSB8fFxuICAgICAgICBmaWxsU3Ryb2tlTW9kZSA9PT0gVGV4dFJlbmRlcmluZ01vZGUuRklMTF9TVFJPS0VcbiAgICAgICkge1xuICAgICAgICBsaW5lV2lkdGggPSB0aGlzLmdldFNpbmdsZVBpeGVsV2lkdGgoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbGluZVdpZHRoIC89IHNjYWxlO1xuICAgIH1cblxuICAgIGlmIChmb250U2l6ZVNjYWxlICE9PSAxLjApIHtcbiAgICAgIGN0eC5zY2FsZShmb250U2l6ZVNjYWxlLCBmb250U2l6ZVNjYWxlKTtcbiAgICAgIGxpbmVXaWR0aCAvPSBmb250U2l6ZVNjYWxlO1xuICAgIH1cblxuICAgIGN0eC5saW5lV2lkdGggPSBsaW5lV2lkdGg7XG5cbiAgICBsZXQgeCA9IDAsXG4gICAgICBpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBnbHlwaHNMZW5ndGg7ICsraSkge1xuICAgICAgY29uc3QgZ2x5cGggPSBnbHlwaHNbaV07XG4gICAgICBpZiAodHlwZW9mIGdseXBoID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHggKz0gKHNwYWNpbmdEaXIgKiBnbHlwaCAqIGZvbnRTaXplKSAvIDEwMDA7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBsZXQgcmVzdG9yZU5lZWRlZCA9IGZhbHNlO1xuICAgICAgY29uc3Qgc3BhY2luZyA9IChnbHlwaC5pc1NwYWNlID8gd29yZFNwYWNpbmcgOiAwKSArIGNoYXJTcGFjaW5nO1xuICAgICAgY29uc3QgY2hhcmFjdGVyID0gZ2x5cGguZm9udENoYXI7XG4gICAgICBjb25zdCBhY2NlbnQgPSBnbHlwaC5hY2NlbnQ7XG4gICAgICBsZXQgc2NhbGVkWCwgc2NhbGVkWTtcbiAgICAgIGxldCB3aWR0aCA9IGdseXBoLndpZHRoO1xuICAgICAgaWYgKHZlcnRpY2FsKSB7XG4gICAgICAgIGNvbnN0IHZtZXRyaWMgPSBnbHlwaC52bWV0cmljIHx8IGRlZmF1bHRWTWV0cmljcztcbiAgICAgICAgY29uc3QgdnggPVxuICAgICAgICAgIC0oZ2x5cGgudm1ldHJpYyA/IHZtZXRyaWNbMV0gOiB3aWR0aCAqIDAuNSkgKiB3aWR0aEFkdmFuY2VTY2FsZTtcbiAgICAgICAgY29uc3QgdnkgPSB2bWV0cmljWzJdICogd2lkdGhBZHZhbmNlU2NhbGU7XG5cbiAgICAgICAgd2lkdGggPSB2bWV0cmljID8gLXZtZXRyaWNbMF0gOiB3aWR0aDtcbiAgICAgICAgc2NhbGVkWCA9IHZ4IC8gZm9udFNpemVTY2FsZTtcbiAgICAgICAgc2NhbGVkWSA9ICh4ICsgdnkpIC8gZm9udFNpemVTY2FsZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNjYWxlZFggPSB4IC8gZm9udFNpemVTY2FsZTtcbiAgICAgICAgc2NhbGVkWSA9IDA7XG4gICAgICB9XG5cbiAgICAgIGlmIChmb250LnJlbWVhc3VyZSAmJiB3aWR0aCA+IDApIHtcbiAgICAgICAgLy8gU29tZSBzdGFuZGFyZCBmb250cyBtYXkgbm90IGhhdmUgdGhlIGV4YWN0IHdpZHRoOiByZXNjYWxlIHBlclxuICAgICAgICAvLyBjaGFyYWN0ZXIgaWYgbWVhc3VyZWQgd2lkdGggaXMgZ3JlYXRlciB0aGFuIGV4cGVjdGVkIGdseXBoIHdpZHRoXG4gICAgICAgIC8vIGFuZCBzdWJwaXhlbC1hYSBpcyBlbmFibGVkLCBvdGhlcndpc2UganVzdCBjZW50ZXIgdGhlIGdseXBoLlxuICAgICAgICBjb25zdCBtZWFzdXJlZFdpZHRoID1cbiAgICAgICAgICAoKGN0eC5tZWFzdXJlVGV4dChjaGFyYWN0ZXIpLndpZHRoICogMTAwMCkgLyBmb250U2l6ZSkgKlxuICAgICAgICAgIGZvbnRTaXplU2NhbGU7XG4gICAgICAgIGlmICh3aWR0aCA8IG1lYXN1cmVkV2lkdGggJiYgdGhpcy5pc0ZvbnRTdWJwaXhlbEFBRW5hYmxlZCkge1xuICAgICAgICAgIGNvbnN0IGNoYXJhY3RlclNjYWxlWCA9IHdpZHRoIC8gbWVhc3VyZWRXaWR0aDtcbiAgICAgICAgICByZXN0b3JlTmVlZGVkID0gdHJ1ZTtcbiAgICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICAgIGN0eC5zY2FsZShjaGFyYWN0ZXJTY2FsZVgsIDEpO1xuICAgICAgICAgIHNjYWxlZFggLz0gY2hhcmFjdGVyU2NhbGVYO1xuICAgICAgICB9IGVsc2UgaWYgKHdpZHRoICE9PSBtZWFzdXJlZFdpZHRoKSB7XG4gICAgICAgICAgc2NhbGVkWCArPVxuICAgICAgICAgICAgKCgod2lkdGggLSBtZWFzdXJlZFdpZHRoKSAvIDIwMDApICogZm9udFNpemUpIC8gZm9udFNpemVTY2FsZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBPbmx5IGF0dGVtcHQgdG8gZHJhdyB0aGUgZ2x5cGggaWYgaXQgaXMgYWN0dWFsbHkgaW4gdGhlIGVtYmVkZGVkIGZvbnRcbiAgICAgIC8vIGZpbGUgb3IgaWYgdGhlcmUgaXNuJ3QgYSBmb250IGZpbGUgc28gdGhlIGZhbGxiYWNrIGZvbnQgaXMgc2hvd24uXG4gICAgICBpZiAodGhpcy5jb250ZW50VmlzaWJsZSAmJiAoZ2x5cGguaXNJbkZvbnQgfHwgZm9udC5taXNzaW5nRmlsZSkpIHtcbiAgICAgICAgaWYgKHNpbXBsZUZpbGxUZXh0ICYmICFhY2NlbnQpIHtcbiAgICAgICAgICAvLyBjb21tb24gY2FzZVxuICAgICAgICAgIGN0eC5maWxsVGV4dChjaGFyYWN0ZXIsIHNjYWxlZFgsIHNjYWxlZFkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucGFpbnRDaGFyKGNoYXJhY3Rlciwgc2NhbGVkWCwgc2NhbGVkWSwgcGF0dGVyblRyYW5zZm9ybSk7XG4gICAgICAgICAgaWYgKGFjY2VudCkge1xuICAgICAgICAgICAgY29uc3Qgc2NhbGVkQWNjZW50WCA9XG4gICAgICAgICAgICAgIHNjYWxlZFggKyAoZm9udFNpemUgKiBhY2NlbnQub2Zmc2V0LngpIC8gZm9udFNpemVTY2FsZTtcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlZEFjY2VudFkgPVxuICAgICAgICAgICAgICBzY2FsZWRZIC0gKGZvbnRTaXplICogYWNjZW50Lm9mZnNldC55KSAvIGZvbnRTaXplU2NhbGU7XG4gICAgICAgICAgICB0aGlzLnBhaW50Q2hhcihcbiAgICAgICAgICAgICAgYWNjZW50LmZvbnRDaGFyLFxuICAgICAgICAgICAgICBzY2FsZWRBY2NlbnRYLFxuICAgICAgICAgICAgICBzY2FsZWRBY2NlbnRZLFxuICAgICAgICAgICAgICBwYXR0ZXJuVHJhbnNmb3JtXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsZXQgY2hhcldpZHRoO1xuICAgICAgaWYgKHZlcnRpY2FsKSB7XG4gICAgICAgIGNoYXJXaWR0aCA9IHdpZHRoICogd2lkdGhBZHZhbmNlU2NhbGUgLSBzcGFjaW5nICogZm9udERpcmVjdGlvbjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoYXJXaWR0aCA9IHdpZHRoICogd2lkdGhBZHZhbmNlU2NhbGUgKyBzcGFjaW5nICogZm9udERpcmVjdGlvbjtcbiAgICAgIH1cbiAgICAgIHggKz0gY2hhcldpZHRoO1xuXG4gICAgICBpZiAocmVzdG9yZU5lZWRlZCkge1xuICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodmVydGljYWwpIHtcbiAgICAgIGN1cnJlbnQueSAtPSB4O1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50LnggKz0geCAqIHRleHRIU2NhbGU7XG4gICAgfVxuICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgdGhpcy5jb21wb3NlKCk7XG5cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgc2hvd1R5cGUzVGV4dChnbHlwaHMpIHtcbiAgICAvLyBUeXBlMyBmb250cyAtIGVhY2ggZ2x5cGggaXMgYSBcIm1pbmktUERGXCJcbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50O1xuICAgIGNvbnN0IGZvbnQgPSBjdXJyZW50LmZvbnQ7XG4gICAgY29uc3QgZm9udFNpemUgPSBjdXJyZW50LmZvbnRTaXplO1xuICAgIGNvbnN0IGZvbnREaXJlY3Rpb24gPSBjdXJyZW50LmZvbnREaXJlY3Rpb247XG4gICAgY29uc3Qgc3BhY2luZ0RpciA9IGZvbnQudmVydGljYWwgPyAxIDogLTE7XG4gICAgY29uc3QgY2hhclNwYWNpbmcgPSBjdXJyZW50LmNoYXJTcGFjaW5nO1xuICAgIGNvbnN0IHdvcmRTcGFjaW5nID0gY3VycmVudC53b3JkU3BhY2luZztcbiAgICBjb25zdCB0ZXh0SFNjYWxlID0gY3VycmVudC50ZXh0SFNjYWxlICogZm9udERpcmVjdGlvbjtcbiAgICBjb25zdCBmb250TWF0cml4ID0gY3VycmVudC5mb250TWF0cml4IHx8IEZPTlRfSURFTlRJVFlfTUFUUklYO1xuICAgIGNvbnN0IGdseXBoc0xlbmd0aCA9IGdseXBocy5sZW5ndGg7XG4gICAgY29uc3QgaXNUZXh0SW52aXNpYmxlID1cbiAgICAgIGN1cnJlbnQudGV4dFJlbmRlcmluZ01vZGUgPT09IFRleHRSZW5kZXJpbmdNb2RlLklOVklTSUJMRTtcbiAgICBsZXQgaSwgZ2x5cGgsIHdpZHRoLCBzcGFjaW5nTGVuZ3RoO1xuXG4gICAgaWYgKGlzVGV4dEludmlzaWJsZSB8fCBmb250U2l6ZSA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9jYWNoZWRTY2FsZUZvclN0cm9raW5nID0gbnVsbDtcbiAgICB0aGlzLl9jYWNoZWRHZXRTaW5nbGVQaXhlbFdpZHRoID0gbnVsbDtcblxuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LnRyYW5zZm9ybS5hcHBseShjdHgsIGN1cnJlbnQudGV4dE1hdHJpeCk7XG4gICAgY3R4LnRyYW5zbGF0ZShjdXJyZW50LngsIGN1cnJlbnQueSk7XG5cbiAgICBjdHguc2NhbGUodGV4dEhTY2FsZSwgZm9udERpcmVjdGlvbik7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgZ2x5cGhzTGVuZ3RoOyArK2kpIHtcbiAgICAgIGdseXBoID0gZ2x5cGhzW2ldO1xuICAgICAgaWYgKHR5cGVvZiBnbHlwaCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICBzcGFjaW5nTGVuZ3RoID0gKHNwYWNpbmdEaXIgKiBnbHlwaCAqIGZvbnRTaXplKSAvIDEwMDA7XG4gICAgICAgIHRoaXMuY3R4LnRyYW5zbGF0ZShzcGFjaW5nTGVuZ3RoLCAwKTtcbiAgICAgICAgY3VycmVudC54ICs9IHNwYWNpbmdMZW5ndGggKiB0ZXh0SFNjYWxlO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3BhY2luZyA9IChnbHlwaC5pc1NwYWNlID8gd29yZFNwYWNpbmcgOiAwKSArIGNoYXJTcGFjaW5nO1xuICAgICAgY29uc3Qgb3BlcmF0b3JMaXN0ID0gZm9udC5jaGFyUHJvY09wZXJhdG9yTGlzdFtnbHlwaC5vcGVyYXRvckxpc3RJZF07XG4gICAgICBpZiAoIW9wZXJhdG9yTGlzdCkge1xuICAgICAgICB3YXJuKGBUeXBlMyBjaGFyYWN0ZXIgXCIke2dseXBoLm9wZXJhdG9yTGlzdElkfVwiIGlzIG5vdCBhdmFpbGFibGUuYCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuY29udGVudFZpc2libGUpIHtcbiAgICAgICAgdGhpcy5wcm9jZXNzaW5nVHlwZTMgPSBnbHlwaDtcbiAgICAgICAgdGhpcy5zYXZlKCk7XG4gICAgICAgIGN0eC5zY2FsZShmb250U2l6ZSwgZm9udFNpemUpO1xuICAgICAgICBjdHgudHJhbnNmb3JtLmFwcGx5KGN0eCwgZm9udE1hdHJpeCk7XG4gICAgICAgIHRoaXMuZXhlY3V0ZU9wZXJhdG9yTGlzdChvcGVyYXRvckxpc3QpO1xuICAgICAgICB0aGlzLnJlc3RvcmUoKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdHJhbnNmb3JtZWQgPSBVdGlsLmFwcGx5VHJhbnNmb3JtKFtnbHlwaC53aWR0aCwgMF0sIGZvbnRNYXRyaXgpO1xuICAgICAgd2lkdGggPSB0cmFuc2Zvcm1lZFswXSAqIGZvbnRTaXplICsgc3BhY2luZztcblxuICAgICAgY3R4LnRyYW5zbGF0ZSh3aWR0aCwgMCk7XG4gICAgICBjdXJyZW50LnggKz0gd2lkdGggKiB0ZXh0SFNjYWxlO1xuICAgIH1cbiAgICBjdHgucmVzdG9yZSgpO1xuICAgIHRoaXMucHJvY2Vzc2luZ1R5cGUzID0gbnVsbDtcbiAgfVxuXG4gIC8vIFR5cGUzIGZvbnRzXG4gIHNldENoYXJXaWR0aCh4V2lkdGgsIHlXaWR0aCkge1xuICAgIC8vIFdlIGNhbiBzYWZlbHkgaWdub3JlIHRoaXMgc2luY2UgdGhlIHdpZHRoIHNob3VsZCBiZSB0aGUgc2FtZVxuICAgIC8vIGFzIHRoZSB3aWR0aCBpbiB0aGUgV2lkdGhzIGFycmF5LlxuICB9XG5cbiAgc2V0Q2hhcldpZHRoQW5kQm91bmRzKHhXaWR0aCwgeVdpZHRoLCBsbHgsIGxseSwgdXJ4LCB1cnkpIHtcbiAgICAvLyBUT0RPIEFjY29yZGluZyB0byB0aGUgc3BlYyB3ZSdyZSBhbHNvIHN1cHBvc2UgdG8gaWdub3JlIGFueSBvcGVyYXRvcnNcbiAgICAvLyB0aGF0IHNldCBjb2xvciBvciBpbmNsdWRlIGltYWdlcyB3aGlsZSBwcm9jZXNzaW5nIHRoaXMgdHlwZTMgZm9udC5cbiAgICB0aGlzLmN0eC5yZWN0KGxseCwgbGx5LCB1cnggLSBsbHgsIHVyeSAtIGxseSk7XG4gICAgdGhpcy5jdHguY2xpcCgpO1xuICAgIHRoaXMuZW5kUGF0aCgpO1xuICB9XG5cbiAgLy8gQ29sb3JcbiAgZ2V0Q29sb3JOX1BhdHRlcm4oSVIpIHtcbiAgICBsZXQgcGF0dGVybjtcbiAgICBpZiAoSVJbMF0gPT09IFwiVGlsaW5nUGF0dGVyblwiKSB7XG4gICAgICBjb25zdCBjb2xvciA9IElSWzFdO1xuICAgICAgY29uc3QgYmFzZVRyYW5zZm9ybSA9XG4gICAgICAgIHRoaXMuYmFzZVRyYW5zZm9ybSB8fCB0aGlzLmN0eC5tb3pDdXJyZW50VHJhbnNmb3JtLnNsaWNlKCk7XG4gICAgICBjb25zdCBjYW52YXNHcmFwaGljc0ZhY3RvcnkgPSB7XG4gICAgICAgIGNyZWF0ZUNhbnZhc0dyYXBoaWNzOiBjdHggPT4ge1xuICAgICAgICAgIHJldHVybiBuZXcgQ2FudmFzR3JhcGhpY3MoXG4gICAgICAgICAgICBjdHgsXG4gICAgICAgICAgICB0aGlzLmNvbW1vbk9ianMsXG4gICAgICAgICAgICB0aGlzLm9ianMsXG4gICAgICAgICAgICB0aGlzLmNhbnZhc0ZhY3RvcnlcbiAgICAgICAgICApO1xuICAgICAgICB9LFxuICAgICAgfTtcbiAgICAgIHBhdHRlcm4gPSBuZXcgVGlsaW5nUGF0dGVybihcbiAgICAgICAgSVIsXG4gICAgICAgIGNvbG9yLFxuICAgICAgICB0aGlzLmN0eCxcbiAgICAgICAgY2FudmFzR3JhcGhpY3NGYWN0b3J5LFxuICAgICAgICBiYXNlVHJhbnNmb3JtXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXR0ZXJuID0gdGhpcy5fZ2V0UGF0dGVybihJUlsxXSwgSVJbMl0pO1xuICAgIH1cbiAgICByZXR1cm4gcGF0dGVybjtcbiAgfVxuXG4gIHNldFN0cm9rZUNvbG9yTigpIHtcbiAgICB0aGlzLmN1cnJlbnQuc3Ryb2tlQ29sb3IgPSB0aGlzLmdldENvbG9yTl9QYXR0ZXJuKGFyZ3VtZW50cyk7XG4gIH1cblxuICBzZXRGaWxsQ29sb3JOKCkge1xuICAgIHRoaXMuY3VycmVudC5maWxsQ29sb3IgPSB0aGlzLmdldENvbG9yTl9QYXR0ZXJuKGFyZ3VtZW50cyk7XG4gICAgdGhpcy5jdXJyZW50LnBhdHRlcm5GaWxsID0gdHJ1ZTtcbiAgfVxuXG4gIHNldFN0cm9rZVJHQkNvbG9yKHIsIGcsIGIpIHtcbiAgICBjb25zdCBjb2xvciA9IHRoaXMuc2VsZWN0Q29sb3I/LihyLCBnLCBiKSB8fCBVdGlsLm1ha2VIZXhDb2xvcihyLCBnLCBiKTtcbiAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IGNvbG9yO1xuICAgIHRoaXMuY3VycmVudC5zdHJva2VDb2xvciA9IGNvbG9yO1xuICB9XG5cbiAgc2V0RmlsbFJHQkNvbG9yKHIsIGcsIGIpIHtcbiAgICBjb25zdCBjb2xvciA9IHRoaXMuc2VsZWN0Q29sb3I/LihyLCBnLCBiKSB8fCBVdGlsLm1ha2VIZXhDb2xvcihyLCBnLCBiKTtcbiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgICB0aGlzLmN1cnJlbnQuZmlsbENvbG9yID0gY29sb3I7XG4gICAgdGhpcy5jdXJyZW50LnBhdHRlcm5GaWxsID0gZmFsc2U7XG4gIH1cblxuICBfZ2V0UGF0dGVybihvYmpJZCwgbWF0cml4ID0gbnVsbCkge1xuICAgIGxldCBwYXR0ZXJuO1xuICAgIGlmICh0aGlzLmNhY2hlZFBhdHRlcm5zLmhhcyhvYmpJZCkpIHtcbiAgICAgIHBhdHRlcm4gPSB0aGlzLmNhY2hlZFBhdHRlcm5zLmdldChvYmpJZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhdHRlcm4gPSBnZXRTaGFkaW5nUGF0dGVybih0aGlzLm9ianMuZ2V0KG9iaklkKSk7XG4gICAgICB0aGlzLmNhY2hlZFBhdHRlcm5zLnNldChvYmpJZCwgcGF0dGVybik7XG4gICAgfVxuICAgIGlmIChtYXRyaXgpIHtcbiAgICAgIHBhdHRlcm4ubWF0cml4ID0gbWF0cml4O1xuICAgIH1cbiAgICByZXR1cm4gcGF0dGVybjtcbiAgfVxuXG4gIHNoYWRpbmdGaWxsKG9iaklkKSB7XG4gICAgaWYgKCF0aGlzLmNvbnRlbnRWaXNpYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGN0eCA9IHRoaXMuY3R4O1xuXG4gICAgdGhpcy5zYXZlKCk7XG4gICAgY29uc3QgcGF0dGVybiA9IHRoaXMuX2dldFBhdHRlcm4ob2JqSWQpO1xuICAgIGN0eC5maWxsU3R5bGUgPSBwYXR0ZXJuLmdldFBhdHRlcm4oXG4gICAgICBjdHgsXG4gICAgICB0aGlzLFxuICAgICAgY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm1JbnZlcnNlLFxuICAgICAgUGF0aFR5cGUuU0hBRElOR1xuICAgICk7XG5cbiAgICBjb25zdCBpbnYgPSBjdHgubW96Q3VycmVudFRyYW5zZm9ybUludmVyc2U7XG4gICAgaWYgKGludikge1xuICAgICAgY29uc3QgY2FudmFzID0gY3R4LmNhbnZhcztcbiAgICAgIGNvbnN0IHdpZHRoID0gY2FudmFzLndpZHRoO1xuICAgICAgY29uc3QgaGVpZ2h0ID0gY2FudmFzLmhlaWdodDtcblxuICAgICAgY29uc3QgYmwgPSBVdGlsLmFwcGx5VHJhbnNmb3JtKFswLCAwXSwgaW52KTtcbiAgICAgIGNvbnN0IGJyID0gVXRpbC5hcHBseVRyYW5zZm9ybShbMCwgaGVpZ2h0XSwgaW52KTtcbiAgICAgIGNvbnN0IHVsID0gVXRpbC5hcHBseVRyYW5zZm9ybShbd2lkdGgsIDBdLCBpbnYpO1xuICAgICAgY29uc3QgdXIgPSBVdGlsLmFwcGx5VHJhbnNmb3JtKFt3aWR0aCwgaGVpZ2h0XSwgaW52KTtcblxuICAgICAgY29uc3QgeDAgPSBNYXRoLm1pbihibFswXSwgYnJbMF0sIHVsWzBdLCB1clswXSk7XG4gICAgICBjb25zdCB5MCA9IE1hdGgubWluKGJsWzFdLCBiclsxXSwgdWxbMV0sIHVyWzFdKTtcbiAgICAgIGNvbnN0IHgxID0gTWF0aC5tYXgoYmxbMF0sIGJyWzBdLCB1bFswXSwgdXJbMF0pO1xuICAgICAgY29uc3QgeTEgPSBNYXRoLm1heChibFsxXSwgYnJbMV0sIHVsWzFdLCB1clsxXSk7XG5cbiAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KHgwLCB5MCwgeDEgLSB4MCwgeTEgLSB5MCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEhBQ0sgdG8gZHJhdyB0aGUgZ3JhZGllbnQgb250byBhbiBpbmZpbml0ZSByZWN0YW5nbGUuXG4gICAgICAvLyBQREYgZ3JhZGllbnRzIGFyZSBkcmF3biBhY3Jvc3MgdGhlIGVudGlyZSBpbWFnZSB3aGlsZVxuICAgICAgLy8gQ2FudmFzIG9ubHkgYWxsb3dzIGdyYWRpZW50cyB0byBiZSBkcmF3biBpbiBhIHJlY3RhbmdsZVxuICAgICAgLy8gVGhlIGZvbGxvd2luZyBidWcgc2hvdWxkIGFsbG93IHVzIHRvIHJlbW92ZSB0aGlzLlxuICAgICAgLy8gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NjY0ODg0XG5cbiAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KC0xZTEwLCAtMWUxMCwgMmUxMCwgMmUxMCk7XG4gICAgfVxuXG4gICAgdGhpcy5jb21wb3NlKHRoaXMuY3VycmVudC5nZXRDbGlwcGVkUGF0aEJvdW5kaW5nQm94KCkpO1xuICAgIHRoaXMucmVzdG9yZSgpO1xuICB9XG5cbiAgLy8gSW1hZ2VzXG4gIGJlZ2luSW5saW5lSW1hZ2UoKSB7XG4gICAgdW5yZWFjaGFibGUoXCJTaG91bGQgbm90IGNhbGwgYmVnaW5JbmxpbmVJbWFnZVwiKTtcbiAgfVxuXG4gIGJlZ2luSW1hZ2VEYXRhKCkge1xuICAgIHVucmVhY2hhYmxlKFwiU2hvdWxkIG5vdCBjYWxsIGJlZ2luSW1hZ2VEYXRhXCIpO1xuICB9XG5cbiAgcGFpbnRGb3JtWE9iamVjdEJlZ2luKG1hdHJpeCwgYmJveCkge1xuICAgIGlmICghdGhpcy5jb250ZW50VmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNhdmUoKTtcbiAgICB0aGlzLmJhc2VUcmFuc2Zvcm1TdGFjay5wdXNoKHRoaXMuYmFzZVRyYW5zZm9ybSk7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShtYXRyaXgpICYmIG1hdHJpeC5sZW5ndGggPT09IDYpIHtcbiAgICAgIHRoaXMudHJhbnNmb3JtLmFwcGx5KHRoaXMsIG1hdHJpeCk7XG4gICAgfVxuXG4gICAgdGhpcy5iYXNlVHJhbnNmb3JtID0gdGhpcy5jdHgubW96Q3VycmVudFRyYW5zZm9ybTtcblxuICAgIGlmIChiYm94KSB7XG4gICAgICBjb25zdCB3aWR0aCA9IGJib3hbMl0gLSBiYm94WzBdO1xuICAgICAgY29uc3QgaGVpZ2h0ID0gYmJveFszXSAtIGJib3hbMV07XG4gICAgICB0aGlzLmN0eC5yZWN0KGJib3hbMF0sIGJib3hbMV0sIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgdGhpcy5jdXJyZW50LnVwZGF0ZVJlY3RNaW5NYXgodGhpcy5jdHgubW96Q3VycmVudFRyYW5zZm9ybSwgYmJveCk7XG4gICAgICB0aGlzLmNsaXAoKTtcbiAgICAgIHRoaXMuZW5kUGF0aCgpO1xuICAgIH1cbiAgfVxuXG4gIHBhaW50Rm9ybVhPYmplY3RFbmQoKSB7XG4gICAgaWYgKCF0aGlzLmNvbnRlbnRWaXNpYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucmVzdG9yZSgpO1xuICAgIHRoaXMuYmFzZVRyYW5zZm9ybSA9IHRoaXMuYmFzZVRyYW5zZm9ybVN0YWNrLnBvcCgpO1xuICB9XG5cbiAgYmVnaW5Hcm91cChncm91cCkge1xuICAgIGlmICghdGhpcy5jb250ZW50VmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuc2F2ZSgpO1xuICAgIC8vIElmIHRoZXJlJ3MgYW4gYWN0aXZlIHNvZnQgbWFzayB3ZSBkb24ndCB3YW50IGl0IGVuYWJsZWQgZm9yIHRoZSBncm91cCwgc29cbiAgICAvLyBjbGVhciBpdCBvdXQuIFRoZSBtYXNrIGFuZCBzdXNwZW5kZWQgY2FudmFzIHdpbGwgYmUgcmVzdG9yZWQgaW4gZW5kR3JvdXAuXG4gICAgaWYgKHRoaXMuaW5TTWFza01vZGUpIHtcbiAgICAgIHRoaXMuZW5kU01hc2tNb2RlKCk7XG4gICAgICB0aGlzLmN1cnJlbnQuYWN0aXZlU01hc2sgPSBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRDdHggPSB0aGlzLmN0eDtcbiAgICAvLyBUT0RPIG5vbi1pc29sYXRlZCBncm91cHMgLSBhY2NvcmRpbmcgdG8gUmlrIGF0IGFkb2JlIG5vbi1pc29sYXRlZFxuICAgIC8vIGdyb3VwIHJlc3VsdHMgYXJlbid0IHVzdWFsbHkgdGhhdCBkaWZmZXJlbnQgYW5kIHRoZXkgZXZlbiBoYXZlIHRvb2xzXG4gICAgLy8gdGhhdCBpZ25vcmUgdGhpcyBzZXR0aW5nLiBOb3RlcyBmcm9tIFJpayBvbiBpbXBsZW1lbnRpbmc6XG4gICAgLy8gLSBXaGVuIHlvdSBlbmNvdW50ZXIgYW4gdHJhbnNwYXJlbmN5IGdyb3VwLCBjcmVhdGUgYSBuZXcgY2FudmFzIHdpdGhcbiAgICAvLyB0aGUgZGltZW5zaW9ucyBvZiB0aGUgYmJveFxuICAgIC8vIC0gY29weSB0aGUgY29udGVudCBmcm9tIHRoZSBwcmV2aW91cyBjYW52YXMgdG8gdGhlIG5ldyBjYW52YXNcbiAgICAvLyAtIGRyYXcgYXMgdXN1YWxcbiAgICAvLyAtIHJlbW92ZSB0aGUgYmFja2Ryb3AgYWxwaGE6XG4gICAgLy8gYWxwaGFOZXcgPSAxIC0gKDEgLSBhbHBoYSkvKDEgLSBhbHBoYUJhY2tkcm9wKSB3aXRoICdhbHBoYScgdGhlIGFscGhhXG4gICAgLy8gdmFsdWUgb2YgeW91ciB0cmFuc3BhcmVuY3kgZ3JvdXAgYW5kICdhbHBoYUJhY2tkcm9wJyB0aGUgYWxwaGEgb2YgdGhlXG4gICAgLy8gYmFja2Ryb3BcbiAgICAvLyAtIHJlbW92ZSBiYWNrZ3JvdW5kIGNvbG9yOlxuICAgIC8vIGNvbG9yTmV3ID0gY29sb3IgLSBhbHBoYU5ldyAqY29sb3JCYWNrZHJvcCAvKDEgLSBhbHBoYU5ldylcbiAgICBpZiAoIWdyb3VwLmlzb2xhdGVkKSB7XG4gICAgICBpbmZvKFwiVE9ETzogU3VwcG9ydCBub24taXNvbGF0ZWQgZ3JvdXBzLlwiKTtcbiAgICB9XG5cbiAgICAvLyBUT0RPIGtub2Nrb3V0IC0gc3VwcG9zZWRseSBwb3NzaWJsZSB3aXRoIHRoZSBjbGV2ZXIgdXNlIG9mIGNvbXBvc2l0aW5nXG4gICAgLy8gbW9kZXMuXG4gICAgaWYgKGdyb3VwLmtub2Nrb3V0KSB7XG4gICAgICB3YXJuKFwiS25vY2tvdXQgZ3JvdXBzIG5vdCBzdXBwb3J0ZWQuXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRUcmFuc2Zvcm0gPSBjdXJyZW50Q3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm07XG4gICAgaWYgKGdyb3VwLm1hdHJpeCkge1xuICAgICAgY3VycmVudEN0eC50cmFuc2Zvcm0uYXBwbHkoY3VycmVudEN0eCwgZ3JvdXAubWF0cml4KTtcbiAgICB9XG4gICAgaWYgKCFncm91cC5iYm94KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCb3VuZGluZyBib3ggaXMgcmVxdWlyZWQuXCIpO1xuICAgIH1cblxuICAgIC8vIEJhc2VkIG9uIHRoZSBjdXJyZW50IHRyYW5zZm9ybSBmaWd1cmUgb3V0IGhvdyBiaWcgdGhlIGJvdW5kaW5nIGJveFxuICAgIC8vIHdpbGwgYWN0dWFsbHkgYmUuXG4gICAgbGV0IGJvdW5kcyA9IFV0aWwuZ2V0QXhpYWxBbGlnbmVkQm91bmRpbmdCb3goXG4gICAgICBncm91cC5iYm94LFxuICAgICAgY3VycmVudEN0eC5tb3pDdXJyZW50VHJhbnNmb3JtXG4gICAgKTtcbiAgICAvLyBDbGlwIHRoZSBib3VuZGluZyBib3ggdG8gdGhlIGN1cnJlbnQgY2FudmFzLlxuICAgIGNvbnN0IGNhbnZhc0JvdW5kcyA9IFtcbiAgICAgIDAsXG4gICAgICAwLFxuICAgICAgY3VycmVudEN0eC5jYW52YXMud2lkdGgsXG4gICAgICBjdXJyZW50Q3R4LmNhbnZhcy5oZWlnaHQsXG4gICAgXTtcbiAgICBib3VuZHMgPSBVdGlsLmludGVyc2VjdChib3VuZHMsIGNhbnZhc0JvdW5kcykgfHwgWzAsIDAsIDAsIDBdO1xuICAgIC8vIFVzZSBjZWlsIGluIGNhc2Ugd2UncmUgYmV0d2VlbiBzaXplcyBzbyB3ZSBkb24ndCBjcmVhdGUgY2FudmFzIHRoYXQgaXNcbiAgICAvLyB0b28gc21hbGwgYW5kIG1ha2UgdGhlIGNhbnZhcyBhdCBsZWFzdCAxeDEgcGl4ZWxzLlxuICAgIGNvbnN0IG9mZnNldFggPSBNYXRoLmZsb29yKGJvdW5kc1swXSk7XG4gICAgY29uc3Qgb2Zmc2V0WSA9IE1hdGguZmxvb3IoYm91bmRzWzFdKTtcbiAgICBsZXQgZHJhd25XaWR0aCA9IE1hdGgubWF4KE1hdGguY2VpbChib3VuZHNbMl0pIC0gb2Zmc2V0WCwgMSk7XG4gICAgbGV0IGRyYXduSGVpZ2h0ID0gTWF0aC5tYXgoTWF0aC5jZWlsKGJvdW5kc1szXSkgLSBvZmZzZXRZLCAxKTtcbiAgICBsZXQgc2NhbGVYID0gMSxcbiAgICAgIHNjYWxlWSA9IDE7XG4gICAgaWYgKGRyYXduV2lkdGggPiBNQVhfR1JPVVBfU0laRSkge1xuICAgICAgc2NhbGVYID0gZHJhd25XaWR0aCAvIE1BWF9HUk9VUF9TSVpFO1xuICAgICAgZHJhd25XaWR0aCA9IE1BWF9HUk9VUF9TSVpFO1xuICAgIH1cbiAgICBpZiAoZHJhd25IZWlnaHQgPiBNQVhfR1JPVVBfU0laRSkge1xuICAgICAgc2NhbGVZID0gZHJhd25IZWlnaHQgLyBNQVhfR1JPVVBfU0laRTtcbiAgICAgIGRyYXduSGVpZ2h0ID0gTUFYX0dST1VQX1NJWkU7XG4gICAgfVxuXG4gICAgdGhpcy5jdXJyZW50LnN0YXJ0TmV3UGF0aEFuZENsaXBCb3goWzAsIDAsIGRyYXduV2lkdGgsIGRyYXduSGVpZ2h0XSk7XG5cbiAgICBsZXQgY2FjaGVJZCA9IFwiZ3JvdXBBdFwiICsgdGhpcy5ncm91cExldmVsO1xuICAgIGlmIChncm91cC5zbWFzaykge1xuICAgICAgLy8gVXNpbmcgdHdvIGNhY2hlIGVudHJpZXMgaXMgY2FzZSBpZiBtYXNrcyBhcmUgdXNlZCBvbmUgYWZ0ZXIgYW5vdGhlci5cbiAgICAgIGNhY2hlSWQgKz0gXCJfc21hc2tfXCIgKyAodGhpcy5zbWFza0NvdW50ZXIrKyAlIDIpO1xuICAgIH1cbiAgICBjb25zdCBzY3JhdGNoQ2FudmFzID0gdGhpcy5jYWNoZWRDYW52YXNlcy5nZXRDYW52YXMoXG4gICAgICBjYWNoZUlkLFxuICAgICAgZHJhd25XaWR0aCxcbiAgICAgIGRyYXduSGVpZ2h0LFxuICAgICAgLyogdHJhY2tUcmFuc2Zvcm0gKi8gdHJ1ZVxuICAgICk7XG4gICAgY29uc3QgZ3JvdXBDdHggPSBzY3JhdGNoQ2FudmFzLmNvbnRleHQ7XG5cbiAgICAvLyBTaW5jZSB3ZSBjcmVhdGVkIGEgbmV3IGNhbnZhcyB0aGF0IGlzIGp1c3QgdGhlIHNpemUgb2YgdGhlIGJvdW5kaW5nIGJveFxuICAgIC8vIHdlIGhhdmUgdG8gdHJhbnNsYXRlIHRoZSBncm91cCBjdHguXG4gICAgZ3JvdXBDdHguc2NhbGUoMSAvIHNjYWxlWCwgMSAvIHNjYWxlWSk7XG4gICAgZ3JvdXBDdHgudHJhbnNsYXRlKC1vZmZzZXRYLCAtb2Zmc2V0WSk7XG4gICAgZ3JvdXBDdHgudHJhbnNmb3JtLmFwcGx5KGdyb3VwQ3R4LCBjdXJyZW50VHJhbnNmb3JtKTtcblxuICAgIGlmIChncm91cC5zbWFzaykge1xuICAgICAgLy8gU2F2aW5nIHN0YXRlIGFuZCBjYWNoZWQgbWFzayB0byBiZSB1c2VkIGluIHNldEdTdGF0ZS5cbiAgICAgIHRoaXMuc21hc2tTdGFjay5wdXNoKHtcbiAgICAgICAgY2FudmFzOiBzY3JhdGNoQ2FudmFzLmNhbnZhcyxcbiAgICAgICAgY29udGV4dDogZ3JvdXBDdHgsXG4gICAgICAgIG9mZnNldFgsXG4gICAgICAgIG9mZnNldFksXG4gICAgICAgIHNjYWxlWCxcbiAgICAgICAgc2NhbGVZLFxuICAgICAgICBzdWJ0eXBlOiBncm91cC5zbWFzay5zdWJ0eXBlLFxuICAgICAgICBiYWNrZHJvcDogZ3JvdXAuc21hc2suYmFja2Ryb3AsXG4gICAgICAgIHRyYW5zZmVyTWFwOiBncm91cC5zbWFzay50cmFuc2Zlck1hcCB8fCBudWxsLFxuICAgICAgICBzdGFydFRyYW5zZm9ybUludmVyc2U6IG51bGwsIC8vIHVzZWQgZHVyaW5nIHN1c3BlbmQgb3BlcmF0aW9uXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2V0dXAgdGhlIGN1cnJlbnQgY3R4IHNvIHdoZW4gdGhlIGdyb3VwIGlzIHBvcHBlZCB3ZSBkcmF3IGl0IGF0IHRoZVxuICAgICAgLy8gcmlnaHQgbG9jYXRpb24uXG4gICAgICBjdXJyZW50Q3R4LnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCAwLCAwKTtcbiAgICAgIGN1cnJlbnRDdHgudHJhbnNsYXRlKG9mZnNldFgsIG9mZnNldFkpO1xuICAgICAgY3VycmVudEN0eC5zY2FsZShzY2FsZVgsIHNjYWxlWSk7XG4gICAgICBjdXJyZW50Q3R4LnNhdmUoKTtcbiAgICB9XG4gICAgLy8gVGhlIHRyYW5zcGFyZW5jeSBncm91cCBpbmhlcml0cyBhbGwgb2ZmIHRoZSBjdXJyZW50IGdyYXBoaWNzIHN0YXRlXG4gICAgLy8gZXhjZXB0IHRoZSBibGVuZCBtb2RlLCBzb2Z0IG1hc2ssIGFuZCBhbHBoYSBjb25zdGFudHMuXG4gICAgY29weUN0eFN0YXRlKGN1cnJlbnRDdHgsIGdyb3VwQ3R4KTtcbiAgICB0aGlzLmN0eCA9IGdyb3VwQ3R4O1xuICAgIHRoaXMuc2V0R1N0YXRlKFtcbiAgICAgIFtcIkJNXCIsIFwic291cmNlLW92ZXJcIl0sXG4gICAgICBbXCJjYVwiLCAxXSxcbiAgICAgIFtcIkNBXCIsIDFdLFxuICAgIF0pO1xuICAgIHRoaXMuZ3JvdXBTdGFjay5wdXNoKGN1cnJlbnRDdHgpO1xuICAgIHRoaXMuZ3JvdXBMZXZlbCsrO1xuICB9XG5cbiAgZW5kR3JvdXAoZ3JvdXApIHtcbiAgICBpZiAoIXRoaXMuY29udGVudFZpc2libGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5ncm91cExldmVsLS07XG4gICAgY29uc3QgZ3JvdXBDdHggPSB0aGlzLmN0eDtcbiAgICBjb25zdCBjdHggPSB0aGlzLmdyb3VwU3RhY2sucG9wKCk7XG4gICAgdGhpcy5jdHggPSBjdHg7XG4gICAgLy8gVHVybiBvZmYgaW1hZ2Ugc21vb3RoaW5nIHRvIGF2b2lkIHN1YiBwaXhlbCBpbnRlcnBvbGF0aW9uIHdoaWNoIGNhblxuICAgIC8vIGxvb2sga2luZCBvZiBibHVycnkgZm9yIHNvbWUgcGRmcy5cbiAgICB0aGlzLmN0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcblxuICAgIGlmIChncm91cC5zbWFzaykge1xuICAgICAgdGhpcy50ZW1wU01hc2sgPSB0aGlzLnNtYXNrU3RhY2sucG9wKCk7XG4gICAgICB0aGlzLnJlc3RvcmUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdHgucmVzdG9yZSgpO1xuICAgICAgY29uc3QgY3VycmVudE10eCA9IHRoaXMuY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm07XG4gICAgICB0aGlzLnJlc3RvcmUoKTtcbiAgICAgIHRoaXMuY3R4LnNhdmUoKTtcbiAgICAgIHRoaXMuY3R4LnNldFRyYW5zZm9ybS5hcHBseSh0aGlzLmN0eCwgY3VycmVudE10eCk7XG4gICAgICBjb25zdCBkaXJ0eUJveCA9IFV0aWwuZ2V0QXhpYWxBbGlnbmVkQm91bmRpbmdCb3goXG4gICAgICAgIFswLCAwLCBncm91cEN0eC5jYW52YXMud2lkdGgsIGdyb3VwQ3R4LmNhbnZhcy5oZWlnaHRdLFxuICAgICAgICBjdXJyZW50TXR4XG4gICAgICApO1xuICAgICAgdGhpcy5jdHguZHJhd0ltYWdlKGdyb3VwQ3R4LmNhbnZhcywgMCwgMCk7XG4gICAgICB0aGlzLmN0eC5yZXN0b3JlKCk7XG4gICAgICB0aGlzLmNvbXBvc2UoZGlydHlCb3gpO1xuICAgIH1cbiAgfVxuXG4gIGJlZ2luQW5ub3RhdGlvbnMoKSB7XG4gICAgdGhpcy5zYXZlKCk7XG4gICAgaWYgKHRoaXMuYmFzZVRyYW5zZm9ybSkge1xuICAgICAgdGhpcy5jdHguc2V0VHJhbnNmb3JtLmFwcGx5KHRoaXMuY3R4LCB0aGlzLmJhc2VUcmFuc2Zvcm0pO1xuICAgIH1cbiAgfVxuXG4gIGVuZEFubm90YXRpb25zKCkge1xuICAgIHRoaXMucmVzdG9yZSgpO1xuICB9XG5cbiAgYmVnaW5Bbm5vdGF0aW9uKGlkLCByZWN0LCB0cmFuc2Zvcm0sIG1hdHJpeCwgaGFzT3duQ2FudmFzKSB7XG4gICAgdGhpcy5zYXZlKCk7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShyZWN0KSAmJiByZWN0Lmxlbmd0aCA9PT0gNCkge1xuICAgICAgY29uc3Qgd2lkdGggPSByZWN0WzJdIC0gcmVjdFswXTtcbiAgICAgIGNvbnN0IGhlaWdodCA9IHJlY3RbM10gLSByZWN0WzFdO1xuXG4gICAgICBpZiAoaGFzT3duQ2FudmFzICYmIHRoaXMuYW5ub3RhdGlvbkNhbnZhc01hcCkge1xuICAgICAgICB0cmFuc2Zvcm0gPSB0cmFuc2Zvcm0uc2xpY2UoKTtcbiAgICAgICAgdHJhbnNmb3JtWzRdIC09IHJlY3RbMF07XG4gICAgICAgIHRyYW5zZm9ybVs1XSAtPSByZWN0WzFdO1xuXG4gICAgICAgIHJlY3QgPSByZWN0LnNsaWNlKCk7XG4gICAgICAgIHJlY3RbMF0gPSByZWN0WzFdID0gMDtcbiAgICAgICAgcmVjdFsyXSA9IHdpZHRoO1xuICAgICAgICByZWN0WzNdID0gaGVpZ2h0O1xuXG4gICAgICAgIGNvbnN0IFtzY2FsZVgsIHNjYWxlWV0gPSBVdGlsLnNpbmd1bGFyVmFsdWVEZWNvbXBvc2UyZFNjYWxlKFxuICAgICAgICAgIHRoaXMuY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm1cbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgeyB2aWV3cG9ydFNjYWxlIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBjYW52YXNXaWR0aCA9IE1hdGguY2VpbChcbiAgICAgICAgICB3aWR0aCAqIHRoaXMub3V0cHV0U2NhbGVYICogdmlld3BvcnRTY2FsZVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBjYW52YXNIZWlnaHQgPSBNYXRoLmNlaWwoXG4gICAgICAgICAgaGVpZ2h0ICogdGhpcy5vdXRwdXRTY2FsZVkgKiB2aWV3cG9ydFNjYWxlXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5hbm5vdGF0aW9uQ2FudmFzID0gdGhpcy5jYW52YXNGYWN0b3J5LmNyZWF0ZShcbiAgICAgICAgICBjYW52YXNXaWR0aCxcbiAgICAgICAgICBjYW52YXNIZWlnaHRcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgeyBjYW52YXMsIGNvbnRleHQgfSA9IHRoaXMuYW5ub3RhdGlvbkNhbnZhcztcbiAgICAgICAgY29uc3Qgdmlld3BvcnRTY2FsZUZhY3RvclN0ciA9IGB2YXIoLS16b29tLWZhY3RvcikgKiAke1BpeGVsc1BlckluY2guUERGX1RPX0NTU19VTklUU31gO1xuICAgICAgICBjYW52YXMuc3R5bGUud2lkdGggPSBgY2FsYygke3dpZHRofXB4ICogJHt2aWV3cG9ydFNjYWxlRmFjdG9yU3RyfSlgO1xuICAgICAgICBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gYGNhbGMoJHtoZWlnaHR9cHggKiAke3ZpZXdwb3J0U2NhbGVGYWN0b3JTdHJ9KWA7XG4gICAgICAgIHRoaXMuYW5ub3RhdGlvbkNhbnZhc01hcC5zZXQoaWQsIGNhbnZhcyk7XG4gICAgICAgIHRoaXMuYW5ub3RhdGlvbkNhbnZhcy5zYXZlZEN0eCA9IHRoaXMuY3R4O1xuICAgICAgICB0aGlzLmN0eCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMuY3R4LnNldFRyYW5zZm9ybShzY2FsZVgsIDAsIDAsIC1zY2FsZVksIDAsIGhlaWdodCAqIHNjYWxlWSk7XG4gICAgICAgIGFkZENvbnRleHRDdXJyZW50VHJhbnNmb3JtKHRoaXMuY3R4KTtcblxuICAgICAgICByZXNldEN0eFRvRGVmYXVsdCh0aGlzLmN0eCwgdGhpcy5mb3JlZ3JvdW5kQ29sb3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzZXRDdHhUb0RlZmF1bHQodGhpcy5jdHgsIHRoaXMuZm9yZWdyb3VuZENvbG9yKTtcblxuICAgICAgICB0aGlzLmN0eC5yZWN0KHJlY3RbMF0sIHJlY3RbMV0sIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB0aGlzLmN0eC5jbGlwKCk7XG4gICAgICAgIHRoaXMuZW5kUGF0aCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuY3VycmVudCA9IG5ldyBDYW52YXNFeHRyYVN0YXRlKFxuICAgICAgdGhpcy5jdHguY2FudmFzLndpZHRoLFxuICAgICAgdGhpcy5jdHguY2FudmFzLmhlaWdodFxuICAgICk7XG5cbiAgICB0aGlzLnRyYW5zZm9ybS5hcHBseSh0aGlzLCB0cmFuc2Zvcm0pO1xuICAgIHRoaXMudHJhbnNmb3JtLmFwcGx5KHRoaXMsIG1hdHJpeCk7XG4gIH1cblxuICBlbmRBbm5vdGF0aW9uKCkge1xuICAgIGlmICh0aGlzLmFubm90YXRpb25DYW52YXMpIHtcbiAgICAgIHRoaXMuY3R4ID0gdGhpcy5hbm5vdGF0aW9uQ2FudmFzLnNhdmVkQ3R4O1xuICAgICAgZGVsZXRlIHRoaXMuYW5ub3RhdGlvbkNhbnZhcy5zYXZlZEN0eDtcbiAgICAgIGRlbGV0ZSB0aGlzLmFubm90YXRpb25DYW52YXM7XG4gICAgfVxuICAgIHRoaXMucmVzdG9yZSgpO1xuICB9XG5cbiAgcGFpbnRJbWFnZU1hc2tYT2JqZWN0KGltZykge1xuICAgIGlmICghdGhpcy5jb250ZW50VmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjb3VudCA9IGltZy5jb3VudDtcbiAgICBpbWcgPSB0aGlzLmdldE9iamVjdChpbWcuZGF0YSwgaW1nKTtcbiAgICBpbWcuY291bnQgPSBjb3VudDtcblxuICAgIGNvbnN0IGN0eCA9IHRoaXMuY3R4O1xuICAgIGNvbnN0IGdseXBoID0gdGhpcy5wcm9jZXNzaW5nVHlwZTM7XG5cbiAgICBpZiAoZ2x5cGgpIHtcbiAgICAgIGlmIChnbHlwaC5jb21waWxlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGdseXBoLmNvbXBpbGVkID0gY29tcGlsZVR5cGUzR2x5cGgoaW1nKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGdseXBoLmNvbXBpbGVkKSB7XG4gICAgICAgIGdseXBoLmNvbXBpbGVkKGN0eCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbWFzayA9IHRoaXMuX2NyZWF0ZU1hc2tDYW52YXMoaW1nKTtcbiAgICBjb25zdCBtYXNrQ2FudmFzID0gbWFzay5jYW52YXM7XG5cbiAgICBjdHguc2F2ZSgpO1xuICAgIC8vIFRoZSBtYXNrIGlzIGRyYXduIHdpdGggdGhlIHRyYW5zZm9ybSBhcHBsaWVkLiBSZXNldCB0aGUgY3VycmVudFxuICAgIC8vIHRyYW5zZm9ybSB0byBkcmF3IHRvIHRoZSBpZGVudGl0eS5cbiAgICBjdHguc2V0VHJhbnNmb3JtKDEsIDAsIDAsIDEsIDAsIDApO1xuICAgIGN0eC5kcmF3SW1hZ2UobWFza0NhbnZhcywgbWFzay5vZmZzZXRYLCBtYXNrLm9mZnNldFkpO1xuICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgdGhpcy5jb21wb3NlKCk7XG4gIH1cblxuICBwYWludEltYWdlTWFza1hPYmplY3RSZXBlYXQoXG4gICAgaW1nLFxuICAgIHNjYWxlWCxcbiAgICBza2V3WCA9IDAsXG4gICAgc2tld1kgPSAwLFxuICAgIHNjYWxlWSxcbiAgICBwb3NpdGlvbnNcbiAgKSB7XG4gICAgaWYgKCF0aGlzLmNvbnRlbnRWaXNpYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaW1nID0gdGhpcy5nZXRPYmplY3QoaW1nLmRhdGEsIGltZyk7XG5cbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGNvbnN0IGN1cnJlbnRUcmFuc2Zvcm0gPSBjdHgubW96Q3VycmVudFRyYW5zZm9ybTtcbiAgICBjdHgudHJhbnNmb3JtKHNjYWxlWCwgc2tld1gsIHNrZXdZLCBzY2FsZVksIDAsIDApO1xuICAgIGNvbnN0IG1hc2sgPSB0aGlzLl9jcmVhdGVNYXNrQ2FudmFzKGltZyk7XG5cbiAgICBjdHguc2V0VHJhbnNmb3JtKDEsIDAsIDAsIDEsIDAsIDApO1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHBvc2l0aW9ucy5sZW5ndGg7IGkgPCBpaTsgaSArPSAyKSB7XG4gICAgICBjb25zdCB0cmFucyA9IFV0aWwudHJhbnNmb3JtKGN1cnJlbnRUcmFuc2Zvcm0sIFtcbiAgICAgICAgc2NhbGVYLFxuICAgICAgICBza2V3WCxcbiAgICAgICAgc2tld1ksXG4gICAgICAgIHNjYWxlWSxcbiAgICAgICAgcG9zaXRpb25zW2ldLFxuICAgICAgICBwb3NpdGlvbnNbaSArIDFdLFxuICAgICAgXSk7XG5cbiAgICAgIGNvbnN0IFt4LCB5XSA9IFV0aWwuYXBwbHlUcmFuc2Zvcm0oWzAsIDBdLCB0cmFucyk7XG4gICAgICBjdHguZHJhd0ltYWdlKG1hc2suY2FudmFzLCB4LCB5KTtcbiAgICB9XG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgICB0aGlzLmNvbXBvc2UoKTtcbiAgfVxuXG4gIHBhaW50SW1hZ2VNYXNrWE9iamVjdEdyb3VwKGltYWdlcykge1xuICAgIGlmICghdGhpcy5jb250ZW50VmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcblxuICAgIGNvbnN0IGZpbGxDb2xvciA9IHRoaXMuY3VycmVudC5maWxsQ29sb3I7XG4gICAgY29uc3QgaXNQYXR0ZXJuRmlsbCA9IHRoaXMuY3VycmVudC5wYXR0ZXJuRmlsbDtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBpbWFnZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgY29uc3QgaW1hZ2UgPSBpbWFnZXNbaV07XG4gICAgICBjb25zdCB3aWR0aCA9IGltYWdlLndpZHRoLFxuICAgICAgICBoZWlnaHQgPSBpbWFnZS5oZWlnaHQ7XG5cbiAgICAgIGNvbnN0IG1hc2tDYW52YXMgPSB0aGlzLmNhY2hlZENhbnZhc2VzLmdldENhbnZhcyhcbiAgICAgICAgXCJtYXNrQ2FudmFzXCIsXG4gICAgICAgIHdpZHRoLFxuICAgICAgICBoZWlnaHQsXG4gICAgICAgIC8qIHRyYWNrVHJhbnNmb3JtICovIGZhbHNlXG4gICAgICApO1xuICAgICAgY29uc3QgbWFza0N0eCA9IG1hc2tDYW52YXMuY29udGV4dDtcbiAgICAgIG1hc2tDdHguc2F2ZSgpO1xuXG4gICAgICBwdXRCaW5hcnlJbWFnZU1hc2sobWFza0N0eCwgaW1hZ2UpO1xuXG4gICAgICBtYXNrQ3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwic291cmNlLWluXCI7XG5cbiAgICAgIG1hc2tDdHguZmlsbFN0eWxlID0gaXNQYXR0ZXJuRmlsbFxuICAgICAgICA/IGZpbGxDb2xvci5nZXRQYXR0ZXJuKFxuICAgICAgICAgICAgbWFza0N0eCxcbiAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICBjdHgubW96Q3VycmVudFRyYW5zZm9ybUludmVyc2UsXG4gICAgICAgICAgICBQYXRoVHlwZS5GSUxMXG4gICAgICAgICAgKVxuICAgICAgICA6IGZpbGxDb2xvcjtcbiAgICAgIG1hc2tDdHguZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG5cbiAgICAgIG1hc2tDdHgucmVzdG9yZSgpO1xuXG4gICAgICBjdHguc2F2ZSgpO1xuICAgICAgY3R4LnRyYW5zZm9ybS5hcHBseShjdHgsIGltYWdlLnRyYW5zZm9ybSk7XG4gICAgICBjdHguc2NhbGUoMSwgLTEpO1xuICAgICAgZHJhd0ltYWdlQXRJbnRlZ2VyQ29vcmRzKFxuICAgICAgICBjdHgsXG4gICAgICAgIG1hc2tDYW52YXMuY2FudmFzLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICB3aWR0aCxcbiAgICAgICAgaGVpZ2h0LFxuICAgICAgICAwLFxuICAgICAgICAtMSxcbiAgICAgICAgMSxcbiAgICAgICAgMVxuICAgICAgKTtcbiAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgfVxuICAgIHRoaXMuY29tcG9zZSgpO1xuICB9XG5cbiAgcGFpbnRJbWFnZVhPYmplY3Qob2JqSWQpIHtcbiAgICBpZiAoIXRoaXMuY29udGVudFZpc2libGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaW1nRGF0YSA9IHRoaXMuZ2V0T2JqZWN0KG9iaklkKTtcbiAgICBpZiAoIWltZ0RhdGEpIHtcbiAgICAgIHdhcm4oXCJEZXBlbmRlbnQgaW1hZ2UgaXNuJ3QgcmVhZHkgeWV0XCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucGFpbnRJbmxpbmVJbWFnZVhPYmplY3QoaW1nRGF0YSk7XG4gIH1cblxuICBwYWludEltYWdlWE9iamVjdFJlcGVhdChvYmpJZCwgc2NhbGVYLCBzY2FsZVksIHBvc2l0aW9ucykge1xuICAgIGlmICghdGhpcy5jb250ZW50VmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpbWdEYXRhID0gdGhpcy5nZXRPYmplY3Qob2JqSWQpO1xuICAgIGlmICghaW1nRGF0YSkge1xuICAgICAgd2FybihcIkRlcGVuZGVudCBpbWFnZSBpc24ndCByZWFkeSB5ZXRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgd2lkdGggPSBpbWdEYXRhLndpZHRoO1xuICAgIGNvbnN0IGhlaWdodCA9IGltZ0RhdGEuaGVpZ2h0O1xuICAgIGNvbnN0IG1hcCA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHBvc2l0aW9ucy5sZW5ndGg7IGkgPCBpaTsgaSArPSAyKSB7XG4gICAgICBtYXAucHVzaCh7XG4gICAgICAgIHRyYW5zZm9ybTogW3NjYWxlWCwgMCwgMCwgc2NhbGVZLCBwb3NpdGlvbnNbaV0sIHBvc2l0aW9uc1tpICsgMV1dLFxuICAgICAgICB4OiAwLFxuICAgICAgICB5OiAwLFxuICAgICAgICB3OiB3aWR0aCxcbiAgICAgICAgaDogaGVpZ2h0LFxuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMucGFpbnRJbmxpbmVJbWFnZVhPYmplY3RHcm91cChpbWdEYXRhLCBtYXApO1xuICB9XG5cbiAgcGFpbnRJbmxpbmVJbWFnZVhPYmplY3QoaW1nRGF0YSkge1xuICAgIGlmICghdGhpcy5jb250ZW50VmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB3aWR0aCA9IGltZ0RhdGEud2lkdGg7XG4gICAgY29uc3QgaGVpZ2h0ID0gaW1nRGF0YS5oZWlnaHQ7XG4gICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XG5cbiAgICB0aGlzLnNhdmUoKTtcbiAgICAvLyBzY2FsZSB0aGUgaW1hZ2UgdG8gdGhlIHVuaXQgc3F1YXJlXG4gICAgY3R4LnNjYWxlKDEgLyB3aWR0aCwgLTEgLyBoZWlnaHQpO1xuXG4gICAgbGV0IGltZ1RvUGFpbnQ7XG4gICAgLy8gdHlwZW9mIGNoZWNrIGlzIG5lZWRlZCBkdWUgdG8gbm9kZS5qcyBzdXBwb3J0LCBzZWUgaXNzdWUgIzg0ODlcbiAgICBpZiAoXG4gICAgICAodHlwZW9mIEhUTUxFbGVtZW50ID09PSBcImZ1bmN0aW9uXCIgJiYgaW1nRGF0YSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB8fFxuICAgICAgIWltZ0RhdGEuZGF0YVxuICAgICkge1xuICAgICAgaW1nVG9QYWludCA9IGltZ0RhdGE7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHRtcENhbnZhcyA9IHRoaXMuY2FjaGVkQ2FudmFzZXMuZ2V0Q2FudmFzKFxuICAgICAgICBcImlubGluZUltYWdlXCIsXG4gICAgICAgIHdpZHRoLFxuICAgICAgICBoZWlnaHQsXG4gICAgICAgIC8qIHRyYWNrVHJhbnNmb3JtICovIGZhbHNlXG4gICAgICApO1xuICAgICAgY29uc3QgdG1wQ3R4ID0gdG1wQ2FudmFzLmNvbnRleHQ7XG4gICAgICBwdXRCaW5hcnlJbWFnZURhdGEodG1wQ3R4LCBpbWdEYXRhLCB0aGlzLmN1cnJlbnQudHJhbnNmZXJNYXBzKTtcbiAgICAgIGltZ1RvUGFpbnQgPSB0bXBDYW52YXMuY2FudmFzO1xuICAgIH1cblxuICAgIGNvbnN0IHNjYWxlZCA9IHRoaXMuX3NjYWxlSW1hZ2UoaW1nVG9QYWludCwgY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm1JbnZlcnNlKTtcbiAgICBjdHguaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZ2V0SW1hZ2VTbW9vdGhpbmdFbmFibGVkKFxuICAgICAgY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm0sXG4gICAgICBpbWdEYXRhLmludGVycG9sYXRlXG4gICAgKTtcblxuICAgIGNvbnN0IFtyV2lkdGgsIHJIZWlnaHRdID0gZHJhd0ltYWdlQXRJbnRlZ2VyQ29vcmRzKFxuICAgICAgY3R4LFxuICAgICAgc2NhbGVkLmltZyxcbiAgICAgIDAsXG4gICAgICAwLFxuICAgICAgc2NhbGVkLnBhaW50V2lkdGgsXG4gICAgICBzY2FsZWQucGFpbnRIZWlnaHQsXG4gICAgICAwLFxuICAgICAgLWhlaWdodCxcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0XG4gICAgKTtcblxuICAgIGlmICh0aGlzLmltYWdlTGF5ZXIpIHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5nZXRDYW52YXNQb3NpdGlvbigwLCAtaGVpZ2h0KTtcbiAgICAgIHRoaXMuaW1hZ2VMYXllci5hcHBlbmRJbWFnZSh7XG4gICAgICAgIGltZ0RhdGEsXG4gICAgICAgIGxlZnQ6IHBvc2l0aW9uWzBdLFxuICAgICAgICB0b3A6IHBvc2l0aW9uWzFdLFxuICAgICAgICB3aWR0aDogcldpZHRoLFxuICAgICAgICBoZWlnaHQ6IHJIZWlnaHQsXG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5jb21wb3NlKCk7XG4gICAgdGhpcy5yZXN0b3JlKCk7XG4gIH1cblxuICBwYWludElubGluZUltYWdlWE9iamVjdEdyb3VwKGltZ0RhdGEsIG1hcCkge1xuICAgIGlmICghdGhpcy5jb250ZW50VmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICBjb25zdCB3ID0gaW1nRGF0YS53aWR0aDtcbiAgICBjb25zdCBoID0gaW1nRGF0YS5oZWlnaHQ7XG5cbiAgICBjb25zdCB0bXBDYW52YXMgPSB0aGlzLmNhY2hlZENhbnZhc2VzLmdldENhbnZhcyhcbiAgICAgIFwiaW5saW5lSW1hZ2VcIixcbiAgICAgIHcsXG4gICAgICBoLFxuICAgICAgLyogdHJhY2tUcmFuc2Zvcm0gKi8gZmFsc2VcbiAgICApO1xuICAgIGNvbnN0IHRtcEN0eCA9IHRtcENhbnZhcy5jb250ZXh0O1xuICAgIHB1dEJpbmFyeUltYWdlRGF0YSh0bXBDdHgsIGltZ0RhdGEsIHRoaXMuY3VycmVudC50cmFuc2Zlck1hcHMpO1xuXG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gbWFwLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgIGNvbnN0IGVudHJ5ID0gbWFwW2ldO1xuICAgICAgY3R4LnNhdmUoKTtcbiAgICAgIGN0eC50cmFuc2Zvcm0uYXBwbHkoY3R4LCBlbnRyeS50cmFuc2Zvcm0pO1xuICAgICAgY3R4LnNjYWxlKDEsIC0xKTtcbiAgICAgIGRyYXdJbWFnZUF0SW50ZWdlckNvb3JkcyhcbiAgICAgICAgY3R4LFxuICAgICAgICB0bXBDYW52YXMuY2FudmFzLFxuICAgICAgICBlbnRyeS54LFxuICAgICAgICBlbnRyeS55LFxuICAgICAgICBlbnRyeS53LFxuICAgICAgICBlbnRyeS5oLFxuICAgICAgICAwLFxuICAgICAgICAtMSxcbiAgICAgICAgMSxcbiAgICAgICAgMVxuICAgICAgKTtcbiAgICAgIGlmICh0aGlzLmltYWdlTGF5ZXIpIHtcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLmdldENhbnZhc1Bvc2l0aW9uKGVudHJ5LngsIGVudHJ5LnkpO1xuICAgICAgICB0aGlzLmltYWdlTGF5ZXIuYXBwZW5kSW1hZ2Uoe1xuICAgICAgICAgIGltZ0RhdGEsXG4gICAgICAgICAgbGVmdDogcG9zaXRpb25bMF0sXG4gICAgICAgICAgdG9wOiBwb3NpdGlvblsxXSxcbiAgICAgICAgICB3aWR0aDogdyxcbiAgICAgICAgICBoZWlnaHQ6IGgsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICB9XG4gICAgdGhpcy5jb21wb3NlKCk7XG4gIH1cblxuICBwYWludFNvbGlkQ29sb3JJbWFnZU1hc2soKSB7XG4gICAgaWYgKCF0aGlzLmNvbnRlbnRWaXNpYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuY3R4LmZpbGxSZWN0KDAsIDAsIDEsIDEpO1xuICAgIHRoaXMuY29tcG9zZSgpO1xuICB9XG5cbiAgLy8gTWFya2VkIGNvbnRlbnRcblxuICBtYXJrUG9pbnQodGFnKSB7XG4gICAgLy8gVE9ETyBNYXJrZWQgY29udGVudC5cbiAgfVxuXG4gIG1hcmtQb2ludFByb3BzKHRhZywgcHJvcGVydGllcykge1xuICAgIC8vIFRPRE8gTWFya2VkIGNvbnRlbnQuXG4gIH1cblxuICBiZWdpbk1hcmtlZENvbnRlbnQodGFnKSB7XG4gICAgdGhpcy5tYXJrZWRDb250ZW50U3RhY2sucHVzaCh7XG4gICAgICB2aXNpYmxlOiB0cnVlLFxuICAgIH0pO1xuICB9XG5cbiAgYmVnaW5NYXJrZWRDb250ZW50UHJvcHModGFnLCBwcm9wZXJ0aWVzKSB7XG4gICAgaWYgKHRhZyA9PT0gXCJPQ1wiKSB7XG4gICAgICB0aGlzLm1hcmtlZENvbnRlbnRTdGFjay5wdXNoKHtcbiAgICAgICAgdmlzaWJsZTogdGhpcy5vcHRpb25hbENvbnRlbnRDb25maWcuaXNWaXNpYmxlKHByb3BlcnRpZXMpLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubWFya2VkQ29udGVudFN0YWNrLnB1c2goe1xuICAgICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuY29udGVudFZpc2libGUgPSB0aGlzLmlzQ29udGVudFZpc2libGUoKTtcbiAgfVxuXG4gIGVuZE1hcmtlZENvbnRlbnQoKSB7XG4gICAgdGhpcy5tYXJrZWRDb250ZW50U3RhY2sucG9wKCk7XG4gICAgdGhpcy5jb250ZW50VmlzaWJsZSA9IHRoaXMuaXNDb250ZW50VmlzaWJsZSgpO1xuICB9XG5cbiAgLy8gQ29tcGF0aWJpbGl0eVxuXG4gIGJlZ2luQ29tcGF0KCkge1xuICAgIC8vIFRPRE8gaWdub3JlIHVuZGVmaW5lZCBvcGVyYXRvcnMgKHNob3VsZCB3ZSBkbyB0aGF0IGFueXdheT8pXG4gIH1cblxuICBlbmRDb21wYXQoKSB7XG4gICAgLy8gVE9ETyBzdG9wIGlnbm9yaW5nIHVuZGVmaW5lZCBvcGVyYXRvcnNcbiAgfVxuXG4gIC8vIEhlbHBlciBmdW5jdGlvbnNcblxuICBjb25zdW1lUGF0aChjbGlwQm94KSB7XG4gICAgY29uc3QgaXNFbXB0eSA9IHRoaXMuY3VycmVudC5pc0VtcHR5Q2xpcCgpO1xuICAgIGlmICh0aGlzLnBlbmRpbmdDbGlwKSB7XG4gICAgICB0aGlzLmN1cnJlbnQudXBkYXRlQ2xpcEZyb21QYXRoKCk7XG4gICAgfVxuICAgIGlmICghdGhpcy5wZW5kaW5nQ2xpcCkge1xuICAgICAgdGhpcy5jb21wb3NlKGNsaXBCb3gpO1xuICAgIH1cbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICBpZiAodGhpcy5wZW5kaW5nQ2xpcCkge1xuICAgICAgaWYgKCFpc0VtcHR5KSB7XG4gICAgICAgIGlmICh0aGlzLnBlbmRpbmdDbGlwID09PSBFT19DTElQKSB7XG4gICAgICAgICAgY3R4LmNsaXAoXCJldmVub2RkXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN0eC5jbGlwKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMucGVuZGluZ0NsaXAgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLmN1cnJlbnQuc3RhcnROZXdQYXRoQW5kQ2xpcEJveCh0aGlzLmN1cnJlbnQuY2xpcEJveCk7XG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICB9XG5cbiAgZ2V0U2luZ2xlUGl4ZWxXaWR0aCgpIHtcbiAgICBpZiAoIXRoaXMuX2NhY2hlZEdldFNpbmdsZVBpeGVsV2lkdGgpIHtcbiAgICAgIGNvbnN0IG0gPSB0aGlzLmN0eC5tb3pDdXJyZW50VHJhbnNmb3JtO1xuICAgICAgaWYgKG1bMV0gPT09IDAgJiYgbVsyXSA9PT0gMCkge1xuICAgICAgICAvLyBGYXN0IHBhdGhcbiAgICAgICAgdGhpcy5fY2FjaGVkR2V0U2luZ2xlUGl4ZWxXaWR0aCA9XG4gICAgICAgICAgMSAvIE1hdGgubWluKE1hdGguYWJzKG1bMF0pLCBNYXRoLmFicyhtWzNdKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBhYnNEZXQgPSBNYXRoLmFicyhtWzBdICogbVszXSAtIG1bMl0gKiBtWzFdKTtcbiAgICAgICAgY29uc3Qgbm9ybVggPSBNYXRoLmh5cG90KG1bMF0sIG1bMl0pO1xuICAgICAgICBjb25zdCBub3JtWSA9IE1hdGguaHlwb3QobVsxXSwgbVszXSk7XG4gICAgICAgIHRoaXMuX2NhY2hlZEdldFNpbmdsZVBpeGVsV2lkdGggPSBNYXRoLm1heChub3JtWCwgbm9ybVkpIC8gYWJzRGV0O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fY2FjaGVkR2V0U2luZ2xlUGl4ZWxXaWR0aDtcbiAgfVxuXG4gIGdldFNjYWxlRm9yU3Ryb2tpbmcoKSB7XG4gICAgLy8gQSBwaXhlbCBoYXMgdGhpY2tuZXNzWCA9IHRoaWNrbmVzc1kgPSAxO1xuICAgIC8vIEEgdHJhbnNmb3JtZWQgcGl4ZWwgaXMgYSBwYXJhbGxlbG9ncmFtIGFuZCB0aGUgdGhpY2tuZXNzZXNcbiAgICAvLyBjb3JyZXNwb25kcyB0byB0aGUgaGVpZ2h0cy5cbiAgICAvLyBUaGUgZ29hbCBvZiB0aGlzIGZ1bmN0aW9uIGlzIHRvIHJlc2NhbGUgYmVmb3JlIHNldHRpbmcgdGhlXG4gICAgLy8gbGluZVdpZHRoIGluIG9yZGVyIHRvIGhhdmUgYm90aCB0aGlja25lc3NlcyBncmVhdGVyIG9yIGVxdWFsXG4gICAgLy8gdG8gMSBhZnRlciB0cmFuc2Zvcm0uXG4gICAgaWYgKCF0aGlzLl9jYWNoZWRTY2FsZUZvclN0cm9raW5nKSB7XG4gICAgICBjb25zdCB7IGxpbmVXaWR0aCB9ID0gdGhpcy5jdXJyZW50O1xuICAgICAgY29uc3QgbSA9IHRoaXMuY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm07XG4gICAgICBsZXQgc2NhbGVYLCBzY2FsZVk7XG5cbiAgICAgIGlmIChtWzFdID09PSAwICYmIG1bMl0gPT09IDApIHtcbiAgICAgICAgLy8gRmFzdCBwYXRoXG4gICAgICAgIGNvbnN0IG5vcm1YID0gTWF0aC5hYnMobVswXSk7XG4gICAgICAgIGNvbnN0IG5vcm1ZID0gTWF0aC5hYnMobVszXSk7XG4gICAgICAgIGlmIChsaW5lV2lkdGggPT09IDApIHtcbiAgICAgICAgICBzY2FsZVggPSAxIC8gbm9ybVg7XG4gICAgICAgICAgc2NhbGVZID0gMSAvIG5vcm1ZO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHNjYWxlZFhMaW5lV2lkdGggPSBub3JtWCAqIGxpbmVXaWR0aDtcbiAgICAgICAgICBjb25zdCBzY2FsZWRZTGluZVdpZHRoID0gbm9ybVkgKiBsaW5lV2lkdGg7XG4gICAgICAgICAgc2NhbGVYID0gc2NhbGVkWExpbmVXaWR0aCA8IDEgPyAxIC8gc2NhbGVkWExpbmVXaWR0aCA6IDE7XG4gICAgICAgICAgc2NhbGVZID0gc2NhbGVkWUxpbmVXaWR0aCA8IDEgPyAxIC8gc2NhbGVkWUxpbmVXaWR0aCA6IDE7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEEgcGl4ZWwgKGJhc2UgKHgsIHkpKSBpcyB0cmFuc2Zvcm1lZCBieSBNIGludG8gYSBwYXJhbGxlbG9ncmFtOlxuICAgICAgICAvLyAgLSBpdHMgYXJlYSBpcyB8ZGV0KE0pfDtcbiAgICAgICAgLy8gIC0gaGVpZ2h0WSAob3J0aG9nb25hbCB0byBNeCkgaGFzIGEgbGVuZ3RoOiB8ZGV0KE0pfCAvIG5vcm0oTXgpO1xuICAgICAgICAvLyAgLSBoZWlnaHRYIChvcnRob2dvbmFsIHRvIE15KSBoYXMgYSBsZW5ndGg6IHxkZXQoTSl8IC8gbm9ybShNeSkuXG4gICAgICAgIC8vIGhlaWdodFggYW5kIGhlaWdodFkgYXJlIHRoZSB0aGlja25lc3NlcyBvZiB0aGUgdHJhbnNmb3JtZWQgcGl4ZWxcbiAgICAgICAgLy8gYW5kIHRoZXkgbXVzdCBiZSBib3RoIGdyZWF0ZXIgb3IgZXF1YWwgdG8gMS5cbiAgICAgICAgY29uc3QgYWJzRGV0ID0gTWF0aC5hYnMobVswXSAqIG1bM10gLSBtWzJdICogbVsxXSk7XG4gICAgICAgIGNvbnN0IG5vcm1YID0gTWF0aC5oeXBvdChtWzBdLCBtWzFdKTtcbiAgICAgICAgY29uc3Qgbm9ybVkgPSBNYXRoLmh5cG90KG1bMl0sIG1bM10pO1xuICAgICAgICBpZiAobGluZVdpZHRoID09PSAwKSB7XG4gICAgICAgICAgc2NhbGVYID0gbm9ybVkgLyBhYnNEZXQ7XG4gICAgICAgICAgc2NhbGVZID0gbm9ybVggLyBhYnNEZXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgYmFzZUFyZWEgPSBsaW5lV2lkdGggKiBhYnNEZXQ7XG4gICAgICAgICAgc2NhbGVYID0gbm9ybVkgPiBiYXNlQXJlYSA/IG5vcm1ZIC8gYmFzZUFyZWEgOiAxO1xuICAgICAgICAgIHNjYWxlWSA9IG5vcm1YID4gYmFzZUFyZWEgPyBub3JtWCAvIGJhc2VBcmVhIDogMTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5fY2FjaGVkU2NhbGVGb3JTdHJva2luZyA9IFtzY2FsZVgsIHNjYWxlWV07XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jYWNoZWRTY2FsZUZvclN0cm9raW5nO1xuICB9XG5cbiAgLy8gUmVzY2FsZSBiZWZvcmUgc3Ryb2tpbmcgaW4gb3JkZXIgdG8gaGF2ZSBhIGZpbmFsIGxpbmVXaWR0aFxuICAvLyB3aXRoIGJvdGggdGhpY2tuZXNzZXMgZ3JlYXRlciBvciBlcXVhbCB0byAxLlxuICByZXNjYWxlQW5kU3Ryb2tlKHNhdmVSZXN0b3JlKSB7XG4gICAgY29uc3QgeyBjdHggfSA9IHRoaXM7XG4gICAgY29uc3QgeyBsaW5lV2lkdGggfSA9IHRoaXMuY3VycmVudDtcbiAgICBjb25zdCBbc2NhbGVYLCBzY2FsZVldID0gdGhpcy5nZXRTY2FsZUZvclN0cm9raW5nKCk7XG5cbiAgICBjdHgubGluZVdpZHRoID0gbGluZVdpZHRoIHx8IDE7XG5cbiAgICBpZiAoc2NhbGVYID09PSAxICYmIHNjYWxlWSA9PT0gMSkge1xuICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBzYXZlZE1hdHJpeCwgc2F2ZWREYXNoZXMsIHNhdmVkRGFzaE9mZnNldDtcbiAgICBpZiAoc2F2ZVJlc3RvcmUpIHtcbiAgICAgIHNhdmVkTWF0cml4ID0gY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm0uc2xpY2UoKTtcbiAgICAgIHNhdmVkRGFzaGVzID0gY3R4LmdldExpbmVEYXNoKCkuc2xpY2UoKTtcbiAgICAgIHNhdmVkRGFzaE9mZnNldCA9IGN0eC5saW5lRGFzaE9mZnNldDtcbiAgICB9XG5cbiAgICBjdHguc2NhbGUoc2NhbGVYLCBzY2FsZVkpO1xuXG4gICAgLy8gSG93IHRoZSBkYXNoZWQgbGluZSBpcyByZW5kZXJlZCBkZXBlbmRzIG9uIHRoZSBjdXJyZW50IHRyYW5zZm9ybS4uLlxuICAgIC8vIHNvIHdlIGFkZGVkIGEgcmVzY2FsZSB0byBoYW5kbGUgdG9vIHRoaW4gbGluZXMgYW5kIGNvbnNlcXVlbnRseVxuICAgIC8vIHRoZSB3YXkgdGhlIGxpbmUgaXMgZGFzaGVkIHdpbGwgYmUgbW9kaWZpZWQuXG4gICAgLy8gSWYgc2NhbGVYID09PSBzY2FsZVksIHRoZSBkYXNoZWQgbGluZXMgd2lsbCBiZSByZW5kZXJlZCBjb3JyZWN0bHlcbiAgICAvLyBlbHNlIHdlJ2xsIGhhdmUgc29tZSBidWdzIChidXQgb25seSB3aXRoIHRvbyB0aGluIGxpbmVzKS5cbiAgICAvLyBIZXJlIHdlIHRha2UgdGhlIG1heC4uLiB3aHkgbm90IHRha2luZyB0aGUgbWluLi4uIG9yIHNvbWV0aGluZyBlbHNlLlxuICAgIC8vIEFueXdheSwgYXMgc2FpZCBpdCdzIGJ1Z2d5IHdoZW4gc2NhbGVYICE9PSBzY2FsZVkuXG4gICAgY29uc3Qgc2NhbGUgPSBNYXRoLm1heChzY2FsZVgsIHNjYWxlWSk7XG4gICAgY3R4LnNldExpbmVEYXNoKGN0eC5nZXRMaW5lRGFzaCgpLm1hcCh4ID0+IHggLyBzY2FsZSkpO1xuICAgIGN0eC5saW5lRGFzaE9mZnNldCAvPSBzY2FsZTtcblxuICAgIGN0eC5zdHJva2UoKTtcblxuICAgIGlmIChzYXZlUmVzdG9yZSkge1xuICAgICAgY3R4LnNldFRyYW5zZm9ybSguLi5zYXZlZE1hdHJpeCk7XG4gICAgICBjdHguc2V0TGluZURhc2goc2F2ZWREYXNoZXMpO1xuICAgICAgY3R4LmxpbmVEYXNoT2Zmc2V0ID0gc2F2ZWREYXNoT2Zmc2V0O1xuICAgIH1cbiAgfVxuXG4gIGdldENhbnZhc1Bvc2l0aW9uKHgsIHkpIHtcbiAgICBjb25zdCB0cmFuc2Zvcm0gPSB0aGlzLmN0eC5tb3pDdXJyZW50VHJhbnNmb3JtO1xuICAgIHJldHVybiBbXG4gICAgICB0cmFuc2Zvcm1bMF0gKiB4ICsgdHJhbnNmb3JtWzJdICogeSArIHRyYW5zZm9ybVs0XSxcbiAgICAgIHRyYW5zZm9ybVsxXSAqIHggKyB0cmFuc2Zvcm1bM10gKiB5ICsgdHJhbnNmb3JtWzVdLFxuICAgIF07XG4gIH1cblxuICBpc0NvbnRlbnRWaXNpYmxlKCkge1xuICAgIGZvciAobGV0IGkgPSB0aGlzLm1hcmtlZENvbnRlbnRTdGFjay5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgaWYgKCF0aGlzLm1hcmtlZENvbnRlbnRTdGFja1tpXS52aXNpYmxlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cblxuZm9yIChjb25zdCBvcCBpbiBPUFMpIHtcbiAgaWYgKENhbnZhc0dyYXBoaWNzLnByb3RvdHlwZVtvcF0gIT09IHVuZGVmaW5lZCkge1xuICAgIENhbnZhc0dyYXBoaWNzLnByb3RvdHlwZVtPUFNbb3BdXSA9IENhbnZhc0dyYXBoaWNzLnByb3RvdHlwZVtvcF07XG4gIH1cbn1cblxuZXhwb3J0IHsgQ2FudmFzR3JhcGhpY3MgfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAxNCBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgRm9ybWF0RXJyb3IsXG4gIGluZm8sXG4gIHNoYWRvdyxcbiAgdW5yZWFjaGFibGUsXG4gIFV0aWwsXG4gIHdhcm4sXG59IGZyb20gXCIuLi9zaGFyZWQvdXRpbC5qc1wiO1xuaW1wb3J0IHsgaXNOb2RlSlMgfSBmcm9tIFwiLi4vc2hhcmVkL2lzX25vZGUuanNcIjtcblxuY29uc3QgUGF0aFR5cGUgPSB7XG4gIEZJTEw6IFwiRmlsbFwiLFxuICBTVFJPS0U6IFwiU3Ryb2tlXCIsXG4gIFNIQURJTkc6IFwiU2hhZGluZ1wiLFxufTtcblxuZnVuY3Rpb24gYXBwbHlCb3VuZGluZ0JveChjdHgsIGJib3gpIHtcbiAgaWYgKCFiYm94IHx8IGlzTm9kZUpTKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHdpZHRoID0gYmJveFsyXSAtIGJib3hbMF07XG4gIGNvbnN0IGhlaWdodCA9IGJib3hbM10gLSBiYm94WzFdO1xuICBjb25zdCByZWdpb24gPSBuZXcgUGF0aDJEKCk7XG4gIHJlZ2lvbi5yZWN0KGJib3hbMF0sIGJib3hbMV0sIHdpZHRoLCBoZWlnaHQpO1xuICBjdHguY2xpcChyZWdpb24pO1xufVxuXG5jbGFzcyBCYXNlU2hhZGluZ1BhdHRlcm4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBpZiAodGhpcy5jb25zdHJ1Y3RvciA9PT0gQmFzZVNoYWRpbmdQYXR0ZXJuKSB7XG4gICAgICB1bnJlYWNoYWJsZShcIkNhbm5vdCBpbml0aWFsaXplIEJhc2VTaGFkaW5nUGF0dGVybi5cIik7XG4gICAgfVxuICB9XG5cbiAgZ2V0UGF0dGVybigpIHtcbiAgICB1bnJlYWNoYWJsZShcIkFic3RyYWN0IG1ldGhvZCBgZ2V0UGF0dGVybmAgY2FsbGVkLlwiKTtcbiAgfVxufVxuXG5jbGFzcyBSYWRpYWxBeGlhbFNoYWRpbmdQYXR0ZXJuIGV4dGVuZHMgQmFzZVNoYWRpbmdQYXR0ZXJuIHtcbiAgY29uc3RydWN0b3IoSVIpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX3R5cGUgPSBJUlsxXTtcbiAgICB0aGlzLl9iYm94ID0gSVJbMl07XG4gICAgdGhpcy5fY29sb3JTdG9wcyA9IElSWzNdO1xuICAgIHRoaXMuX3AwID0gSVJbNF07XG4gICAgdGhpcy5fcDEgPSBJUls1XTtcbiAgICB0aGlzLl9yMCA9IElSWzZdO1xuICAgIHRoaXMuX3IxID0gSVJbN107XG4gICAgdGhpcy5tYXRyaXggPSBudWxsO1xuICB9XG5cbiAgX2NyZWF0ZUdyYWRpZW50KGN0eCkge1xuICAgIGxldCBncmFkO1xuICAgIGlmICh0aGlzLl90eXBlID09PSBcImF4aWFsXCIpIHtcbiAgICAgIGdyYWQgPSBjdHguY3JlYXRlTGluZWFyR3JhZGllbnQoXG4gICAgICAgIHRoaXMuX3AwWzBdLFxuICAgICAgICB0aGlzLl9wMFsxXSxcbiAgICAgICAgdGhpcy5fcDFbMF0sXG4gICAgICAgIHRoaXMuX3AxWzFdXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fdHlwZSA9PT0gXCJyYWRpYWxcIikge1xuICAgICAgZ3JhZCA9IGN0eC5jcmVhdGVSYWRpYWxHcmFkaWVudChcbiAgICAgICAgdGhpcy5fcDBbMF0sXG4gICAgICAgIHRoaXMuX3AwWzFdLFxuICAgICAgICB0aGlzLl9yMCxcbiAgICAgICAgdGhpcy5fcDFbMF0sXG4gICAgICAgIHRoaXMuX3AxWzFdLFxuICAgICAgICB0aGlzLl9yMVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGNvbG9yU3RvcCBvZiB0aGlzLl9jb2xvclN0b3BzKSB7XG4gICAgICBncmFkLmFkZENvbG9yU3RvcChjb2xvclN0b3BbMF0sIGNvbG9yU3RvcFsxXSk7XG4gICAgfVxuICAgIHJldHVybiBncmFkO1xuICB9XG5cbiAgZ2V0UGF0dGVybihjdHgsIG93bmVyLCBpbnZlcnNlLCBwYXRoVHlwZSkge1xuICAgIGxldCBwYXR0ZXJuO1xuICAgIGlmIChwYXRoVHlwZSA9PT0gUGF0aFR5cGUuU1RST0tFIHx8IHBhdGhUeXBlID09PSBQYXRoVHlwZS5GSUxMKSB7XG4gICAgICBjb25zdCBvd25lckJCb3ggPSBvd25lci5jdXJyZW50LmdldENsaXBwZWRQYXRoQm91bmRpbmdCb3goXG4gICAgICAgIHBhdGhUeXBlLFxuICAgICAgICBjdHgubW96Q3VycmVudFRyYW5zZm9ybVxuICAgICAgKSB8fCBbMCwgMCwgMCwgMF07XG4gICAgICAvLyBDcmVhdGUgYSBjYW52YXMgdGhhdCBpcyBvbmx5IGFzIGJpZyBhcyB0aGUgY3VycmVudCBwYXRoLiBUaGlzIGRvZXNuJ3RcbiAgICAgIC8vIGFsbG93IHVzIHRvIGNhY2hlIHRoZSBwYXR0ZXJuLCBidXQgaXQgZ2VuZXJhbGx5IGNyZWF0ZXMgbXVjaCBzbWFsbGVyXG4gICAgICAvLyBjYW52YXNlcyBhbmQgc2F2ZXMgbWVtb3J5IHVzZS4gU2VlIGJ1ZyAxNzIyODA3IGZvciBhbiBleGFtcGxlLlxuICAgICAgY29uc3Qgd2lkdGggPSBNYXRoLmNlaWwob3duZXJCQm94WzJdIC0gb3duZXJCQm94WzBdKSB8fCAxO1xuICAgICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5jZWlsKG93bmVyQkJveFszXSAtIG93bmVyQkJveFsxXSkgfHwgMTtcblxuICAgICAgY29uc3QgdG1wQ2FudmFzID0gb3duZXIuY2FjaGVkQ2FudmFzZXMuZ2V0Q2FudmFzKFxuICAgICAgICBcInBhdHRlcm5cIixcbiAgICAgICAgd2lkdGgsXG4gICAgICAgIGhlaWdodCxcbiAgICAgICAgdHJ1ZVxuICAgICAgKTtcblxuICAgICAgY29uc3QgdG1wQ3R4ID0gdG1wQ2FudmFzLmNvbnRleHQ7XG4gICAgICB0bXBDdHguY2xlYXJSZWN0KDAsIDAsIHRtcEN0eC5jYW52YXMud2lkdGgsIHRtcEN0eC5jYW52YXMuaGVpZ2h0KTtcbiAgICAgIHRtcEN0eC5iZWdpblBhdGgoKTtcbiAgICAgIHRtcEN0eC5yZWN0KDAsIDAsIHRtcEN0eC5jYW52YXMud2lkdGgsIHRtcEN0eC5jYW52YXMuaGVpZ2h0KTtcbiAgICAgIC8vIE5vbiBzaGFkaW5nIGZpbGwgcGF0dGVybnMgYXJlIHBvc2l0aW9uZWQgcmVsYXRpdmUgdG8gdGhlIGJhc2UgdHJhbnNmb3JtXG4gICAgICAvLyAodXN1YWxseSB0aGUgcGFnZSdzIGluaXRpYWwgdHJhbnNmb3JtKSwgYnV0IHdlIG1heSBoYXZlIGNyZWF0ZWQgYVxuICAgICAgLy8gc21hbGxlciBjYW52YXMgYmFzZWQgb24gdGhlIHBhdGgsIHNvIHdlIG11c3QgYWNjb3VudCBmb3IgdGhlIHNoaWZ0LlxuICAgICAgdG1wQ3R4LnRyYW5zbGF0ZSgtb3duZXJCQm94WzBdLCAtb3duZXJCQm94WzFdKTtcbiAgICAgIGludmVyc2UgPSBVdGlsLnRyYW5zZm9ybShpbnZlcnNlLCBbXG4gICAgICAgIDEsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDEsXG4gICAgICAgIG93bmVyQkJveFswXSxcbiAgICAgICAgb3duZXJCQm94WzFdLFxuICAgICAgXSk7XG5cbiAgICAgIHRtcEN0eC50cmFuc2Zvcm0uYXBwbHkodG1wQ3R4LCBvd25lci5iYXNlVHJhbnNmb3JtKTtcbiAgICAgIGlmICh0aGlzLm1hdHJpeCkge1xuICAgICAgICB0bXBDdHgudHJhbnNmb3JtLmFwcGx5KHRtcEN0eCwgdGhpcy5tYXRyaXgpO1xuICAgICAgfVxuICAgICAgYXBwbHlCb3VuZGluZ0JveCh0bXBDdHgsIHRoaXMuX2Jib3gpO1xuXG4gICAgICB0bXBDdHguZmlsbFN0eWxlID0gdGhpcy5fY3JlYXRlR3JhZGllbnQodG1wQ3R4KTtcbiAgICAgIHRtcEN0eC5maWxsKCk7XG5cbiAgICAgIHBhdHRlcm4gPSBjdHguY3JlYXRlUGF0dGVybih0bXBDYW52YXMuY2FudmFzLCBcIm5vLXJlcGVhdFwiKTtcbiAgICAgIGNvbnN0IGRvbU1hdHJpeCA9IG5ldyBET01NYXRyaXgoaW52ZXJzZSk7XG4gICAgICB0cnkge1xuICAgICAgICBwYXR0ZXJuLnNldFRyYW5zZm9ybShkb21NYXRyaXgpO1xuICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgLy8gQXZvaWQgcmVuZGVyaW5nIGJyZWFraW5nIGNvbXBsZXRlbHkgaW4gRmlyZWZveCA3OCBFU1IsXG4gICAgICAgIC8vIGFuZCBpbiBOb2RlLmpzIChzZWUgaXNzdWUgMTM3MjQpLlxuICAgICAgICB3YXJuKGBSYWRpYWxBeGlhbFNoYWRpbmdQYXR0ZXJuLmdldFBhdHRlcm46IFwiJHtleD8ubWVzc2FnZX1cIi5gKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2hhZGluZyBmaWxscyBhcmUgYXBwbGllZCByZWxhdGl2ZSB0byB0aGUgY3VycmVudCBtYXRyaXggd2hpY2ggaXMgYWxzb1xuICAgICAgLy8gaG93IGNhbnZhcyBncmFkaWVudHMgd29yaywgc28gdGhlcmUncyBubyBuZWVkIHRvIGRvIGFueXRoaW5nIHNwZWNpYWxcbiAgICAgIC8vIGhlcmUuXG4gICAgICBhcHBseUJvdW5kaW5nQm94KGN0eCwgdGhpcy5fYmJveCk7XG4gICAgICBwYXR0ZXJuID0gdGhpcy5fY3JlYXRlR3JhZGllbnQoY3R4KTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdHRlcm47XG4gIH1cbn1cblxuZnVuY3Rpb24gZHJhd1RyaWFuZ2xlKGRhdGEsIGNvbnRleHQsIHAxLCBwMiwgcDMsIGMxLCBjMiwgYzMpIHtcbiAgLy8gVmVyeSBiYXNpYyBHb3VyYXVkLXNoYWRlZCB0cmlhbmdsZSByYXN0ZXJpemF0aW9uIGFsZ29yaXRobS5cbiAgY29uc3QgY29vcmRzID0gY29udGV4dC5jb29yZHMsXG4gICAgY29sb3JzID0gY29udGV4dC5jb2xvcnM7XG4gIGNvbnN0IGJ5dGVzID0gZGF0YS5kYXRhLFxuICAgIHJvd1NpemUgPSBkYXRhLndpZHRoICogNDtcbiAgbGV0IHRtcDtcbiAgaWYgKGNvb3Jkc1twMSArIDFdID4gY29vcmRzW3AyICsgMV0pIHtcbiAgICB0bXAgPSBwMTtcbiAgICBwMSA9IHAyO1xuICAgIHAyID0gdG1wO1xuICAgIHRtcCA9IGMxO1xuICAgIGMxID0gYzI7XG4gICAgYzIgPSB0bXA7XG4gIH1cbiAgaWYgKGNvb3Jkc1twMiArIDFdID4gY29vcmRzW3AzICsgMV0pIHtcbiAgICB0bXAgPSBwMjtcbiAgICBwMiA9IHAzO1xuICAgIHAzID0gdG1wO1xuICAgIHRtcCA9IGMyO1xuICAgIGMyID0gYzM7XG4gICAgYzMgPSB0bXA7XG4gIH1cbiAgaWYgKGNvb3Jkc1twMSArIDFdID4gY29vcmRzW3AyICsgMV0pIHtcbiAgICB0bXAgPSBwMTtcbiAgICBwMSA9IHAyO1xuICAgIHAyID0gdG1wO1xuICAgIHRtcCA9IGMxO1xuICAgIGMxID0gYzI7XG4gICAgYzIgPSB0bXA7XG4gIH1cbiAgY29uc3QgeDEgPSAoY29vcmRzW3AxXSArIGNvbnRleHQub2Zmc2V0WCkgKiBjb250ZXh0LnNjYWxlWDtcbiAgY29uc3QgeTEgPSAoY29vcmRzW3AxICsgMV0gKyBjb250ZXh0Lm9mZnNldFkpICogY29udGV4dC5zY2FsZVk7XG4gIGNvbnN0IHgyID0gKGNvb3Jkc1twMl0gKyBjb250ZXh0Lm9mZnNldFgpICogY29udGV4dC5zY2FsZVg7XG4gIGNvbnN0IHkyID0gKGNvb3Jkc1twMiArIDFdICsgY29udGV4dC5vZmZzZXRZKSAqIGNvbnRleHQuc2NhbGVZO1xuICBjb25zdCB4MyA9IChjb29yZHNbcDNdICsgY29udGV4dC5vZmZzZXRYKSAqIGNvbnRleHQuc2NhbGVYO1xuICBjb25zdCB5MyA9IChjb29yZHNbcDMgKyAxXSArIGNvbnRleHQub2Zmc2V0WSkgKiBjb250ZXh0LnNjYWxlWTtcbiAgaWYgKHkxID49IHkzKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGMxciA9IGNvbG9yc1tjMV0sXG4gICAgYzFnID0gY29sb3JzW2MxICsgMV0sXG4gICAgYzFiID0gY29sb3JzW2MxICsgMl07XG4gIGNvbnN0IGMyciA9IGNvbG9yc1tjMl0sXG4gICAgYzJnID0gY29sb3JzW2MyICsgMV0sXG4gICAgYzJiID0gY29sb3JzW2MyICsgMl07XG4gIGNvbnN0IGMzciA9IGNvbG9yc1tjM10sXG4gICAgYzNnID0gY29sb3JzW2MzICsgMV0sXG4gICAgYzNiID0gY29sb3JzW2MzICsgMl07XG5cbiAgY29uc3QgbWluWSA9IE1hdGgucm91bmQoeTEpLFxuICAgIG1heFkgPSBNYXRoLnJvdW5kKHkzKTtcbiAgbGV0IHhhLCBjYXIsIGNhZywgY2FiO1xuICBsZXQgeGIsIGNiciwgY2JnLCBjYmI7XG4gIGZvciAobGV0IHkgPSBtaW5ZOyB5IDw9IG1heFk7IHkrKykge1xuICAgIGlmICh5IDwgeTIpIHtcbiAgICAgIGxldCBrO1xuICAgICAgaWYgKHkgPCB5MSkge1xuICAgICAgICBrID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGsgPSAoeTEgLSB5KSAvICh5MSAtIHkyKTtcbiAgICAgIH1cbiAgICAgIHhhID0geDEgLSAoeDEgLSB4MikgKiBrO1xuICAgICAgY2FyID0gYzFyIC0gKGMxciAtIGMycikgKiBrO1xuICAgICAgY2FnID0gYzFnIC0gKGMxZyAtIGMyZykgKiBrO1xuICAgICAgY2FiID0gYzFiIC0gKGMxYiAtIGMyYikgKiBrO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgaztcbiAgICAgIGlmICh5ID4geTMpIHtcbiAgICAgICAgayA9IDE7XG4gICAgICB9IGVsc2UgaWYgKHkyID09PSB5Mykge1xuICAgICAgICBrID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGsgPSAoeTIgLSB5KSAvICh5MiAtIHkzKTtcbiAgICAgIH1cbiAgICAgIHhhID0geDIgLSAoeDIgLSB4MykgKiBrO1xuICAgICAgY2FyID0gYzJyIC0gKGMyciAtIGMzcikgKiBrO1xuICAgICAgY2FnID0gYzJnIC0gKGMyZyAtIGMzZykgKiBrO1xuICAgICAgY2FiID0gYzJiIC0gKGMyYiAtIGMzYikgKiBrO1xuICAgIH1cblxuICAgIGxldCBrO1xuICAgIGlmICh5IDwgeTEpIHtcbiAgICAgIGsgPSAwO1xuICAgIH0gZWxzZSBpZiAoeSA+IHkzKSB7XG4gICAgICBrID0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgayA9ICh5MSAtIHkpIC8gKHkxIC0geTMpO1xuICAgIH1cbiAgICB4YiA9IHgxIC0gKHgxIC0geDMpICogaztcbiAgICBjYnIgPSBjMXIgLSAoYzFyIC0gYzNyKSAqIGs7XG4gICAgY2JnID0gYzFnIC0gKGMxZyAtIGMzZykgKiBrO1xuICAgIGNiYiA9IGMxYiAtIChjMWIgLSBjM2IpICogaztcbiAgICBjb25zdCB4MV8gPSBNYXRoLnJvdW5kKE1hdGgubWluKHhhLCB4YikpO1xuICAgIGNvbnN0IHgyXyA9IE1hdGgucm91bmQoTWF0aC5tYXgoeGEsIHhiKSk7XG4gICAgbGV0IGogPSByb3dTaXplICogeSArIHgxXyAqIDQ7XG4gICAgZm9yIChsZXQgeCA9IHgxXzsgeCA8PSB4Ml87IHgrKykge1xuICAgICAgayA9ICh4YSAtIHgpIC8gKHhhIC0geGIpO1xuICAgICAgaWYgKGsgPCAwKSB7XG4gICAgICAgIGsgPSAwO1xuICAgICAgfSBlbHNlIGlmIChrID4gMSkge1xuICAgICAgICBrID0gMTtcbiAgICAgIH1cbiAgICAgIGJ5dGVzW2orK10gPSAoY2FyIC0gKGNhciAtIGNicikgKiBrKSB8IDA7XG4gICAgICBieXRlc1tqKytdID0gKGNhZyAtIChjYWcgLSBjYmcpICogaykgfCAwO1xuICAgICAgYnl0ZXNbaisrXSA9IChjYWIgLSAoY2FiIC0gY2JiKSAqIGspIHwgMDtcbiAgICAgIGJ5dGVzW2orK10gPSAyNTU7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGRyYXdGaWd1cmUoZGF0YSwgZmlndXJlLCBjb250ZXh0KSB7XG4gIGNvbnN0IHBzID0gZmlndXJlLmNvb3JkcztcbiAgY29uc3QgY3MgPSBmaWd1cmUuY29sb3JzO1xuICBsZXQgaSwgaWk7XG4gIHN3aXRjaCAoZmlndXJlLnR5cGUpIHtcbiAgICBjYXNlIFwibGF0dGljZVwiOlxuICAgICAgY29uc3QgdmVydGljZXNQZXJSb3cgPSBmaWd1cmUudmVydGljZXNQZXJSb3c7XG4gICAgICBjb25zdCByb3dzID0gTWF0aC5mbG9vcihwcy5sZW5ndGggLyB2ZXJ0aWNlc1BlclJvdykgLSAxO1xuICAgICAgY29uc3QgY29scyA9IHZlcnRpY2VzUGVyUm93IC0gMTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCByb3dzOyBpKyspIHtcbiAgICAgICAgbGV0IHEgPSBpICogdmVydGljZXNQZXJSb3c7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY29sczsgaisrLCBxKyspIHtcbiAgICAgICAgICBkcmF3VHJpYW5nbGUoXG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgIHBzW3FdLFxuICAgICAgICAgICAgcHNbcSArIDFdLFxuICAgICAgICAgICAgcHNbcSArIHZlcnRpY2VzUGVyUm93XSxcbiAgICAgICAgICAgIGNzW3FdLFxuICAgICAgICAgICAgY3NbcSArIDFdLFxuICAgICAgICAgICAgY3NbcSArIHZlcnRpY2VzUGVyUm93XVxuICAgICAgICAgICk7XG4gICAgICAgICAgZHJhd1RyaWFuZ2xlKFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgICBwc1txICsgdmVydGljZXNQZXJSb3cgKyAxXSxcbiAgICAgICAgICAgIHBzW3EgKyAxXSxcbiAgICAgICAgICAgIHBzW3EgKyB2ZXJ0aWNlc1BlclJvd10sXG4gICAgICAgICAgICBjc1txICsgdmVydGljZXNQZXJSb3cgKyAxXSxcbiAgICAgICAgICAgIGNzW3EgKyAxXSxcbiAgICAgICAgICAgIGNzW3EgKyB2ZXJ0aWNlc1BlclJvd11cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwidHJpYW5nbGVzXCI6XG4gICAgICBmb3IgKGkgPSAwLCBpaSA9IHBzLmxlbmd0aDsgaSA8IGlpOyBpICs9IDMpIHtcbiAgICAgICAgZHJhd1RyaWFuZ2xlKFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICBwc1tpXSxcbiAgICAgICAgICBwc1tpICsgMV0sXG4gICAgICAgICAgcHNbaSArIDJdLFxuICAgICAgICAgIGNzW2ldLFxuICAgICAgICAgIGNzW2kgKyAxXSxcbiAgICAgICAgICBjc1tpICsgMl1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbGxlZ2FsIGZpZ3VyZVwiKTtcbiAgfVxufVxuXG5jbGFzcyBNZXNoU2hhZGluZ1BhdHRlcm4gZXh0ZW5kcyBCYXNlU2hhZGluZ1BhdHRlcm4ge1xuICBjb25zdHJ1Y3RvcihJUikge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fY29vcmRzID0gSVJbMl07XG4gICAgdGhpcy5fY29sb3JzID0gSVJbM107XG4gICAgdGhpcy5fZmlndXJlcyA9IElSWzRdO1xuICAgIHRoaXMuX2JvdW5kcyA9IElSWzVdO1xuICAgIHRoaXMuX2Jib3ggPSBJUls3XTtcbiAgICB0aGlzLl9iYWNrZ3JvdW5kID0gSVJbOF07XG4gICAgdGhpcy5tYXRyaXggPSBudWxsO1xuICB9XG5cbiAgX2NyZWF0ZU1lc2hDYW52YXMoY29tYmluZWRTY2FsZSwgYmFja2dyb3VuZENvbG9yLCBjYWNoZWRDYW52YXNlcykge1xuICAgIC8vIHdlIHdpbGwgaW5jcmVhc2Ugc2NhbGUgb24gc29tZSB3ZWlyZCBmYWN0b3IgdG8gbGV0IGFudGlhbGlhc2luZyB0YWtlXG4gICAgLy8gY2FyZSBvZiBcInJvdWdoXCIgZWRnZXNcbiAgICBjb25zdCBFWFBFQ1RFRF9TQ0FMRSA9IDEuMTtcbiAgICAvLyBNQVhfUEFUVEVSTl9TSVpFIGlzIHVzZWQgdG8gYXZvaWQgT09NIHNpdHVhdGlvbi5cbiAgICBjb25zdCBNQVhfUEFUVEVSTl9TSVpFID0gMzAwMDsgLy8gMTBpbiBAIDMwMGRwaSBzaGFsbCBiZSBlbm91Z2hcbiAgICAvLyBXZSBuZWVkIHRvIGtlZXAgdHJhbnNwYXJlbnQgYm9yZGVyIGFyb3VuZCBvdXIgcGF0dGVybiBmb3IgZmlsbCgpOlxuICAgIC8vIGNyZWF0ZVBhdHRlcm4gd2l0aCAnbm8tcmVwZWF0JyB3aWxsIGJsZWVkIGVkZ2VzIGFjcm9zcyBlbnRpcmUgYXJlYS5cbiAgICBjb25zdCBCT1JERVJfU0laRSA9IDI7XG5cbiAgICBjb25zdCBvZmZzZXRYID0gTWF0aC5mbG9vcih0aGlzLl9ib3VuZHNbMF0pO1xuICAgIGNvbnN0IG9mZnNldFkgPSBNYXRoLmZsb29yKHRoaXMuX2JvdW5kc1sxXSk7XG4gICAgY29uc3QgYm91bmRzV2lkdGggPSBNYXRoLmNlaWwodGhpcy5fYm91bmRzWzJdKSAtIG9mZnNldFg7XG4gICAgY29uc3QgYm91bmRzSGVpZ2h0ID0gTWF0aC5jZWlsKHRoaXMuX2JvdW5kc1szXSkgLSBvZmZzZXRZO1xuXG4gICAgY29uc3Qgd2lkdGggPSBNYXRoLm1pbihcbiAgICAgIE1hdGguY2VpbChNYXRoLmFicyhib3VuZHNXaWR0aCAqIGNvbWJpbmVkU2NhbGVbMF0gKiBFWFBFQ1RFRF9TQ0FMRSkpLFxuICAgICAgTUFYX1BBVFRFUk5fU0laRVxuICAgICk7XG4gICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5taW4oXG4gICAgICBNYXRoLmNlaWwoTWF0aC5hYnMoYm91bmRzSGVpZ2h0ICogY29tYmluZWRTY2FsZVsxXSAqIEVYUEVDVEVEX1NDQUxFKSksXG4gICAgICBNQVhfUEFUVEVSTl9TSVpFXG4gICAgKTtcbiAgICBjb25zdCBzY2FsZVggPSBib3VuZHNXaWR0aCAvIHdpZHRoO1xuICAgIGNvbnN0IHNjYWxlWSA9IGJvdW5kc0hlaWdodCAvIGhlaWdodDtcblxuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICBjb29yZHM6IHRoaXMuX2Nvb3JkcyxcbiAgICAgIGNvbG9yczogdGhpcy5fY29sb3JzLFxuICAgICAgb2Zmc2V0WDogLW9mZnNldFgsXG4gICAgICBvZmZzZXRZOiAtb2Zmc2V0WSxcbiAgICAgIHNjYWxlWDogMSAvIHNjYWxlWCxcbiAgICAgIHNjYWxlWTogMSAvIHNjYWxlWSxcbiAgICB9O1xuXG4gICAgY29uc3QgcGFkZGVkV2lkdGggPSB3aWR0aCArIEJPUkRFUl9TSVpFICogMjtcbiAgICBjb25zdCBwYWRkZWRIZWlnaHQgPSBoZWlnaHQgKyBCT1JERVJfU0laRSAqIDI7XG5cbiAgICBjb25zdCB0bXBDYW52YXMgPSBjYWNoZWRDYW52YXNlcy5nZXRDYW52YXMoXG4gICAgICBcIm1lc2hcIixcbiAgICAgIHBhZGRlZFdpZHRoLFxuICAgICAgcGFkZGVkSGVpZ2h0LFxuICAgICAgZmFsc2VcbiAgICApO1xuICAgIGNvbnN0IHRtcEN0eCA9IHRtcENhbnZhcy5jb250ZXh0O1xuXG4gICAgY29uc3QgZGF0YSA9IHRtcEN0eC5jcmVhdGVJbWFnZURhdGEod2lkdGgsIGhlaWdodCk7XG4gICAgaWYgKGJhY2tncm91bmRDb2xvcikge1xuICAgICAgY29uc3QgYnl0ZXMgPSBkYXRhLmRhdGE7XG4gICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBieXRlcy5sZW5ndGg7IGkgPCBpaTsgaSArPSA0KSB7XG4gICAgICAgIGJ5dGVzW2ldID0gYmFja2dyb3VuZENvbG9yWzBdO1xuICAgICAgICBieXRlc1tpICsgMV0gPSBiYWNrZ3JvdW5kQ29sb3JbMV07XG4gICAgICAgIGJ5dGVzW2kgKyAyXSA9IGJhY2tncm91bmRDb2xvclsyXTtcbiAgICAgICAgYnl0ZXNbaSArIDNdID0gMjU1O1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGZpZ3VyZSBvZiB0aGlzLl9maWd1cmVzKSB7XG4gICAgICBkcmF3RmlndXJlKGRhdGEsIGZpZ3VyZSwgY29udGV4dCk7XG4gICAgfVxuICAgIHRtcEN0eC5wdXRJbWFnZURhdGEoZGF0YSwgQk9SREVSX1NJWkUsIEJPUkRFUl9TSVpFKTtcbiAgICBjb25zdCBjYW52YXMgPSB0bXBDYW52YXMuY2FudmFzO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNhbnZhcyxcbiAgICAgIG9mZnNldFg6IG9mZnNldFggLSBCT1JERVJfU0laRSAqIHNjYWxlWCxcbiAgICAgIG9mZnNldFk6IG9mZnNldFkgLSBCT1JERVJfU0laRSAqIHNjYWxlWSxcbiAgICAgIHNjYWxlWCxcbiAgICAgIHNjYWxlWSxcbiAgICB9O1xuICB9XG5cbiAgZ2V0UGF0dGVybihjdHgsIG93bmVyLCBpbnZlcnNlLCBwYXRoVHlwZSkge1xuICAgIGFwcGx5Qm91bmRpbmdCb3goY3R4LCB0aGlzLl9iYm94KTtcbiAgICBsZXQgc2NhbGU7XG4gICAgaWYgKHBhdGhUeXBlID09PSBQYXRoVHlwZS5TSEFESU5HKSB7XG4gICAgICBzY2FsZSA9IFV0aWwuc2luZ3VsYXJWYWx1ZURlY29tcG9zZTJkU2NhbGUoY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBPYnRhaW4gc2NhbGUgZnJvbSBtYXRyaXggYW5kIGN1cnJlbnQgdHJhbnNmb3JtYXRpb24gbWF0cml4LlxuICAgICAgc2NhbGUgPSBVdGlsLnNpbmd1bGFyVmFsdWVEZWNvbXBvc2UyZFNjYWxlKG93bmVyLmJhc2VUcmFuc2Zvcm0pO1xuICAgICAgaWYgKHRoaXMubWF0cml4KSB7XG4gICAgICAgIGNvbnN0IG1hdHJpeFNjYWxlID0gVXRpbC5zaW5ndWxhclZhbHVlRGVjb21wb3NlMmRTY2FsZSh0aGlzLm1hdHJpeCk7XG4gICAgICAgIHNjYWxlID0gW3NjYWxlWzBdICogbWF0cml4U2NhbGVbMF0sIHNjYWxlWzFdICogbWF0cml4U2NhbGVbMV1dO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJhc3Rlcml6aW5nIG9uIHRoZSBtYWluIHRocmVhZCBzaW5jZSBzZW5kaW5nL3F1ZXVlIGxhcmdlIGNhbnZhc2VzXG4gICAgLy8gbWlnaHQgY2F1c2UgT09NLlxuICAgIGNvbnN0IHRlbXBvcmFyeVBhdHRlcm5DYW52YXMgPSB0aGlzLl9jcmVhdGVNZXNoQ2FudmFzKFxuICAgICAgc2NhbGUsXG4gICAgICBwYXRoVHlwZSA9PT0gUGF0aFR5cGUuU0hBRElORyA/IG51bGwgOiB0aGlzLl9iYWNrZ3JvdW5kLFxuICAgICAgb3duZXIuY2FjaGVkQ2FudmFzZXNcbiAgICApO1xuXG4gICAgaWYgKHBhdGhUeXBlICE9PSBQYXRoVHlwZS5TSEFESU5HKSB7XG4gICAgICBjdHguc2V0VHJhbnNmb3JtLmFwcGx5KGN0eCwgb3duZXIuYmFzZVRyYW5zZm9ybSk7XG4gICAgICBpZiAodGhpcy5tYXRyaXgpIHtcbiAgICAgICAgY3R4LnRyYW5zZm9ybS5hcHBseShjdHgsIHRoaXMubWF0cml4KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjdHgudHJhbnNsYXRlKFxuICAgICAgdGVtcG9yYXJ5UGF0dGVybkNhbnZhcy5vZmZzZXRYLFxuICAgICAgdGVtcG9yYXJ5UGF0dGVybkNhbnZhcy5vZmZzZXRZXG4gICAgKTtcbiAgICBjdHguc2NhbGUodGVtcG9yYXJ5UGF0dGVybkNhbnZhcy5zY2FsZVgsIHRlbXBvcmFyeVBhdHRlcm5DYW52YXMuc2NhbGVZKTtcblxuICAgIHJldHVybiBjdHguY3JlYXRlUGF0dGVybih0ZW1wb3JhcnlQYXR0ZXJuQ2FudmFzLmNhbnZhcywgXCJuby1yZXBlYXRcIik7XG4gIH1cbn1cblxuY2xhc3MgRHVtbXlTaGFkaW5nUGF0dGVybiBleHRlbmRzIEJhc2VTaGFkaW5nUGF0dGVybiB7XG4gIGdldFBhdHRlcm4oKSB7XG4gICAgcmV0dXJuIFwiaG90cGlua1wiO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldFNoYWRpbmdQYXR0ZXJuKElSKSB7XG4gIHN3aXRjaCAoSVJbMF0pIHtcbiAgICBjYXNlIFwiUmFkaWFsQXhpYWxcIjpcbiAgICAgIHJldHVybiBuZXcgUmFkaWFsQXhpYWxTaGFkaW5nUGF0dGVybihJUik7XG4gICAgY2FzZSBcIk1lc2hcIjpcbiAgICAgIHJldHVybiBuZXcgTWVzaFNoYWRpbmdQYXR0ZXJuKElSKTtcbiAgICBjYXNlIFwiRHVtbXlcIjpcbiAgICAgIHJldHVybiBuZXcgRHVtbXlTaGFkaW5nUGF0dGVybigpO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBJUiB0eXBlOiAke0lSWzBdfWApO1xufVxuXG5jb25zdCBQYWludFR5cGUgPSB7XG4gIENPTE9SRUQ6IDEsXG4gIFVOQ09MT1JFRDogMixcbn07XG5cbmNsYXNzIFRpbGluZ1BhdHRlcm4ge1xuICAvLyAxMGluIEAgMzAwZHBpIHNoYWxsIGJlIGVub3VnaC5cbiAgc3RhdGljIGdldCBNQVhfUEFUVEVSTl9TSVpFKCkge1xuICAgIHJldHVybiBzaGFkb3codGhpcywgXCJNQVhfUEFUVEVSTl9TSVpFXCIsIDMwMDApO1xuICB9XG5cbiAgY29uc3RydWN0b3IoSVIsIGNvbG9yLCBjdHgsIGNhbnZhc0dyYXBoaWNzRmFjdG9yeSwgYmFzZVRyYW5zZm9ybSkge1xuICAgIHRoaXMub3BlcmF0b3JMaXN0ID0gSVJbMl07XG4gICAgdGhpcy5tYXRyaXggPSBJUlszXSB8fCBbMSwgMCwgMCwgMSwgMCwgMF07XG4gICAgdGhpcy5iYm94ID0gSVJbNF07XG4gICAgdGhpcy54c3RlcCA9IElSWzVdO1xuICAgIHRoaXMueXN0ZXAgPSBJUls2XTtcbiAgICB0aGlzLnBhaW50VHlwZSA9IElSWzddO1xuICAgIHRoaXMudGlsaW5nVHlwZSA9IElSWzhdO1xuICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcbiAgICB0aGlzLmN0eCA9IGN0eDtcbiAgICB0aGlzLmNhbnZhc0dyYXBoaWNzRmFjdG9yeSA9IGNhbnZhc0dyYXBoaWNzRmFjdG9yeTtcbiAgICB0aGlzLmJhc2VUcmFuc2Zvcm0gPSBiYXNlVHJhbnNmb3JtO1xuICB9XG5cbiAgY3JlYXRlUGF0dGVybkNhbnZhcyhvd25lcikge1xuICAgIGNvbnN0IG9wZXJhdG9yTGlzdCA9IHRoaXMub3BlcmF0b3JMaXN0O1xuICAgIGNvbnN0IGJib3ggPSB0aGlzLmJib3g7XG4gICAgY29uc3QgeHN0ZXAgPSB0aGlzLnhzdGVwO1xuICAgIGNvbnN0IHlzdGVwID0gdGhpcy55c3RlcDtcbiAgICBjb25zdCBwYWludFR5cGUgPSB0aGlzLnBhaW50VHlwZTtcbiAgICBjb25zdCB0aWxpbmdUeXBlID0gdGhpcy50aWxpbmdUeXBlO1xuICAgIGNvbnN0IGNvbG9yID0gdGhpcy5jb2xvcjtcbiAgICBjb25zdCBjYW52YXNHcmFwaGljc0ZhY3RvcnkgPSB0aGlzLmNhbnZhc0dyYXBoaWNzRmFjdG9yeTtcblxuICAgIGluZm8oXCJUaWxpbmdUeXBlOiBcIiArIHRpbGluZ1R5cGUpO1xuXG4gICAgLy8gQSB0aWxpbmcgcGF0dGVybiBhcyBkZWZpbmVkIGJ5IFBERiBzcGVjIDguNy4yIGlzIGEgY2VsbCB3aG9zZSBzaXplIGlzXG4gICAgLy8gZGVzY3JpYmVkIGJ5IGJib3gsIGFuZCBtYXkgcmVwZWF0IHJlZ3VsYXJseSBieSBzaGlmdGluZyB0aGUgY2VsbCBieVxuICAgIC8vIHhzdGVwIGFuZCB5c3RlcC5cbiAgICAvLyBCZWNhdXNlIHRoZSBIVE1MNSBjYW52YXMgQVBJIGRvZXMgbm90IHN1cHBvcnQgcGF0dGVybiByZXBldGl0aW9uIHdpdGhcbiAgICAvLyBnYXBzIGluIGJldHdlZW4sIHdlIHVzZSB0aGUgeHN0ZXAveXN0ZXAgaW5zdGVhZCBvZiB0aGUgYmJveCdzIHNpemUuXG4gICAgLy9cbiAgICAvLyBUaGlzIGhhcyB0aGUgZm9sbG93aW5nIGNvbnNlcXVlbmNlcyAoc2ltaWxhcmx5IGZvciB5c3RlcCk6XG4gICAgLy9cbiAgICAvLyAtIElmIHhzdGVwIGlzIHRoZSBzYW1lIGFzIGJib3gsIHRoZW4gdGhlcmUgaXMgbm8gb2JzZXJ2YWJsZSBkaWZmZXJlbmNlLlxuICAgIC8vXG4gICAgLy8gLSBJZiB4c3RlcCBpcyBsYXJnZXIgdGhhbiBiYm94LCB0aGVuIHRoZSBwYXR0ZXJuIGNhbnZhcyBpcyBwYXJ0aWFsbHlcbiAgICAvLyAgIGVtcHR5OiB0aGUgYXJlYSBib3VuZGVkIGJ5IGJib3ggaXMgcGFpbnRlZCwgdGhlIG91dHNpZGUgYXJlYSBpcyB2b2lkLlxuICAgIC8vXG4gICAgLy8gLSBJZiB4c3RlcCBpcyBzbWFsbGVyIHRoYW4gYmJveCwgdGhlbiB0aGUgcGl4ZWxzIGJldHdlZW4geHN0ZXAgYW5kIHRoZVxuICAgIC8vICAgYmJveCBib3VuZGFyeSB3aWxsIGJlIG1pc3NpbmcuIFRoaXMgaXMgSU5DT1JSRUNUIGJlaGF2aW9yLlxuICAgIC8vICAgXCJGaWd1cmVzIG9uIGFkamFjZW50IHRpbGVzIHNob3VsZCBub3Qgb3ZlcmxhcFwiIChQREYgc3BlYyA4LjcuMy4xKSxcbiAgICAvLyAgIGJ1dCBvdmVybGFwcGluZyBjZWxscyB3aXRob3V0IGNvbW1vbiBwaXhlbHMgYXJlIHN0aWxsIHZhbGlkLlxuICAgIC8vICAgVE9ETzogRml4IHRoZSBpbXBsZW1lbnRhdGlvbiwgdG8gYWxsb3cgdGhpcyBzY2VuYXJpbyB0byBiZSBwYWludGVkXG4gICAgLy8gICBjb3JyZWN0bHkuXG5cbiAgICBjb25zdCB4MCA9IGJib3hbMF0sXG4gICAgICB5MCA9IGJib3hbMV0sXG4gICAgICB4MSA9IGJib3hbMl0sXG4gICAgICB5MSA9IGJib3hbM107XG5cbiAgICAvLyBPYnRhaW4gc2NhbGUgZnJvbSBtYXRyaXggYW5kIGN1cnJlbnQgdHJhbnNmb3JtYXRpb24gbWF0cml4LlxuICAgIGNvbnN0IG1hdHJpeFNjYWxlID0gVXRpbC5zaW5ndWxhclZhbHVlRGVjb21wb3NlMmRTY2FsZSh0aGlzLm1hdHJpeCk7XG4gICAgY29uc3QgY3VyTWF0cml4U2NhbGUgPSBVdGlsLnNpbmd1bGFyVmFsdWVEZWNvbXBvc2UyZFNjYWxlKFxuICAgICAgdGhpcy5iYXNlVHJhbnNmb3JtXG4gICAgKTtcbiAgICBjb25zdCBjb21iaW5lZFNjYWxlID0gW1xuICAgICAgbWF0cml4U2NhbGVbMF0gKiBjdXJNYXRyaXhTY2FsZVswXSxcbiAgICAgIG1hdHJpeFNjYWxlWzFdICogY3VyTWF0cml4U2NhbGVbMV0sXG4gICAgXTtcblxuICAgIC8vIFVzZSB3aWR0aCBhbmQgaGVpZ2h0IHZhbHVlcyB0aGF0IGFyZSBhcyBjbG9zZSBhcyBwb3NzaWJsZSB0byB0aGUgZW5kXG4gICAgLy8gcmVzdWx0IHdoZW4gdGhlIHBhdHRlcm4gaXMgdXNlZC4gVG9vIGxvdyB2YWx1ZSBtYWtlcyB0aGUgcGF0dGVybiBsb29rXG4gICAgLy8gYmx1cnJ5LiBUb28gbGFyZ2UgdmFsdWUgbWFrZXMgaXQgbG9vayB0b28gY3Jpc3B5LlxuICAgIGNvbnN0IGRpbXggPSB0aGlzLmdldFNpemVBbmRTY2FsZShcbiAgICAgIHhzdGVwLFxuICAgICAgdGhpcy5jdHguY2FudmFzLndpZHRoLFxuICAgICAgY29tYmluZWRTY2FsZVswXVxuICAgICk7XG4gICAgY29uc3QgZGlteSA9IHRoaXMuZ2V0U2l6ZUFuZFNjYWxlKFxuICAgICAgeXN0ZXAsXG4gICAgICB0aGlzLmN0eC5jYW52YXMuaGVpZ2h0LFxuICAgICAgY29tYmluZWRTY2FsZVsxXVxuICAgICk7XG5cbiAgICBjb25zdCB0bXBDYW52YXMgPSBvd25lci5jYWNoZWRDYW52YXNlcy5nZXRDYW52YXMoXG4gICAgICBcInBhdHRlcm5cIixcbiAgICAgIGRpbXguc2l6ZSxcbiAgICAgIGRpbXkuc2l6ZSxcbiAgICAgIHRydWVcbiAgICApO1xuICAgIGNvbnN0IHRtcEN0eCA9IHRtcENhbnZhcy5jb250ZXh0O1xuICAgIGNvbnN0IGdyYXBoaWNzID0gY2FudmFzR3JhcGhpY3NGYWN0b3J5LmNyZWF0ZUNhbnZhc0dyYXBoaWNzKHRtcEN0eCk7XG4gICAgZ3JhcGhpY3MuZ3JvdXBMZXZlbCA9IG93bmVyLmdyb3VwTGV2ZWw7XG5cbiAgICB0aGlzLnNldEZpbGxBbmRTdHJva2VTdHlsZVRvQ29udGV4dChncmFwaGljcywgcGFpbnRUeXBlLCBjb2xvcik7XG5cbiAgICBsZXQgYWRqdXN0ZWRYMCA9IHgwO1xuICAgIGxldCBhZGp1c3RlZFkwID0geTA7XG4gICAgbGV0IGFkanVzdGVkWDEgPSB4MTtcbiAgICBsZXQgYWRqdXN0ZWRZMSA9IHkxO1xuICAgIC8vIFNvbWUgYm91bmRpbmcgYm94ZXMgaGF2ZSBuZWdhdGl2ZSB4MC95MCBjb29yZGluYXRlcyB3aGljaCB3aWxsIGNhdXNlIHRoZVxuICAgIC8vIHNvbWUgb2YgdGhlIGRyYXdpbmcgdG8gYmUgb2ZmIG9mIHRoZSBjYW52YXMuIFRvIGF2b2lkIHRoaXMgc2hpZnQgdGhlXG4gICAgLy8gYm91bmRpbmcgYm94IG92ZXIuXG4gICAgaWYgKHgwIDwgMCkge1xuICAgICAgYWRqdXN0ZWRYMCA9IDA7XG4gICAgICBhZGp1c3RlZFgxICs9IE1hdGguYWJzKHgwKTtcbiAgICB9XG4gICAgaWYgKHkwIDwgMCkge1xuICAgICAgYWRqdXN0ZWRZMCA9IDA7XG4gICAgICBhZGp1c3RlZFkxICs9IE1hdGguYWJzKHkwKTtcbiAgICB9XG4gICAgdG1wQ3R4LnRyYW5zbGF0ZSgtKGRpbXguc2NhbGUgKiBhZGp1c3RlZFgwKSwgLShkaW15LnNjYWxlICogYWRqdXN0ZWRZMCkpO1xuICAgIGdyYXBoaWNzLnRyYW5zZm9ybShkaW14LnNjYWxlLCAwLCAwLCBkaW15LnNjYWxlLCAwLCAwKTtcblxuICAgIC8vIFRvIG1hdGNoIENhbnZhc0dyYXBoaWNzIGJlZ2luRHJhd2luZyB3ZSBtdXN0IHNhdmUgdGhlIGNvbnRleHQgaGVyZSBvclxuICAgIC8vIGVsc2Ugd2UgZW5kIHVwIHdpdGggdW5iYWxhbmNlZCBzYXZlL3Jlc3RvcmVzLlxuICAgIHRtcEN0eC5zYXZlKCk7XG5cbiAgICB0aGlzLmNsaXBCYm94KGdyYXBoaWNzLCBhZGp1c3RlZFgwLCBhZGp1c3RlZFkwLCBhZGp1c3RlZFgxLCBhZGp1c3RlZFkxKTtcblxuICAgIGdyYXBoaWNzLmJhc2VUcmFuc2Zvcm0gPSBncmFwaGljcy5jdHgubW96Q3VycmVudFRyYW5zZm9ybS5zbGljZSgpO1xuXG4gICAgZ3JhcGhpY3MuZXhlY3V0ZU9wZXJhdG9yTGlzdChvcGVyYXRvckxpc3QpO1xuXG4gICAgZ3JhcGhpY3MuZW5kRHJhd2luZygpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNhbnZhczogdG1wQ2FudmFzLmNhbnZhcyxcbiAgICAgIHNjYWxlWDogZGlteC5zY2FsZSxcbiAgICAgIHNjYWxlWTogZGlteS5zY2FsZSxcbiAgICAgIG9mZnNldFg6IGFkanVzdGVkWDAsXG4gICAgICBvZmZzZXRZOiBhZGp1c3RlZFkwLFxuICAgIH07XG4gIH1cblxuICBnZXRTaXplQW5kU2NhbGUoc3RlcCwgcmVhbE91dHB1dFNpemUsIHNjYWxlKSB7XG4gICAgLy8geHN0ZXAgLyB5c3RlcCBtYXkgYmUgbmVnYXRpdmUgLS0gbm9ybWFsaXplLlxuICAgIHN0ZXAgPSBNYXRoLmFicyhzdGVwKTtcbiAgICAvLyBNQVhfUEFUVEVSTl9TSVpFIGlzIHVzZWQgdG8gYXZvaWQgT09NIHNpdHVhdGlvbi5cbiAgICAvLyBVc2UgdGhlIGRlc3RpbmF0aW9uIGNhbnZhcydzIHNpemUgaWYgaXQgaXMgYmlnZ2VyIHRoYW4gdGhlIGhhcmQtY29kZWRcbiAgICAvLyBsaW1pdCBvZiBNQVhfUEFUVEVSTl9TSVpFIHRvIGF2b2lkIGNsaXBwaW5nIHBhdHRlcm5zIHRoYXQgY292ZXIgdGhlXG4gICAgLy8gd2hvbGUgY2FudmFzLlxuICAgIGNvbnN0IG1heFNpemUgPSBNYXRoLm1heChUaWxpbmdQYXR0ZXJuLk1BWF9QQVRURVJOX1NJWkUsIHJlYWxPdXRwdXRTaXplKTtcbiAgICBsZXQgc2l6ZSA9IE1hdGguY2VpbChzdGVwICogc2NhbGUpO1xuICAgIGlmIChzaXplID49IG1heFNpemUpIHtcbiAgICAgIHNpemUgPSBtYXhTaXplO1xuICAgIH0gZWxzZSB7XG4gICAgICBzY2FsZSA9IHNpemUgLyBzdGVwO1xuICAgIH1cbiAgICByZXR1cm4geyBzY2FsZSwgc2l6ZSB9O1xuICB9XG5cbiAgY2xpcEJib3goZ3JhcGhpY3MsIHgwLCB5MCwgeDEsIHkxKSB7XG4gICAgY29uc3QgYmJveFdpZHRoID0geDEgLSB4MDtcbiAgICBjb25zdCBiYm94SGVpZ2h0ID0geTEgLSB5MDtcbiAgICBncmFwaGljcy5jdHgucmVjdCh4MCwgeTAsIGJib3hXaWR0aCwgYmJveEhlaWdodCk7XG4gICAgZ3JhcGhpY3MuY3VycmVudC51cGRhdGVSZWN0TWluTWF4KGdyYXBoaWNzLmN0eC5tb3pDdXJyZW50VHJhbnNmb3JtLCBbXG4gICAgICB4MCxcbiAgICAgIHkwLFxuICAgICAgeDEsXG4gICAgICB5MSxcbiAgICBdKTtcbiAgICBncmFwaGljcy5jbGlwKCk7XG4gICAgZ3JhcGhpY3MuZW5kUGF0aCgpO1xuICB9XG5cbiAgc2V0RmlsbEFuZFN0cm9rZVN0eWxlVG9Db250ZXh0KGdyYXBoaWNzLCBwYWludFR5cGUsIGNvbG9yKSB7XG4gICAgY29uc3QgY29udGV4dCA9IGdyYXBoaWNzLmN0eCxcbiAgICAgIGN1cnJlbnQgPSBncmFwaGljcy5jdXJyZW50O1xuICAgIHN3aXRjaCAocGFpbnRUeXBlKSB7XG4gICAgICBjYXNlIFBhaW50VHlwZS5DT0xPUkVEOlxuICAgICAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBjdHguZmlsbFN0eWxlO1xuICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gY3R4LnN0cm9rZVN0eWxlO1xuICAgICAgICBjdXJyZW50LmZpbGxDb2xvciA9IGN0eC5maWxsU3R5bGU7XG4gICAgICAgIGN1cnJlbnQuc3Ryb2tlQ29sb3IgPSBjdHguc3Ryb2tlU3R5bGU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBQYWludFR5cGUuVU5DT0xPUkVEOlxuICAgICAgICBjb25zdCBjc3NDb2xvciA9IFV0aWwubWFrZUhleENvbG9yKGNvbG9yWzBdLCBjb2xvclsxXSwgY29sb3JbMl0pO1xuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGNzc0NvbG9yO1xuICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gY3NzQ29sb3I7XG4gICAgICAgIC8vIFNldCBjb2xvciBuZWVkZWQgYnkgaW1hZ2UgbWFza3MgKGZpeGVzIGlzc3VlcyAzMjI2IGFuZCA4NzQxKS5cbiAgICAgICAgY3VycmVudC5maWxsQ29sb3IgPSBjc3NDb2xvcjtcbiAgICAgICAgY3VycmVudC5zdHJva2VDb2xvciA9IGNzc0NvbG9yO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBGb3JtYXRFcnJvcihgVW5zdXBwb3J0ZWQgcGFpbnQgdHlwZTogJHtwYWludFR5cGV9YCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0UGF0dGVybihjdHgsIG93bmVyLCBpbnZlcnNlLCBwYXRoVHlwZSkge1xuICAgIC8vIFBERiBzcGVjIDguNy4yIE5PVEUgMTogcGF0dGVybidzIG1hdHJpeCBpcyByZWxhdGl2ZSB0byBpbml0aWFsIG1hdHJpeC5cbiAgICBsZXQgbWF0cml4ID0gaW52ZXJzZTtcbiAgICBpZiAocGF0aFR5cGUgIT09IFBhdGhUeXBlLlNIQURJTkcpIHtcbiAgICAgIG1hdHJpeCA9IFV0aWwudHJhbnNmb3JtKG1hdHJpeCwgb3duZXIuYmFzZVRyYW5zZm9ybSk7XG4gICAgICBpZiAodGhpcy5tYXRyaXgpIHtcbiAgICAgICAgbWF0cml4ID0gVXRpbC50cmFuc2Zvcm0obWF0cml4LCB0aGlzLm1hdHJpeCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdGVtcG9yYXJ5UGF0dGVybkNhbnZhcyA9IHRoaXMuY3JlYXRlUGF0dGVybkNhbnZhcyhvd25lcik7XG5cbiAgICBsZXQgZG9tTWF0cml4ID0gbmV3IERPTU1hdHJpeChtYXRyaXgpO1xuICAgIC8vIFJlc2NhbGUgYW5kIHNvIHRoYXQgdGhlIGN0eC5jcmVhdGVQYXR0ZXJuIGNhbGwgZ2VuZXJhdGVzIGEgcGF0dGVybiB3aXRoXG4gICAgLy8gdGhlIGRlc2lyZWQgc2l6ZS5cbiAgICBkb21NYXRyaXggPSBkb21NYXRyaXgudHJhbnNsYXRlKFxuICAgICAgdGVtcG9yYXJ5UGF0dGVybkNhbnZhcy5vZmZzZXRYLFxuICAgICAgdGVtcG9yYXJ5UGF0dGVybkNhbnZhcy5vZmZzZXRZXG4gICAgKTtcbiAgICBkb21NYXRyaXggPSBkb21NYXRyaXguc2NhbGUoXG4gICAgICAxIC8gdGVtcG9yYXJ5UGF0dGVybkNhbnZhcy5zY2FsZVgsXG4gICAgICAxIC8gdGVtcG9yYXJ5UGF0dGVybkNhbnZhcy5zY2FsZVlcbiAgICApO1xuXG4gICAgY29uc3QgcGF0dGVybiA9IGN0eC5jcmVhdGVQYXR0ZXJuKHRlbXBvcmFyeVBhdHRlcm5DYW52YXMuY2FudmFzLCBcInJlcGVhdFwiKTtcbiAgICB0cnkge1xuICAgICAgcGF0dGVybi5zZXRUcmFuc2Zvcm0oZG9tTWF0cml4KTtcbiAgICB9IGNhdGNoIChleCkge1xuICAgICAgLy8gQXZvaWQgcmVuZGVyaW5nIGJyZWFraW5nIGNvbXBsZXRlbHkgaW4gRmlyZWZveCA3OCBFU1IsXG4gICAgICAvLyBhbmQgaW4gTm9kZS5qcyAoc2VlIGlzc3VlIDEzNzI0KS5cbiAgICAgIHdhcm4oYFRpbGluZ1BhdHRlcm4uZ2V0UGF0dGVybjogXCIke2V4Py5tZXNzYWdlfVwiLmApO1xuICAgIH1cbiAgICByZXR1cm4gcGF0dGVybjtcbiAgfVxufVxuXG5leHBvcnQgeyBnZXRTaGFkaW5nUGF0dGVybiwgUGF0aFR5cGUsIFRpbGluZ1BhdHRlcm4gfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAyMiBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgRmVhdHVyZVRlc3QgfSBmcm9tIFwiLi91dGlsLmpzXCI7XG5cbmZ1bmN0aW9uIGFwcGx5TWFza0ltYWdlRGF0YSh7XG4gIHNyYyxcbiAgc3JjUG9zID0gMCxcbiAgZGVzdCxcbiAgZGVzdFBvcyA9IDAsXG4gIHdpZHRoLFxuICBoZWlnaHQsXG4gIGludmVyc2VEZWNvZGUgPSBmYWxzZSxcbn0pIHtcbiAgY29uc3Qgb3BhcXVlID0gRmVhdHVyZVRlc3QuaXNMaXR0bGVFbmRpYW4gPyAweGZmMDAwMDAwIDogMHgwMDAwMDBmZjtcbiAgY29uc3QgW3plcm9NYXBwaW5nLCBvbmVNYXBwaW5nXSA9ICFpbnZlcnNlRGVjb2RlID8gW29wYXF1ZSwgMF0gOiBbMCwgb3BhcXVlXTtcbiAgY29uc3Qgd2lkdGhJblNvdXJjZSA9IHdpZHRoID4+IDM7XG4gIGNvbnN0IHdpZHRoUmVtYWluZGVyID0gd2lkdGggJiA3O1xuICBjb25zdCBzcmNMZW5ndGggPSBzcmMubGVuZ3RoO1xuICBkZXN0ID0gbmV3IFVpbnQzMkFycmF5KGRlc3QuYnVmZmVyKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGhlaWdodDsgaSsrKSB7XG4gICAgZm9yIChjb25zdCBtYXggPSBzcmNQb3MgKyB3aWR0aEluU291cmNlOyBzcmNQb3MgPCBtYXg7IHNyY1BvcysrKSB7XG4gICAgICBjb25zdCBlbGVtID0gc3JjUG9zIDwgc3JjTGVuZ3RoID8gc3JjW3NyY1Bvc10gOiAyNTU7XG4gICAgICBkZXN0W2Rlc3RQb3MrK10gPSBlbGVtICYgMGIxMDAwMDAwMCA/IG9uZU1hcHBpbmcgOiB6ZXJvTWFwcGluZztcbiAgICAgIGRlc3RbZGVzdFBvcysrXSA9IGVsZW0gJiAwYjEwMDAwMDAgPyBvbmVNYXBwaW5nIDogemVyb01hcHBpbmc7XG4gICAgICBkZXN0W2Rlc3RQb3MrK10gPSBlbGVtICYgMGIxMDAwMDAgPyBvbmVNYXBwaW5nIDogemVyb01hcHBpbmc7XG4gICAgICBkZXN0W2Rlc3RQb3MrK10gPSBlbGVtICYgMGIxMDAwMCA/IG9uZU1hcHBpbmcgOiB6ZXJvTWFwcGluZztcbiAgICAgIGRlc3RbZGVzdFBvcysrXSA9IGVsZW0gJiAwYjEwMDAgPyBvbmVNYXBwaW5nIDogemVyb01hcHBpbmc7XG4gICAgICBkZXN0W2Rlc3RQb3MrK10gPSBlbGVtICYgMGIxMDAgPyBvbmVNYXBwaW5nIDogemVyb01hcHBpbmc7XG4gICAgICBkZXN0W2Rlc3RQb3MrK10gPSBlbGVtICYgMGIxMCA/IG9uZU1hcHBpbmcgOiB6ZXJvTWFwcGluZztcbiAgICAgIGRlc3RbZGVzdFBvcysrXSA9IGVsZW0gJiAwYjEgPyBvbmVNYXBwaW5nIDogemVyb01hcHBpbmc7XG4gICAgfVxuICAgIGlmICh3aWR0aFJlbWFpbmRlciA9PT0gMCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IGVsZW0gPSBzcmNQb3MgPCBzcmNMZW5ndGggPyBzcmNbc3JjUG9zKytdIDogMjU1O1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgd2lkdGhSZW1haW5kZXI7IGorKykge1xuICAgICAgZGVzdFtkZXN0UG9zKytdID0gZWxlbSAmICgxIDw8ICg3IC0gaikpID8gb25lTWFwcGluZyA6IHplcm9NYXBwaW5nO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7IHNyY1BvcywgZGVzdFBvcyB9O1xufVxuXG5leHBvcnQgeyBhcHBseU1hc2tJbWFnZURhdGEgfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAxOCBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBHbG9iYWxXb3JrZXJPcHRpb25zVHlwZVxuICogQHByb3BlcnR5IHtXb3JrZXIgfCBudWxsfSB3b3JrZXJQb3J0IC0gRGVmaW5lcyBnbG9iYWwgcG9ydCBmb3Igd29ya2VyXG4gKiAgIHByb2Nlc3MuIE92ZXJyaWRlcyB0aGUgYHdvcmtlclNyY2Agb3B0aW9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IHdvcmtlclNyYyAtIEEgc3RyaW5nIGNvbnRhaW5pbmcgdGhlIHBhdGggYW5kIGZpbGVuYW1lXG4gKiAgIG9mIHRoZSB3b3JrZXIgZmlsZS5cbiAqXG4gKiAgIE5PVEU6IFRoZSBgd29ya2VyU3JjYCBvcHRpb24gc2hvdWxkIGFsd2F5cyBiZSBzZXQsIGluIG9yZGVyIHRvIHByZXZlbnQgYW55XG4gKiAgICAgICAgIGlzc3VlcyB3aGVuIHVzaW5nIHRoZSBQREYuanMgbGlicmFyeS5cbiAqL1xuXG4vKiogQHR5cGUge0dsb2JhbFdvcmtlck9wdGlvbnNUeXBlfSAqL1xuY29uc3QgR2xvYmFsV29ya2VyT3B0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbkdsb2JhbFdvcmtlck9wdGlvbnMud29ya2VyUG9ydCA9XG4gIEdsb2JhbFdvcmtlck9wdGlvbnMud29ya2VyUG9ydCA9PT0gdW5kZWZpbmVkXG4gICAgPyBudWxsXG4gICAgOiBHbG9iYWxXb3JrZXJPcHRpb25zLndvcmtlclBvcnQ7XG5cbkdsb2JhbFdvcmtlck9wdGlvbnMud29ya2VyU3JjID1cbiAgR2xvYmFsV29ya2VyT3B0aW9ucy53b3JrZXJTcmMgPT09IHVuZGVmaW5lZFxuICAgID8gXCJcIlxuICAgIDogR2xvYmFsV29ya2VyT3B0aW9ucy53b3JrZXJTcmM7XG5cbmV4cG9ydCB7IEdsb2JhbFdvcmtlck9wdGlvbnMgfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAxOCBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgQWJvcnRFeGNlcHRpb24sXG4gIGFzc2VydCxcbiAgY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHksXG4gIE1pc3NpbmdQREZFeGNlcHRpb24sXG4gIFBhc3N3b3JkRXhjZXB0aW9uLFxuICBVbmV4cGVjdGVkUmVzcG9uc2VFeGNlcHRpb24sXG4gIFVua25vd25FcnJvckV4Y2VwdGlvbixcbiAgdW5yZWFjaGFibGUsXG59IGZyb20gXCIuL3V0aWwuanNcIjtcblxuY29uc3QgQ2FsbGJhY2tLaW5kID0ge1xuICBVTktOT1dOOiAwLFxuICBEQVRBOiAxLFxuICBFUlJPUjogMixcbn07XG5cbmNvbnN0IFN0cmVhbUtpbmQgPSB7XG4gIFVOS05PV046IDAsXG4gIENBTkNFTDogMSxcbiAgQ0FOQ0VMX0NPTVBMRVRFOiAyLFxuICBDTE9TRTogMyxcbiAgRU5RVUVVRTogNCxcbiAgRVJST1I6IDUsXG4gIFBVTEw6IDYsXG4gIFBVTExfQ09NUExFVEU6IDcsXG4gIFNUQVJUX0NPTVBMRVRFOiA4LFxufTtcblxuZnVuY3Rpb24gd3JhcFJlYXNvbihyZWFzb24pIHtcbiAgaWYgKFxuICAgICEoXG4gICAgICByZWFzb24gaW5zdGFuY2VvZiBFcnJvciB8fFxuICAgICAgKHR5cGVvZiByZWFzb24gPT09IFwib2JqZWN0XCIgJiYgcmVhc29uICE9PSBudWxsKVxuICAgIClcbiAgKSB7XG4gICAgdW5yZWFjaGFibGUoXG4gICAgICAnd3JhcFJlYXNvbjogRXhwZWN0ZWQgXCJyZWFzb25cIiB0byBiZSBhIChwb3NzaWJseSBjbG9uZWQpIEVycm9yLidcbiAgICApO1xuICB9XG4gIHN3aXRjaCAocmVhc29uLm5hbWUpIHtcbiAgICBjYXNlIFwiQWJvcnRFeGNlcHRpb25cIjpcbiAgICAgIHJldHVybiBuZXcgQWJvcnRFeGNlcHRpb24ocmVhc29uLm1lc3NhZ2UpO1xuICAgIGNhc2UgXCJNaXNzaW5nUERGRXhjZXB0aW9uXCI6XG4gICAgICByZXR1cm4gbmV3IE1pc3NpbmdQREZFeGNlcHRpb24ocmVhc29uLm1lc3NhZ2UpO1xuICAgIGNhc2UgXCJQYXNzd29yZEV4Y2VwdGlvblwiOlxuICAgICAgcmV0dXJuIG5ldyBQYXNzd29yZEV4Y2VwdGlvbihyZWFzb24ubWVzc2FnZSwgcmVhc29uLmNvZGUpO1xuICAgIGNhc2UgXCJVbmV4cGVjdGVkUmVzcG9uc2VFeGNlcHRpb25cIjpcbiAgICAgIHJldHVybiBuZXcgVW5leHBlY3RlZFJlc3BvbnNlRXhjZXB0aW9uKHJlYXNvbi5tZXNzYWdlLCByZWFzb24uc3RhdHVzKTtcbiAgICBjYXNlIFwiVW5rbm93bkVycm9yRXhjZXB0aW9uXCI6XG4gICAgICByZXR1cm4gbmV3IFVua25vd25FcnJvckV4Y2VwdGlvbihyZWFzb24ubWVzc2FnZSwgcmVhc29uLmRldGFpbHMpO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbmV3IFVua25vd25FcnJvckV4Y2VwdGlvbihyZWFzb24ubWVzc2FnZSwgcmVhc29uLnRvU3RyaW5nKCkpO1xuICB9XG59XG5cbmNsYXNzIE1lc3NhZ2VIYW5kbGVyIHtcbiAgY29uc3RydWN0b3Ioc291cmNlTmFtZSwgdGFyZ2V0TmFtZSwgY29tT2JqKSB7XG4gICAgdGhpcy5zb3VyY2VOYW1lID0gc291cmNlTmFtZTtcbiAgICB0aGlzLnRhcmdldE5hbWUgPSB0YXJnZXROYW1lO1xuICAgIHRoaXMuY29tT2JqID0gY29tT2JqO1xuICAgIHRoaXMuY2FsbGJhY2tJZCA9IDE7XG4gICAgdGhpcy5zdHJlYW1JZCA9IDE7XG4gICAgdGhpcy5zdHJlYW1TaW5rcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5zdHJlYW1Db250cm9sbGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5jYWxsYmFja0NhcGFiaWxpdGllcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5hY3Rpb25IYW5kbGVyID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgIHRoaXMuX29uQ29tT2JqT25NZXNzYWdlID0gZXZlbnQgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGV2ZW50LmRhdGE7XG4gICAgICBpZiAoZGF0YS50YXJnZXROYW1lICE9PSB0aGlzLnNvdXJjZU5hbWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKGRhdGEuc3RyZWFtKSB7XG4gICAgICAgIHRoaXMuX3Byb2Nlc3NTdHJlYW1NZXNzYWdlKGRhdGEpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoZGF0YS5jYWxsYmFjaykge1xuICAgICAgICBjb25zdCBjYWxsYmFja0lkID0gZGF0YS5jYWxsYmFja0lkO1xuICAgICAgICBjb25zdCBjYXBhYmlsaXR5ID0gdGhpcy5jYWxsYmFja0NhcGFiaWxpdGllc1tjYWxsYmFja0lkXTtcbiAgICAgICAgaWYgKCFjYXBhYmlsaXR5KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcmVzb2x2ZSBjYWxsYmFjayAke2NhbGxiYWNrSWR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIHRoaXMuY2FsbGJhY2tDYXBhYmlsaXRpZXNbY2FsbGJhY2tJZF07XG5cbiAgICAgICAgaWYgKGRhdGEuY2FsbGJhY2sgPT09IENhbGxiYWNrS2luZC5EQVRBKSB7XG4gICAgICAgICAgY2FwYWJpbGl0eS5yZXNvbHZlKGRhdGEuZGF0YSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YS5jYWxsYmFjayA9PT0gQ2FsbGJhY2tLaW5kLkVSUk9SKSB7XG4gICAgICAgICAgY2FwYWJpbGl0eS5yZWplY3Qod3JhcFJlYXNvbihkYXRhLnJlYXNvbikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgY2FsbGJhY2sgY2FzZVwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBhY3Rpb24gPSB0aGlzLmFjdGlvbkhhbmRsZXJbZGF0YS5hY3Rpb25dO1xuICAgICAgaWYgKCFhY3Rpb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGFjdGlvbiBmcm9tIHdvcmtlcjogJHtkYXRhLmFjdGlvbn1gKTtcbiAgICAgIH1cbiAgICAgIGlmIChkYXRhLmNhbGxiYWNrSWQpIHtcbiAgICAgICAgY29uc3QgY2JTb3VyY2VOYW1lID0gdGhpcy5zb3VyY2VOYW1lO1xuICAgICAgICBjb25zdCBjYlRhcmdldE5hbWUgPSBkYXRhLnNvdXJjZU5hbWU7XG5cbiAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICByZXNvbHZlKGFjdGlvbihkYXRhLmRhdGEpKTtcbiAgICAgICAgfSkudGhlbihcbiAgICAgICAgICBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBjb21PYmoucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICBzb3VyY2VOYW1lOiBjYlNvdXJjZU5hbWUsXG4gICAgICAgICAgICAgIHRhcmdldE5hbWU6IGNiVGFyZ2V0TmFtZSxcbiAgICAgICAgICAgICAgY2FsbGJhY2s6IENhbGxiYWNrS2luZC5EQVRBLFxuICAgICAgICAgICAgICBjYWxsYmFja0lkOiBkYXRhLmNhbGxiYWNrSWQsXG4gICAgICAgICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAgICAgY29tT2JqLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgc291cmNlTmFtZTogY2JTb3VyY2VOYW1lLFxuICAgICAgICAgICAgICB0YXJnZXROYW1lOiBjYlRhcmdldE5hbWUsXG4gICAgICAgICAgICAgIGNhbGxiYWNrOiBDYWxsYmFja0tpbmQuRVJST1IsXG4gICAgICAgICAgICAgIGNhbGxiYWNrSWQ6IGRhdGEuY2FsbGJhY2tJZCxcbiAgICAgICAgICAgICAgcmVhc29uOiB3cmFwUmVhc29uKHJlYXNvbiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChkYXRhLnN0cmVhbUlkKSB7XG4gICAgICAgIHRoaXMuX2NyZWF0ZVN0cmVhbVNpbmsoZGF0YSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGFjdGlvbihkYXRhLmRhdGEpO1xuICAgIH07XG4gICAgY29tT2JqLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIHRoaXMuX29uQ29tT2JqT25NZXNzYWdlKTtcbiAgfVxuXG4gIG9uKGFjdGlvbk5hbWUsIGhhbmRsZXIpIHtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgUERGSlNEZXYgPT09IFwidW5kZWZpbmVkXCIgfHxcbiAgICAgIFBERkpTRGV2LnRlc3QoXCIhUFJPRFVDVElPTiB8fCBURVNUSU5HXCIpXG4gICAgKSB7XG4gICAgICBhc3NlcnQoXG4gICAgICAgIHR5cGVvZiBoYW5kbGVyID09PSBcImZ1bmN0aW9uXCIsXG4gICAgICAgICdNZXNzYWdlSGFuZGxlci5vbjogRXhwZWN0ZWQgXCJoYW5kbGVyXCIgdG8gYmUgYSBmdW5jdGlvbi4nXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBhaCA9IHRoaXMuYWN0aW9uSGFuZGxlcjtcbiAgICBpZiAoYWhbYWN0aW9uTmFtZV0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlcmUgaXMgYWxyZWFkeSBhbiBhY3Rpb25OYW1lIGNhbGxlZCBcIiR7YWN0aW9uTmFtZX1cImApO1xuICAgIH1cbiAgICBhaFthY3Rpb25OYW1lXSA9IGhhbmRsZXI7XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgYSBtZXNzYWdlIHRvIHRoZSBjb21PYmogdG8gaW52b2tlIHRoZSBhY3Rpb24gd2l0aCB0aGUgc3VwcGxpZWQgZGF0YS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjdGlvbk5hbWUgLSBBY3Rpb24gdG8gY2FsbC5cbiAgICogQHBhcmFtIHtKU09OfSBkYXRhIC0gSlNPTiBkYXRhIHRvIHNlbmQuXG4gICAqIEBwYXJhbSB7QXJyYXl9IFt0cmFuc2ZlcnNdIC0gTGlzdCBvZiB0cmFuc2ZlcnMvQXJyYXlCdWZmZXJzLlxuICAgKi9cbiAgc2VuZChhY3Rpb25OYW1lLCBkYXRhLCB0cmFuc2ZlcnMpIHtcbiAgICB0aGlzLmNvbU9iai5wb3N0TWVzc2FnZShcbiAgICAgIHtcbiAgICAgICAgc291cmNlTmFtZTogdGhpcy5zb3VyY2VOYW1lLFxuICAgICAgICB0YXJnZXROYW1lOiB0aGlzLnRhcmdldE5hbWUsXG4gICAgICAgIGFjdGlvbjogYWN0aW9uTmFtZSxcbiAgICAgICAgZGF0YSxcbiAgICAgIH0sXG4gICAgICB0cmFuc2ZlcnNcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmRzIGEgbWVzc2FnZSB0byB0aGUgY29tT2JqIHRvIGludm9rZSB0aGUgYWN0aW9uIHdpdGggdGhlIHN1cHBsaWVkIGRhdGEuXG4gICAqIEV4cGVjdHMgdGhhdCB0aGUgb3RoZXIgc2lkZSB3aWxsIGNhbGxiYWNrIHdpdGggdGhlIHJlc3BvbnNlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWN0aW9uTmFtZSAtIEFjdGlvbiB0byBjYWxsLlxuICAgKiBAcGFyYW0ge0pTT059IGRhdGEgLSBKU09OIGRhdGEgdG8gc2VuZC5cbiAgICogQHBhcmFtIHtBcnJheX0gW3RyYW5zZmVyc10gLSBMaXN0IG9mIHRyYW5zZmVycy9BcnJheUJ1ZmZlcnMuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBQcm9taXNlIHRvIGJlIHJlc29sdmVkIHdpdGggcmVzcG9uc2UgZGF0YS5cbiAgICovXG4gIHNlbmRXaXRoUHJvbWlzZShhY3Rpb25OYW1lLCBkYXRhLCB0cmFuc2ZlcnMpIHtcbiAgICBjb25zdCBjYWxsYmFja0lkID0gdGhpcy5jYWxsYmFja0lkKys7XG4gICAgY29uc3QgY2FwYWJpbGl0eSA9IGNyZWF0ZVByb21pc2VDYXBhYmlsaXR5KCk7XG4gICAgdGhpcy5jYWxsYmFja0NhcGFiaWxpdGllc1tjYWxsYmFja0lkXSA9IGNhcGFiaWxpdHk7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuY29tT2JqLnBvc3RNZXNzYWdlKFxuICAgICAgICB7XG4gICAgICAgICAgc291cmNlTmFtZTogdGhpcy5zb3VyY2VOYW1lLFxuICAgICAgICAgIHRhcmdldE5hbWU6IHRoaXMudGFyZ2V0TmFtZSxcbiAgICAgICAgICBhY3Rpb246IGFjdGlvbk5hbWUsXG4gICAgICAgICAgY2FsbGJhY2tJZCxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICB9LFxuICAgICAgICB0cmFuc2ZlcnNcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgIGNhcGFiaWxpdHkucmVqZWN0KGV4KTtcbiAgICB9XG4gICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIG1lc3NhZ2UgdG8gdGhlIGNvbU9iaiB0byBpbnZva2UgdGhlIGFjdGlvbiB3aXRoIHRoZSBzdXBwbGllZCBkYXRhLlxuICAgKiBFeHBlY3QgdGhhdCB0aGUgb3RoZXIgc2lkZSB3aWxsIGNhbGxiYWNrIHRvIHNpZ25hbCAnc3RhcnRfY29tcGxldGUnLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWN0aW9uTmFtZSAtIEFjdGlvbiB0byBjYWxsLlxuICAgKiBAcGFyYW0ge0pTT059IGRhdGEgLSBKU09OIGRhdGEgdG8gc2VuZC5cbiAgICogQHBhcmFtIHtPYmplY3R9IHF1ZXVlaW5nU3RyYXRlZ3kgLSBTdHJhdGVneSB0byBzaWduYWwgYmFja3ByZXNzdXJlIGJhc2VkIG9uXG4gICAqICAgICAgICAgICAgICAgICBpbnRlcm5hbCBxdWV1ZS5cbiAgICogQHBhcmFtIHtBcnJheX0gW3RyYW5zZmVyc10gLSBMaXN0IG9mIHRyYW5zZmVycy9BcnJheUJ1ZmZlcnMuXG4gICAqIEByZXR1cm5zIHtSZWFkYWJsZVN0cmVhbX0gUmVhZGFibGVTdHJlYW0gdG8gcmVhZCBkYXRhIGluIGNodW5rcy5cbiAgICovXG4gIHNlbmRXaXRoU3RyZWFtKGFjdGlvbk5hbWUsIGRhdGEsIHF1ZXVlaW5nU3RyYXRlZ3ksIHRyYW5zZmVycykge1xuICAgIGNvbnN0IHN0cmVhbUlkID0gdGhpcy5zdHJlYW1JZCsrLFxuICAgICAgc291cmNlTmFtZSA9IHRoaXMuc291cmNlTmFtZSxcbiAgICAgIHRhcmdldE5hbWUgPSB0aGlzLnRhcmdldE5hbWUsXG4gICAgICBjb21PYmogPSB0aGlzLmNvbU9iajtcblxuICAgIHJldHVybiBuZXcgUmVhZGFibGVTdHJlYW0oXG4gICAgICB7XG4gICAgICAgIHN0YXJ0OiBjb250cm9sbGVyID0+IHtcbiAgICAgICAgICBjb25zdCBzdGFydENhcGFiaWxpdHkgPSBjcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSgpO1xuICAgICAgICAgIHRoaXMuc3RyZWFtQ29udHJvbGxlcnNbc3RyZWFtSWRdID0ge1xuICAgICAgICAgICAgY29udHJvbGxlcixcbiAgICAgICAgICAgIHN0YXJ0Q2FsbDogc3RhcnRDYXBhYmlsaXR5LFxuICAgICAgICAgICAgcHVsbENhbGw6IG51bGwsXG4gICAgICAgICAgICBjYW5jZWxDYWxsOiBudWxsLFxuICAgICAgICAgICAgaXNDbG9zZWQ6IGZhbHNlLFxuICAgICAgICAgIH07XG4gICAgICAgICAgY29tT2JqLnBvc3RNZXNzYWdlKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzb3VyY2VOYW1lLFxuICAgICAgICAgICAgICB0YXJnZXROYW1lLFxuICAgICAgICAgICAgICBhY3Rpb246IGFjdGlvbk5hbWUsXG4gICAgICAgICAgICAgIHN0cmVhbUlkLFxuICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogY29udHJvbGxlci5kZXNpcmVkU2l6ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0cmFuc2ZlcnNcbiAgICAgICAgICApO1xuICAgICAgICAgIC8vIFJldHVybiBQcm9taXNlIGZvciBBc3luYyBwcm9jZXNzLCB0byBzaWduYWwgc3VjY2Vzcy9mYWlsdXJlLlxuICAgICAgICAgIHJldHVybiBzdGFydENhcGFiaWxpdHkucHJvbWlzZTtcbiAgICAgICAgfSxcblxuICAgICAgICBwdWxsOiBjb250cm9sbGVyID0+IHtcbiAgICAgICAgICBjb25zdCBwdWxsQ2FwYWJpbGl0eSA9IGNyZWF0ZVByb21pc2VDYXBhYmlsaXR5KCk7XG4gICAgICAgICAgdGhpcy5zdHJlYW1Db250cm9sbGVyc1tzdHJlYW1JZF0ucHVsbENhbGwgPSBwdWxsQ2FwYWJpbGl0eTtcbiAgICAgICAgICBjb21PYmoucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgc291cmNlTmFtZSxcbiAgICAgICAgICAgIHRhcmdldE5hbWUsXG4gICAgICAgICAgICBzdHJlYW06IFN0cmVhbUtpbmQuUFVMTCxcbiAgICAgICAgICAgIHN0cmVhbUlkLFxuICAgICAgICAgICAgZGVzaXJlZFNpemU6IGNvbnRyb2xsZXIuZGVzaXJlZFNpemUsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLy8gUmV0dXJuaW5nIFByb21pc2Ugd2lsbCBub3QgY2FsbCBcInB1bGxcIlxuICAgICAgICAgIC8vIGFnYWluIHVudGlsIGN1cnJlbnQgcHVsbCBpcyByZXNvbHZlZC5cbiAgICAgICAgICByZXR1cm4gcHVsbENhcGFiaWxpdHkucHJvbWlzZTtcbiAgICAgICAgfSxcblxuICAgICAgICBjYW5jZWw6IHJlYXNvbiA9PiB7XG4gICAgICAgICAgYXNzZXJ0KHJlYXNvbiBpbnN0YW5jZW9mIEVycm9yLCBcImNhbmNlbCBtdXN0IGhhdmUgYSB2YWxpZCByZWFzb25cIik7XG4gICAgICAgICAgY29uc3QgY2FuY2VsQ2FwYWJpbGl0eSA9IGNyZWF0ZVByb21pc2VDYXBhYmlsaXR5KCk7XG4gICAgICAgICAgdGhpcy5zdHJlYW1Db250cm9sbGVyc1tzdHJlYW1JZF0uY2FuY2VsQ2FsbCA9IGNhbmNlbENhcGFiaWxpdHk7XG4gICAgICAgICAgdGhpcy5zdHJlYW1Db250cm9sbGVyc1tzdHJlYW1JZF0uaXNDbG9zZWQgPSB0cnVlO1xuICAgICAgICAgIGNvbU9iai5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICBzb3VyY2VOYW1lLFxuICAgICAgICAgICAgdGFyZ2V0TmFtZSxcbiAgICAgICAgICAgIHN0cmVhbTogU3RyZWFtS2luZC5DQU5DRUwsXG4gICAgICAgICAgICBzdHJlYW1JZCxcbiAgICAgICAgICAgIHJlYXNvbjogd3JhcFJlYXNvbihyZWFzb24pLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8vIFJldHVybiBQcm9taXNlIHRvIHNpZ25hbCBzdWNjZXNzIG9yIGZhaWx1cmUuXG4gICAgICAgICAgcmV0dXJuIGNhbmNlbENhcGFiaWxpdHkucHJvbWlzZTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBxdWV1ZWluZ1N0cmF0ZWd5XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2NyZWF0ZVN0cmVhbVNpbmsoZGF0YSkge1xuICAgIGNvbnN0IHN0cmVhbUlkID0gZGF0YS5zdHJlYW1JZCxcbiAgICAgIHNvdXJjZU5hbWUgPSB0aGlzLnNvdXJjZU5hbWUsXG4gICAgICB0YXJnZXROYW1lID0gZGF0YS5zb3VyY2VOYW1lLFxuICAgICAgY29tT2JqID0gdGhpcy5jb21PYmo7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMsXG4gICAgICBhY3Rpb24gPSB0aGlzLmFjdGlvbkhhbmRsZXJbZGF0YS5hY3Rpb25dO1xuXG4gICAgY29uc3Qgc3RyZWFtU2luayA9IHtcbiAgICAgIGVucXVldWUoY2h1bmssIHNpemUgPSAxLCB0cmFuc2ZlcnMpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNDYW5jZWxsZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGFzdERlc2lyZWRTaXplID0gdGhpcy5kZXNpcmVkU2l6ZTtcbiAgICAgICAgdGhpcy5kZXNpcmVkU2l6ZSAtPSBzaXplO1xuICAgICAgICAvLyBFbnF1ZXVlIGRlY3JlYXNlcyB0aGUgZGVzaXJlZFNpemUgcHJvcGVydHkgb2Ygc2luayxcbiAgICAgICAgLy8gc28gd2hlbiBpdCBjaGFuZ2VzIGZyb20gcG9zaXRpdmUgdG8gbmVnYXRpdmUsXG4gICAgICAgIC8vIHNldCByZWFkeSBhcyB1bnJlc29sdmVkIHByb21pc2UuXG4gICAgICAgIGlmIChsYXN0RGVzaXJlZFNpemUgPiAwICYmIHRoaXMuZGVzaXJlZFNpemUgPD0gMCkge1xuICAgICAgICAgIHRoaXMuc2lua0NhcGFiaWxpdHkgPSBjcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSgpO1xuICAgICAgICAgIHRoaXMucmVhZHkgPSB0aGlzLnNpbmtDYXBhYmlsaXR5LnByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29tT2JqLnBvc3RNZXNzYWdlKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNvdXJjZU5hbWUsXG4gICAgICAgICAgICB0YXJnZXROYW1lLFxuICAgICAgICAgICAgc3RyZWFtOiBTdHJlYW1LaW5kLkVOUVVFVUUsXG4gICAgICAgICAgICBzdHJlYW1JZCxcbiAgICAgICAgICAgIGNodW5rLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdHJhbnNmZXJzXG4gICAgICAgICk7XG4gICAgICB9LFxuXG4gICAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNDYW5jZWxsZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0NhbmNlbGxlZCA9IHRydWU7XG4gICAgICAgIGNvbU9iai5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgc291cmNlTmFtZSxcbiAgICAgICAgICB0YXJnZXROYW1lLFxuICAgICAgICAgIHN0cmVhbTogU3RyZWFtS2luZC5DTE9TRSxcbiAgICAgICAgICBzdHJlYW1JZCxcbiAgICAgICAgfSk7XG4gICAgICAgIGRlbGV0ZSBzZWxmLnN0cmVhbVNpbmtzW3N0cmVhbUlkXTtcbiAgICAgIH0sXG5cbiAgICAgIGVycm9yKHJlYXNvbikge1xuICAgICAgICBhc3NlcnQocmVhc29uIGluc3RhbmNlb2YgRXJyb3IsIFwiZXJyb3IgbXVzdCBoYXZlIGEgdmFsaWQgcmVhc29uXCIpO1xuICAgICAgICBpZiAodGhpcy5pc0NhbmNlbGxlZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzQ2FuY2VsbGVkID0gdHJ1ZTtcbiAgICAgICAgY29tT2JqLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICBzb3VyY2VOYW1lLFxuICAgICAgICAgIHRhcmdldE5hbWUsXG4gICAgICAgICAgc3RyZWFtOiBTdHJlYW1LaW5kLkVSUk9SLFxuICAgICAgICAgIHN0cmVhbUlkLFxuICAgICAgICAgIHJlYXNvbjogd3JhcFJlYXNvbihyZWFzb24pLFxuICAgICAgICB9KTtcbiAgICAgIH0sXG5cbiAgICAgIHNpbmtDYXBhYmlsaXR5OiBjcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSgpLFxuICAgICAgb25QdWxsOiBudWxsLFxuICAgICAgb25DYW5jZWw6IG51bGwsXG4gICAgICBpc0NhbmNlbGxlZDogZmFsc2UsXG4gICAgICBkZXNpcmVkU2l6ZTogZGF0YS5kZXNpcmVkU2l6ZSxcbiAgICAgIHJlYWR5OiBudWxsLFxuICAgIH07XG5cbiAgICBzdHJlYW1TaW5rLnNpbmtDYXBhYmlsaXR5LnJlc29sdmUoKTtcbiAgICBzdHJlYW1TaW5rLnJlYWR5ID0gc3RyZWFtU2luay5zaW5rQ2FwYWJpbGl0eS5wcm9taXNlO1xuICAgIHRoaXMuc3RyZWFtU2lua3Nbc3RyZWFtSWRdID0gc3RyZWFtU2luaztcblxuICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICByZXNvbHZlKGFjdGlvbihkYXRhLmRhdGEsIHN0cmVhbVNpbmspKTtcbiAgICB9KS50aGVuKFxuICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb21PYmoucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgIHNvdXJjZU5hbWUsXG4gICAgICAgICAgdGFyZ2V0TmFtZSxcbiAgICAgICAgICBzdHJlYW06IFN0cmVhbUtpbmQuU1RBUlRfQ09NUExFVEUsXG4gICAgICAgICAgc3RyZWFtSWQsXG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICBjb21PYmoucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgIHNvdXJjZU5hbWUsXG4gICAgICAgICAgdGFyZ2V0TmFtZSxcbiAgICAgICAgICBzdHJlYW06IFN0cmVhbUtpbmQuU1RBUlRfQ09NUExFVEUsXG4gICAgICAgICAgc3RyZWFtSWQsXG4gICAgICAgICAgcmVhc29uOiB3cmFwUmVhc29uKHJlYXNvbiksXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9wcm9jZXNzU3RyZWFtTWVzc2FnZShkYXRhKSB7XG4gICAgY29uc3Qgc3RyZWFtSWQgPSBkYXRhLnN0cmVhbUlkLFxuICAgICAgc291cmNlTmFtZSA9IHRoaXMuc291cmNlTmFtZSxcbiAgICAgIHRhcmdldE5hbWUgPSBkYXRhLnNvdXJjZU5hbWUsXG4gICAgICBjb21PYmogPSB0aGlzLmNvbU9iajtcbiAgICBjb25zdCBzdHJlYW1Db250cm9sbGVyID0gdGhpcy5zdHJlYW1Db250cm9sbGVyc1tzdHJlYW1JZF0sXG4gICAgICBzdHJlYW1TaW5rID0gdGhpcy5zdHJlYW1TaW5rc1tzdHJlYW1JZF07XG5cbiAgICBzd2l0Y2ggKGRhdGEuc3RyZWFtKSB7XG4gICAgICBjYXNlIFN0cmVhbUtpbmQuU1RBUlRfQ09NUExFVEU6XG4gICAgICAgIGlmIChkYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBzdHJlYW1Db250cm9sbGVyLnN0YXJ0Q2FsbC5yZXNvbHZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyZWFtQ29udHJvbGxlci5zdGFydENhbGwucmVqZWN0KHdyYXBSZWFzb24oZGF0YS5yZWFzb24pKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgU3RyZWFtS2luZC5QVUxMX0NPTVBMRVRFOlxuICAgICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgICAgc3RyZWFtQ29udHJvbGxlci5wdWxsQ2FsbC5yZXNvbHZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyZWFtQ29udHJvbGxlci5wdWxsQ2FsbC5yZWplY3Qod3JhcFJlYXNvbihkYXRhLnJlYXNvbikpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBTdHJlYW1LaW5kLlBVTEw6XG4gICAgICAgIC8vIElnbm9yZSBhbnkgcHVsbCBhZnRlciBjbG9zZSBpcyBjYWxsZWQuXG4gICAgICAgIGlmICghc3RyZWFtU2luaykge1xuICAgICAgICAgIGNvbU9iai5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICBzb3VyY2VOYW1lLFxuICAgICAgICAgICAgdGFyZ2V0TmFtZSxcbiAgICAgICAgICAgIHN0cmVhbTogU3RyZWFtS2luZC5QVUxMX0NPTVBMRVRFLFxuICAgICAgICAgICAgc3RyZWFtSWQsXG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vIFB1bGwgaW5jcmVhc2VzIHRoZSBkZXNpcmVkU2l6ZSBwcm9wZXJ0eSBvZiBzaW5rLCBzbyB3aGVuIGl0IGNoYW5nZXNcbiAgICAgICAgLy8gZnJvbSBuZWdhdGl2ZSB0byBwb3NpdGl2ZSwgc2V0IHJlYWR5IHByb3BlcnR5IGFzIHJlc29sdmVkIHByb21pc2UuXG4gICAgICAgIGlmIChzdHJlYW1TaW5rLmRlc2lyZWRTaXplIDw9IDAgJiYgZGF0YS5kZXNpcmVkU2l6ZSA+IDApIHtcbiAgICAgICAgICBzdHJlYW1TaW5rLnNpbmtDYXBhYmlsaXR5LnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZXNldCBkZXNpcmVkU2l6ZSBwcm9wZXJ0eSBvZiBzaW5rIG9uIGV2ZXJ5IHB1bGwuXG4gICAgICAgIHN0cmVhbVNpbmsuZGVzaXJlZFNpemUgPSBkYXRhLmRlc2lyZWRTaXplO1xuXG4gICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgcmVzb2x2ZShzdHJlYW1TaW5rLm9uUHVsbCAmJiBzdHJlYW1TaW5rLm9uUHVsbCgpKTtcbiAgICAgICAgfSkudGhlbihcbiAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb21PYmoucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICBzb3VyY2VOYW1lLFxuICAgICAgICAgICAgICB0YXJnZXROYW1lLFxuICAgICAgICAgICAgICBzdHJlYW06IFN0cmVhbUtpbmQuUFVMTF9DT01QTEVURSxcbiAgICAgICAgICAgICAgc3RyZWFtSWQsXG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgICAgIGNvbU9iai5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgIHNvdXJjZU5hbWUsXG4gICAgICAgICAgICAgIHRhcmdldE5hbWUsXG4gICAgICAgICAgICAgIHN0cmVhbTogU3RyZWFtS2luZC5QVUxMX0NPTVBMRVRFLFxuICAgICAgICAgICAgICBzdHJlYW1JZCxcbiAgICAgICAgICAgICAgcmVhc29uOiB3cmFwUmVhc29uKHJlYXNvbiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBTdHJlYW1LaW5kLkVOUVVFVUU6XG4gICAgICAgIGFzc2VydChzdHJlYW1Db250cm9sbGVyLCBcImVucXVldWUgc2hvdWxkIGhhdmUgc3RyZWFtIGNvbnRyb2xsZXJcIik7XG4gICAgICAgIGlmIChzdHJlYW1Db250cm9sbGVyLmlzQ2xvc2VkKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgc3RyZWFtQ29udHJvbGxlci5jb250cm9sbGVyLmVucXVldWUoZGF0YS5jaHVuayk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBTdHJlYW1LaW5kLkNMT1NFOlxuICAgICAgICBhc3NlcnQoc3RyZWFtQ29udHJvbGxlciwgXCJjbG9zZSBzaG91bGQgaGF2ZSBzdHJlYW0gY29udHJvbGxlclwiKTtcbiAgICAgICAgaWYgKHN0cmVhbUNvbnRyb2xsZXIuaXNDbG9zZWQpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBzdHJlYW1Db250cm9sbGVyLmlzQ2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgc3RyZWFtQ29udHJvbGxlci5jb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuX2RlbGV0ZVN0cmVhbUNvbnRyb2xsZXIoc3RyZWFtQ29udHJvbGxlciwgc3RyZWFtSWQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgU3RyZWFtS2luZC5FUlJPUjpcbiAgICAgICAgYXNzZXJ0KHN0cmVhbUNvbnRyb2xsZXIsIFwiZXJyb3Igc2hvdWxkIGhhdmUgc3RyZWFtIGNvbnRyb2xsZXJcIik7XG4gICAgICAgIHN0cmVhbUNvbnRyb2xsZXIuY29udHJvbGxlci5lcnJvcih3cmFwUmVhc29uKGRhdGEucmVhc29uKSk7XG4gICAgICAgIHRoaXMuX2RlbGV0ZVN0cmVhbUNvbnRyb2xsZXIoc3RyZWFtQ29udHJvbGxlciwgc3RyZWFtSWQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgU3RyZWFtS2luZC5DQU5DRUxfQ09NUExFVEU6XG4gICAgICAgIGlmIChkYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBzdHJlYW1Db250cm9sbGVyLmNhbmNlbENhbGwucmVzb2x2ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0cmVhbUNvbnRyb2xsZXIuY2FuY2VsQ2FsbC5yZWplY3Qod3JhcFJlYXNvbihkYXRhLnJlYXNvbikpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2RlbGV0ZVN0cmVhbUNvbnRyb2xsZXIoc3RyZWFtQ29udHJvbGxlciwgc3RyZWFtSWQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgU3RyZWFtS2luZC5DQU5DRUw6XG4gICAgICAgIGlmICghc3RyZWFtU2luaykge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICByZXNvbHZlKFxuICAgICAgICAgICAgc3RyZWFtU2luay5vbkNhbmNlbCAmJiBzdHJlYW1TaW5rLm9uQ2FuY2VsKHdyYXBSZWFzb24oZGF0YS5yZWFzb24pKVxuICAgICAgICAgICk7XG4gICAgICAgIH0pLnRoZW4oXG4gICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29tT2JqLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgc291cmNlTmFtZSxcbiAgICAgICAgICAgICAgdGFyZ2V0TmFtZSxcbiAgICAgICAgICAgICAgc3RyZWFtOiBTdHJlYW1LaW5kLkNBTkNFTF9DT01QTEVURSxcbiAgICAgICAgICAgICAgc3RyZWFtSWQsXG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgICAgIGNvbU9iai5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgIHNvdXJjZU5hbWUsXG4gICAgICAgICAgICAgIHRhcmdldE5hbWUsXG4gICAgICAgICAgICAgIHN0cmVhbTogU3RyZWFtS2luZC5DQU5DRUxfQ09NUExFVEUsXG4gICAgICAgICAgICAgIHN0cmVhbUlkLFxuICAgICAgICAgICAgICByZWFzb246IHdyYXBSZWFzb24ocmVhc29uKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgc3RyZWFtU2luay5zaW5rQ2FwYWJpbGl0eS5yZWplY3Qod3JhcFJlYXNvbihkYXRhLnJlYXNvbikpO1xuICAgICAgICBzdHJlYW1TaW5rLmlzQ2FuY2VsbGVkID0gdHJ1ZTtcbiAgICAgICAgZGVsZXRlIHRoaXMuc3RyZWFtU2lua3Nbc3RyZWFtSWRdO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgc3RyZWFtIGNhc2VcIik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhc3luYyBfZGVsZXRlU3RyZWFtQ29udHJvbGxlcihzdHJlYW1Db250cm9sbGVyLCBzdHJlYW1JZCkge1xuICAgIC8vIERlbGV0ZSB0aGUgYHN0cmVhbUNvbnRyb2xsZXJgIG9ubHkgd2hlbiB0aGUgc3RhcnQsIHB1bGwsIGFuZCBjYW5jZWxcbiAgICAvLyBjYXBhYmlsaXRpZXMgaGF2ZSBzZXR0bGVkLCB0byBwcmV2ZW50IGBUeXBlRXJyb3Jgcy5cbiAgICBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoW1xuICAgICAgc3RyZWFtQ29udHJvbGxlci5zdGFydENhbGwgJiYgc3RyZWFtQ29udHJvbGxlci5zdGFydENhbGwucHJvbWlzZSxcbiAgICAgIHN0cmVhbUNvbnRyb2xsZXIucHVsbENhbGwgJiYgc3RyZWFtQ29udHJvbGxlci5wdWxsQ2FsbC5wcm9taXNlLFxuICAgICAgc3RyZWFtQ29udHJvbGxlci5jYW5jZWxDYWxsICYmIHN0cmVhbUNvbnRyb2xsZXIuY2FuY2VsQ2FsbC5wcm9taXNlLFxuICAgIF0pO1xuICAgIGRlbGV0ZSB0aGlzLnN0cmVhbUNvbnRyb2xsZXJzW3N0cmVhbUlkXTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5jb21PYmoucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgdGhpcy5fb25Db21PYmpPbk1lc3NhZ2UpO1xuICB9XG59XG5cbmV4cG9ydCB7IE1lc3NhZ2VIYW5kbGVyIH07XG4iLCAiLyogQ29weXJpZ2h0IDIwMTIgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IG9iamVjdEZyb21NYXAgfSBmcm9tIFwiLi4vc2hhcmVkL3V0aWwuanNcIjtcblxuY2xhc3MgTWV0YWRhdGEge1xuICAjbWV0YWRhdGFNYXA7XG5cbiAgI2RhdGE7XG5cbiAgY29uc3RydWN0b3IoeyBwYXJzZWREYXRhLCByYXdEYXRhIH0pIHtcbiAgICB0aGlzLiNtZXRhZGF0YU1hcCA9IHBhcnNlZERhdGE7XG4gICAgdGhpcy4jZGF0YSA9IHJhd0RhdGE7XG4gIH1cblxuICBnZXRSYXcoKSB7XG4gICAgcmV0dXJuIHRoaXMuI2RhdGE7XG4gIH1cblxuICBnZXQobmFtZSkge1xuICAgIHJldHVybiB0aGlzLiNtZXRhZGF0YU1hcC5nZXQobmFtZSkgPz8gbnVsbDtcbiAgfVxuXG4gIGdldEFsbCgpIHtcbiAgICByZXR1cm4gb2JqZWN0RnJvbU1hcCh0aGlzLiNtZXRhZGF0YU1hcCk7XG4gIH1cblxuICBoYXMobmFtZSkge1xuICAgIHJldHVybiB0aGlzLiNtZXRhZGF0YU1hcC5oYXMobmFtZSk7XG4gIH1cbn1cblxuZXhwb3J0IHsgTWV0YWRhdGEgfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAyMCBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7IG9iamVjdEZyb21NYXAsIHdhcm4gfSBmcm9tIFwiLi4vc2hhcmVkL3V0aWwuanNcIjtcblxuY2xhc3MgT3B0aW9uYWxDb250ZW50R3JvdXAge1xuICBjb25zdHJ1Y3RvcihuYW1lLCBpbnRlbnQpIHtcbiAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5pbnRlbnQgPSBpbnRlbnQ7XG4gIH1cbn1cblxuY2xhc3MgT3B0aW9uYWxDb250ZW50Q29uZmlnIHtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHRoaXMubmFtZSA9IG51bGw7XG4gICAgdGhpcy5jcmVhdG9yID0gbnVsbDtcbiAgICB0aGlzLl9vcmRlciA9IG51bGw7XG4gICAgdGhpcy5fZ3JvdXBzID0gbmV3IE1hcCgpO1xuXG4gICAgaWYgKGRhdGEgPT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuY3JlYXRvciA9IGRhdGEuY3JlYXRvcjtcbiAgICB0aGlzLl9vcmRlciA9IGRhdGEub3JkZXI7XG4gICAgZm9yIChjb25zdCBncm91cCBvZiBkYXRhLmdyb3Vwcykge1xuICAgICAgdGhpcy5fZ3JvdXBzLnNldChcbiAgICAgICAgZ3JvdXAuaWQsXG4gICAgICAgIG5ldyBPcHRpb25hbENvbnRlbnRHcm91cChncm91cC5uYW1lLCBncm91cC5pbnRlbnQpXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChkYXRhLmJhc2VTdGF0ZSA9PT0gXCJPRkZcIikge1xuICAgICAgZm9yIChjb25zdCBncm91cCBvZiB0aGlzLl9ncm91cHMpIHtcbiAgICAgICAgZ3JvdXAudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoY29uc3Qgb24gb2YgZGF0YS5vbikge1xuICAgICAgdGhpcy5fZ3JvdXBzLmdldChvbikudmlzaWJsZSA9IHRydWU7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBvZmYgb2YgZGF0YS5vZmYpIHtcbiAgICAgIHRoaXMuX2dyb3Vwcy5nZXQob2ZmKS52aXNpYmxlID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgX2V2YWx1YXRlVmlzaWJpbGl0eUV4cHJlc3Npb24oYXJyYXkpIHtcbiAgICBjb25zdCBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG4gICAgaWYgKGxlbmd0aCA8IDIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zdCBvcGVyYXRvciA9IGFycmF5WzBdO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBhcnJheVtpXTtcbiAgICAgIGxldCBzdGF0ZTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGVsZW1lbnQpKSB7XG4gICAgICAgIHN0YXRlID0gdGhpcy5fZXZhbHVhdGVWaXNpYmlsaXR5RXhwcmVzc2lvbihlbGVtZW50KTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fZ3JvdXBzLmhhcyhlbGVtZW50KSkge1xuICAgICAgICBzdGF0ZSA9IHRoaXMuX2dyb3Vwcy5nZXQoZWxlbWVudCkudmlzaWJsZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdhcm4oYE9wdGlvbmFsIGNvbnRlbnQgZ3JvdXAgbm90IGZvdW5kOiAke2VsZW1lbnR9YCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgc3dpdGNoIChvcGVyYXRvcikge1xuICAgICAgICBjYXNlIFwiQW5kXCI6XG4gICAgICAgICAgaWYgKCFzdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIk9yXCI6XG4gICAgICAgICAgaWYgKHN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJOb3RcIjpcbiAgICAgICAgICByZXR1cm4gIXN0YXRlO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3BlcmF0b3IgPT09IFwiQW5kXCI7XG4gIH1cblxuICBpc1Zpc2libGUoZ3JvdXApIHtcbiAgICBpZiAodGhpcy5fZ3JvdXBzLnNpemUgPT09IDApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoIWdyb3VwKSB7XG4gICAgICB3YXJuKFwiT3B0aW9uYWwgY29udGVudCBncm91cCBub3QgZGVmaW5lZC5cIik7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGdyb3VwLnR5cGUgPT09IFwiT0NHXCIpIHtcbiAgICAgIGlmICghdGhpcy5fZ3JvdXBzLmhhcyhncm91cC5pZCkpIHtcbiAgICAgICAgd2FybihgT3B0aW9uYWwgY29udGVudCBncm91cCBub3QgZm91bmQ6ICR7Z3JvdXAuaWR9YCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuX2dyb3Vwcy5nZXQoZ3JvdXAuaWQpLnZpc2libGU7XG4gICAgfSBlbHNlIGlmIChncm91cC50eXBlID09PSBcIk9DTURcIikge1xuICAgICAgLy8gUGVyIHRoZSBzcGVjLCB0aGUgZXhwcmVzc2lvbiBzaG91bGQgYmUgcHJlZmVycmVkIGlmIGF2YWlsYWJsZS5cbiAgICAgIGlmIChncm91cC5leHByZXNzaW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ldmFsdWF0ZVZpc2liaWxpdHlFeHByZXNzaW9uKGdyb3VwLmV4cHJlc3Npb24pO1xuICAgICAgfVxuICAgICAgaWYgKCFncm91cC5wb2xpY3kgfHwgZ3JvdXAucG9saWN5ID09PSBcIkFueU9uXCIpIHtcbiAgICAgICAgLy8gRGVmYXVsdFxuICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIGdyb3VwLmlkcykge1xuICAgICAgICAgIGlmICghdGhpcy5fZ3JvdXBzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgIHdhcm4oYE9wdGlvbmFsIGNvbnRlbnQgZ3JvdXAgbm90IGZvdW5kOiAke2lkfWApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLl9ncm91cHMuZ2V0KGlkKS52aXNpYmxlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIGlmIChncm91cC5wb2xpY3kgPT09IFwiQWxsT25cIikge1xuICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIGdyb3VwLmlkcykge1xuICAgICAgICAgIGlmICghdGhpcy5fZ3JvdXBzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgIHdhcm4oYE9wdGlvbmFsIGNvbnRlbnQgZ3JvdXAgbm90IGZvdW5kOiAke2lkfWApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghdGhpcy5fZ3JvdXBzLmdldChpZCkudmlzaWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoZ3JvdXAucG9saWN5ID09PSBcIkFueU9mZlwiKSB7XG4gICAgICAgIGZvciAoY29uc3QgaWQgb2YgZ3JvdXAuaWRzKSB7XG4gICAgICAgICAgaWYgKCF0aGlzLl9ncm91cHMuaGFzKGlkKSkge1xuICAgICAgICAgICAgd2FybihgT3B0aW9uYWwgY29udGVudCBncm91cCBub3QgZm91bmQ6ICR7aWR9YCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCF0aGlzLl9ncm91cHMuZ2V0KGlkKS52aXNpYmxlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIGlmIChncm91cC5wb2xpY3kgPT09IFwiQWxsT2ZmXCIpIHtcbiAgICAgICAgZm9yIChjb25zdCBpZCBvZiBncm91cC5pZHMpIHtcbiAgICAgICAgICBpZiAoIXRoaXMuX2dyb3Vwcy5oYXMoaWQpKSB7XG4gICAgICAgICAgICB3YXJuKGBPcHRpb25hbCBjb250ZW50IGdyb3VwIG5vdCBmb3VuZDogJHtpZH1gKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodGhpcy5fZ3JvdXBzLmdldChpZCkudmlzaWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHdhcm4oYFVua25vd24gb3B0aW9uYWwgY29udGVudCBwb2xpY3kgJHtncm91cC5wb2xpY3l9LmApO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHdhcm4oYFVua25vd24gZ3JvdXAgdHlwZSAke2dyb3VwLnR5cGV9LmApO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgc2V0VmlzaWJpbGl0eShpZCwgdmlzaWJsZSA9IHRydWUpIHtcbiAgICBpZiAoIXRoaXMuX2dyb3Vwcy5oYXMoaWQpKSB7XG4gICAgICB3YXJuKGBPcHRpb25hbCBjb250ZW50IGdyb3VwIG5vdCBmb3VuZDogJHtpZH1gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fZ3JvdXBzLmdldChpZCkudmlzaWJsZSA9ICEhdmlzaWJsZTtcbiAgfVxuXG4gIGdldE9yZGVyKCkge1xuICAgIGlmICghdGhpcy5fZ3JvdXBzLnNpemUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5fb3JkZXIpIHtcbiAgICAgIHJldHVybiB0aGlzLl9vcmRlci5zbGljZSgpO1xuICAgIH1cbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLl9ncm91cHMua2V5cygpKTtcbiAgfVxuXG4gIGdldEdyb3VwcygpIHtcbiAgICByZXR1cm4gdGhpcy5fZ3JvdXBzLnNpemUgPiAwID8gb2JqZWN0RnJvbU1hcCh0aGlzLl9ncm91cHMpIDogbnVsbDtcbiAgfVxuXG4gIGdldEdyb3VwKGlkKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dyb3Vwcy5nZXQoaWQpIHx8IG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IHsgT3B0aW9uYWxDb250ZW50Q29uZmlnIH07XG4iLCAiLyogQ29weXJpZ2h0IDIwMTIgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGFzc2VydCwgY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHkgfSBmcm9tIFwiLi4vc2hhcmVkL3V0aWwuanNcIjtcbmltcG9ydCB7IGlzUGRmRmlsZSB9IGZyb20gXCIuL2Rpc3BsYXlfdXRpbHMuanNcIjtcblxuLyoqIEBpbXBsZW1lbnRzIHtJUERGU3RyZWFtfSAqL1xuY2xhc3MgUERGRGF0YVRyYW5zcG9ydFN0cmVhbSB7XG4gIGNvbnN0cnVjdG9yKHBhcmFtcywgcGRmRGF0YVJhbmdlVHJhbnNwb3J0KSB7XG4gICAgYXNzZXJ0KFxuICAgICAgcGRmRGF0YVJhbmdlVHJhbnNwb3J0LFxuICAgICAgJ1BERkRhdGFUcmFuc3BvcnRTdHJlYW0gLSBtaXNzaW5nIHJlcXVpcmVkIFwicGRmRGF0YVJhbmdlVHJhbnNwb3J0XCIgYXJndW1lbnQuJ1xuICAgICk7XG5cbiAgICB0aGlzLl9xdWV1ZWRDaHVua3MgPSBbXTtcbiAgICB0aGlzLl9wcm9ncmVzc2l2ZURvbmUgPSBwYXJhbXMucHJvZ3Jlc3NpdmVEb25lIHx8IGZhbHNlO1xuICAgIHRoaXMuX2NvbnRlbnREaXNwb3NpdGlvbkZpbGVuYW1lID1cbiAgICAgIHBhcmFtcy5jb250ZW50RGlzcG9zaXRpb25GaWxlbmFtZSB8fCBudWxsO1xuXG4gICAgY29uc3QgaW5pdGlhbERhdGEgPSBwYXJhbXMuaW5pdGlhbERhdGE7XG4gICAgaWYgKGluaXRpYWxEYXRhPy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBidWZmZXIgPSBuZXcgVWludDhBcnJheShpbml0aWFsRGF0YSkuYnVmZmVyO1xuICAgICAgdGhpcy5fcXVldWVkQ2h1bmtzLnB1c2goYnVmZmVyKTtcbiAgICB9XG5cbiAgICB0aGlzLl9wZGZEYXRhUmFuZ2VUcmFuc3BvcnQgPSBwZGZEYXRhUmFuZ2VUcmFuc3BvcnQ7XG4gICAgdGhpcy5faXNTdHJlYW1pbmdTdXBwb3J0ZWQgPSAhcGFyYW1zLmRpc2FibGVTdHJlYW07XG4gICAgdGhpcy5faXNSYW5nZVN1cHBvcnRlZCA9ICFwYXJhbXMuZGlzYWJsZVJhbmdlO1xuICAgIHRoaXMuX2NvbnRlbnRMZW5ndGggPSBwYXJhbXMubGVuZ3RoO1xuXG4gICAgdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXIgPSBudWxsO1xuICAgIHRoaXMuX3JhbmdlUmVhZGVycyA9IFtdO1xuXG4gICAgdGhpcy5fcGRmRGF0YVJhbmdlVHJhbnNwb3J0LmFkZFJhbmdlTGlzdGVuZXIoKGJlZ2luLCBjaHVuaykgPT4ge1xuICAgICAgdGhpcy5fb25SZWNlaXZlRGF0YSh7IGJlZ2luLCBjaHVuayB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3BkZkRhdGFSYW5nZVRyYW5zcG9ydC5hZGRQcm9ncmVzc0xpc3RlbmVyKChsb2FkZWQsIHRvdGFsKSA9PiB7XG4gICAgICB0aGlzLl9vblByb2dyZXNzKHsgbG9hZGVkLCB0b3RhbCB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3BkZkRhdGFSYW5nZVRyYW5zcG9ydC5hZGRQcm9ncmVzc2l2ZVJlYWRMaXN0ZW5lcihjaHVuayA9PiB7XG4gICAgICB0aGlzLl9vblJlY2VpdmVEYXRhKHsgY2h1bmsgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9wZGZEYXRhUmFuZ2VUcmFuc3BvcnQuYWRkUHJvZ3Jlc3NpdmVEb25lTGlzdGVuZXIoKCkgPT4ge1xuICAgICAgdGhpcy5fb25Qcm9ncmVzc2l2ZURvbmUoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3BkZkRhdGFSYW5nZVRyYW5zcG9ydC50cmFuc3BvcnRSZWFkeSgpO1xuICB9XG5cbiAgX29uUmVjZWl2ZURhdGEoYXJncykge1xuICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGFyZ3MuY2h1bmspLmJ1ZmZlcjtcbiAgICBpZiAoYXJncy5iZWdpbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAodGhpcy5fZnVsbFJlcXVlc3RSZWFkZXIpIHtcbiAgICAgICAgdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXIuX2VucXVldWUoYnVmZmVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3F1ZXVlZENodW5rcy5wdXNoKGJ1ZmZlcik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGZvdW5kID0gdGhpcy5fcmFuZ2VSZWFkZXJzLnNvbWUoZnVuY3Rpb24gKHJhbmdlUmVhZGVyKSB7XG4gICAgICAgIGlmIChyYW5nZVJlYWRlci5fYmVnaW4gIT09IGFyZ3MuYmVnaW4pIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmFuZ2VSZWFkZXIuX2VucXVldWUoYnVmZmVyKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KTtcbiAgICAgIGFzc2VydChcbiAgICAgICAgZm91bmQsXG4gICAgICAgIFwiX29uUmVjZWl2ZURhdGEgLSBubyBgUERGRGF0YVRyYW5zcG9ydFN0cmVhbVJhbmdlUmVhZGVyYCBpbnN0YW5jZSBmb3VuZC5cIlxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBnZXQgX3Byb2dyZXNzaXZlRGF0YUxlbmd0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXI/Ll9sb2FkZWQgPz8gMDtcbiAgfVxuXG4gIF9vblByb2dyZXNzKGV2dCkge1xuICAgIGlmIChldnQudG90YWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gUmVwb3J0aW5nIHRvIGZpcnN0IHJhbmdlIHJlYWRlciwgaWYgaXQgZXhpc3RzLlxuICAgICAgY29uc3QgZmlyc3RSZWFkZXIgPSB0aGlzLl9yYW5nZVJlYWRlcnNbMF07XG4gICAgICBpZiAoZmlyc3RSZWFkZXI/Lm9uUHJvZ3Jlc3MpIHtcbiAgICAgICAgZmlyc3RSZWFkZXIub25Qcm9ncmVzcyh7IGxvYWRlZDogZXZ0LmxvYWRlZCB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZnVsbFJlYWRlciA9IHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyO1xuICAgICAgaWYgKGZ1bGxSZWFkZXI/Lm9uUHJvZ3Jlc3MpIHtcbiAgICAgICAgZnVsbFJlYWRlci5vblByb2dyZXNzKHsgbG9hZGVkOiBldnQubG9hZGVkLCB0b3RhbDogZXZ0LnRvdGFsIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9vblByb2dyZXNzaXZlRG9uZSgpIHtcbiAgICBpZiAodGhpcy5fZnVsbFJlcXVlc3RSZWFkZXIpIHtcbiAgICAgIHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyLnByb2dyZXNzaXZlRG9uZSgpO1xuICAgIH1cbiAgICB0aGlzLl9wcm9ncmVzc2l2ZURvbmUgPSB0cnVlO1xuICB9XG5cbiAgX3JlbW92ZVJhbmdlUmVhZGVyKHJlYWRlcikge1xuICAgIGNvbnN0IGkgPSB0aGlzLl9yYW5nZVJlYWRlcnMuaW5kZXhPZihyZWFkZXIpO1xuICAgIGlmIChpID49IDApIHtcbiAgICAgIHRoaXMuX3JhbmdlUmVhZGVycy5zcGxpY2UoaSwgMSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0RnVsbFJlYWRlcigpIHtcbiAgICBhc3NlcnQoXG4gICAgICAhdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXIsXG4gICAgICBcIlBERkRhdGFUcmFuc3BvcnRTdHJlYW0uZ2V0RnVsbFJlYWRlciBjYW4gb25seSBiZSBjYWxsZWQgb25jZS5cIlxuICAgICk7XG4gICAgY29uc3QgcXVldWVkQ2h1bmtzID0gdGhpcy5fcXVldWVkQ2h1bmtzO1xuICAgIHRoaXMuX3F1ZXVlZENodW5rcyA9IG51bGw7XG4gICAgcmV0dXJuIG5ldyBQREZEYXRhVHJhbnNwb3J0U3RyZWFtUmVhZGVyKFxuICAgICAgdGhpcyxcbiAgICAgIHF1ZXVlZENodW5rcyxcbiAgICAgIHRoaXMuX3Byb2dyZXNzaXZlRG9uZSxcbiAgICAgIHRoaXMuX2NvbnRlbnREaXNwb3NpdGlvbkZpbGVuYW1lXG4gICAgKTtcbiAgfVxuXG4gIGdldFJhbmdlUmVhZGVyKGJlZ2luLCBlbmQpIHtcbiAgICBpZiAoZW5kIDw9IHRoaXMuX3Byb2dyZXNzaXZlRGF0YUxlbmd0aCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHJlYWRlciA9IG5ldyBQREZEYXRhVHJhbnNwb3J0U3RyZWFtUmFuZ2VSZWFkZXIodGhpcywgYmVnaW4sIGVuZCk7XG4gICAgdGhpcy5fcGRmRGF0YVJhbmdlVHJhbnNwb3J0LnJlcXVlc3REYXRhUmFuZ2UoYmVnaW4sIGVuZCk7XG4gICAgdGhpcy5fcmFuZ2VSZWFkZXJzLnB1c2gocmVhZGVyKTtcbiAgICByZXR1cm4gcmVhZGVyO1xuICB9XG5cbiAgY2FuY2VsQWxsUmVxdWVzdHMocmVhc29uKSB7XG4gICAgaWYgKHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyKSB7XG4gICAgICB0aGlzLl9mdWxsUmVxdWVzdFJlYWRlci5jYW5jZWwocmVhc29uKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCByZWFkZXIgb2YgdGhpcy5fcmFuZ2VSZWFkZXJzLnNsaWNlKDApKSB7XG4gICAgICByZWFkZXIuY2FuY2VsKHJlYXNvbik7XG4gICAgfVxuICAgIHRoaXMuX3BkZkRhdGFSYW5nZVRyYW5zcG9ydC5hYm9ydCgpO1xuICB9XG59XG5cbi8qKiBAaW1wbGVtZW50cyB7SVBERlN0cmVhbVJlYWRlcn0gKi9cbmNsYXNzIFBERkRhdGFUcmFuc3BvcnRTdHJlYW1SZWFkZXIge1xuICBjb25zdHJ1Y3RvcihcbiAgICBzdHJlYW0sXG4gICAgcXVldWVkQ2h1bmtzLFxuICAgIHByb2dyZXNzaXZlRG9uZSA9IGZhbHNlLFxuICAgIGNvbnRlbnREaXNwb3NpdGlvbkZpbGVuYW1lID0gbnVsbFxuICApIHtcbiAgICB0aGlzLl9zdHJlYW0gPSBzdHJlYW07XG4gICAgdGhpcy5fZG9uZSA9IHByb2dyZXNzaXZlRG9uZSB8fCBmYWxzZTtcbiAgICB0aGlzLl9maWxlbmFtZSA9IGlzUGRmRmlsZShjb250ZW50RGlzcG9zaXRpb25GaWxlbmFtZSlcbiAgICAgID8gY29udGVudERpc3Bvc2l0aW9uRmlsZW5hbWVcbiAgICAgIDogbnVsbDtcbiAgICB0aGlzLl9xdWV1ZWRDaHVua3MgPSBxdWV1ZWRDaHVua3MgfHwgW107XG4gICAgdGhpcy5fbG9hZGVkID0gMDtcbiAgICBmb3IgKGNvbnN0IGNodW5rIG9mIHRoaXMuX3F1ZXVlZENodW5rcykge1xuICAgICAgdGhpcy5fbG9hZGVkICs9IGNodW5rLmJ5dGVMZW5ndGg7XG4gICAgfVxuICAgIHRoaXMuX3JlcXVlc3RzID0gW107XG4gICAgdGhpcy5faGVhZGVyc1JlYWR5ID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgc3RyZWFtLl9mdWxsUmVxdWVzdFJlYWRlciA9IHRoaXM7XG5cbiAgICB0aGlzLm9uUHJvZ3Jlc3MgPSBudWxsO1xuICB9XG5cbiAgX2VucXVldWUoY2h1bmspIHtcbiAgICBpZiAodGhpcy5fZG9uZSkge1xuICAgICAgcmV0dXJuOyAvLyBJZ25vcmUgbmV3IGRhdGEuXG4gICAgfVxuICAgIGlmICh0aGlzLl9yZXF1ZXN0cy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCByZXF1ZXN0Q2FwYWJpbGl0eSA9IHRoaXMuX3JlcXVlc3RzLnNoaWZ0KCk7XG4gICAgICByZXF1ZXN0Q2FwYWJpbGl0eS5yZXNvbHZlKHsgdmFsdWU6IGNodW5rLCBkb25lOiBmYWxzZSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcXVldWVkQ2h1bmtzLnB1c2goY2h1bmspO1xuICAgIH1cbiAgICB0aGlzLl9sb2FkZWQgKz0gY2h1bmsuYnl0ZUxlbmd0aDtcbiAgfVxuXG4gIGdldCBoZWFkZXJzUmVhZHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hlYWRlcnNSZWFkeTtcbiAgfVxuXG4gIGdldCBmaWxlbmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZmlsZW5hbWU7XG4gIH1cblxuICBnZXQgaXNSYW5nZVN1cHBvcnRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fc3RyZWFtLl9pc1JhbmdlU3VwcG9ydGVkO1xuICB9XG5cbiAgZ2V0IGlzU3RyZWFtaW5nU3VwcG9ydGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9zdHJlYW0uX2lzU3RyZWFtaW5nU3VwcG9ydGVkO1xuICB9XG5cbiAgZ2V0IGNvbnRlbnRMZW5ndGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0cmVhbS5fY29udGVudExlbmd0aDtcbiAgfVxuXG4gIGFzeW5jIHJlYWQoKSB7XG4gICAgaWYgKHRoaXMuX3F1ZXVlZENodW5rcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBjaHVuayA9IHRoaXMuX3F1ZXVlZENodW5rcy5zaGlmdCgpO1xuICAgICAgcmV0dXJuIHsgdmFsdWU6IGNodW5rLCBkb25lOiBmYWxzZSB9O1xuICAgIH1cbiAgICBpZiAodGhpcy5fZG9uZSkge1xuICAgICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbiAgICBjb25zdCByZXF1ZXN0Q2FwYWJpbGl0eSA9IGNyZWF0ZVByb21pc2VDYXBhYmlsaXR5KCk7XG4gICAgdGhpcy5fcmVxdWVzdHMucHVzaChyZXF1ZXN0Q2FwYWJpbGl0eSk7XG4gICAgcmV0dXJuIHJlcXVlc3RDYXBhYmlsaXR5LnByb21pc2U7XG4gIH1cblxuICBjYW5jZWwocmVhc29uKSB7XG4gICAgdGhpcy5fZG9uZSA9IHRydWU7XG4gICAgZm9yIChjb25zdCByZXF1ZXN0Q2FwYWJpbGl0eSBvZiB0aGlzLl9yZXF1ZXN0cykge1xuICAgICAgcmVxdWVzdENhcGFiaWxpdHkucmVzb2x2ZSh7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfSk7XG4gICAgfVxuICAgIHRoaXMuX3JlcXVlc3RzLmxlbmd0aCA9IDA7XG4gIH1cblxuICBwcm9ncmVzc2l2ZURvbmUoKSB7XG4gICAgaWYgKHRoaXMuX2RvbmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fZG9uZSA9IHRydWU7XG4gIH1cbn1cblxuLyoqIEBpbXBsZW1lbnRzIHtJUERGU3RyZWFtUmFuZ2VSZWFkZXJ9ICovXG5jbGFzcyBQREZEYXRhVHJhbnNwb3J0U3RyZWFtUmFuZ2VSZWFkZXIge1xuICBjb25zdHJ1Y3RvcihzdHJlYW0sIGJlZ2luLCBlbmQpIHtcbiAgICB0aGlzLl9zdHJlYW0gPSBzdHJlYW07XG4gICAgdGhpcy5fYmVnaW4gPSBiZWdpbjtcbiAgICB0aGlzLl9lbmQgPSBlbmQ7XG4gICAgdGhpcy5fcXVldWVkQ2h1bmsgPSBudWxsO1xuICAgIHRoaXMuX3JlcXVlc3RzID0gW107XG4gICAgdGhpcy5fZG9uZSA9IGZhbHNlO1xuXG4gICAgdGhpcy5vblByb2dyZXNzID0gbnVsbDtcbiAgfVxuXG4gIF9lbnF1ZXVlKGNodW5rKSB7XG4gICAgaWYgKHRoaXMuX2RvbmUpIHtcbiAgICAgIHJldHVybjsgLy8gaWdub3JlIG5ldyBkYXRhXG4gICAgfVxuICAgIGlmICh0aGlzLl9yZXF1ZXN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuX3F1ZXVlZENodW5rID0gY2h1bms7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHJlcXVlc3RzQ2FwYWJpbGl0eSA9IHRoaXMuX3JlcXVlc3RzLnNoaWZ0KCk7XG4gICAgICByZXF1ZXN0c0NhcGFiaWxpdHkucmVzb2x2ZSh7IHZhbHVlOiBjaHVuaywgZG9uZTogZmFsc2UgfSk7XG4gICAgICBmb3IgKGNvbnN0IHJlcXVlc3RDYXBhYmlsaXR5IG9mIHRoaXMuX3JlcXVlc3RzKSB7XG4gICAgICAgIHJlcXVlc3RDYXBhYmlsaXR5LnJlc29sdmUoeyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5fcmVxdWVzdHMubGVuZ3RoID0gMDtcbiAgICB9XG4gICAgdGhpcy5fZG9uZSA9IHRydWU7XG4gICAgdGhpcy5fc3RyZWFtLl9yZW1vdmVSYW5nZVJlYWRlcih0aGlzKTtcbiAgfVxuXG4gIGdldCBpc1N0cmVhbWluZ1N1cHBvcnRlZCgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBhc3luYyByZWFkKCkge1xuICAgIGlmICh0aGlzLl9xdWV1ZWRDaHVuaykge1xuICAgICAgY29uc3QgY2h1bmsgPSB0aGlzLl9xdWV1ZWRDaHVuaztcbiAgICAgIHRoaXMuX3F1ZXVlZENodW5rID0gbnVsbDtcbiAgICAgIHJldHVybiB7IHZhbHVlOiBjaHVuaywgZG9uZTogZmFsc2UgfTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2RvbmUpIHtcbiAgICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgICB9XG4gICAgY29uc3QgcmVxdWVzdENhcGFiaWxpdHkgPSBjcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSgpO1xuICAgIHRoaXMuX3JlcXVlc3RzLnB1c2gocmVxdWVzdENhcGFiaWxpdHkpO1xuICAgIHJldHVybiByZXF1ZXN0Q2FwYWJpbGl0eS5wcm9taXNlO1xuICB9XG5cbiAgY2FuY2VsKHJlYXNvbikge1xuICAgIHRoaXMuX2RvbmUgPSB0cnVlO1xuICAgIGZvciAoY29uc3QgcmVxdWVzdENhcGFiaWxpdHkgb2YgdGhpcy5fcmVxdWVzdHMpIHtcbiAgICAgIHJlcXVlc3RDYXBhYmlsaXR5LnJlc29sdmUoeyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH0pO1xuICAgIH1cbiAgICB0aGlzLl9yZXF1ZXN0cy5sZW5ndGggPSAwO1xuICAgIHRoaXMuX3N0cmVhbS5fcmVtb3ZlUmFuZ2VSZWFkZXIodGhpcyk7XG4gIH1cbn1cblxuZXhwb3J0IHsgUERGRGF0YVRyYW5zcG9ydFN0cmVhbSB9O1xuIiwgIi8qIENvcHlyaWdodCAyMDIxIE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5jbGFzcyBYZmFUZXh0IHtcbiAgLyoqXG4gICAqIFdhbGsgYW4gWEZBIHRyZWUgYW5kIGNyZWF0ZSBhbiBhcnJheSBvZiB0ZXh0IG5vZGVzIHRoYXQgaXMgY29tcGF0aWJsZVxuICAgKiB3aXRoIGEgcmVndWxhciBQREZzIFRleHRDb250ZW50LiBDdXJyZW50bHksIG9ubHkgVGV4dEl0ZW0uc3RyIGlzIHN1cHBvcnRlZCxcbiAgICogYWxsIG90aGVyIGZpZWxkcyBhbmQgc3R5bGVzIGhhdmVuJ3QgYmVlbiBpbXBsZW1lbnRlZC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHhmYSAtIEFuIFhGQSBmYWtlIERPTSBvYmplY3QuXG4gICAqXG4gICAqIEByZXR1cm5zIHtUZXh0Q29udGVudH1cbiAgICovXG4gIHN0YXRpYyB0ZXh0Q29udGVudCh4ZmEpIHtcbiAgICBjb25zdCBpdGVtcyA9IFtdO1xuICAgIGNvbnN0IG91dHB1dCA9IHtcbiAgICAgIGl0ZW1zLFxuICAgICAgc3R5bGVzOiBPYmplY3QuY3JlYXRlKG51bGwpLFxuICAgIH07XG4gICAgZnVuY3Rpb24gd2Fsayhub2RlKSB7XG4gICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbGV0IHN0ciA9IG51bGw7XG4gICAgICBjb25zdCBuYW1lID0gbm9kZS5uYW1lO1xuICAgICAgaWYgKG5hbWUgPT09IFwiI3RleHRcIikge1xuICAgICAgICBzdHIgPSBub2RlLnZhbHVlO1xuICAgICAgfSBlbHNlIGlmICghWGZhVGV4dC5zaG91bGRCdWlsZFRleHQobmFtZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIGlmIChub2RlPy5hdHRyaWJ1dGVzPy50ZXh0Q29udGVudCkge1xuICAgICAgICBzdHIgPSBub2RlLmF0dHJpYnV0ZXMudGV4dENvbnRlbnQ7XG4gICAgICB9IGVsc2UgaWYgKG5vZGUudmFsdWUpIHtcbiAgICAgICAgc3RyID0gbm9kZS52YWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChzdHIgIT09IG51bGwpIHtcbiAgICAgICAgaXRlbXMucHVzaCh7XG4gICAgICAgICAgc3RyLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICghbm9kZS5jaGlsZHJlbikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIG5vZGUuY2hpbGRyZW4pIHtcbiAgICAgICAgd2FsayhjaGlsZCk7XG4gICAgICB9XG4gICAgfVxuICAgIHdhbGsoeGZhKTtcbiAgICByZXR1cm4gb3V0cHV0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gRE9NIG5vZGUgbmFtZS4gKGxvd2VyIGNhc2UpXG4gICAqXG4gICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIHRoZSBET00gbm9kZSBzaG91bGQgaGF2ZSBhIGNvcnJlc3BvbmRpbmcgdGV4dFxuICAgKiBub2RlLlxuICAgKi9cbiAgc3RhdGljIHNob3VsZEJ1aWxkVGV4dChuYW1lKSB7XG4gICAgcmV0dXJuICEoXG4gICAgICBuYW1lID09PSBcInRleHRhcmVhXCIgfHxcbiAgICAgIG5hbWUgPT09IFwiaW5wdXRcIiB8fFxuICAgICAgbmFtZSA9PT0gXCJvcHRpb25cIiB8fFxuICAgICAgbmFtZSA9PT0gXCJzZWxlY3RcIlxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IHsgWGZhVGV4dCB9O1xuIiwgIi8qIENvcHlyaWdodCAyMDIwIE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyogZ2xvYmFscyBfX25vbl93ZWJwYWNrX3JlcXVpcmVfXyAqL1xuXG5pbXBvcnQge1xuICBCYXNlQ2FudmFzRmFjdG9yeSxcbiAgQmFzZUNNYXBSZWFkZXJGYWN0b3J5LFxuICBCYXNlU3RhbmRhcmRGb250RGF0YUZhY3RvcnksXG59IGZyb20gXCIuL2Jhc2VfZmFjdG9yeS5qc1wiO1xuXG5pZiAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJNT1pDRU5UUkFMXCIpKSB7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICAnTW9kdWxlIFwiLi9ub2RlX3V0aWxzLmpzXCIgc2hhbGwgbm90IGJlIHVzZWQgd2l0aCBNT1pDRU5UUkFMIGJ1aWxkcy4nXG4gICk7XG59XG5cbmNvbnN0IGZldGNoRGF0YSA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCBmcyA9IF9fbm9uX3dlYnBhY2tfcmVxdWlyZV9fKFwiZnNcIik7XG4gICAgZnMucmVhZEZpbGUodXJsLCAoZXJyb3IsIGRhdGEpID0+IHtcbiAgICAgIGlmIChlcnJvciB8fCAhZGF0YSkge1xuICAgICAgICByZWplY3QobmV3IEVycm9yKGVycm9yKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHJlc29sdmUobmV3IFVpbnQ4QXJyYXkoZGF0YSkpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmNsYXNzIE5vZGVDYW52YXNGYWN0b3J5IGV4dGVuZHMgQmFzZUNhbnZhc0ZhY3Rvcnkge1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgX2NyZWF0ZUNhbnZhcyh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgY29uc3QgQ2FudmFzID0gX19ub25fd2VicGFja19yZXF1aXJlX18oXCJjYW52YXNcIik7XG4gICAgcmV0dXJuIENhbnZhcy5jcmVhdGVDYW52YXMod2lkdGgsIGhlaWdodCk7XG4gIH1cbn1cblxuY2xhc3MgTm9kZUNNYXBSZWFkZXJGYWN0b3J5IGV4dGVuZHMgQmFzZUNNYXBSZWFkZXJGYWN0b3J5IHtcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIF9mZXRjaERhdGEodXJsLCBjb21wcmVzc2lvblR5cGUpIHtcbiAgICByZXR1cm4gZmV0Y2hEYXRhKHVybCkudGhlbihkYXRhID0+IHtcbiAgICAgIHJldHVybiB7IGNNYXBEYXRhOiBkYXRhLCBjb21wcmVzc2lvblR5cGUgfTtcbiAgICB9KTtcbiAgfVxufVxuXG5jbGFzcyBOb2RlU3RhbmRhcmRGb250RGF0YUZhY3RvcnkgZXh0ZW5kcyBCYXNlU3RhbmRhcmRGb250RGF0YUZhY3Rvcnkge1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgX2ZldGNoRGF0YSh1cmwpIHtcbiAgICByZXR1cm4gZmV0Y2hEYXRhKHVybCk7XG4gIH1cbn1cblxuZXhwb3J0IHtcbiAgTm9kZUNhbnZhc0ZhY3RvcnksXG4gIE5vZGVDTWFwUmVhZGVyRmFjdG9yeSxcbiAgTm9kZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5LFxufTtcbiIsICIvKiBDb3B5cmlnaHQgMjAxNCBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL2FwaVwiKS5QREZQYWdlUHJveHl9IFBERlBhZ2VQcm94eSAqL1xuLyoqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL2Rpc3BsYXlfdXRpbHNcIikuUGFnZVZpZXdwb3J0fSBQYWdlVmlld3BvcnQgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9pbnRlcmZhY2VzXCIpLklEb3dubG9hZE1hbmFnZXJ9IElEb3dubG9hZE1hbmFnZXIgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vLi4vd2ViL2ludGVyZmFjZXNcIikuSVBERkxpbmtTZXJ2aWNlfSBJUERGTGlua1NlcnZpY2UgKi9cblxuaW1wb3J0IHtcbiAgQW5ub3RhdGlvbkJvcmRlclN0eWxlVHlwZSxcbiAgQW5ub3RhdGlvblR5cGUsXG4gIGFzc2VydCxcbiAgc2hhZG93LFxuICB1bnJlYWNoYWJsZSxcbiAgVXRpbCxcbiAgd2Fybixcbn0gZnJvbSBcIi4uL3NoYXJlZC91dGlsLmpzXCI7XG5pbXBvcnQge1xuICBET01TVkdGYWN0b3J5LFxuICBnZXRGaWxlbmFtZUZyb21VcmwsXG4gIFBERkRhdGVTdHJpbmcsXG59IGZyb20gXCIuL2Rpc3BsYXlfdXRpbHMuanNcIjtcbmltcG9ydCB7IEFubm90YXRpb25TdG9yYWdlIH0gZnJvbSBcIi4vYW5ub3RhdGlvbl9zdG9yYWdlLmpzXCI7XG5pbXBvcnQgeyBDb2xvckNvbnZlcnRlcnMgfSBmcm9tIFwiLi4vc2hhcmVkL3NjcmlwdGluZ191dGlscy5qc1wiO1xuaW1wb3J0IHsgWGZhTGF5ZXIgfSBmcm9tIFwiLi94ZmFfbGF5ZXIuanNcIjtcblxuY29uc3QgREVGQVVMVF9UQUJfSU5ERVggPSAxMDAwO1xuY29uc3QgR2V0RWxlbWVudHNCeU5hbWVTZXQgPSBuZXcgV2Vha1NldCgpO1xuXG5mdW5jdGlvbiBnZXRSZWN0RGltcyhyZWN0KSB7XG4gIHJldHVybiB7XG4gICAgd2lkdGg6IHJlY3RbMl0gLSByZWN0WzBdLFxuICAgIGhlaWdodDogcmVjdFszXSAtIHJlY3RbMV0sXG4gIH07XG59XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gQW5ub3RhdGlvbkVsZW1lbnRQYXJhbWV0ZXJzXG4gKiBAcHJvcGVydHkge09iamVjdH0gZGF0YVxuICogQHByb3BlcnR5IHtIVE1MRGl2RWxlbWVudH0gbGF5ZXJcbiAqIEBwcm9wZXJ0eSB7UERGUGFnZVByb3h5fSBwYWdlXG4gKiBAcHJvcGVydHkge1BhZ2VWaWV3cG9ydH0gdmlld3BvcnRcbiAqIEBwcm9wZXJ0eSB7SVBERkxpbmtTZXJ2aWNlfSBsaW5rU2VydmljZVxuICogQHByb3BlcnR5IHtJRG93bmxvYWRNYW5hZ2VyfSBkb3dubG9hZE1hbmFnZXJcbiAqIEBwcm9wZXJ0eSB7QW5ub3RhdGlvblN0b3JhZ2V9IFthbm5vdGF0aW9uU3RvcmFnZV1cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbaW1hZ2VSZXNvdXJjZXNQYXRoXSAtIFBhdGggZm9yIGltYWdlIHJlc291cmNlcywgbWFpbmx5XG4gKiAgIGZvciBhbm5vdGF0aW9uIGljb25zLiBJbmNsdWRlIHRyYWlsaW5nIHNsYXNoLlxuICogQHByb3BlcnR5IHtib29sZWFufSByZW5kZXJGb3Jtc1xuICogQHByb3BlcnR5IHtPYmplY3R9IHN2Z0ZhY3RvcnlcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2VuYWJsZVNjcmlwdGluZ11cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2hhc0pTQWN0aW9uc11cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBbZmllbGRPYmplY3RzXVxuICogQHByb3BlcnR5IHtPYmplY3R9IFttb3VzZVN0YXRlXVxuICovXG5cbmNsYXNzIEFubm90YXRpb25FbGVtZW50RmFjdG9yeSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge0Fubm90YXRpb25FbGVtZW50UGFyYW1ldGVyc30gcGFyYW1ldGVyc1xuICAgKiBAcmV0dXJucyB7QW5ub3RhdGlvbkVsZW1lbnR9XG4gICAqL1xuICBzdGF0aWMgY3JlYXRlKHBhcmFtZXRlcnMpIHtcbiAgICBjb25zdCBzdWJ0eXBlID0gcGFyYW1ldGVycy5kYXRhLmFubm90YXRpb25UeXBlO1xuXG4gICAgc3dpdGNoIChzdWJ0eXBlKSB7XG4gICAgICBjYXNlIEFubm90YXRpb25UeXBlLkxJTks6XG4gICAgICAgIHJldHVybiBuZXcgTGlua0Fubm90YXRpb25FbGVtZW50KHBhcmFtZXRlcnMpO1xuXG4gICAgICBjYXNlIEFubm90YXRpb25UeXBlLlRFWFQ6XG4gICAgICAgIHJldHVybiBuZXcgVGV4dEFubm90YXRpb25FbGVtZW50KHBhcmFtZXRlcnMpO1xuXG4gICAgICBjYXNlIEFubm90YXRpb25UeXBlLldJREdFVDpcbiAgICAgICAgY29uc3QgZmllbGRUeXBlID0gcGFyYW1ldGVycy5kYXRhLmZpZWxkVHlwZTtcblxuICAgICAgICBzd2l0Y2ggKGZpZWxkVHlwZSkge1xuICAgICAgICAgIGNhc2UgXCJUeFwiOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUZXh0V2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG4gICAgICAgICAgY2FzZSBcIkJ0blwiOlxuICAgICAgICAgICAgaWYgKHBhcmFtZXRlcnMuZGF0YS5yYWRpb0J1dHRvbikge1xuICAgICAgICAgICAgICByZXR1cm4gbmV3IFJhZGlvQnV0dG9uV2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBhcmFtZXRlcnMuZGF0YS5jaGVja0JveCkge1xuICAgICAgICAgICAgICByZXR1cm4gbmV3IENoZWNrYm94V2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFB1c2hCdXR0b25XaWRnZXRBbm5vdGF0aW9uRWxlbWVudChwYXJhbWV0ZXJzKTtcbiAgICAgICAgICBjYXNlIFwiQ2hcIjpcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2hvaWNlV2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBXaWRnZXRBbm5vdGF0aW9uRWxlbWVudChwYXJhbWV0ZXJzKTtcblxuICAgICAgY2FzZSBBbm5vdGF0aW9uVHlwZS5QT1BVUDpcbiAgICAgICAgcmV0dXJuIG5ldyBQb3B1cEFubm90YXRpb25FbGVtZW50KHBhcmFtZXRlcnMpO1xuXG4gICAgICBjYXNlIEFubm90YXRpb25UeXBlLkZSRUVURVhUOlxuICAgICAgICByZXR1cm4gbmV3IEZyZWVUZXh0QW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG5cbiAgICAgIGNhc2UgQW5ub3RhdGlvblR5cGUuTElORTpcbiAgICAgICAgcmV0dXJuIG5ldyBMaW5lQW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG5cbiAgICAgIGNhc2UgQW5ub3RhdGlvblR5cGUuU1FVQVJFOlxuICAgICAgICByZXR1cm4gbmV3IFNxdWFyZUFubm90YXRpb25FbGVtZW50KHBhcmFtZXRlcnMpO1xuXG4gICAgICBjYXNlIEFubm90YXRpb25UeXBlLkNJUkNMRTpcbiAgICAgICAgcmV0dXJuIG5ldyBDaXJjbGVBbm5vdGF0aW9uRWxlbWVudChwYXJhbWV0ZXJzKTtcblxuICAgICAgY2FzZSBBbm5vdGF0aW9uVHlwZS5QT0xZTElORTpcbiAgICAgICAgcmV0dXJuIG5ldyBQb2x5bGluZUFubm90YXRpb25FbGVtZW50KHBhcmFtZXRlcnMpO1xuXG4gICAgICBjYXNlIEFubm90YXRpb25UeXBlLkNBUkVUOlxuICAgICAgICByZXR1cm4gbmV3IENhcmV0QW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG5cbiAgICAgIGNhc2UgQW5ub3RhdGlvblR5cGUuSU5LOlxuICAgICAgICByZXR1cm4gbmV3IElua0Fubm90YXRpb25FbGVtZW50KHBhcmFtZXRlcnMpO1xuXG4gICAgICBjYXNlIEFubm90YXRpb25UeXBlLlBPTFlHT046XG4gICAgICAgIHJldHVybiBuZXcgUG9seWdvbkFubm90YXRpb25FbGVtZW50KHBhcmFtZXRlcnMpO1xuXG4gICAgICBjYXNlIEFubm90YXRpb25UeXBlLkhJR0hMSUdIVDpcbiAgICAgICAgcmV0dXJuIG5ldyBIaWdobGlnaHRBbm5vdGF0aW9uRWxlbWVudChwYXJhbWV0ZXJzKTtcblxuICAgICAgY2FzZSBBbm5vdGF0aW9uVHlwZS5VTkRFUkxJTkU6XG4gICAgICAgIHJldHVybiBuZXcgVW5kZXJsaW5lQW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG5cbiAgICAgIGNhc2UgQW5ub3RhdGlvblR5cGUuU1FVSUdHTFk6XG4gICAgICAgIHJldHVybiBuZXcgU3F1aWdnbHlBbm5vdGF0aW9uRWxlbWVudChwYXJhbWV0ZXJzKTtcblxuICAgICAgY2FzZSBBbm5vdGF0aW9uVHlwZS5TVFJJS0VPVVQ6XG4gICAgICAgIHJldHVybiBuZXcgU3RyaWtlT3V0QW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG5cbiAgICAgIGNhc2UgQW5ub3RhdGlvblR5cGUuU1RBTVA6XG4gICAgICAgIHJldHVybiBuZXcgU3RhbXBBbm5vdGF0aW9uRWxlbWVudChwYXJhbWV0ZXJzKTtcblxuICAgICAgY2FzZSBBbm5vdGF0aW9uVHlwZS5GSUxFQVRUQUNITUVOVDpcbiAgICAgICAgcmV0dXJuIG5ldyBGaWxlQXR0YWNobWVudEFubm90YXRpb25FbGVtZW50KHBhcmFtZXRlcnMpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbmV3IEFubm90YXRpb25FbGVtZW50KHBhcmFtZXRlcnMpO1xuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBBbm5vdGF0aW9uRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHBhcmFtZXRlcnMsXG4gICAge1xuICAgICAgaXNSZW5kZXJhYmxlID0gZmFsc2UsXG4gICAgICBpZ25vcmVCb3JkZXIgPSBmYWxzZSxcbiAgICAgIGNyZWF0ZVF1YWRyaWxhdGVyYWxzID0gZmFsc2UsXG4gICAgfSA9IHt9XG4gICkge1xuICAgIHRoaXMuaXNSZW5kZXJhYmxlID0gaXNSZW5kZXJhYmxlO1xuICAgIHRoaXMuZGF0YSA9IHBhcmFtZXRlcnMuZGF0YTtcbiAgICB0aGlzLmxheWVyID0gcGFyYW1ldGVycy5sYXllcjtcbiAgICB0aGlzLnBhZ2UgPSBwYXJhbWV0ZXJzLnBhZ2U7XG4gICAgdGhpcy52aWV3cG9ydCA9IHBhcmFtZXRlcnMudmlld3BvcnQ7XG4gICAgdGhpcy5saW5rU2VydmljZSA9IHBhcmFtZXRlcnMubGlua1NlcnZpY2U7XG4gICAgdGhpcy5kb3dubG9hZE1hbmFnZXIgPSBwYXJhbWV0ZXJzLmRvd25sb2FkTWFuYWdlcjtcbiAgICB0aGlzLmltYWdlUmVzb3VyY2VzUGF0aCA9IHBhcmFtZXRlcnMuaW1hZ2VSZXNvdXJjZXNQYXRoO1xuICAgIHRoaXMucmVuZGVyRm9ybXMgPSBwYXJhbWV0ZXJzLnJlbmRlckZvcm1zO1xuICAgIHRoaXMuc3ZnRmFjdG9yeSA9IHBhcmFtZXRlcnMuc3ZnRmFjdG9yeTtcbiAgICB0aGlzLmFubm90YXRpb25TdG9yYWdlID0gcGFyYW1ldGVycy5hbm5vdGF0aW9uU3RvcmFnZTtcbiAgICB0aGlzLmVuYWJsZVNjcmlwdGluZyA9IHBhcmFtZXRlcnMuZW5hYmxlU2NyaXB0aW5nO1xuICAgIHRoaXMuaGFzSlNBY3Rpb25zID0gcGFyYW1ldGVycy5oYXNKU0FjdGlvbnM7XG4gICAgdGhpcy5fZmllbGRPYmplY3RzID0gcGFyYW1ldGVycy5maWVsZE9iamVjdHM7XG4gICAgdGhpcy5fbW91c2VTdGF0ZSA9IHBhcmFtZXRlcnMubW91c2VTdGF0ZTtcblxuICAgIGlmIChpc1JlbmRlcmFibGUpIHtcbiAgICAgIHRoaXMuY29udGFpbmVyID0gdGhpcy5fY3JlYXRlQ29udGFpbmVyKGlnbm9yZUJvcmRlcik7XG4gICAgfVxuICAgIGlmIChjcmVhdGVRdWFkcmlsYXRlcmFscykge1xuICAgICAgdGhpcy5xdWFkcmlsYXRlcmFscyA9IHRoaXMuX2NyZWF0ZVF1YWRyaWxhdGVyYWxzKGlnbm9yZUJvcmRlcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBlbXB0eSBjb250YWluZXIgZm9yIHRoZSBhbm5vdGF0aW9uJ3MgSFRNTCBlbGVtZW50LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlnbm9yZUJvcmRlclxuICAgKiBAbWVtYmVyb2YgQW5ub3RhdGlvbkVsZW1lbnRcbiAgICogQHJldHVybnMge0hUTUxTZWN0aW9uRWxlbWVudH1cbiAgICovXG4gIF9jcmVhdGVDb250YWluZXIoaWdub3JlQm9yZGVyID0gZmFsc2UpIHtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhLFxuICAgICAgcGFnZSA9IHRoaXMucGFnZSxcbiAgICAgIHZpZXdwb3J0ID0gdGhpcy52aWV3cG9ydDtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VjdGlvblwiKTtcbiAgICBsZXQgeyB3aWR0aCwgaGVpZ2h0IH0gPSBnZXRSZWN0RGltcyhkYXRhLnJlY3QpO1xuXG4gICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZShcImRhdGEtYW5ub3RhdGlvbi1pZFwiLCBkYXRhLmlkKTtcblxuICAgIC8vIERvICpub3QqIG1vZGlmeSBgZGF0YS5yZWN0YCwgc2luY2UgdGhhdCB3aWxsIGNvcnJ1cHQgdGhlIGFubm90YXRpb25cbiAgICAvLyBwb3NpdGlvbiBvbiBzdWJzZXF1ZW50IGNhbGxzIHRvIGBfY3JlYXRlQ29udGFpbmVyYCAoc2VlIGlzc3VlIDY4MDQpLlxuICAgIGNvbnN0IHJlY3QgPSBVdGlsLm5vcm1hbGl6ZVJlY3QoW1xuICAgICAgZGF0YS5yZWN0WzBdLFxuICAgICAgcGFnZS52aWV3WzNdIC0gZGF0YS5yZWN0WzFdICsgcGFnZS52aWV3WzFdLFxuICAgICAgZGF0YS5yZWN0WzJdLFxuICAgICAgcGFnZS52aWV3WzNdIC0gZGF0YS5yZWN0WzNdICsgcGFnZS52aWV3WzFdLFxuICAgIF0pO1xuXG4gICAgaWYgKGRhdGEuaGFzT3duQ2FudmFzKSB7XG4gICAgICBjb25zdCB0cmFuc2Zvcm0gPSB2aWV3cG9ydC50cmFuc2Zvcm0uc2xpY2UoKTtcbiAgICAgIGNvbnN0IFtzY2FsZVgsIHNjYWxlWV0gPSBVdGlsLnNpbmd1bGFyVmFsdWVEZWNvbXBvc2UyZFNjYWxlKHRyYW5zZm9ybSk7XG4gICAgICB3aWR0aCA9IE1hdGguY2VpbCh3aWR0aCAqIHNjYWxlWCk7XG4gICAgICBoZWlnaHQgPSBNYXRoLmNlaWwoaGVpZ2h0ICogc2NhbGVZKTtcbiAgICAgIHJlY3RbMF0gKj0gc2NhbGVYO1xuICAgICAgcmVjdFsxXSAqPSBzY2FsZVk7XG4gICAgICAvLyBSZXNldCB0aGUgc2NhbGUgcGFydCBvZiB0aGUgdHJhbnNmb3JtIG1hdHJpeCAod2hpY2ggbXVzdCBiZSBkaWFnb25hbFxuICAgICAgLy8gb3IgYW50aS1kaWFnb25hbCkgaW4gb3JkZXIgdG8gYXZvaWQgdG8gcmVzY2FsZSB0aGUgY2FudmFzLlxuICAgICAgLy8gVGhlIGNhbnZhcyBmb3IgdGhlIGFubm90YXRpb24gaXMgY29ycmVjdGx5IHNjYWxlZCB3aGVuIGl0IGlzIGRyYXduXG4gICAgICAvLyAoc2VlIGBiZWdpbkFubm90YXRpb25gIGluIGNhbnZhcy5qcykuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICB0cmFuc2Zvcm1baV0gPSBNYXRoLnNpZ24odHJhbnNmb3JtW2ldKTtcbiAgICAgIH1cbiAgICAgIGNvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSBgbWF0cml4KCR7dHJhbnNmb3JtLmpvaW4oXCIsXCIpfSlgO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gYG1hdHJpeCgke3ZpZXdwb3J0LnRyYW5zZm9ybS5qb2luKFwiLFwiKX0pYDtcbiAgICB9XG5cbiAgICBjb250YWluZXIuc3R5bGUudHJhbnNmb3JtT3JpZ2luID0gYCR7LXJlY3RbMF19cHggJHstcmVjdFsxXX1weGA7XG5cbiAgICBpZiAoIWlnbm9yZUJvcmRlciAmJiBkYXRhLmJvcmRlclN0eWxlLndpZHRoID4gMCkge1xuICAgICAgY29udGFpbmVyLnN0eWxlLmJvcmRlcldpZHRoID0gYCR7ZGF0YS5ib3JkZXJTdHlsZS53aWR0aH1weGA7XG4gICAgICBpZiAoZGF0YS5ib3JkZXJTdHlsZS5zdHlsZSAhPT0gQW5ub3RhdGlvbkJvcmRlclN0eWxlVHlwZS5VTkRFUkxJTkUpIHtcbiAgICAgICAgLy8gVW5kZXJsaW5lIHN0eWxlcyBvbmx5IGhhdmUgYSBib3R0b20gYm9yZGVyLCBzbyB3ZSBkbyBub3QgbmVlZFxuICAgICAgICAvLyB0byBhZGp1c3QgZm9yIGFsbCBib3JkZXJzLiBUaGlzIHlpZWxkcyBhIHNpbWlsYXIgcmVzdWx0IGFzXG4gICAgICAgIC8vIEFkb2JlIEFjcm9iYXQvUmVhZGVyLlxuICAgICAgICB3aWR0aCAtPSAyICogZGF0YS5ib3JkZXJTdHlsZS53aWR0aDtcbiAgICAgICAgaGVpZ2h0IC09IDIgKiBkYXRhLmJvcmRlclN0eWxlLndpZHRoO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBob3Jpem9udGFsUmFkaXVzID0gZGF0YS5ib3JkZXJTdHlsZS5ob3Jpem9udGFsQ29ybmVyUmFkaXVzO1xuICAgICAgY29uc3QgdmVydGljYWxSYWRpdXMgPSBkYXRhLmJvcmRlclN0eWxlLnZlcnRpY2FsQ29ybmVyUmFkaXVzO1xuICAgICAgaWYgKGhvcml6b250YWxSYWRpdXMgPiAwIHx8IHZlcnRpY2FsUmFkaXVzID4gMCkge1xuICAgICAgICBjb25zdCByYWRpdXMgPSBgJHtob3Jpem9udGFsUmFkaXVzfXB4IC8gJHt2ZXJ0aWNhbFJhZGl1c31weGA7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSByYWRpdXM7XG4gICAgICB9XG5cbiAgICAgIHN3aXRjaCAoZGF0YS5ib3JkZXJTdHlsZS5zdHlsZSkge1xuICAgICAgICBjYXNlIEFubm90YXRpb25Cb3JkZXJTdHlsZVR5cGUuU09MSUQ6XG4gICAgICAgICAgY29udGFpbmVyLnN0eWxlLmJvcmRlclN0eWxlID0gXCJzb2xpZFwiO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQW5ub3RhdGlvbkJvcmRlclN0eWxlVHlwZS5EQVNIRUQ6XG4gICAgICAgICAgY29udGFpbmVyLnN0eWxlLmJvcmRlclN0eWxlID0gXCJkYXNoZWRcIjtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIEFubm90YXRpb25Cb3JkZXJTdHlsZVR5cGUuQkVWRUxFRDpcbiAgICAgICAgICB3YXJuKFwiVW5pbXBsZW1lbnRlZCBib3JkZXIgc3R5bGU6IGJldmVsZWRcIik7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBBbm5vdGF0aW9uQm9yZGVyU3R5bGVUeXBlLklOU0VUOlxuICAgICAgICAgIHdhcm4oXCJVbmltcGxlbWVudGVkIGJvcmRlciBzdHlsZTogaW5zZXRcIik7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBBbm5vdGF0aW9uQm9yZGVyU3R5bGVUeXBlLlVOREVSTElORTpcbiAgICAgICAgICBjb250YWluZXIuc3R5bGUuYm9yZGVyQm90dG9tU3R5bGUgPSBcInNvbGlkXCI7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY29uc3QgYm9yZGVyQ29sb3IgPSBkYXRhLmJvcmRlckNvbG9yIHx8IGRhdGEuY29sb3IgfHwgbnVsbDtcbiAgICAgIGlmIChib3JkZXJDb2xvcikge1xuICAgICAgICBjb250YWluZXIuc3R5bGUuYm9yZGVyQ29sb3IgPSBVdGlsLm1ha2VIZXhDb2xvcihcbiAgICAgICAgICBkYXRhLmNvbG9yWzBdIHwgMCxcbiAgICAgICAgICBkYXRhLmNvbG9yWzFdIHwgMCxcbiAgICAgICAgICBkYXRhLmNvbG9yWzJdIHwgMFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVHJhbnNwYXJlbnQgKGludmlzaWJsZSkgYm9yZGVyLCBzbyBkbyBub3QgZHJhdyBpdCBhdCBhbGwuXG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5ib3JkZXJXaWR0aCA9IDA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29udGFpbmVyLnN0eWxlLmxlZnQgPSBgJHtyZWN0WzBdfXB4YDtcbiAgICBjb250YWluZXIuc3R5bGUudG9wID0gYCR7cmVjdFsxXX1weGA7XG5cbiAgICBpZiAoZGF0YS5oYXNPd25DYW52YXMpIHtcbiAgICAgIGNvbnRhaW5lci5zdHlsZS53aWR0aCA9IGNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBcImF1dG9cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGFpbmVyLnN0eWxlLndpZHRoID0gYCR7d2lkdGh9cHhgO1xuICAgICAgY29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH1weGA7XG4gICAgfVxuICAgIHJldHVybiBjb250YWluZXI7XG4gIH1cblxuICBnZXQgX2NvbW1vbkFjdGlvbnMoKSB7XG4gICAgY29uc3Qgc2V0Q29sb3IgPSAoanNOYW1lLCBzdHlsZU5hbWUsIGV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBjb2xvciA9IGV2ZW50LmRldGFpbFtqc05hbWVdO1xuICAgICAgZXZlbnQudGFyZ2V0LnN0eWxlW3N0eWxlTmFtZV0gPSBDb2xvckNvbnZlcnRlcnNbYCR7Y29sb3JbMF19X0hUTUxgXShcbiAgICAgICAgY29sb3Iuc2xpY2UoMSlcbiAgICAgICk7XG4gICAgfTtcblxuICAgIHJldHVybiBzaGFkb3codGhpcywgXCJfY29tbW9uQWN0aW9uc1wiLCB7XG4gICAgICBkaXNwbGF5OiBldmVudCA9PiB7XG4gICAgICAgIGNvbnN0IGhpZGRlbiA9IGV2ZW50LmRldGFpbC5kaXNwbGF5ICUgMiA9PT0gMTtcbiAgICAgICAgZXZlbnQudGFyZ2V0LnN0eWxlLnZpc2liaWxpdHkgPSBoaWRkZW4gPyBcImhpZGRlblwiIDogXCJ2aXNpYmxlXCI7XG4gICAgICAgIHRoaXMuYW5ub3RhdGlvblN0b3JhZ2Uuc2V0VmFsdWUodGhpcy5kYXRhLmlkLCB7XG4gICAgICAgICAgaGlkZGVuLFxuICAgICAgICAgIHByaW50OiBldmVudC5kZXRhaWwuZGlzcGxheSA9PT0gMCB8fCBldmVudC5kZXRhaWwuZGlzcGxheSA9PT0gMyxcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgcHJpbnQ6IGV2ZW50ID0+IHtcbiAgICAgICAgdGhpcy5hbm5vdGF0aW9uU3RvcmFnZS5zZXRWYWx1ZSh0aGlzLmRhdGEuaWQsIHtcbiAgICAgICAgICBwcmludDogZXZlbnQuZGV0YWlsLnByaW50LFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBoaWRkZW46IGV2ZW50ID0+IHtcbiAgICAgICAgZXZlbnQudGFyZ2V0LnN0eWxlLnZpc2liaWxpdHkgPSBldmVudC5kZXRhaWwuaGlkZGVuXG4gICAgICAgICAgPyBcImhpZGRlblwiXG4gICAgICAgICAgOiBcInZpc2libGVcIjtcbiAgICAgICAgdGhpcy5hbm5vdGF0aW9uU3RvcmFnZS5zZXRWYWx1ZSh0aGlzLmRhdGEuaWQsIHtcbiAgICAgICAgICBoaWRkZW46IGV2ZW50LmRldGFpbC5oaWRkZW4sXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGZvY3VzOiBldmVudCA9PiB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZXZlbnQudGFyZ2V0LmZvY3VzKHsgcHJldmVudFNjcm9sbDogZmFsc2UgfSksIDApO1xuICAgICAgfSxcbiAgICAgIHVzZXJOYW1lOiBldmVudCA9PiB7XG4gICAgICAgIC8vIHRvb2x0aXBcbiAgICAgICAgZXZlbnQudGFyZ2V0LnRpdGxlID0gZXZlbnQuZGV0YWlsLnVzZXJOYW1lO1xuICAgICAgfSxcbiAgICAgIHJlYWRvbmx5OiBldmVudCA9PiB7XG4gICAgICAgIGlmIChldmVudC5kZXRhaWwucmVhZG9ubHkpIHtcbiAgICAgICAgICBldmVudC50YXJnZXQuc2V0QXR0cmlidXRlKFwicmVhZG9ubHlcIiwgXCJcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZXZlbnQudGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZShcInJlYWRvbmx5XCIpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcmVxdWlyZWQ6IGV2ZW50ID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmRldGFpbC5yZXF1aXJlZCkge1xuICAgICAgICAgIGV2ZW50LnRhcmdldC5zZXRBdHRyaWJ1dGUoXCJyZXF1aXJlZFwiLCBcIlwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBldmVudC50YXJnZXQucmVtb3ZlQXR0cmlidXRlKFwicmVxdWlyZWRcIik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBiZ0NvbG9yOiBldmVudCA9PiB7XG4gICAgICAgIHNldENvbG9yKFwiYmdDb2xvclwiLCBcImJhY2tncm91bmRDb2xvclwiLCBldmVudCk7XG4gICAgICB9LFxuICAgICAgZmlsbENvbG9yOiBldmVudCA9PiB7XG4gICAgICAgIHNldENvbG9yKFwiZmlsbENvbG9yXCIsIFwiYmFja2dyb3VuZENvbG9yXCIsIGV2ZW50KTtcbiAgICAgIH0sXG4gICAgICBmZ0NvbG9yOiBldmVudCA9PiB7XG4gICAgICAgIHNldENvbG9yKFwiZmdDb2xvclwiLCBcImNvbG9yXCIsIGV2ZW50KTtcbiAgICAgIH0sXG4gICAgICB0ZXh0Q29sb3I6IGV2ZW50ID0+IHtcbiAgICAgICAgc2V0Q29sb3IoXCJ0ZXh0Q29sb3JcIiwgXCJjb2xvclwiLCBldmVudCk7XG4gICAgICB9LFxuICAgICAgYm9yZGVyQ29sb3I6IGV2ZW50ID0+IHtcbiAgICAgICAgc2V0Q29sb3IoXCJib3JkZXJDb2xvclwiLCBcImJvcmRlckNvbG9yXCIsIGV2ZW50KTtcbiAgICAgIH0sXG4gICAgICBzdHJva2VDb2xvcjogZXZlbnQgPT4ge1xuICAgICAgICBzZXRDb2xvcihcInN0cm9rZUNvbG9yXCIsIFwiYm9yZGVyQ29sb3JcIiwgZXZlbnQpO1xuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIF9kaXNwYXRjaEV2ZW50RnJvbVNhbmRib3goYWN0aW9ucywganNFdmVudCkge1xuICAgIGNvbnN0IGNvbW1vbkFjdGlvbnMgPSB0aGlzLl9jb21tb25BY3Rpb25zO1xuICAgIGZvciAoY29uc3QgbmFtZSBvZiBPYmplY3Qua2V5cyhqc0V2ZW50LmRldGFpbCkpIHtcbiAgICAgIGNvbnN0IGFjdGlvbiA9IGFjdGlvbnNbbmFtZV0gfHwgY29tbW9uQWN0aW9uc1tuYW1lXTtcbiAgICAgIGlmIChhY3Rpb24pIHtcbiAgICAgICAgYWN0aW9uKGpzRXZlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9zZXREZWZhdWx0UHJvcGVydGllc0Zyb21KUyhlbGVtZW50KSB7XG4gICAgaWYgKCF0aGlzLmVuYWJsZVNjcmlwdGluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFNvbWUgcHJvcGVydGllcyBtYXkgaGF2ZSBiZWVuIHVwZGF0ZWQgdGhhbmtzIHRvIEpTLlxuICAgIGNvbnN0IHN0b3JlZERhdGEgPSB0aGlzLmFubm90YXRpb25TdG9yYWdlLmdldFJhd1ZhbHVlKHRoaXMuZGF0YS5pZCk7XG4gICAgaWYgKCFzdG9yZWREYXRhKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY29tbW9uQWN0aW9ucyA9IHRoaXMuX2NvbW1vbkFjdGlvbnM7XG4gICAgZm9yIChjb25zdCBbYWN0aW9uTmFtZSwgZGV0YWlsXSBvZiBPYmplY3QuZW50cmllcyhzdG9yZWREYXRhKSkge1xuICAgICAgY29uc3QgYWN0aW9uID0gY29tbW9uQWN0aW9uc1thY3Rpb25OYW1lXTtcbiAgICAgIGlmIChhY3Rpb24pIHtcbiAgICAgICAgYWN0aW9uKHsgZGV0YWlsLCB0YXJnZXQ6IGVsZW1lbnQgfSk7XG4gICAgICAgIC8vIFRoZSBhY3Rpb24gaGFzIGJlZW4gY29uc3VtZWQ6IG5vIG5lZWQgdG8ga2VlcCBpdC5cbiAgICAgICAgZGVsZXRlIHN0b3JlZERhdGFbYWN0aW9uTmFtZV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBxdWFkcmlsYXRlcmFscyBmcm9tIHRoZSBhbm5vdGF0aW9uJ3MgcXVhZHBvaW50cy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtib29sZWFufSBpZ25vcmVCb3JkZXJcbiAgICogQG1lbWJlcm9mIEFubm90YXRpb25FbGVtZW50XG4gICAqIEByZXR1cm5zIHtBcnJheTxIVE1MU2VjdGlvbkVsZW1lbnQ+fVxuICAgKi9cbiAgX2NyZWF0ZVF1YWRyaWxhdGVyYWxzKGlnbm9yZUJvcmRlciA9IGZhbHNlKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEucXVhZFBvaW50cykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgcXVhZHJpbGF0ZXJhbHMgPSBbXTtcbiAgICBjb25zdCBzYXZlZFJlY3QgPSB0aGlzLmRhdGEucmVjdDtcbiAgICBmb3IgKGNvbnN0IHF1YWRQb2ludCBvZiB0aGlzLmRhdGEucXVhZFBvaW50cykge1xuICAgICAgdGhpcy5kYXRhLnJlY3QgPSBbXG4gICAgICAgIHF1YWRQb2ludFsyXS54LFxuICAgICAgICBxdWFkUG9pbnRbMl0ueSxcbiAgICAgICAgcXVhZFBvaW50WzFdLngsXG4gICAgICAgIHF1YWRQb2ludFsxXS55LFxuICAgICAgXTtcbiAgICAgIHF1YWRyaWxhdGVyYWxzLnB1c2godGhpcy5fY3JlYXRlQ29udGFpbmVyKGlnbm9yZUJvcmRlcikpO1xuICAgIH1cbiAgICB0aGlzLmRhdGEucmVjdCA9IHNhdmVkUmVjdDtcbiAgICByZXR1cm4gcXVhZHJpbGF0ZXJhbHM7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgcG9wdXAgZm9yIHRoZSBhbm5vdGF0aW9uJ3MgSFRNTCBlbGVtZW50LiBUaGlzIGlzIHVzZWQgZm9yXG4gICAqIGFubm90YXRpb25zIHRoYXQgZG8gbm90IGhhdmUgYSBQb3B1cCBlbnRyeSBpbiB0aGUgZGljdGlvbmFyeSwgYnV0XG4gICAqIGFyZSBvZiBhIHR5cGUgdGhhdCB3b3JrcyB3aXRoIHBvcHVwcyAoc3VjaCBhcyBIaWdobGlnaHQgYW5ub3RhdGlvbnMpLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0hUTUxEaXZFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8bnVsbH0gdHJpZ2dlclxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgKiBAbWVtYmVyb2YgQW5ub3RhdGlvbkVsZW1lbnRcbiAgICovXG4gIF9jcmVhdGVQb3B1cCh0cmlnZ2VyLCBkYXRhKSB7XG4gICAgbGV0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyO1xuICAgIGlmICh0aGlzLnF1YWRyaWxhdGVyYWxzKSB7XG4gICAgICB0cmlnZ2VyID0gdHJpZ2dlciB8fCB0aGlzLnF1YWRyaWxhdGVyYWxzO1xuICAgICAgY29udGFpbmVyID0gdGhpcy5xdWFkcmlsYXRlcmFsc1swXTtcbiAgICB9XG5cbiAgICAvLyBJZiBubyB0cmlnZ2VyIGVsZW1lbnQgaXMgc3BlY2lmaWVkLCBjcmVhdGUgaXQuXG4gICAgaWYgKCF0cmlnZ2VyKSB7XG4gICAgICB0cmlnZ2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHRyaWdnZXIuc3R5bGUuaGVpZ2h0ID0gY29udGFpbmVyLnN0eWxlLmhlaWdodDtcbiAgICAgIHRyaWdnZXIuc3R5bGUud2lkdGggPSBjb250YWluZXIuc3R5bGUud2lkdGg7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodHJpZ2dlcik7XG4gICAgfVxuXG4gICAgY29uc3QgcG9wdXBFbGVtZW50ID0gbmV3IFBvcHVwRWxlbWVudCh7XG4gICAgICBjb250YWluZXIsXG4gICAgICB0cmlnZ2VyLFxuICAgICAgY29sb3I6IGRhdGEuY29sb3IsXG4gICAgICB0aXRsZU9iajogZGF0YS50aXRsZU9iaixcbiAgICAgIG1vZGlmaWNhdGlvbkRhdGU6IGRhdGEubW9kaWZpY2F0aW9uRGF0ZSxcbiAgICAgIGNvbnRlbnRzT2JqOiBkYXRhLmNvbnRlbnRzT2JqLFxuICAgICAgcmljaFRleHQ6IGRhdGEucmljaFRleHQsXG4gICAgICBoaWRlV3JhcHBlcjogdHJ1ZSxcbiAgICB9KTtcbiAgICBjb25zdCBwb3B1cCA9IHBvcHVwRWxlbWVudC5yZW5kZXIoKTtcblxuICAgIC8vIFBvc2l0aW9uIHRoZSBwb3B1cCBuZXh0IHRvIHRoZSBhbm5vdGF0aW9uJ3MgY29udGFpbmVyLlxuICAgIHBvcHVwLnN0eWxlLmxlZnQgPSBjb250YWluZXIuc3R5bGUud2lkdGg7XG5cbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocG9wdXApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlciB0aGUgcXVhZHJpbGF0ZXJhbHMgb2YgdGhlIGFubm90YXRpb24uXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWVcbiAgICogQG1lbWJlcm9mIEFubm90YXRpb25FbGVtZW50XG4gICAqIEByZXR1cm5zIHtBcnJheTxIVE1MU2VjdGlvbkVsZW1lbnQ+fVxuICAgKi9cbiAgX3JlbmRlclF1YWRyaWxhdGVyYWxzKGNsYXNzTmFtZSkge1xuICAgIGlmIChcbiAgICAgIHR5cGVvZiBQREZKU0RldiA9PT0gXCJ1bmRlZmluZWRcIiB8fFxuICAgICAgUERGSlNEZXYudGVzdChcIiFQUk9EVUNUSU9OIHx8IFRFU1RJTkdcIilcbiAgICApIHtcbiAgICAgIGFzc2VydCh0aGlzLnF1YWRyaWxhdGVyYWxzLCBcIk1pc3NpbmcgcXVhZHJpbGF0ZXJhbHMgZHVyaW5nIHJlbmRlcmluZ1wiKTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHF1YWRyaWxhdGVyYWwgb2YgdGhpcy5xdWFkcmlsYXRlcmFscykge1xuICAgICAgcXVhZHJpbGF0ZXJhbC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnF1YWRyaWxhdGVyYWxzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlciB0aGUgYW5ub3RhdGlvbidzIEhUTUwgZWxlbWVudChzKS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWVtYmVyb2YgQW5ub3RhdGlvbkVsZW1lbnRcbiAgICogQHJldHVybnMge0hUTUxTZWN0aW9uRWxlbWVudHxBcnJheTxIVE1MU2VjdGlvbkVsZW1lbnQ+fVxuICAgKi9cbiAgcmVuZGVyKCkge1xuICAgIHVucmVhY2hhYmxlKFwiQWJzdHJhY3QgbWV0aG9kIGBBbm5vdGF0aW9uRWxlbWVudC5yZW5kZXJgIGNhbGxlZFwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJucyB7QXJyYXl9XG4gICAqL1xuICBfZ2V0RWxlbWVudHNCeU5hbWUobmFtZSwgc2tpcElkID0gbnVsbCkge1xuICAgIGNvbnN0IGZpZWxkcyA9IFtdO1xuXG4gICAgaWYgKHRoaXMuX2ZpZWxkT2JqZWN0cykge1xuICAgICAgY29uc3QgZmllbGRPYmogPSB0aGlzLl9maWVsZE9iamVjdHNbbmFtZV07XG4gICAgICBpZiAoZmllbGRPYmopIHtcbiAgICAgICAgZm9yIChjb25zdCB7IHBhZ2UsIGlkLCBleHBvcnRWYWx1ZXMgfSBvZiBmaWVsZE9iaikge1xuICAgICAgICAgIGlmIChwYWdlID09PSAtMSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpZCA9PT0gc2tpcElkKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZXhwb3J0VmFsdWUgPVxuICAgICAgICAgICAgdHlwZW9mIGV4cG9ydFZhbHVlcyA9PT0gXCJzdHJpbmdcIiA/IGV4cG9ydFZhbHVlcyA6IG51bGw7XG5cbiAgICAgICAgICBjb25zdCBkb21FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgICAgICAgIGlmIChkb21FbGVtZW50ICYmICFHZXRFbGVtZW50c0J5TmFtZVNldC5oYXMoZG9tRWxlbWVudCkpIHtcbiAgICAgICAgICAgIHdhcm4oYF9nZXRFbGVtZW50c0J5TmFtZSAtIGVsZW1lbnQgbm90IGFsbG93ZWQ6ICR7aWR9YCk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZmllbGRzLnB1c2goeyBpZCwgZXhwb3J0VmFsdWUsIGRvbUVsZW1lbnQgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmaWVsZHM7XG4gICAgfVxuICAgIC8vIEZhbGxiYWNrIHRvIGEgcmVndWxhciBET00gbG9va3VwLCB0byBlbnN1cmUgdGhhdCB0aGUgc3RhbmRhbG9uZVxuICAgIC8vIHZpZXdlciBjb21wb25lbnRzIHdvbid0IGJyZWFrLlxuICAgIGZvciAoY29uc3QgZG9tRWxlbWVudCBvZiBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShuYW1lKSkge1xuICAgICAgY29uc3QgeyBpZCwgZXhwb3J0VmFsdWUgfSA9IGRvbUVsZW1lbnQ7XG4gICAgICBpZiAoaWQgPT09IHNraXBJZCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICghR2V0RWxlbWVudHNCeU5hbWVTZXQuaGFzKGRvbUVsZW1lbnQpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgZmllbGRzLnB1c2goeyBpZCwgZXhwb3J0VmFsdWUsIGRvbUVsZW1lbnQgfSk7XG4gICAgfVxuICAgIHJldHVybiBmaWVsZHM7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHBsYXRmb3JtKCkge1xuICAgIGNvbnN0IHBsYXRmb3JtID0gdHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiA/IG5hdmlnYXRvci5wbGF0Zm9ybSA6IFwiXCI7XG5cbiAgICByZXR1cm4gc2hhZG93KHRoaXMsIFwicGxhdGZvcm1cIiwge1xuICAgICAgaXNXaW46IHBsYXRmb3JtLmluY2x1ZGVzKFwiV2luXCIpLFxuICAgICAgaXNNYWM6IHBsYXRmb3JtLmluY2x1ZGVzKFwiTWFjXCIpLFxuICAgIH0pO1xuICB9XG59XG5cbmNsYXNzIExpbmtBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycywgb3B0aW9ucyA9IG51bGwpIHtcbiAgICBjb25zdCBpc1JlbmRlcmFibGUgPSAhIShcbiAgICAgIHBhcmFtZXRlcnMuZGF0YS51cmwgfHxcbiAgICAgIHBhcmFtZXRlcnMuZGF0YS5kZXN0IHx8XG4gICAgICBwYXJhbWV0ZXJzLmRhdGEuYWN0aW9uIHx8XG4gICAgICBwYXJhbWV0ZXJzLmRhdGEuaXNUb29sdGlwT25seSB8fFxuICAgICAgcGFyYW1ldGVycy5kYXRhLnJlc2V0Rm9ybSB8fFxuICAgICAgKHBhcmFtZXRlcnMuZGF0YS5hY3Rpb25zICYmXG4gICAgICAgIChwYXJhbWV0ZXJzLmRhdGEuYWN0aW9ucy5BY3Rpb24gfHxcbiAgICAgICAgICBwYXJhbWV0ZXJzLmRhdGEuYWN0aW9uc1tcIk1vdXNlIFVwXCJdIHx8XG4gICAgICAgICAgcGFyYW1ldGVycy5kYXRhLmFjdGlvbnNbXCJNb3VzZSBEb3duXCJdKSlcbiAgICApO1xuICAgIHN1cGVyKHBhcmFtZXRlcnMsIHtcbiAgICAgIGlzUmVuZGVyYWJsZSxcbiAgICAgIGlnbm9yZUJvcmRlcjogISFvcHRpb25zPy5pZ25vcmVCb3JkZXIsXG4gICAgICBjcmVhdGVRdWFkcmlsYXRlcmFsczogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGRhdGEsIGxpbmtTZXJ2aWNlIH0gPSB0aGlzO1xuICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcblxuICAgIGlmIChkYXRhLnVybCkge1xuICAgICAgbGlua1NlcnZpY2UuYWRkTGlua0F0dHJpYnV0ZXMobGluaywgZGF0YS51cmwsIGRhdGEubmV3V2luZG93KTtcbiAgICB9IGVsc2UgaWYgKGRhdGEuYWN0aW9uKSB7XG4gICAgICB0aGlzLl9iaW5kTmFtZWRBY3Rpb24obGluaywgZGF0YS5hY3Rpb24pO1xuICAgIH0gZWxzZSBpZiAoZGF0YS5kZXN0KSB7XG4gICAgICB0aGlzLl9iaW5kTGluayhsaW5rLCBkYXRhLmRlc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgaGFzQ2xpY2tBY3Rpb24gPSBmYWxzZTtcbiAgICAgIGlmIChcbiAgICAgICAgZGF0YS5hY3Rpb25zICYmXG4gICAgICAgIChkYXRhLmFjdGlvbnMuQWN0aW9uIHx8XG4gICAgICAgICAgZGF0YS5hY3Rpb25zW1wiTW91c2UgVXBcIl0gfHxcbiAgICAgICAgICBkYXRhLmFjdGlvbnNbXCJNb3VzZSBEb3duXCJdKSAmJlxuICAgICAgICB0aGlzLmVuYWJsZVNjcmlwdGluZyAmJlxuICAgICAgICB0aGlzLmhhc0pTQWN0aW9uc1xuICAgICAgKSB7XG4gICAgICAgIGhhc0NsaWNrQWN0aW9uID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fYmluZEpTQWN0aW9uKGxpbmssIGRhdGEpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGF0YS5yZXNldEZvcm0pIHtcbiAgICAgICAgdGhpcy5fYmluZFJlc2V0Rm9ybUFjdGlvbihsaW5rLCBkYXRhLnJlc2V0Rm9ybSk7XG4gICAgICB9IGVsc2UgaWYgKCFoYXNDbGlja0FjdGlvbikge1xuICAgICAgICB0aGlzLl9iaW5kTGluayhsaW5rLCBcIlwiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5xdWFkcmlsYXRlcmFscykge1xuICAgICAgcmV0dXJuIHRoaXMuX3JlbmRlclF1YWRyaWxhdGVyYWxzKFwibGlua0Fubm90YXRpb25cIikubWFwKFxuICAgICAgICAocXVhZHJpbGF0ZXJhbCwgaW5kZXgpID0+IHtcbiAgICAgICAgICBjb25zdCBsaW5rRWxlbWVudCA9IGluZGV4ID09PSAwID8gbGluayA6IGxpbmsuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgcXVhZHJpbGF0ZXJhbC5hcHBlbmRDaGlsZChsaW5rRWxlbWVudCk7XG4gICAgICAgICAgcmV0dXJuIHF1YWRyaWxhdGVyYWw7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NOYW1lID0gXCJsaW5rQW5ub3RhdGlvblwiO1xuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKGxpbmspO1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBCaW5kIGludGVybmFsIGxpbmtzIHRvIHRoZSBsaW5rIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBsaW5rXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkZXN0aW5hdGlvblxuICAgKiBAbWVtYmVyb2YgTGlua0Fubm90YXRpb25FbGVtZW50XG4gICAqL1xuICBfYmluZExpbmsobGluaywgZGVzdGluYXRpb24pIHtcbiAgICBsaW5rLmhyZWYgPSB0aGlzLmxpbmtTZXJ2aWNlLmdldERlc3RpbmF0aW9uSGFzaChkZXN0aW5hdGlvbik7XG4gICAgbGluay5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgaWYgKGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIHRoaXMubGlua1NlcnZpY2UuZ29Ub0Rlc3RpbmF0aW9uKGRlc3RpbmF0aW9uKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIGlmIChkZXN0aW5hdGlvbiB8fCBkZXN0aW5hdGlvbiA9PT0gLyogaXNUb29sdGlwT25seSA9ICovIFwiXCIpIHtcbiAgICAgIGxpbmsuY2xhc3NOYW1lID0gXCJpbnRlcm5hbExpbmtcIjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQmluZCBuYW1lZCBhY3Rpb25zIHRvIHRoZSBsaW5rIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBsaW5rXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhY3Rpb25cbiAgICogQG1lbWJlcm9mIExpbmtBbm5vdGF0aW9uRWxlbWVudFxuICAgKi9cbiAgX2JpbmROYW1lZEFjdGlvbihsaW5rLCBhY3Rpb24pIHtcbiAgICBsaW5rLmhyZWYgPSB0aGlzLmxpbmtTZXJ2aWNlLmdldEFuY2hvclVybChcIlwiKTtcbiAgICBsaW5rLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICB0aGlzLmxpbmtTZXJ2aWNlLmV4ZWN1dGVOYW1lZEFjdGlvbihhY3Rpb24pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgbGluay5jbGFzc05hbWUgPSBcImludGVybmFsTGlua1wiO1xuICB9XG5cbiAgLyoqXG4gICAqIEJpbmQgSlMgYWN0aW9ucyB0byB0aGUgbGluayBlbGVtZW50LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gbGlua1xuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgKiBAbWVtYmVyb2YgTGlua0Fubm90YXRpb25FbGVtZW50XG4gICAqL1xuICBfYmluZEpTQWN0aW9uKGxpbmssIGRhdGEpIHtcbiAgICBsaW5rLmhyZWYgPSB0aGlzLmxpbmtTZXJ2aWNlLmdldEFuY2hvclVybChcIlwiKTtcbiAgICBjb25zdCBtYXAgPSBuZXcgTWFwKFtcbiAgICAgIFtcIkFjdGlvblwiLCBcIm9uY2xpY2tcIl0sXG4gICAgICBbXCJNb3VzZSBVcFwiLCBcIm9ubW91c2V1cFwiXSxcbiAgICAgIFtcIk1vdXNlIERvd25cIiwgXCJvbm1vdXNlZG93blwiXSxcbiAgICBdKTtcbiAgICBmb3IgKGNvbnN0IG5hbWUgb2YgT2JqZWN0LmtleXMoZGF0YS5hY3Rpb25zKSkge1xuICAgICAgY29uc3QganNOYW1lID0gbWFwLmdldChuYW1lKTtcbiAgICAgIGlmICghanNOYW1lKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgbGlua1tqc05hbWVdID0gKCkgPT4ge1xuICAgICAgICB0aGlzLmxpbmtTZXJ2aWNlLmV2ZW50QnVzPy5kaXNwYXRjaChcImRpc3BhdGNoZXZlbnRpbnNhbmRib3hcIiwge1xuICAgICAgICAgIHNvdXJjZTogdGhpcyxcbiAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgIGlkOiBkYXRhLmlkLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoIWxpbmsub25jbGljaykge1xuICAgICAgbGluay5vbmNsaWNrID0gKCkgPT4gZmFsc2U7XG4gICAgfVxuICAgIGxpbmsuY2xhc3NOYW1lID0gXCJpbnRlcm5hbExpbmtcIjtcbiAgfVxuXG4gIF9iaW5kUmVzZXRGb3JtQWN0aW9uKGxpbmssIHJlc2V0Rm9ybSkge1xuICAgIGNvbnN0IG90aGVyQ2xpY2tBY3Rpb24gPSBsaW5rLm9uY2xpY2s7XG4gICAgaWYgKCFvdGhlckNsaWNrQWN0aW9uKSB7XG4gICAgICBsaW5rLmhyZWYgPSB0aGlzLmxpbmtTZXJ2aWNlLmdldEFuY2hvclVybChcIlwiKTtcbiAgICB9XG4gICAgbGluay5jbGFzc05hbWUgPSBcImludGVybmFsTGlua1wiO1xuXG4gICAgaWYgKCF0aGlzLl9maWVsZE9iamVjdHMpIHtcbiAgICAgIHdhcm4oXG4gICAgICAgIGBfYmluZFJlc2V0Rm9ybUFjdGlvbiAtIFwicmVzZXRGb3JtXCIgYWN0aW9uIG5vdCBzdXBwb3J0ZWQsIGAgK1xuICAgICAgICAgIFwiZW5zdXJlIHRoYXQgdGhlIGBmaWVsZE9iamVjdHNgIHBhcmFtZXRlciBpcyBwcm92aWRlZC5cIlxuICAgICAgKTtcbiAgICAgIGlmICghb3RoZXJDbGlja0FjdGlvbikge1xuICAgICAgICBsaW5rLm9uY2xpY2sgPSAoKSA9PiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsaW5rLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICBpZiAob3RoZXJDbGlja0FjdGlvbikge1xuICAgICAgICBvdGhlckNsaWNrQWN0aW9uKCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZmllbGRzOiByZXNldEZvcm1GaWVsZHMsXG4gICAgICAgIHJlZnM6IHJlc2V0Rm9ybVJlZnMsXG4gICAgICAgIGluY2x1ZGUsXG4gICAgICB9ID0gcmVzZXRGb3JtO1xuXG4gICAgICBjb25zdCBhbGxGaWVsZHMgPSBbXTtcbiAgICAgIGlmIChyZXNldEZvcm1GaWVsZHMubGVuZ3RoICE9PSAwIHx8IHJlc2V0Rm9ybVJlZnMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkSWRzID0gbmV3IFNldChyZXNldEZvcm1SZWZzKTtcbiAgICAgICAgZm9yIChjb25zdCBmaWVsZE5hbWUgb2YgcmVzZXRGb3JtRmllbGRzKSB7XG4gICAgICAgICAgY29uc3QgZmllbGRzID0gdGhpcy5fZmllbGRPYmplY3RzW2ZpZWxkTmFtZV0gfHwgW107XG4gICAgICAgICAgZm9yIChjb25zdCB7IGlkIH0gb2YgZmllbGRzKSB7XG4gICAgICAgICAgICBmaWVsZElkcy5hZGQoaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGZpZWxkcyBvZiBPYmplY3QudmFsdWVzKHRoaXMuX2ZpZWxkT2JqZWN0cykpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGZpZWxkcykge1xuICAgICAgICAgICAgaWYgKGZpZWxkSWRzLmhhcyhmaWVsZC5pZCkgPT09IGluY2x1ZGUpIHtcbiAgICAgICAgICAgICAgYWxsRmllbGRzLnB1c2goZmllbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChjb25zdCBmaWVsZHMgb2YgT2JqZWN0LnZhbHVlcyh0aGlzLl9maWVsZE9iamVjdHMpKSB7XG4gICAgICAgICAgYWxsRmllbGRzLnB1c2goLi4uZmllbGRzKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBzdG9yYWdlID0gdGhpcy5hbm5vdGF0aW9uU3RvcmFnZTtcbiAgICAgIGNvbnN0IGFsbElkcyA9IFtdO1xuICAgICAgZm9yIChjb25zdCBmaWVsZCBvZiBhbGxGaWVsZHMpIHtcbiAgICAgICAgY29uc3QgeyBpZCB9ID0gZmllbGQ7XG4gICAgICAgIGFsbElkcy5wdXNoKGlkKTtcbiAgICAgICAgc3dpdGNoIChmaWVsZC50eXBlKSB7XG4gICAgICAgICAgY2FzZSBcInRleHRcIjoge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBmaWVsZC5kZWZhdWx0VmFsdWUgfHwgXCJcIjtcbiAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHsgdmFsdWUgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcImNoZWNrYm94XCI6XG4gICAgICAgICAgY2FzZSBcInJhZGlvYnV0dG9uXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZmllbGQuZGVmYXVsdFZhbHVlID09PSBmaWVsZC5leHBvcnRWYWx1ZXM7XG4gICAgICAgICAgICBzdG9yYWdlLnNldFZhbHVlKGlkLCB7IHZhbHVlIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJjb21ib2JveFwiOlxuICAgICAgICAgIGNhc2UgXCJsaXN0Ym94XCI6IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZmllbGQuZGVmYXVsdFZhbHVlIHx8IFwiXCI7XG4gICAgICAgICAgICBzdG9yYWdlLnNldFZhbHVlKGlkLCB7IHZhbHVlIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkb21FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgICAgICBpZiAoIWRvbUVsZW1lbnQgfHwgIUdldEVsZW1lbnRzQnlOYW1lU2V0Lmhhcyhkb21FbGVtZW50KSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGRvbUVsZW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJyZXNldGZvcm1cIikpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5lbmFibGVTY3JpcHRpbmcpIHtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSB2YWx1ZXMgaW4gdGhlIHNhbmRib3guXG4gICAgICAgIHRoaXMubGlua1NlcnZpY2UuZXZlbnRCdXM/LmRpc3BhdGNoKFwiZGlzcGF0Y2hldmVudGluc2FuZGJveFwiLCB7XG4gICAgICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgaWQ6IFwiYXBwXCIsXG4gICAgICAgICAgICBpZHM6IGFsbElkcyxcbiAgICAgICAgICAgIG5hbWU6IFwiUmVzZXRGb3JtXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICB9XG59XG5cbmNsYXNzIFRleHRBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIGNvbnN0IGlzUmVuZGVyYWJsZSA9ICEhKFxuICAgICAgcGFyYW1ldGVycy5kYXRhLmhhc1BvcHVwIHx8XG4gICAgICBwYXJhbWV0ZXJzLmRhdGEudGl0bGVPYmo/LnN0ciB8fFxuICAgICAgcGFyYW1ldGVycy5kYXRhLmNvbnRlbnRzT2JqPy5zdHIgfHxcbiAgICAgIHBhcmFtZXRlcnMuZGF0YS5yaWNoVGV4dD8uc3RyXG4gICAgKTtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7IGlzUmVuZGVyYWJsZSB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc05hbWUgPSBcInRleHRBbm5vdGF0aW9uXCI7XG5cbiAgICBjb25zdCBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgaW1hZ2Uuc3R5bGUuaGVpZ2h0ID0gdGhpcy5jb250YWluZXIuc3R5bGUuaGVpZ2h0O1xuICAgIGltYWdlLnN0eWxlLndpZHRoID0gdGhpcy5jb250YWluZXIuc3R5bGUud2lkdGg7XG4gICAgaW1hZ2Uuc3JjID1cbiAgICAgIHRoaXMuaW1hZ2VSZXNvdXJjZXNQYXRoICtcbiAgICAgIFwiYW5ub3RhdGlvbi1cIiArXG4gICAgICB0aGlzLmRhdGEubmFtZS50b0xvd2VyQ2FzZSgpICtcbiAgICAgIFwiLnN2Z1wiO1xuICAgIGltYWdlLmFsdCA9IFwiW3t7dHlwZX19IEFubm90YXRpb25dXCI7XG4gICAgaW1hZ2UuZGF0YXNldC5sMTBuSWQgPSBcInRleHRfYW5ub3RhdGlvbl90eXBlXCI7XG4gICAgaW1hZ2UuZGF0YXNldC5sMTBuQXJncyA9IEpTT04uc3RyaW5naWZ5KHsgdHlwZTogdGhpcy5kYXRhLm5hbWUgfSk7XG5cbiAgICBpZiAoIXRoaXMuZGF0YS5oYXNQb3B1cCkge1xuICAgICAgdGhpcy5fY3JlYXRlUG9wdXAoaW1hZ2UsIHRoaXMuZGF0YSk7XG4gICAgfVxuXG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQoaW1hZ2UpO1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgfVxufVxuXG5jbGFzcyBXaWRnZXRBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgcmVuZGVyKCkge1xuICAgIC8vIFNob3cgb25seSB0aGUgY29udGFpbmVyIGZvciB1bnN1cHBvcnRlZCBmaWVsZCB0eXBlcy5cbiAgICBpZiAodGhpcy5kYXRhLmFsdGVybmF0aXZlVGV4dCkge1xuICAgICAgdGhpcy5jb250YWluZXIudGl0bGUgPSB0aGlzLmRhdGEuYWx0ZXJuYXRpdmVUZXh0O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgfVxuXG4gIF9nZXRLZXlNb2RpZmllcihldmVudCkge1xuICAgIGNvbnN0IHsgaXNXaW4sIGlzTWFjIH0gPSBBbm5vdGF0aW9uRWxlbWVudC5wbGF0Zm9ybTtcbiAgICByZXR1cm4gKGlzV2luICYmIGV2ZW50LmN0cmxLZXkpIHx8IChpc01hYyAmJiBldmVudC5tZXRhS2V5KTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVyKGVsZW1lbnQsIGJhc2VOYW1lLCBldmVudE5hbWUsIHZhbHVlR2V0dGVyKSB7XG4gICAgaWYgKGJhc2VOYW1lLmluY2x1ZGVzKFwibW91c2VcIikpIHtcbiAgICAgIC8vIE1vdXNlIGV2ZW50c1xuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGJhc2VOYW1lLCBldmVudCA9PiB7XG4gICAgICAgIHRoaXMubGlua1NlcnZpY2UuZXZlbnRCdXM/LmRpc3BhdGNoKFwiZGlzcGF0Y2hldmVudGluc2FuZGJveFwiLCB7XG4gICAgICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgaWQ6IHRoaXMuZGF0YS5pZCxcbiAgICAgICAgICAgIG5hbWU6IGV2ZW50TmFtZSxcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZUdldHRlcihldmVudCksXG4gICAgICAgICAgICBzaGlmdDogZXZlbnQuc2hpZnRLZXksXG4gICAgICAgICAgICBtb2RpZmllcjogdGhpcy5fZ2V0S2V5TW9kaWZpZXIoZXZlbnQpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE5vbiBtb3VzZSBldmVudFxuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGJhc2VOYW1lLCBldmVudCA9PiB7XG4gICAgICAgIHRoaXMubGlua1NlcnZpY2UuZXZlbnRCdXM/LmRpc3BhdGNoKFwiZGlzcGF0Y2hldmVudGluc2FuZGJveFwiLCB7XG4gICAgICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgaWQ6IHRoaXMuZGF0YS5pZCxcbiAgICAgICAgICAgIG5hbWU6IGV2ZW50TmFtZSxcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZUdldHRlcihldmVudCksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoZWxlbWVudCwgbmFtZXMsIGdldHRlcikge1xuICAgIGZvciAoY29uc3QgW2Jhc2VOYW1lLCBldmVudE5hbWVdIG9mIG5hbWVzKSB7XG4gICAgICBpZiAoZXZlbnROYW1lID09PSBcIkFjdGlvblwiIHx8IHRoaXMuZGF0YS5hY3Rpb25zPy5bZXZlbnROYW1lXSkge1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVyKGVsZW1lbnQsIGJhc2VOYW1lLCBldmVudE5hbWUsIGdldHRlcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX3NldEJhY2tncm91bmRDb2xvcihlbGVtZW50KSB7XG4gICAgY29uc3QgY29sb3IgPSB0aGlzLmRhdGEuYmFja2dyb3VuZENvbG9yIHx8IG51bGw7XG4gICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPVxuICAgICAgY29sb3IgPT09IG51bGxcbiAgICAgICAgPyBcInRyYW5zcGFyZW50XCJcbiAgICAgICAgOiBVdGlsLm1ha2VIZXhDb2xvcihjb2xvclswXSwgY29sb3JbMV0sIGNvbG9yWzJdKTtcbiAgfVxufVxuXG5jbGFzcyBUZXh0V2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBXaWRnZXRBbm5vdGF0aW9uRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMpIHtcbiAgICBjb25zdCBpc1JlbmRlcmFibGUgPVxuICAgICAgcGFyYW1ldGVycy5yZW5kZXJGb3JtcyB8fFxuICAgICAgKCFwYXJhbWV0ZXJzLmRhdGEuaGFzQXBwZWFyYW5jZSAmJiAhIXBhcmFtZXRlcnMuZGF0YS5maWVsZFZhbHVlKTtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7IGlzUmVuZGVyYWJsZSB9KTtcbiAgfVxuXG4gIHNldFByb3BlcnR5T25TaWJsaW5ncyhiYXNlLCBrZXksIHZhbHVlLCBrZXlJblN0b3JhZ2UpIHtcbiAgICBjb25zdCBzdG9yYWdlID0gdGhpcy5hbm5vdGF0aW9uU3RvcmFnZTtcbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdGhpcy5fZ2V0RWxlbWVudHNCeU5hbWUoXG4gICAgICBiYXNlLm5hbWUsXG4gICAgICAvKiBza2lwSWQgPSAqLyBiYXNlLmlkXG4gICAgKSkge1xuICAgICAgaWYgKGVsZW1lbnQuZG9tRWxlbWVudCkge1xuICAgICAgICBlbGVtZW50LmRvbUVsZW1lbnRba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgICAgc3RvcmFnZS5zZXRWYWx1ZShlbGVtZW50LmlkLCB7IFtrZXlJblN0b3JhZ2VdOiB2YWx1ZSB9KTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qgc3RvcmFnZSA9IHRoaXMuYW5ub3RhdGlvblN0b3JhZ2U7XG4gICAgY29uc3QgaWQgPSB0aGlzLmRhdGEuaWQ7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc05hbWUgPSBcInRleHRXaWRnZXRBbm5vdGF0aW9uXCI7XG5cbiAgICBsZXQgZWxlbWVudCA9IG51bGw7XG4gICAgaWYgKHRoaXMucmVuZGVyRm9ybXMpIHtcbiAgICAgIC8vIE5PVEU6IFdlIGNhbm5vdCBzZXQgdGhlIHZhbHVlcyB1c2luZyBgZWxlbWVudC52YWx1ZWAgYmVsb3csIHNpbmNlIGl0XG4gICAgICAvLyAgICAgICBwcmV2ZW50cyB0aGUgQW5ub3RhdGlvbkxheWVyIHJhc3Rlcml6ZXIgaW4gYHRlc3QvZHJpdmVyLmpzYFxuICAgICAgLy8gICAgICAgZnJvbSBwYXJzaW5nIHRoZSBlbGVtZW50cyBjb3JyZWN0bHkgZm9yIHRoZSByZWZlcmVuY2UgdGVzdHMuXG4gICAgICBjb25zdCBzdG9yZWREYXRhID0gc3RvcmFnZS5nZXRWYWx1ZShpZCwge1xuICAgICAgICB2YWx1ZTogdGhpcy5kYXRhLmZpZWxkVmFsdWUsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHRleHRDb250ZW50ID0gc3RvcmVkRGF0YS5mb3JtYXR0ZWRWYWx1ZSB8fCBzdG9yZWREYXRhLnZhbHVlIHx8IFwiXCI7XG4gICAgICBjb25zdCBlbGVtZW50RGF0YSA9IHtcbiAgICAgICAgdXNlclZhbHVlOiBudWxsLFxuICAgICAgICBmb3JtYXR0ZWRWYWx1ZTogbnVsbCxcbiAgICAgICAgdmFsdWVPbkZvY3VzOiBcIlwiLFxuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMuZGF0YS5tdWx0aUxpbmUpIHtcbiAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtcbiAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IHRleHRDb250ZW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgZWxlbWVudC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgdGV4dENvbnRlbnQpO1xuICAgICAgfVxuICAgICAgR2V0RWxlbWVudHNCeU5hbWVTZXQuYWRkKGVsZW1lbnQpO1xuICAgICAgZWxlbWVudC5kaXNhYmxlZCA9IHRoaXMuZGF0YS5yZWFkT25seTtcbiAgICAgIGVsZW1lbnQubmFtZSA9IHRoaXMuZGF0YS5maWVsZE5hbWU7XG4gICAgICBlbGVtZW50LnRhYkluZGV4ID0gREVGQVVMVF9UQUJfSU5ERVg7XG5cbiAgICAgIGVsZW1lbnREYXRhLnVzZXJWYWx1ZSA9IHRleHRDb250ZW50O1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpZCk7XG5cbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGV2ZW50ID0+IHtcbiAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShpZCwgeyB2YWx1ZTogZXZlbnQudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICB0aGlzLnNldFByb3BlcnR5T25TaWJsaW5ncyhcbiAgICAgICAgICBlbGVtZW50LFxuICAgICAgICAgIFwidmFsdWVcIixcbiAgICAgICAgICBldmVudC50YXJnZXQudmFsdWUsXG4gICAgICAgICAgXCJ2YWx1ZVwiXG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVzZXRmb3JtXCIsIGV2ZW50ID0+IHtcbiAgICAgICAgY29uc3QgZGVmYXVsdFZhbHVlID0gdGhpcy5kYXRhLmRlZmF1bHRGaWVsZFZhbHVlID8/IFwiXCI7XG4gICAgICAgIGVsZW1lbnQudmFsdWUgPSBlbGVtZW50RGF0YS51c2VyVmFsdWUgPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgIGVsZW1lbnREYXRhLmZvcm1hdHRlZFZhbHVlID0gbnVsbDtcbiAgICAgIH0pO1xuXG4gICAgICBsZXQgYmx1ckxpc3RlbmVyID0gZXZlbnQgPT4ge1xuICAgICAgICBjb25zdCB7IGZvcm1hdHRlZFZhbHVlIH0gPSBlbGVtZW50RGF0YTtcbiAgICAgICAgaWYgKGZvcm1hdHRlZFZhbHVlICE9PSBudWxsICYmIGZvcm1hdHRlZFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBldmVudC50YXJnZXQudmFsdWUgPSBmb3JtYXR0ZWRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZXNldCB0aGUgY3Vyc29yIHBvc2l0aW9uIHRvIHRoZSBzdGFydCBvZiB0aGUgZmllbGQgKGlzc3VlIDEyMzU5KS5cbiAgICAgICAgZXZlbnQudGFyZ2V0LnNjcm9sbExlZnQgPSAwO1xuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMuZW5hYmxlU2NyaXB0aW5nICYmIHRoaXMuaGFzSlNBY3Rpb25zKSB7XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIGV2ZW50ID0+IHtcbiAgICAgICAgICBpZiAoZWxlbWVudERhdGEudXNlclZhbHVlKSB7XG4gICAgICAgICAgICBldmVudC50YXJnZXQudmFsdWUgPSBlbGVtZW50RGF0YS51c2VyVmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsZW1lbnREYXRhLnZhbHVlT25Gb2N1cyA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidXBkYXRlZnJvbXNhbmRib3hcIiwganNFdmVudCA9PiB7XG4gICAgICAgICAgY29uc3QgYWN0aW9ucyA9IHtcbiAgICAgICAgICAgIHZhbHVlKGV2ZW50KSB7XG4gICAgICAgICAgICAgIGVsZW1lbnREYXRhLnVzZXJWYWx1ZSA9IGV2ZW50LmRldGFpbC52YWx1ZSA/PyBcIlwiO1xuICAgICAgICAgICAgICBzdG9yYWdlLnNldFZhbHVlKGlkLCB7IHZhbHVlOiBlbGVtZW50RGF0YS51c2VyVmFsdWUudG9TdHJpbmcoKSB9KTtcbiAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gZWxlbWVudERhdGEudXNlclZhbHVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlKGV2ZW50KSB7XG4gICAgICAgICAgICAgIGNvbnN0IHsgZm9ybWF0dGVkVmFsdWUgfSA9IGV2ZW50LmRldGFpbDtcbiAgICAgICAgICAgICAgZWxlbWVudERhdGEuZm9ybWF0dGVkVmFsdWUgPSBmb3JtYXR0ZWRWYWx1ZTtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldCAhPT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudFxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAvLyBJbnB1dCBoYXNuJ3QgdGhlIGZvY3VzIHNvIGRpc3BsYXkgZm9ybWF0dGVkIHN0cmluZ1xuICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9IGZvcm1hdHRlZFZhbHVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHtcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VsUmFuZ2UoZXZlbnQpIHtcbiAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnNldFNlbGVjdGlvblJhbmdlKC4uLmV2ZW50LmRldGFpbC5zZWxSYW5nZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgICAgdGhpcy5fZGlzcGF0Y2hFdmVudEZyb21TYW5kYm94KGFjdGlvbnMsIGpzRXZlbnQpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBFdmVuIGlmIHRoZSBmaWVsZCBoYXNuJ3QgYW55IGFjdGlvbnNcbiAgICAgICAgLy8gbGVhdmluZyBpdCBjYW4gc3RpbGwgdHJpZ2dlciBzb21lIGFjdGlvbnMgd2l0aCBDYWxjdWxhdGVcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBldmVudCA9PiB7XG4gICAgICAgICAgLy8gaWYgdGhlIGtleSBpcyBvbmUgb2YgRXNjYXBlLCBFbnRlciBvciBUYWJcbiAgICAgICAgICAvLyB0aGVuIHRoZSBkYXRhIGFyZSBjb21taXR0ZWRcbiAgICAgICAgICBsZXQgY29tbWl0S2V5ID0gLTE7XG4gICAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgICAgICAgY29tbWl0S2V5ID0gMDtcbiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgICBjb21taXRLZXkgPSAyO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5ID09PSBcIlRhYlwiKSB7XG4gICAgICAgICAgICBjb21taXRLZXkgPSAzO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY29tbWl0S2V5ID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSBldmVudC50YXJnZXQ7XG4gICAgICAgICAgaWYgKGVsZW1lbnREYXRhLnZhbHVlT25Gb2N1cyA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gU2F2ZSB0aGUgZW50ZXJlZCB2YWx1ZVxuICAgICAgICAgIGVsZW1lbnREYXRhLnVzZXJWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgIHRoaXMubGlua1NlcnZpY2UuZXZlbnRCdXM/LmRpc3BhdGNoKFwiZGlzcGF0Y2hldmVudGluc2FuZGJveFwiLCB7XG4gICAgICAgICAgICBzb3VyY2U6IHRoaXMsXG4gICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgIG5hbWU6IFwiS2V5c3Ryb2tlXCIsXG4gICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICB3aWxsQ29tbWl0OiB0cnVlLFxuICAgICAgICAgICAgICBjb21taXRLZXksXG4gICAgICAgICAgICAgIHNlbFN0YXJ0OiBldmVudC50YXJnZXQuc2VsZWN0aW9uU3RhcnQsXG4gICAgICAgICAgICAgIHNlbEVuZDogZXZlbnQudGFyZ2V0LnNlbGVjdGlvbkVuZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBfYmx1ckxpc3RlbmVyID0gYmx1ckxpc3RlbmVyO1xuICAgICAgICBibHVyTGlzdGVuZXIgPSBudWxsO1xuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIGV2ZW50ID0+IHtcbiAgICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSBldmVudC50YXJnZXQ7XG4gICAgICAgICAgZWxlbWVudERhdGEudXNlclZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgaWYgKHRoaXMuX21vdXNlU3RhdGUuaXNEb3duICYmIGVsZW1lbnREYXRhLnZhbHVlT25Gb2N1cyAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgIC8vIEZvY3VzIG91dCB1c2luZyB0aGUgbW91c2U6IGRhdGEgYXJlIGNvbW1pdHRlZFxuICAgICAgICAgICAgdGhpcy5saW5rU2VydmljZS5ldmVudEJ1cz8uZGlzcGF0Y2goXCJkaXNwYXRjaGV2ZW50aW5zYW5kYm94XCIsIHtcbiAgICAgICAgICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBcIktleXN0cm9rZVwiLFxuICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgIHdpbGxDb21taXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgY29tbWl0S2V5OiAxLFxuICAgICAgICAgICAgICAgIHNlbFN0YXJ0OiBldmVudC50YXJnZXQuc2VsZWN0aW9uU3RhcnQsXG4gICAgICAgICAgICAgICAgc2VsRW5kOiBldmVudC50YXJnZXQuc2VsZWN0aW9uRW5kLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIF9ibHVyTGlzdGVuZXIoZXZlbnQpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGhpcy5kYXRhLmFjdGlvbnM/LktleXN0cm9rZSkge1xuICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImJlZm9yZWlucHV0XCIsIGV2ZW50ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YSwgdGFyZ2V0IH0gPSBldmVudDtcbiAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUsIHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQgfSA9IHRhcmdldDtcblxuICAgICAgICAgICAgbGV0IHNlbFN0YXJ0ID0gc2VsZWN0aW9uU3RhcnQsXG4gICAgICAgICAgICAgIHNlbEVuZCA9IHNlbGVjdGlvbkVuZDtcblxuICAgICAgICAgICAgc3dpdGNoIChldmVudC5pbnB1dFR5cGUpIHtcbiAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9yYXdnaXQuY29tL3czYy9pbnB1dC1ldmVudHMvdjEvaW5kZXguaHRtbCNpbnRlcmZhY2UtSW5wdXRFdmVudC1BdHRyaWJ1dGVzXG4gICAgICAgICAgICAgIGNhc2UgXCJkZWxldGVXb3JkQmFja3dhcmRcIjoge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gdmFsdWVcbiAgICAgICAgICAgICAgICAgIC5zdWJzdHJpbmcoMCwgc2VsZWN0aW9uU3RhcnQpXG4gICAgICAgICAgICAgICAgICAubWF0Y2goL1xcdypbXlxcd10qJC8pO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgc2VsU3RhcnQgLT0gbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjYXNlIFwiZGVsZXRlV29yZEZvcndhcmRcIjoge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gdmFsdWVcbiAgICAgICAgICAgICAgICAgIC5zdWJzdHJpbmcoc2VsZWN0aW9uU3RhcnQpXG4gICAgICAgICAgICAgICAgICAubWF0Y2goL15bXlxcd10qXFx3Ki8pO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgc2VsRW5kICs9IG1hdGNoWzBdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY2FzZSBcImRlbGV0ZUNvbnRlbnRCYWNrd2FyZFwiOlxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb25TdGFydCA9PT0gc2VsZWN0aW9uRW5kKSB7XG4gICAgICAgICAgICAgICAgICBzZWxTdGFydCAtPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSBcImRlbGV0ZUNvbnRlbnRGb3J3YXJkXCI6XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvblN0YXJ0ID09PSBzZWxlY3Rpb25FbmQpIHtcbiAgICAgICAgICAgICAgICAgIHNlbEVuZCArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gV2UgaGFuZGxlIHRoZSBldmVudCBvdXJzZWx2ZXMuXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5saW5rU2VydmljZS5ldmVudEJ1cz8uZGlzcGF0Y2goXCJkaXNwYXRjaGV2ZW50aW5zYW5kYm94XCIsIHtcbiAgICAgICAgICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBcIktleXN0cm9rZVwiLFxuICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgIGNoYW5nZTogZGF0YSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgIHdpbGxDb21taXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNlbFN0YXJ0LFxuICAgICAgICAgICAgICAgIHNlbEVuZCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoXG4gICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbXCJmb2N1c1wiLCBcIkZvY3VzXCJdLFxuICAgICAgICAgICAgW1wiYmx1clwiLCBcIkJsdXJcIl0sXG4gICAgICAgICAgICBbXCJtb3VzZWRvd25cIiwgXCJNb3VzZSBEb3duXCJdLFxuICAgICAgICAgICAgW1wibW91c2VlbnRlclwiLCBcIk1vdXNlIEVudGVyXCJdLFxuICAgICAgICAgICAgW1wibW91c2VsZWF2ZVwiLCBcIk1vdXNlIEV4aXRcIl0sXG4gICAgICAgICAgICBbXCJtb3VzZXVwXCIsIFwiTW91c2UgVXBcIl0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICBldmVudCA9PiBldmVudC50YXJnZXQudmFsdWVcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGJsdXJMaXN0ZW5lcikge1xuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIGJsdXJMaXN0ZW5lcik7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmRhdGEubWF4TGVuICE9PSBudWxsKSB7XG4gICAgICAgIGVsZW1lbnQubWF4TGVuZ3RoID0gdGhpcy5kYXRhLm1heExlbjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZGF0YS5jb21iKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkV2lkdGggPSB0aGlzLmRhdGEucmVjdFsyXSAtIHRoaXMuZGF0YS5yZWN0WzBdO1xuICAgICAgICBjb25zdCBjb21iV2lkdGggPSBmaWVsZFdpZHRoIC8gdGhpcy5kYXRhLm1heExlbjtcblxuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjb21iXCIpO1xuICAgICAgICBlbGVtZW50LnN0eWxlLmxldHRlclNwYWNpbmcgPSBgY2FsYygke2NvbWJXaWR0aH1weCAtIDFjaClgO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLmRhdGEuZmllbGRWYWx1ZTtcbiAgICAgIGVsZW1lbnQuc3R5bGUudmVydGljYWxBbGlnbiA9IFwibWlkZGxlXCI7XG4gICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcInRhYmxlLWNlbGxcIjtcbiAgICB9XG5cbiAgICB0aGlzLl9zZXRUZXh0U3R5bGUoZWxlbWVudCk7XG4gICAgdGhpcy5fc2V0QmFja2dyb3VuZENvbG9yKGVsZW1lbnQpO1xuICAgIHRoaXMuX3NldERlZmF1bHRQcm9wZXJ0aWVzRnJvbUpTKGVsZW1lbnQpO1xuXG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IHRleHQgc3R5bGVzIHRvIHRoZSB0ZXh0IGluIHRoZSBlbGVtZW50LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0hUTUxEaXZFbGVtZW50fSBlbGVtZW50XG4gICAqIEBtZW1iZXJvZiBUZXh0V2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnRcbiAgICovXG4gIF9zZXRUZXh0U3R5bGUoZWxlbWVudCkge1xuICAgIGNvbnN0IFRFWFRfQUxJR05NRU5UID0gW1wibGVmdFwiLCBcImNlbnRlclwiLCBcInJpZ2h0XCJdO1xuICAgIGNvbnN0IHsgZm9udFNpemUsIGZvbnRDb2xvciB9ID0gdGhpcy5kYXRhLmRlZmF1bHRBcHBlYXJhbmNlRGF0YTtcbiAgICBjb25zdCBzdHlsZSA9IGVsZW1lbnQuc3R5bGU7XG5cbiAgICAvLyBUT0RPOiBJZiB0aGUgZm9udC1zaXplIGlzIHplcm8sIGNhbGN1bGF0ZSBpdCBiYXNlZCBvbiB0aGUgaGVpZ2h0IGFuZFxuICAgIC8vICAgICAgIHdpZHRoIG9mIHRoZSBlbGVtZW50LlxuICAgIC8vIE5vdCBzZXR0aW5nIGBzdHlsZS5mb250U2l6ZWAgd2lsbCB1c2UgdGhlIGRlZmF1bHQgZm9udC1zaXplIGZvciBub3cuXG4gICAgaWYgKGZvbnRTaXplKSB7XG4gICAgICBzdHlsZS5mb250U2l6ZSA9IGAke2ZvbnRTaXplfXB4YDtcbiAgICB9XG5cbiAgICBzdHlsZS5jb2xvciA9IFV0aWwubWFrZUhleENvbG9yKGZvbnRDb2xvclswXSwgZm9udENvbG9yWzFdLCBmb250Q29sb3JbMl0pO1xuXG4gICAgaWYgKHRoaXMuZGF0YS50ZXh0QWxpZ25tZW50ICE9PSBudWxsKSB7XG4gICAgICBzdHlsZS50ZXh0QWxpZ24gPSBURVhUX0FMSUdOTUVOVFt0aGlzLmRhdGEudGV4dEFsaWdubWVudF07XG4gICAgfVxuICB9XG59XG5cbmNsYXNzIENoZWNrYm94V2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBXaWRnZXRBbm5vdGF0aW9uRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMpIHtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7IGlzUmVuZGVyYWJsZTogcGFyYW1ldGVycy5yZW5kZXJGb3JtcyB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBzdG9yYWdlID0gdGhpcy5hbm5vdGF0aW9uU3RvcmFnZTtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGNvbnN0IGlkID0gZGF0YS5pZDtcbiAgICBsZXQgdmFsdWUgPSBzdG9yYWdlLmdldFZhbHVlKGlkLCB7XG4gICAgICB2YWx1ZTogZGF0YS5leHBvcnRWYWx1ZSA9PT0gZGF0YS5maWVsZFZhbHVlLFxuICAgIH0pLnZhbHVlO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIC8vIFRoZSB2YWx1ZSBoYXMgYmVlbiBjaGFuZ2VkIHRocm91Z2gganMgYW5kIHNldCBpbiBhbm5vdGF0aW9uU3RvcmFnZS5cbiAgICAgIHZhbHVlID0gdmFsdWUgIT09IFwiT2ZmXCI7XG4gICAgICBzdG9yYWdlLnNldFZhbHVlKGlkLCB7IHZhbHVlIH0pO1xuICAgIH1cblxuICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTmFtZSA9IFwiYnV0dG9uV2lkZ2V0QW5ub3RhdGlvbiBjaGVja0JveFwiO1xuXG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBHZXRFbGVtZW50c0J5TmFtZVNldC5hZGQoZWxlbWVudCk7XG4gICAgZWxlbWVudC5kaXNhYmxlZCA9IGRhdGEucmVhZE9ubHk7XG4gICAgZWxlbWVudC50eXBlID0gXCJjaGVja2JveFwiO1xuICAgIGVsZW1lbnQubmFtZSA9IGRhdGEuZmllbGROYW1lO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIsIHRydWUpO1xuICAgIH1cbiAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShcImlkXCIsIGlkKTtcbiAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShcImV4cG9ydFZhbHVlXCIsIGRhdGEuZXhwb3J0VmFsdWUpO1xuICAgIGVsZW1lbnQudGFiSW5kZXggPSBERUZBVUxUX1RBQl9JTkRFWDtcblxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBldmVudCA9PiB7XG4gICAgICBjb25zdCB7IG5hbWUsIGNoZWNrZWQgfSA9IGV2ZW50LnRhcmdldDtcbiAgICAgIGZvciAoY29uc3QgY2hlY2tib3ggb2YgdGhpcy5fZ2V0RWxlbWVudHNCeU5hbWUobmFtZSwgLyogc2tpcElkID0gKi8gaWQpKSB7XG4gICAgICAgIGNvbnN0IGN1ckNoZWNrZWQgPSBjaGVja2VkICYmIGNoZWNrYm94LmV4cG9ydFZhbHVlID09PSBkYXRhLmV4cG9ydFZhbHVlO1xuICAgICAgICBpZiAoY2hlY2tib3guZG9tRWxlbWVudCkge1xuICAgICAgICAgIGNoZWNrYm94LmRvbUVsZW1lbnQuY2hlY2tlZCA9IGN1ckNoZWNrZWQ7XG4gICAgICAgIH1cbiAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShjaGVja2JveC5pZCwgeyB2YWx1ZTogY3VyQ2hlY2tlZCB9KTtcbiAgICAgIH1cbiAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHsgdmFsdWU6IGNoZWNrZWQgfSk7XG4gICAgfSk7XG5cbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldGZvcm1cIiwgZXZlbnQgPT4ge1xuICAgICAgY29uc3QgZGVmYXVsdFZhbHVlID0gZGF0YS5kZWZhdWx0RmllbGRWYWx1ZSB8fCBcIk9mZlwiO1xuICAgICAgZXZlbnQudGFyZ2V0LmNoZWNrZWQgPSBkZWZhdWx0VmFsdWUgPT09IGRhdGEuZXhwb3J0VmFsdWU7XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5lbmFibGVTY3JpcHRpbmcgJiYgdGhpcy5oYXNKU0FjdGlvbnMpIHtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInVwZGF0ZWZyb21zYW5kYm94XCIsIGpzRXZlbnQgPT4ge1xuICAgICAgICBjb25zdCBhY3Rpb25zID0ge1xuICAgICAgICAgIHZhbHVlKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC50YXJnZXQuY2hlY2tlZCA9IGV2ZW50LmRldGFpbC52YWx1ZSAhPT0gXCJPZmZcIjtcbiAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHsgdmFsdWU6IGV2ZW50LnRhcmdldC5jaGVja2VkIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoRXZlbnRGcm9tU2FuZGJveChhY3Rpb25zLCBqc0V2ZW50KTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyhcbiAgICAgICAgZWxlbWVudCxcbiAgICAgICAgW1xuICAgICAgICAgIFtcImNoYW5nZVwiLCBcIlZhbGlkYXRlXCJdLFxuICAgICAgICAgIFtcImNoYW5nZVwiLCBcIkFjdGlvblwiXSxcbiAgICAgICAgICBbXCJmb2N1c1wiLCBcIkZvY3VzXCJdLFxuICAgICAgICAgIFtcImJsdXJcIiwgXCJCbHVyXCJdLFxuICAgICAgICAgIFtcIm1vdXNlZG93blwiLCBcIk1vdXNlIERvd25cIl0sXG4gICAgICAgICAgW1wibW91c2VlbnRlclwiLCBcIk1vdXNlIEVudGVyXCJdLFxuICAgICAgICAgIFtcIm1vdXNlbGVhdmVcIiwgXCJNb3VzZSBFeGl0XCJdLFxuICAgICAgICAgIFtcIm1vdXNldXBcIiwgXCJNb3VzZSBVcFwiXSxcbiAgICAgICAgXSxcbiAgICAgICAgZXZlbnQgPT4gZXZlbnQudGFyZ2V0LmNoZWNrZWRcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy5fc2V0QmFja2dyb3VuZENvbG9yKGVsZW1lbnQpO1xuICAgIHRoaXMuX3NldERlZmF1bHRQcm9wZXJ0aWVzRnJvbUpTKGVsZW1lbnQpO1xuXG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICB9XG59XG5cbmNsYXNzIFJhZGlvQnV0dG9uV2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBXaWRnZXRBbm5vdGF0aW9uRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMpIHtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7IGlzUmVuZGVyYWJsZTogcGFyYW1ldGVycy5yZW5kZXJGb3JtcyB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc05hbWUgPSBcImJ1dHRvbldpZGdldEFubm90YXRpb24gcmFkaW9CdXR0b25cIjtcbiAgICBjb25zdCBzdG9yYWdlID0gdGhpcy5hbm5vdGF0aW9uU3RvcmFnZTtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGNvbnN0IGlkID0gZGF0YS5pZDtcbiAgICBsZXQgdmFsdWUgPSBzdG9yYWdlLmdldFZhbHVlKGlkLCB7XG4gICAgICB2YWx1ZTogZGF0YS5maWVsZFZhbHVlID09PSBkYXRhLmJ1dHRvblZhbHVlLFxuICAgIH0pLnZhbHVlO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIC8vIFRoZSB2YWx1ZSBoYXMgYmVlbiBjaGFuZ2VkIHRocm91Z2gganMgYW5kIHNldCBpbiBhbm5vdGF0aW9uU3RvcmFnZS5cbiAgICAgIHZhbHVlID0gdmFsdWUgIT09IGRhdGEuYnV0dG9uVmFsdWU7XG4gICAgICBzdG9yYWdlLnNldFZhbHVlKGlkLCB7IHZhbHVlIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgR2V0RWxlbWVudHNCeU5hbWVTZXQuYWRkKGVsZW1lbnQpO1xuICAgIGVsZW1lbnQuZGlzYWJsZWQgPSBkYXRhLnJlYWRPbmx5O1xuICAgIGVsZW1lbnQudHlwZSA9IFwicmFkaW9cIjtcbiAgICBlbGVtZW50Lm5hbWUgPSBkYXRhLmZpZWxkTmFtZTtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLCB0cnVlKTtcbiAgICB9XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpZCk7XG4gICAgZWxlbWVudC50YWJJbmRleCA9IERFRkFVTFRfVEFCX0lOREVYO1xuXG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IHsgbmFtZSwgY2hlY2tlZCB9ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgZm9yIChjb25zdCByYWRpbyBvZiB0aGlzLl9nZXRFbGVtZW50c0J5TmFtZShuYW1lLCAvKiBza2lwSWQgPSAqLyBpZCkpIHtcbiAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShyYWRpby5pZCwgeyB2YWx1ZTogZmFsc2UgfSk7XG4gICAgICB9XG4gICAgICBzdG9yYWdlLnNldFZhbHVlKGlkLCB7IHZhbHVlOiBjaGVja2VkIH0pO1xuICAgIH0pO1xuXG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVzZXRmb3JtXCIsIGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IGRhdGEuZGVmYXVsdEZpZWxkVmFsdWU7XG4gICAgICBldmVudC50YXJnZXQuY2hlY2tlZCA9XG4gICAgICAgIGRlZmF1bHRWYWx1ZSAhPT0gbnVsbCAmJlxuICAgICAgICBkZWZhdWx0VmFsdWUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICBkZWZhdWx0VmFsdWUgPT09IGRhdGEuYnV0dG9uVmFsdWU7XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5lbmFibGVTY3JpcHRpbmcgJiYgdGhpcy5oYXNKU0FjdGlvbnMpIHtcbiAgICAgIGNvbnN0IHBkZkJ1dHRvblZhbHVlID0gZGF0YS5idXR0b25WYWx1ZTtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInVwZGF0ZWZyb21zYW5kYm94XCIsIGpzRXZlbnQgPT4ge1xuICAgICAgICBjb25zdCBhY3Rpb25zID0ge1xuICAgICAgICAgIHZhbHVlOiBldmVudCA9PiB7XG4gICAgICAgICAgICBjb25zdCBjaGVja2VkID0gcGRmQnV0dG9uVmFsdWUgPT09IGV2ZW50LmRldGFpbC52YWx1ZTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcmFkaW8gb2YgdGhpcy5fZ2V0RWxlbWVudHNCeU5hbWUoZXZlbnQudGFyZ2V0Lm5hbWUpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGN1ckNoZWNrZWQgPSBjaGVja2VkICYmIHJhZGlvLmlkID09PSBpZDtcbiAgICAgICAgICAgICAgaWYgKHJhZGlvLmRvbUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICByYWRpby5kb21FbGVtZW50LmNoZWNrZWQgPSBjdXJDaGVja2VkO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUocmFkaW8uaWQsIHsgdmFsdWU6IGN1ckNoZWNrZWQgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2hFdmVudEZyb21TYW5kYm94KGFjdGlvbnMsIGpzRXZlbnQpO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKFxuICAgICAgICBlbGVtZW50LFxuICAgICAgICBbXG4gICAgICAgICAgW1wiY2hhbmdlXCIsIFwiVmFsaWRhdGVcIl0sXG4gICAgICAgICAgW1wiY2hhbmdlXCIsIFwiQWN0aW9uXCJdLFxuICAgICAgICAgIFtcImZvY3VzXCIsIFwiRm9jdXNcIl0sXG4gICAgICAgICAgW1wiYmx1clwiLCBcIkJsdXJcIl0sXG4gICAgICAgICAgW1wibW91c2Vkb3duXCIsIFwiTW91c2UgRG93blwiXSxcbiAgICAgICAgICBbXCJtb3VzZWVudGVyXCIsIFwiTW91c2UgRW50ZXJcIl0sXG4gICAgICAgICAgW1wibW91c2VsZWF2ZVwiLCBcIk1vdXNlIEV4aXRcIl0sXG4gICAgICAgICAgW1wibW91c2V1cFwiLCBcIk1vdXNlIFVwXCJdLFxuICAgICAgICBdLFxuICAgICAgICBldmVudCA9PiBldmVudC50YXJnZXQuY2hlY2tlZFxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aGlzLl9zZXRCYWNrZ3JvdW5kQ29sb3IoZWxlbWVudCk7XG4gICAgdGhpcy5fc2V0RGVmYXVsdFByb3BlcnRpZXNGcm9tSlMoZWxlbWVudCk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cbn1cblxuY2xhc3MgUHVzaEJ1dHRvbldpZGdldEFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgTGlua0Fubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIHN1cGVyKHBhcmFtZXRlcnMsIHsgaWdub3JlQm9yZGVyOiBwYXJhbWV0ZXJzLmRhdGEuaGFzQXBwZWFyYW5jZSB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICAvLyBUaGUgcmVuZGVyaW5nIGFuZCBmdW5jdGlvbmFsaXR5IG9mIGEgcHVzaCBidXR0b24gd2lkZ2V0IGFubm90YXRpb24gaXNcbiAgICAvLyBlcXVhbCB0byB0aGF0IG9mIGEgbGluayBhbm5vdGF0aW9uLCBidXQgbWF5IGhhdmUgbW9yZSBmdW5jdGlvbmFsaXR5LCBzdWNoXG4gICAgLy8gYXMgcGVyZm9ybWluZyBhY3Rpb25zIG9uIGZvcm0gZmllbGRzIChyZXNldHRpbmcsIHN1Ym1pdHRpbmcsIGV0IGNldGVyYSkuXG4gICAgY29uc3QgY29udGFpbmVyID0gc3VwZXIucmVuZGVyKCk7XG4gICAgY29udGFpbmVyLmNsYXNzTmFtZSA9IFwiYnV0dG9uV2lkZ2V0QW5ub3RhdGlvbiBwdXNoQnV0dG9uXCI7XG5cbiAgICBpZiAodGhpcy5kYXRhLmFsdGVybmF0aXZlVGV4dCkge1xuICAgICAgY29udGFpbmVyLnRpdGxlID0gdGhpcy5kYXRhLmFsdGVybmF0aXZlVGV4dDtcbiAgICB9XG5cbiAgICB0aGlzLl9zZXREZWZhdWx0UHJvcGVydGllc0Zyb21KUyhjb250YWluZXIpO1xuXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgfVxufVxuXG5jbGFzcyBDaG9pY2VXaWRnZXRBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIFdpZGdldEFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIHN1cGVyKHBhcmFtZXRlcnMsIHsgaXNSZW5kZXJhYmxlOiBwYXJhbWV0ZXJzLnJlbmRlckZvcm1zIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTmFtZSA9IFwiY2hvaWNlV2lkZ2V0QW5ub3RhdGlvblwiO1xuICAgIGNvbnN0IHN0b3JhZ2UgPSB0aGlzLmFubm90YXRpb25TdG9yYWdlO1xuICAgIGNvbnN0IGlkID0gdGhpcy5kYXRhLmlkO1xuXG4gICAgY29uc3Qgc3RvcmVkRGF0YSA9IHN0b3JhZ2UuZ2V0VmFsdWUoaWQsIHtcbiAgICAgIHZhbHVlOiB0aGlzLmRhdGEuZmllbGRWYWx1ZSxcbiAgICB9KTtcblxuICAgIGxldCB7IGZvbnRTaXplIH0gPSB0aGlzLmRhdGEuZGVmYXVsdEFwcGVhcmFuY2VEYXRhO1xuICAgIGlmICghZm9udFNpemUpIHtcbiAgICAgIGZvbnRTaXplID0gOTtcbiAgICB9XG4gICAgY29uc3QgZm9udFNpemVTdHlsZSA9IGBjYWxjKCR7Zm9udFNpemV9cHggKiB2YXIoLS16b29tLWZhY3RvcikpYDtcblxuICAgIGNvbnN0IHNlbGVjdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xuICAgIEdldEVsZW1lbnRzQnlOYW1lU2V0LmFkZChzZWxlY3RFbGVtZW50KTtcbiAgICBzZWxlY3RFbGVtZW50LmRpc2FibGVkID0gdGhpcy5kYXRhLnJlYWRPbmx5O1xuICAgIHNlbGVjdEVsZW1lbnQubmFtZSA9IHRoaXMuZGF0YS5maWVsZE5hbWU7XG4gICAgc2VsZWN0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpZCk7XG4gICAgc2VsZWN0RWxlbWVudC50YWJJbmRleCA9IERFRkFVTFRfVEFCX0lOREVYO1xuXG4gICAgc2VsZWN0RWxlbWVudC5zdHlsZS5mb250U2l6ZSA9IGAke2ZvbnRTaXplfXB4YDtcblxuICAgIGlmICghdGhpcy5kYXRhLmNvbWJvKSB7XG4gICAgICAvLyBMaXN0IGJveGVzIGhhdmUgYSBzaXplIGFuZCAob3B0aW9uYWxseSkgbXVsdGlwbGUgc2VsZWN0aW9uLlxuICAgICAgc2VsZWN0RWxlbWVudC5zaXplID0gdGhpcy5kYXRhLm9wdGlvbnMubGVuZ3RoO1xuICAgICAgaWYgKHRoaXMuZGF0YS5tdWx0aVNlbGVjdCkge1xuICAgICAgICBzZWxlY3RFbGVtZW50Lm11bHRpcGxlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzZWxlY3RFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldGZvcm1cIiwgZXZlbnQgPT4ge1xuICAgICAgY29uc3QgZGVmYXVsdFZhbHVlID0gdGhpcy5kYXRhLmRlZmF1bHRGaWVsZFZhbHVlO1xuICAgICAgZm9yIChjb25zdCBvcHRpb24gb2Ygc2VsZWN0RWxlbWVudC5vcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IG9wdGlvbi52YWx1ZSA9PT0gZGVmYXVsdFZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gSW5zZXJ0IHRoZSBvcHRpb25zIGludG8gdGhlIGNob2ljZSBmaWVsZC5cbiAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiB0aGlzLmRhdGEub3B0aW9ucykge1xuICAgICAgY29uc3Qgb3B0aW9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICBvcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gb3B0aW9uLmRpc3BsYXlWYWx1ZTtcbiAgICAgIG9wdGlvbkVsZW1lbnQudmFsdWUgPSBvcHRpb24uZXhwb3J0VmFsdWU7XG4gICAgICBpZiAodGhpcy5kYXRhLmNvbWJvKSB7XG4gICAgICAgIG9wdGlvbkVsZW1lbnQuc3R5bGUuZm9udFNpemUgPSBmb250U2l6ZVN0eWxlO1xuICAgICAgfVxuICAgICAgaWYgKHN0b3JlZERhdGEudmFsdWUuaW5jbHVkZXMob3B0aW9uLmV4cG9ydFZhbHVlKSkge1xuICAgICAgICBvcHRpb25FbGVtZW50LnNldEF0dHJpYnV0ZShcInNlbGVjdGVkXCIsIHRydWUpO1xuICAgICAgfVxuICAgICAgc2VsZWN0RWxlbWVudC5hcHBlbmRDaGlsZChvcHRpb25FbGVtZW50KTtcbiAgICB9XG5cbiAgICBjb25zdCBnZXRWYWx1ZSA9IChldmVudCwgaXNFeHBvcnQpID0+IHtcbiAgICAgIGNvbnN0IG5hbWUgPSBpc0V4cG9ydCA/IFwidmFsdWVcIiA6IFwidGV4dENvbnRlbnRcIjtcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSBldmVudC50YXJnZXQub3B0aW9ucztcbiAgICAgIGlmICghZXZlbnQudGFyZ2V0Lm11bHRpcGxlKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLnNlbGVjdGVkSW5kZXggPT09IC0xXG4gICAgICAgICAgPyBudWxsXG4gICAgICAgICAgOiBvcHRpb25zW29wdGlvbnMuc2VsZWN0ZWRJbmRleF1bbmFtZV07XG4gICAgICB9XG4gICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmZpbHRlclxuICAgICAgICAuY2FsbChvcHRpb25zLCBvcHRpb24gPT4gb3B0aW9uLnNlbGVjdGVkKVxuICAgICAgICAubWFwKG9wdGlvbiA9PiBvcHRpb25bbmFtZV0pO1xuICAgIH07XG5cbiAgICBjb25zdCBnZXRJdGVtcyA9IGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSBldmVudC50YXJnZXQub3B0aW9ucztcbiAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwob3B0aW9ucywgb3B0aW9uID0+IHtcbiAgICAgICAgcmV0dXJuIHsgZGlzcGxheVZhbHVlOiBvcHRpb24udGV4dENvbnRlbnQsIGV4cG9ydFZhbHVlOiBvcHRpb24udmFsdWUgfTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBpZiAodGhpcy5lbmFibGVTY3JpcHRpbmcgJiYgdGhpcy5oYXNKU0FjdGlvbnMpIHtcbiAgICAgIHNlbGVjdEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInVwZGF0ZWZyb21zYW5kYm94XCIsIGpzRXZlbnQgPT4ge1xuICAgICAgICBjb25zdCBhY3Rpb25zID0ge1xuICAgICAgICAgIHZhbHVlKGV2ZW50KSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGV2ZW50LmRldGFpbC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IG5ldyBTZXQoQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFt2YWx1ZV0pO1xuICAgICAgICAgICAgZm9yIChjb25zdCBvcHRpb24gb2Ygc2VsZWN0RWxlbWVudC5vcHRpb25zKSB7XG4gICAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHZhbHVlcy5oYXMob3B0aW9uLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHtcbiAgICAgICAgICAgICAgdmFsdWU6IGdldFZhbHVlKGV2ZW50LCAvKiBpc0V4cG9ydCAqLyB0cnVlKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbXVsdGlwbGVTZWxlY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQubXVsdGlwbGUgPSB0cnVlO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVtb3ZlKGV2ZW50KSB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gc2VsZWN0RWxlbWVudC5vcHRpb25zO1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBldmVudC5kZXRhaWwucmVtb3ZlO1xuICAgICAgICAgICAgb3B0aW9uc1tpbmRleF0uc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQucmVtb3ZlKGluZGV4KTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgY29uc3QgaSA9IEFycmF5LnByb3RvdHlwZS5maW5kSW5kZXguY2FsbChcbiAgICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgICAgIG9wdGlvbiA9PiBvcHRpb24uc2VsZWN0ZWRcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgaWYgKGkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9uc1swXS5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHtcbiAgICAgICAgICAgICAgdmFsdWU6IGdldFZhbHVlKGV2ZW50LCAvKiBpc0V4cG9ydCAqLyB0cnVlKSxcbiAgICAgICAgICAgICAgaXRlbXM6IGdldEl0ZW1zKGV2ZW50KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY2xlYXIoZXZlbnQpIHtcbiAgICAgICAgICAgIHdoaWxlIChzZWxlY3RFbGVtZW50Lmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICBzZWxlY3RFbGVtZW50LnJlbW92ZSgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHsgdmFsdWU6IG51bGwsIGl0ZW1zOiBbXSB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGluc2VydChldmVudCkge1xuICAgICAgICAgICAgY29uc3QgeyBpbmRleCwgZGlzcGxheVZhbHVlLCBleHBvcnRWYWx1ZSB9ID0gZXZlbnQuZGV0YWlsLmluc2VydDtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgICAgICAgICAgb3B0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGRpc3BsYXlWYWx1ZTtcbiAgICAgICAgICAgIG9wdGlvbkVsZW1lbnQudmFsdWUgPSBleHBvcnRWYWx1ZTtcbiAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQuaW5zZXJ0QmVmb3JlKFxuICAgICAgICAgICAgICBvcHRpb25FbGVtZW50LFxuICAgICAgICAgICAgICBzZWxlY3RFbGVtZW50LmNoaWxkcmVuW2luZGV4XVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHtcbiAgICAgICAgICAgICAgdmFsdWU6IGdldFZhbHVlKGV2ZW50LCAvKiBpc0V4cG9ydCAqLyB0cnVlKSxcbiAgICAgICAgICAgICAgaXRlbXM6IGdldEl0ZW1zKGV2ZW50KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgaXRlbXMoZXZlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgaXRlbXMgfSA9IGV2ZW50LmRldGFpbDtcbiAgICAgICAgICAgIHdoaWxlIChzZWxlY3RFbGVtZW50Lmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICBzZWxlY3RFbGVtZW50LnJlbW92ZSgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICAgICAgICBjb25zdCB7IGRpc3BsYXlWYWx1ZSwgZXhwb3J0VmFsdWUgfSA9IGl0ZW07XG4gICAgICAgICAgICAgIGNvbnN0IG9wdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgICAgICAgICAgICBvcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gZGlzcGxheVZhbHVlO1xuICAgICAgICAgICAgICBvcHRpb25FbGVtZW50LnZhbHVlID0gZXhwb3J0VmFsdWU7XG4gICAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQuYXBwZW5kQ2hpbGQob3B0aW9uRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsZWN0RWxlbWVudC5vcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgc2VsZWN0RWxlbWVudC5vcHRpb25zWzBdLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHtcbiAgICAgICAgICAgICAgdmFsdWU6IGdldFZhbHVlKGV2ZW50LCAvKiBpc0V4cG9ydCAqLyB0cnVlKSxcbiAgICAgICAgICAgICAgaXRlbXM6IGdldEl0ZW1zKGV2ZW50KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgaW5kaWNlcyhldmVudCkge1xuICAgICAgICAgICAgY29uc3QgaW5kaWNlcyA9IG5ldyBTZXQoZXZlbnQuZGV0YWlsLmluZGljZXMpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBvcHRpb24gb2YgZXZlbnQudGFyZ2V0Lm9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gaW5kaWNlcy5oYXMob3B0aW9uLmluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHtcbiAgICAgICAgICAgICAgdmFsdWU6IGdldFZhbHVlKGV2ZW50LCAvKiBpc0V4cG9ydCAqLyB0cnVlKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZWRpdGFibGUoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC5kaXNhYmxlZCA9ICFldmVudC5kZXRhaWwuZWRpdGFibGU7XG4gICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2hFdmVudEZyb21TYW5kYm94KGFjdGlvbnMsIGpzRXZlbnQpO1xuICAgICAgfSk7XG5cbiAgICAgIHNlbGVjdEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGV2ZW50ID0+IHtcbiAgICAgICAgY29uc3QgZXhwb3J0VmFsdWUgPSBnZXRWYWx1ZShldmVudCwgLyogaXNFeHBvcnQgKi8gdHJ1ZSk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZ2V0VmFsdWUoZXZlbnQsIC8qIGlzRXhwb3J0ICovIGZhbHNlKTtcbiAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShpZCwgeyB2YWx1ZTogZXhwb3J0VmFsdWUgfSk7XG5cbiAgICAgICAgdGhpcy5saW5rU2VydmljZS5ldmVudEJ1cz8uZGlzcGF0Y2goXCJkaXNwYXRjaGV2ZW50aW5zYW5kYm94XCIsIHtcbiAgICAgICAgICBzb3VyY2U6IHRoaXMsXG4gICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIG5hbWU6IFwiS2V5c3Ryb2tlXCIsXG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgIGNoYW5nZUV4OiBleHBvcnRWYWx1ZSxcbiAgICAgICAgICAgIHdpbGxDb21taXQ6IHRydWUsXG4gICAgICAgICAgICBjb21taXRLZXk6IDEsXG4gICAgICAgICAgICBrZXlEb3duOiBmYWxzZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyhcbiAgICAgICAgc2VsZWN0RWxlbWVudCxcbiAgICAgICAgW1xuICAgICAgICAgIFtcImZvY3VzXCIsIFwiRm9jdXNcIl0sXG4gICAgICAgICAgW1wiYmx1clwiLCBcIkJsdXJcIl0sXG4gICAgICAgICAgW1wibW91c2Vkb3duXCIsIFwiTW91c2UgRG93blwiXSxcbiAgICAgICAgICBbXCJtb3VzZWVudGVyXCIsIFwiTW91c2UgRW50ZXJcIl0sXG4gICAgICAgICAgW1wibW91c2VsZWF2ZVwiLCBcIk1vdXNlIEV4aXRcIl0sXG4gICAgICAgICAgW1wibW91c2V1cFwiLCBcIk1vdXNlIFVwXCJdLFxuICAgICAgICAgIFtcImlucHV0XCIsIFwiQWN0aW9uXCJdLFxuICAgICAgICBdLFxuICAgICAgICBldmVudCA9PiBldmVudC50YXJnZXQuY2hlY2tlZFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZWN0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHsgdmFsdWU6IGdldFZhbHVlKGV2ZW50LCAvKiBpc0V4cG9ydCAqLyB0cnVlKSB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuX3NldEJhY2tncm91bmRDb2xvcihzZWxlY3RFbGVtZW50KTtcbiAgICB0aGlzLl9zZXREZWZhdWx0UHJvcGVydGllc0Zyb21KUyhzZWxlY3RFbGVtZW50KTtcblxuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHNlbGVjdEVsZW1lbnQpO1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgfVxufVxuXG5jbGFzcyBQb3B1cEFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgQW5ub3RhdGlvbkVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKSB7XG4gICAgY29uc3QgaXNSZW5kZXJhYmxlID0gISEoXG4gICAgICBwYXJhbWV0ZXJzLmRhdGEudGl0bGVPYmo/LnN0ciB8fFxuICAgICAgcGFyYW1ldGVycy5kYXRhLmNvbnRlbnRzT2JqPy5zdHIgfHxcbiAgICAgIHBhcmFtZXRlcnMuZGF0YS5yaWNoVGV4dD8uc3RyXG4gICAgKTtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7IGlzUmVuZGVyYWJsZSB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICAvLyBEbyBub3QgcmVuZGVyIHBvcHVwIGFubm90YXRpb25zIGZvciBwYXJlbnQgZWxlbWVudHMgd2l0aCB0aGVzZSB0eXBlcyBhc1xuICAgIC8vIHRoZXkgY3JlYXRlIHRoZSBwb3B1cHMgdGhlbXNlbHZlcyAoYmVjYXVzZSBvZiBjdXN0b20gdHJpZ2dlciBkaXZzKS5cbiAgICBjb25zdCBJR05PUkVfVFlQRVMgPSBbXG4gICAgICBcIkxpbmVcIixcbiAgICAgIFwiU3F1YXJlXCIsXG4gICAgICBcIkNpcmNsZVwiLFxuICAgICAgXCJQb2x5TGluZVwiLFxuICAgICAgXCJQb2x5Z29uXCIsXG4gICAgICBcIklua1wiLFxuICAgIF07XG5cbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc05hbWUgPSBcInBvcHVwQW5ub3RhdGlvblwiO1xuXG4gICAgaWYgKElHTk9SRV9UWVBFUy5pbmNsdWRlcyh0aGlzLmRhdGEucGFyZW50VHlwZSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBjb25zdCBzZWxlY3RvciA9IGBbZGF0YS1hbm5vdGF0aW9uLWlkPVwiJHt0aGlzLmRhdGEucGFyZW50SWR9XCJdYDtcbiAgICBjb25zdCBwYXJlbnRFbGVtZW50cyA9IHRoaXMubGF5ZXIucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgaWYgKHBhcmVudEVsZW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICAgIH1cblxuICAgIGNvbnN0IHBvcHVwID0gbmV3IFBvcHVwRWxlbWVudCh7XG4gICAgICBjb250YWluZXI6IHRoaXMuY29udGFpbmVyLFxuICAgICAgdHJpZ2dlcjogQXJyYXkuZnJvbShwYXJlbnRFbGVtZW50cyksXG4gICAgICBjb2xvcjogdGhpcy5kYXRhLmNvbG9yLFxuICAgICAgdGl0bGVPYmo6IHRoaXMuZGF0YS50aXRsZU9iaixcbiAgICAgIG1vZGlmaWNhdGlvbkRhdGU6IHRoaXMuZGF0YS5tb2RpZmljYXRpb25EYXRlLFxuICAgICAgY29udGVudHNPYmo6IHRoaXMuZGF0YS5jb250ZW50c09iaixcbiAgICAgIHJpY2hUZXh0OiB0aGlzLmRhdGEucmljaFRleHQsXG4gICAgfSk7XG5cbiAgICAvLyBQb3NpdGlvbiB0aGUgcG9wdXAgbmV4dCB0byB0aGUgcGFyZW50IGFubm90YXRpb24ncyBjb250YWluZXIuXG4gICAgLy8gUERGIHZpZXdlcnMgaWdub3JlIGEgcG9wdXAgYW5ub3RhdGlvbidzIHJlY3RhbmdsZS5cbiAgICBjb25zdCBwYWdlID0gdGhpcy5wYWdlO1xuICAgIGNvbnN0IHJlY3QgPSBVdGlsLm5vcm1hbGl6ZVJlY3QoW1xuICAgICAgdGhpcy5kYXRhLnBhcmVudFJlY3RbMF0sXG4gICAgICBwYWdlLnZpZXdbM10gLSB0aGlzLmRhdGEucGFyZW50UmVjdFsxXSArIHBhZ2Uudmlld1sxXSxcbiAgICAgIHRoaXMuZGF0YS5wYXJlbnRSZWN0WzJdLFxuICAgICAgcGFnZS52aWV3WzNdIC0gdGhpcy5kYXRhLnBhcmVudFJlY3RbM10gKyBwYWdlLnZpZXdbMV0sXG4gICAgXSk7XG4gICAgY29uc3QgcG9wdXBMZWZ0ID1cbiAgICAgIHJlY3RbMF0gKyB0aGlzLmRhdGEucGFyZW50UmVjdFsyXSAtIHRoaXMuZGF0YS5wYXJlbnRSZWN0WzBdO1xuICAgIGNvbnN0IHBvcHVwVG9wID0gcmVjdFsxXTtcblxuICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IGAkey1wb3B1cExlZnR9cHggJHstcG9wdXBUb3B9cHhgO1xuICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmxlZnQgPSBgJHtwb3B1cExlZnR9cHhgO1xuICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnRvcCA9IGAke3BvcHVwVG9wfXB4YDtcblxuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHBvcHVwLnJlbmRlcigpKTtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cbn1cblxuY2xhc3MgUG9wdXBFbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIHRoaXMuY29udGFpbmVyID0gcGFyYW1ldGVycy5jb250YWluZXI7XG4gICAgdGhpcy50cmlnZ2VyID0gcGFyYW1ldGVycy50cmlnZ2VyO1xuICAgIHRoaXMuY29sb3IgPSBwYXJhbWV0ZXJzLmNvbG9yO1xuICAgIHRoaXMudGl0bGVPYmogPSBwYXJhbWV0ZXJzLnRpdGxlT2JqO1xuICAgIHRoaXMubW9kaWZpY2F0aW9uRGF0ZSA9IHBhcmFtZXRlcnMubW9kaWZpY2F0aW9uRGF0ZTtcbiAgICB0aGlzLmNvbnRlbnRzT2JqID0gcGFyYW1ldGVycy5jb250ZW50c09iajtcbiAgICB0aGlzLnJpY2hUZXh0ID0gcGFyYW1ldGVycy5yaWNoVGV4dDtcbiAgICB0aGlzLmhpZGVXcmFwcGVyID0gcGFyYW1ldGVycy5oaWRlV3JhcHBlciB8fCBmYWxzZTtcblxuICAgIHRoaXMucGlubmVkID0gZmFsc2U7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgQkFDS0dST1VORF9FTkxJR0hUID0gMC43O1xuXG4gICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgd3JhcHBlci5jbGFzc05hbWUgPSBcInBvcHVwV3JhcHBlclwiO1xuXG4gICAgLy8gRm9yIFBvcHVwIGFubm90YXRpb25zIHdlIGhpZGUgdGhlIGVudGlyZSBzZWN0aW9uIGJlY2F1c2UgaXQgY29udGFpbnNcbiAgICAvLyBvbmx5IHRoZSBwb3B1cC4gSG93ZXZlciwgZm9yIFRleHQgYW5ub3RhdGlvbnMgd2l0aG91dCBhIHNlcGFyYXRlIFBvcHVwXG4gICAgLy8gYW5ub3RhdGlvbiwgd2UgY2Fubm90IGhpZGUgdGhlIGVudGlyZSBjb250YWluZXIgYXMgdGhlIGltYWdlIHdvdWxkXG4gICAgLy8gZGlzYXBwZWFyIHRvby4gSW4gdGhhdCBzcGVjaWFsIGNhc2UsIGhpZGluZyB0aGUgd3JhcHBlciBzdWZmaWNlcy5cbiAgICB0aGlzLmhpZGVFbGVtZW50ID0gdGhpcy5oaWRlV3JhcHBlciA/IHdyYXBwZXIgOiB0aGlzLmNvbnRhaW5lcjtcbiAgICB0aGlzLmhpZGVFbGVtZW50LmhpZGRlbiA9IHRydWU7XG5cbiAgICBjb25zdCBwb3B1cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgcG9wdXAuY2xhc3NOYW1lID0gXCJwb3B1cFwiO1xuXG4gICAgY29uc3QgY29sb3IgPSB0aGlzLmNvbG9yO1xuICAgIGlmIChjb2xvcikge1xuICAgICAgLy8gRW5saWdodGVuIHRoZSBjb2xvci5cbiAgICAgIGNvbnN0IHIgPSBCQUNLR1JPVU5EX0VOTElHSFQgKiAoMjU1IC0gY29sb3JbMF0pICsgY29sb3JbMF07XG4gICAgICBjb25zdCBnID0gQkFDS0dST1VORF9FTkxJR0hUICogKDI1NSAtIGNvbG9yWzFdKSArIGNvbG9yWzFdO1xuICAgICAgY29uc3QgYiA9IEJBQ0tHUk9VTkRfRU5MSUdIVCAqICgyNTUgLSBjb2xvclsyXSkgKyBjb2xvclsyXTtcbiAgICAgIHBvcHVwLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFV0aWwubWFrZUhleENvbG9yKHIgfCAwLCBnIHwgMCwgYiB8IDApO1xuICAgIH1cblxuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgxXCIpO1xuICAgIHRpdGxlLmRpciA9IHRoaXMudGl0bGVPYmouZGlyO1xuICAgIHRpdGxlLnRleHRDb250ZW50ID0gdGhpcy50aXRsZU9iai5zdHI7XG4gICAgcG9wdXAuYXBwZW5kQ2hpbGQodGl0bGUpO1xuXG4gICAgLy8gVGhlIG1vZGlmaWNhdGlvbiBkYXRlIGlzIHNob3duIGluIHRoZSBwb3B1cCBpbnN0ZWFkIG9mIHRoZSBjcmVhdGlvblxuICAgIC8vIGRhdGUgaWYgaXQgaXMgYXZhaWxhYmxlIGFuZCBjYW4gYmUgcGFyc2VkIGNvcnJlY3RseSwgd2hpY2ggaXNcbiAgICAvLyBjb25zaXN0ZW50IHdpdGggb3RoZXIgdmlld2VycyBzdWNoIGFzIEFkb2JlIEFjcm9iYXQuXG4gICAgY29uc3QgZGF0ZU9iamVjdCA9IFBERkRhdGVTdHJpbmcudG9EYXRlT2JqZWN0KHRoaXMubW9kaWZpY2F0aW9uRGF0ZSk7XG4gICAgaWYgKGRhdGVPYmplY3QpIHtcbiAgICAgIGNvbnN0IG1vZGlmaWNhdGlvbkRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgIG1vZGlmaWNhdGlvbkRhdGUuY2xhc3NOYW1lID0gXCJwb3B1cERhdGVcIjtcbiAgICAgIG1vZGlmaWNhdGlvbkRhdGUudGV4dENvbnRlbnQgPSBcInt7ZGF0ZX19LCB7e3RpbWV9fVwiO1xuICAgICAgbW9kaWZpY2F0aW9uRGF0ZS5kYXRhc2V0LmwxMG5JZCA9IFwiYW5ub3RhdGlvbl9kYXRlX3N0cmluZ1wiO1xuICAgICAgbW9kaWZpY2F0aW9uRGF0ZS5kYXRhc2V0LmwxMG5BcmdzID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBkYXRlOiBkYXRlT2JqZWN0LnRvTG9jYWxlRGF0ZVN0cmluZygpLFxuICAgICAgICB0aW1lOiBkYXRlT2JqZWN0LnRvTG9jYWxlVGltZVN0cmluZygpLFxuICAgICAgfSk7XG4gICAgICBwb3B1cC5hcHBlbmRDaGlsZChtb2RpZmljYXRpb25EYXRlKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICB0aGlzLnJpY2hUZXh0Py5zdHIgJiZcbiAgICAgICghdGhpcy5jb250ZW50c09iaj8uc3RyIHx8IHRoaXMuY29udGVudHNPYmouc3RyID09PSB0aGlzLnJpY2hUZXh0LnN0cilcbiAgICApIHtcbiAgICAgIFhmYUxheWVyLnJlbmRlcih7XG4gICAgICAgIHhmYUh0bWw6IHRoaXMucmljaFRleHQuaHRtbCxcbiAgICAgICAgaW50ZW50OiBcInJpY2hUZXh0XCIsXG4gICAgICAgIGRpdjogcG9wdXAsXG4gICAgICB9KTtcbiAgICAgIHBvcHVwLmxhc3RDaGlsZC5jbGFzc05hbWUgPSBcInJpY2hUZXh0IHBvcHVwQ29udGVudFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjb250ZW50cyA9IHRoaXMuX2Zvcm1hdENvbnRlbnRzKHRoaXMuY29udGVudHNPYmopO1xuICAgICAgcG9wdXAuYXBwZW5kQ2hpbGQoY29udGVudHMpO1xuICAgIH1cblxuICAgIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLnRyaWdnZXIpKSB7XG4gICAgICB0aGlzLnRyaWdnZXIgPSBbdGhpcy50cmlnZ2VyXTtcbiAgICB9XG5cbiAgICAvLyBBdHRhY2ggdGhlIGV2ZW50IGxpc3RlbmVycyB0byB0aGUgdHJpZ2dlciBlbGVtZW50LlxuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLnRyaWdnZXIpIHtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX3RvZ2dsZS5iaW5kKHRoaXMpKTtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCB0aGlzLl9zaG93LmJpbmQodGhpcywgZmFsc2UpKTtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsIHRoaXMuX2hpZGUuYmluZCh0aGlzLCBmYWxzZSkpO1xuICAgIH1cbiAgICBwb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGlkZS5iaW5kKHRoaXMsIHRydWUpKTtcblxuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQocG9wdXApO1xuICAgIHJldHVybiB3cmFwcGVyO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCB0aGUgY29udGVudHMgb2YgdGhlIHBvcHVwIGJ5IGFkZGluZyBuZXdsaW5lcyB3aGVyZSBuZWNlc3NhcnkuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgc3RyaW5nPn0gY29udGVudHNPYmpcbiAgICogQG1lbWJlcm9mIFBvcHVwRWxlbWVudFxuICAgKiBAcmV0dXJucyB7SFRNTFBhcmFncmFwaEVsZW1lbnR9XG4gICAqL1xuICBfZm9ybWF0Q29udGVudHMoeyBzdHIsIGRpciB9KSB7XG4gICAgY29uc3QgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIHAuY2xhc3NOYW1lID0gXCJwb3B1cENvbnRlbnRcIjtcbiAgICBwLmRpciA9IGRpcjtcbiAgICBjb25zdCBsaW5lcyA9IHN0ci5zcGxpdCgvKD86XFxyXFxuP3xcXG4pLyk7XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gbGluZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2ldO1xuICAgICAgcC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShsaW5lKSk7XG4gICAgICBpZiAoaSA8IGlpIC0gMSkge1xuICAgICAgICBwLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwO1xuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgcG9wdXAuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZW1iZXJvZiBQb3B1cEVsZW1lbnRcbiAgICovXG4gIF90b2dnbGUoKSB7XG4gICAgaWYgKHRoaXMucGlubmVkKSB7XG4gICAgICB0aGlzLl9oaWRlKHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zaG93KHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IHRoZSBwb3B1cC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtib29sZWFufSBwaW5cbiAgICogQG1lbWJlcm9mIFBvcHVwRWxlbWVudFxuICAgKi9cbiAgX3Nob3cocGluID0gZmFsc2UpIHtcbiAgICBpZiAocGluKSB7XG4gICAgICB0aGlzLnBpbm5lZCA9IHRydWU7XG4gICAgfVxuICAgIGlmICh0aGlzLmhpZGVFbGVtZW50LmhpZGRlbikge1xuICAgICAgdGhpcy5oaWRlRWxlbWVudC5oaWRkZW4gPSBmYWxzZTtcbiAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnpJbmRleCArPSAxO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlIHRoZSBwb3B1cC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtib29sZWFufSB1bnBpblxuICAgKiBAbWVtYmVyb2YgUG9wdXBFbGVtZW50XG4gICAqL1xuICBfaGlkZSh1bnBpbiA9IHRydWUpIHtcbiAgICBpZiAodW5waW4pIHtcbiAgICAgIHRoaXMucGlubmVkID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICghdGhpcy5oaWRlRWxlbWVudC5oaWRkZW4gJiYgIXRoaXMucGlubmVkKSB7XG4gICAgICB0aGlzLmhpZGVFbGVtZW50LmhpZGRlbiA9IHRydWU7XG4gICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS56SW5kZXggLT0gMTtcbiAgICB9XG4gIH1cbn1cblxuY2xhc3MgRnJlZVRleHRBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIGNvbnN0IGlzUmVuZGVyYWJsZSA9ICEhKFxuICAgICAgcGFyYW1ldGVycy5kYXRhLmhhc1BvcHVwIHx8XG4gICAgICBwYXJhbWV0ZXJzLmRhdGEudGl0bGVPYmo/LnN0ciB8fFxuICAgICAgcGFyYW1ldGVycy5kYXRhLmNvbnRlbnRzT2JqPy5zdHIgfHxcbiAgICAgIHBhcmFtZXRlcnMuZGF0YS5yaWNoVGV4dD8uc3RyXG4gICAgKTtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7IGlzUmVuZGVyYWJsZSwgaWdub3JlQm9yZGVyOiB0cnVlIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTmFtZSA9IFwiZnJlZVRleHRBbm5vdGF0aW9uXCI7XG5cbiAgICBpZiAoIXRoaXMuZGF0YS5oYXNQb3B1cCkge1xuICAgICAgdGhpcy5fY3JlYXRlUG9wdXAobnVsbCwgdGhpcy5kYXRhKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICB9XG59XG5cbmNsYXNzIExpbmVBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIGNvbnN0IGlzUmVuZGVyYWJsZSA9ICEhKFxuICAgICAgcGFyYW1ldGVycy5kYXRhLmhhc1BvcHVwIHx8XG4gICAgICBwYXJhbWV0ZXJzLmRhdGEudGl0bGVPYmo/LnN0ciB8fFxuICAgICAgcGFyYW1ldGVycy5kYXRhLmNvbnRlbnRzT2JqPy5zdHIgfHxcbiAgICAgIHBhcmFtZXRlcnMuZGF0YS5yaWNoVGV4dD8uc3RyXG4gICAgKTtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7IGlzUmVuZGVyYWJsZSwgaWdub3JlQm9yZGVyOiB0cnVlIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTmFtZSA9IFwibGluZUFubm90YXRpb25cIjtcblxuICAgIC8vIENyZWF0ZSBhbiBpbnZpc2libGUgbGluZSB3aXRoIHRoZSBzYW1lIHN0YXJ0aW5nIGFuZCBlbmRpbmcgY29vcmRpbmF0ZXNcbiAgICAvLyB0aGF0IGFjdHMgYXMgdGhlIHRyaWdnZXIgZm9yIHRoZSBwb3B1cC4gT25seSB0aGUgbGluZSBpdHNlbGYgc2hvdWxkXG4gICAgLy8gdHJpZ2dlciB0aGUgcG9wdXAsIG5vdCB0aGUgZW50aXJlIGNvbnRhaW5lci5cbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gZ2V0UmVjdERpbXMoZGF0YS5yZWN0KTtcbiAgICBjb25zdCBzdmcgPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlKHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgLy8gUERGIGNvb3JkaW5hdGVzIGFyZSBjYWxjdWxhdGVkIGZyb20gYSBib3R0b20gbGVmdCBvcmlnaW4sIHNvIHRyYW5zZm9ybVxuICAgIC8vIHRoZSBsaW5lIGNvb3JkaW5hdGVzIHRvIGEgdG9wIGxlZnQgb3JpZ2luIGZvciB0aGUgU1ZHIGVsZW1lbnQuXG4gICAgY29uc3QgbGluZSA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnOmxpbmVcIik7XG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoXCJ4MVwiLCBkYXRhLnJlY3RbMl0gLSBkYXRhLmxpbmVDb29yZGluYXRlc1swXSk7XG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoXCJ5MVwiLCBkYXRhLnJlY3RbM10gLSBkYXRhLmxpbmVDb29yZGluYXRlc1sxXSk7XG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoXCJ4MlwiLCBkYXRhLnJlY3RbMl0gLSBkYXRhLmxpbmVDb29yZGluYXRlc1syXSk7XG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoXCJ5MlwiLCBkYXRhLnJlY3RbM10gLSBkYXRhLmxpbmVDb29yZGluYXRlc1szXSk7XG4gICAgLy8gRW5zdXJlIHRoYXQgdGhlICdzdHJva2Utd2lkdGgnIGlzIGFsd2F5cyBub24temVybywgc2luY2Ugb3RoZXJ3aXNlIGl0XG4gICAgLy8gd29uJ3QgYmUgcG9zc2libGUgdG8gb3Blbi9jbG9zZSB0aGUgcG9wdXAgKG5vdGUgZS5nLiBpc3N1ZSAxMTEyMikuXG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgZGF0YS5ib3JkZXJTdHlsZS53aWR0aCB8fCAxKTtcbiAgICBsaW5lLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLCBcInRyYW5zcGFyZW50XCIpO1xuICAgIGxpbmUuc2V0QXR0cmlidXRlKFwiZmlsbFwiLCBcInRyYW5zcGFyZW50XCIpO1xuXG4gICAgc3ZnLmFwcGVuZENoaWxkKGxpbmUpO1xuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZChzdmcpO1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBwb3B1cCBvdXJzZWx2ZXMgc28gdGhhdCB3ZSBjYW4gYmluZCBpdCB0byB0aGUgbGluZSBpbnN0ZWFkXG4gICAgLy8gb2YgdG8gdGhlIGVudGlyZSBjb250YWluZXIgKHdoaWNoIGlzIHRoZSBkZWZhdWx0KS5cbiAgICB0aGlzLl9jcmVhdGVQb3B1cChsaW5lLCBkYXRhKTtcblxuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgfVxufVxuXG5jbGFzcyBTcXVhcmVBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIGNvbnN0IGlzUmVuZGVyYWJsZSA9ICEhKFxuICAgICAgcGFyYW1ldGVycy5kYXRhLmhhc1BvcHVwIHx8XG4gICAgICBwYXJhbWV0ZXJzLmRhdGEudGl0bGVPYmo/LnN0ciB8fFxuICAgICAgcGFyYW1ldGVycy5kYXRhLmNvbnRlbnRzT2JqPy5zdHIgfHxcbiAgICAgIHBhcmFtZXRlcnMuZGF0YS5yaWNoVGV4dD8uc3RyXG4gICAgKTtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7IGlzUmVuZGVyYWJsZSwgaWdub3JlQm9yZGVyOiB0cnVlIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTmFtZSA9IFwic3F1YXJlQW5ub3RhdGlvblwiO1xuXG4gICAgLy8gQ3JlYXRlIGFuIGludmlzaWJsZSBzcXVhcmUgd2l0aCB0aGUgc2FtZSByZWN0YW5nbGUgdGhhdCBhY3RzIGFzIHRoZVxuICAgIC8vIHRyaWdnZXIgZm9yIHRoZSBwb3B1cC4gT25seSB0aGUgc3F1YXJlIGl0c2VsZiBzaG91bGQgdHJpZ2dlciB0aGVcbiAgICAvLyBwb3B1cCwgbm90IHRoZSBlbnRpcmUgY29udGFpbmVyLlxuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBnZXRSZWN0RGltcyhkYXRhLnJlY3QpO1xuICAgIGNvbnN0IHN2ZyA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGUod2lkdGgsIGhlaWdodCk7XG5cbiAgICAvLyBUaGUgYnJvd3NlciBkcmF3cyBoYWxmIG9mIHRoZSBib3JkZXJzIGluc2lkZSB0aGUgc3F1YXJlIGFuZCBoYWxmIG9mXG4gICAgLy8gdGhlIGJvcmRlcnMgb3V0c2lkZSB0aGUgc3F1YXJlIGJ5IGRlZmF1bHQuIFRoaXMgYmVoYXZpb3IgY2Fubm90IGJlXG4gICAgLy8gY2hhbmdlZCBwcm9ncmFtbWF0aWNhbGx5LCBzbyBjb3JyZWN0IGZvciB0aGF0IGhlcmUuXG4gICAgY29uc3QgYm9yZGVyV2lkdGggPSBkYXRhLmJvcmRlclN0eWxlLndpZHRoO1xuICAgIGNvbnN0IHNxdWFyZSA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnOnJlY3RcIik7XG4gICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcInhcIiwgYm9yZGVyV2lkdGggLyAyKTtcbiAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwieVwiLCBib3JkZXJXaWR0aCAvIDIpO1xuICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCB3aWR0aCAtIGJvcmRlcldpZHRoKTtcbiAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIGhlaWdodCAtIGJvcmRlcldpZHRoKTtcbiAgICAvLyBFbnN1cmUgdGhhdCB0aGUgJ3N0cm9rZS13aWR0aCcgaXMgYWx3YXlzIG5vbi16ZXJvLCBzaW5jZSBvdGhlcndpc2UgaXRcbiAgICAvLyB3b24ndCBiZSBwb3NzaWJsZSB0byBvcGVuL2Nsb3NlIHRoZSBwb3B1cCAobm90ZSBlLmcuIGlzc3VlIDExMTIyKS5cbiAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIGJvcmRlcldpZHRoIHx8IDEpO1xuICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJzdHJva2VcIiwgXCJ0cmFuc3BhcmVudFwiKTtcbiAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwiZmlsbFwiLCBcInRyYW5zcGFyZW50XCIpO1xuXG4gICAgc3ZnLmFwcGVuZENoaWxkKHNxdWFyZSk7XG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kKHN2Zyk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIHBvcHVwIG91cnNlbHZlcyBzbyB0aGF0IHdlIGNhbiBiaW5kIGl0IHRvIHRoZSBzcXVhcmUgaW5zdGVhZFxuICAgIC8vIG9mIHRvIHRoZSBlbnRpcmUgY29udGFpbmVyICh3aGljaCBpcyB0aGUgZGVmYXVsdCkuXG4gICAgdGhpcy5fY3JlYXRlUG9wdXAoc3F1YXJlLCBkYXRhKTtcblxuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgfVxufVxuXG5jbGFzcyBDaXJjbGVBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIGNvbnN0IGlzUmVuZGVyYWJsZSA9ICEhKFxuICAgICAgcGFyYW1ldGVycy5kYXRhLmhhc1BvcHVwIHx8XG4gICAgICBwYXJhbWV0ZXJzLmRhdGEudGl0bGVPYmo/LnN0ciB8fFxuICAgICAgcGFyYW1ldGVycy5kYXRhLmNvbnRlbnRzT2JqPy5zdHIgfHxcbiAgICAgIHBhcmFtZXRlcnMuZGF0YS5yaWNoVGV4dD8uc3RyXG4gICAgKTtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7IGlzUmVuZGVyYWJsZSwgaWdub3JlQm9yZGVyOiB0cnVlIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTmFtZSA9IFwiY2lyY2xlQW5ub3RhdGlvblwiO1xuXG4gICAgLy8gQ3JlYXRlIGFuIGludmlzaWJsZSBjaXJjbGUgd2l0aCB0aGUgc2FtZSBlbGxpcHNlIHRoYXQgYWN0cyBhcyB0aGVcbiAgICAvLyB0cmlnZ2VyIGZvciB0aGUgcG9wdXAuIE9ubHkgdGhlIGNpcmNsZSBpdHNlbGYgc2hvdWxkIHRyaWdnZXIgdGhlXG4gICAgLy8gcG9wdXAsIG5vdCB0aGUgZW50aXJlIGNvbnRhaW5lci5cbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gZ2V0UmVjdERpbXMoZGF0YS5yZWN0KTtcbiAgICBjb25zdCBzdmcgPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlKHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgLy8gVGhlIGJyb3dzZXIgZHJhd3MgaGFsZiBvZiB0aGUgYm9yZGVycyBpbnNpZGUgdGhlIGNpcmNsZSBhbmQgaGFsZiBvZlxuICAgIC8vIHRoZSBib3JkZXJzIG91dHNpZGUgdGhlIGNpcmNsZSBieSBkZWZhdWx0LiBUaGlzIGJlaGF2aW9yIGNhbm5vdCBiZVxuICAgIC8vIGNoYW5nZWQgcHJvZ3JhbW1hdGljYWxseSwgc28gY29ycmVjdCBmb3IgdGhhdCBoZXJlLlxuICAgIGNvbnN0IGJvcmRlcldpZHRoID0gZGF0YS5ib3JkZXJTdHlsZS53aWR0aDtcbiAgICBjb25zdCBjaXJjbGUgPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudChcInN2ZzplbGxpcHNlXCIpO1xuICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoXCJjeFwiLCB3aWR0aCAvIDIpO1xuICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoXCJjeVwiLCBoZWlnaHQgLyAyKTtcbiAgICBjaXJjbGUuc2V0QXR0cmlidXRlKFwicnhcIiwgd2lkdGggLyAyIC0gYm9yZGVyV2lkdGggLyAyKTtcbiAgICBjaXJjbGUuc2V0QXR0cmlidXRlKFwicnlcIiwgaGVpZ2h0IC8gMiAtIGJvcmRlcldpZHRoIC8gMik7XG4gICAgLy8gRW5zdXJlIHRoYXQgdGhlICdzdHJva2Utd2lkdGgnIGlzIGFsd2F5cyBub24temVybywgc2luY2Ugb3RoZXJ3aXNlIGl0XG4gICAgLy8gd29uJ3QgYmUgcG9zc2libGUgdG8gb3Blbi9jbG9zZSB0aGUgcG9wdXAgKG5vdGUgZS5nLiBpc3N1ZSAxMTEyMikuXG4gICAgY2lyY2xlLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBib3JkZXJXaWR0aCB8fCAxKTtcbiAgICBjaXJjbGUuc2V0QXR0cmlidXRlKFwic3Ryb2tlXCIsIFwidHJhbnNwYXJlbnRcIik7XG4gICAgY2lyY2xlLnNldEF0dHJpYnV0ZShcImZpbGxcIiwgXCJ0cmFuc3BhcmVudFwiKTtcblxuICAgIHN2Zy5hcHBlbmRDaGlsZChjaXJjbGUpO1xuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZChzdmcpO1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBwb3B1cCBvdXJzZWx2ZXMgc28gdGhhdCB3ZSBjYW4gYmluZCBpdCB0byB0aGUgY2lyY2xlIGluc3RlYWRcbiAgICAvLyBvZiB0byB0aGUgZW50aXJlIGNvbnRhaW5lciAod2hpY2ggaXMgdGhlIGRlZmF1bHQpLlxuICAgIHRoaXMuX2NyZWF0ZVBvcHVwKGNpcmNsZSwgZGF0YSk7XG5cbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cbn1cblxuY2xhc3MgUG9seWxpbmVBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIGNvbnN0IGlzUmVuZGVyYWJsZSA9ICEhKFxuICAgICAgcGFyYW1ldGVycy5kYXRhLmhhc1BvcHVwIHx8XG4gICAgICBwYXJhbWV0ZXJzLmRhdGEudGl0bGVPYmo/LnN0ciB8fFxuICAgICAgcGFyYW1ldGVycy5kYXRhLmNvbnRlbnRzT2JqPy5zdHIgfHxcbiAgICAgIHBhcmFtZXRlcnMuZGF0YS5yaWNoVGV4dD8uc3RyXG4gICAgKTtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7IGlzUmVuZGVyYWJsZSwgaWdub3JlQm9yZGVyOiB0cnVlIH0pO1xuXG4gICAgdGhpcy5jb250YWluZXJDbGFzc05hbWUgPSBcInBvbHlsaW5lQW5ub3RhdGlvblwiO1xuICAgIHRoaXMuc3ZnRWxlbWVudE5hbWUgPSBcInN2Zzpwb2x5bGluZVwiO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTmFtZSA9IHRoaXMuY29udGFpbmVyQ2xhc3NOYW1lO1xuXG4gICAgLy8gQ3JlYXRlIGFuIGludmlzaWJsZSBwb2x5bGluZSB3aXRoIHRoZSBzYW1lIHBvaW50cyB0aGF0IGFjdHMgYXMgdGhlXG4gICAgLy8gdHJpZ2dlciBmb3IgdGhlIHBvcHVwLiBPbmx5IHRoZSBwb2x5bGluZSBpdHNlbGYgc2hvdWxkIHRyaWdnZXIgdGhlXG4gICAgLy8gcG9wdXAsIG5vdCB0aGUgZW50aXJlIGNvbnRhaW5lci5cbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gZ2V0UmVjdERpbXMoZGF0YS5yZWN0KTtcbiAgICBjb25zdCBzdmcgPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlKHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgLy8gQ29udmVydCB0aGUgdmVydGljZXMgYXJyYXkgdG8gYSBzaW5nbGUgcG9pbnRzIHN0cmluZyB0aGF0IHRoZSBTVkdcbiAgICAvLyBwb2x5bGluZSBlbGVtZW50IGV4cGVjdHMgKFwieDEseTEgeDIseTIgLi4uXCIpLiBQREYgY29vcmRpbmF0ZXMgYXJlXG4gICAgLy8gY2FsY3VsYXRlZCBmcm9tIGEgYm90dG9tIGxlZnQgb3JpZ2luLCBzbyB0cmFuc2Zvcm0gdGhlIHBvbHlsaW5lXG4gICAgLy8gY29vcmRpbmF0ZXMgdG8gYSB0b3AgbGVmdCBvcmlnaW4gZm9yIHRoZSBTVkcgZWxlbWVudC5cbiAgICBsZXQgcG9pbnRzID0gW107XG4gICAgZm9yIChjb25zdCBjb29yZGluYXRlIG9mIGRhdGEudmVydGljZXMpIHtcbiAgICAgIGNvbnN0IHggPSBjb29yZGluYXRlLnggLSBkYXRhLnJlY3RbMF07XG4gICAgICBjb25zdCB5ID0gZGF0YS5yZWN0WzNdIC0gY29vcmRpbmF0ZS55O1xuICAgICAgcG9pbnRzLnB1c2goeCArIFwiLFwiICsgeSk7XG4gICAgfVxuICAgIHBvaW50cyA9IHBvaW50cy5qb2luKFwiIFwiKTtcblxuICAgIGNvbnN0IHBvbHlsaW5lID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQodGhpcy5zdmdFbGVtZW50TmFtZSk7XG4gICAgcG9seWxpbmUuc2V0QXR0cmlidXRlKFwicG9pbnRzXCIsIHBvaW50cyk7XG4gICAgLy8gRW5zdXJlIHRoYXQgdGhlICdzdHJva2Utd2lkdGgnIGlzIGFsd2F5cyBub24temVybywgc2luY2Ugb3RoZXJ3aXNlIGl0XG4gICAgLy8gd29uJ3QgYmUgcG9zc2libGUgdG8gb3Blbi9jbG9zZSB0aGUgcG9wdXAgKG5vdGUgZS5nLiBpc3N1ZSAxMTEyMikuXG4gICAgcG9seWxpbmUuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIGRhdGEuYm9yZGVyU3R5bGUud2lkdGggfHwgMSk7XG4gICAgcG9seWxpbmUuc2V0QXR0cmlidXRlKFwic3Ryb2tlXCIsIFwidHJhbnNwYXJlbnRcIik7XG4gICAgcG9seWxpbmUuc2V0QXR0cmlidXRlKFwiZmlsbFwiLCBcInRyYW5zcGFyZW50XCIpO1xuXG4gICAgc3ZnLmFwcGVuZENoaWxkKHBvbHlsaW5lKTtcbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQoc3ZnKTtcblxuICAgIC8vIENyZWF0ZSB0aGUgcG9wdXAgb3Vyc2VsdmVzIHNvIHRoYXQgd2UgY2FuIGJpbmQgaXQgdG8gdGhlIHBvbHlsaW5lXG4gICAgLy8gaW5zdGVhZCBvZiB0byB0aGUgZW50aXJlIGNvbnRhaW5lciAod2hpY2ggaXMgdGhlIGRlZmF1bHQpLlxuICAgIHRoaXMuX2NyZWF0ZVBvcHVwKHBvbHlsaW5lLCBkYXRhKTtcblxuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgfVxufVxuXG5jbGFzcyBQb2x5Z29uQW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBQb2x5bGluZUFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIC8vIFBvbHlnb25zIGFyZSBzcGVjaWZpYyBmb3JtcyBvZiBwb2x5bGluZXMsIHNvIHJldXNlIHRoZWlyIGxvZ2ljLlxuICAgIHN1cGVyKHBhcmFtZXRlcnMpO1xuXG4gICAgdGhpcy5jb250YWluZXJDbGFzc05hbWUgPSBcInBvbHlnb25Bbm5vdGF0aW9uXCI7XG4gICAgdGhpcy5zdmdFbGVtZW50TmFtZSA9IFwic3ZnOnBvbHlnb25cIjtcbiAgfVxufVxuXG5jbGFzcyBDYXJldEFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgQW5ub3RhdGlvbkVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKSB7XG4gICAgY29uc3QgaXNSZW5kZXJhYmxlID0gISEoXG4gICAgICBwYXJhbWV0ZXJzLmRhdGEuaGFzUG9wdXAgfHxcbiAgICAgIHBhcmFtZXRlcnMuZGF0YS50aXRsZU9iaj8uc3RyIHx8XG4gICAgICBwYXJhbWV0ZXJzLmRhdGEuY29udGVudHNPYmo/LnN0ciB8fFxuICAgICAgcGFyYW1ldGVycy5kYXRhLnJpY2hUZXh0Py5zdHJcbiAgICApO1xuICAgIHN1cGVyKHBhcmFtZXRlcnMsIHsgaXNSZW5kZXJhYmxlLCBpZ25vcmVCb3JkZXI6IHRydWUgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NOYW1lID0gXCJjYXJldEFubm90YXRpb25cIjtcblxuICAgIGlmICghdGhpcy5kYXRhLmhhc1BvcHVwKSB7XG4gICAgICB0aGlzLl9jcmVhdGVQb3B1cChudWxsLCB0aGlzLmRhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cbn1cblxuY2xhc3MgSW5rQW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBBbm5vdGF0aW9uRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMpIHtcbiAgICBjb25zdCBpc1JlbmRlcmFibGUgPSAhIShcbiAgICAgIHBhcmFtZXRlcnMuZGF0YS5oYXNQb3B1cCB8fFxuICAgICAgcGFyYW1ldGVycy5kYXRhLnRpdGxlT2JqPy5zdHIgfHxcbiAgICAgIHBhcmFtZXRlcnMuZGF0YS5jb250ZW50c09iaj8uc3RyIHx8XG4gICAgICBwYXJhbWV0ZXJzLmRhdGEucmljaFRleHQ/LnN0clxuICAgICk7XG4gICAgc3VwZXIocGFyYW1ldGVycywgeyBpc1JlbmRlcmFibGUsIGlnbm9yZUJvcmRlcjogdHJ1ZSB9KTtcblxuICAgIHRoaXMuY29udGFpbmVyQ2xhc3NOYW1lID0gXCJpbmtBbm5vdGF0aW9uXCI7XG5cbiAgICAvLyBVc2UgdGhlIHBvbHlsaW5lIFNWRyBlbGVtZW50IHNpbmNlIGl0IGFsbG93cyB1cyB0byB1c2UgY29vcmRpbmF0ZXNcbiAgICAvLyBkaXJlY3RseSBhbmQgdG8gZHJhdyBib3RoIHN0cmFpZ2h0IGxpbmVzIGFuZCBjdXJ2ZXMuXG4gICAgdGhpcy5zdmdFbGVtZW50TmFtZSA9IFwic3ZnOnBvbHlsaW5lXCI7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NOYW1lID0gdGhpcy5jb250YWluZXJDbGFzc05hbWU7XG5cbiAgICAvLyBDcmVhdGUgYW4gaW52aXNpYmxlIHBvbHlsaW5lIHdpdGggdGhlIHNhbWUgcG9pbnRzIHRoYXQgYWN0cyBhcyB0aGVcbiAgICAvLyB0cmlnZ2VyIGZvciB0aGUgcG9wdXAuXG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IGdldFJlY3REaW1zKGRhdGEucmVjdCk7XG4gICAgY29uc3Qgc3ZnID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZSh3aWR0aCwgaGVpZ2h0KTtcblxuICAgIGZvciAoY29uc3QgaW5rTGlzdCBvZiBkYXRhLmlua0xpc3RzKSB7XG4gICAgICAvLyBDb252ZXJ0IHRoZSBpbmsgbGlzdCB0byBhIHNpbmdsZSBwb2ludHMgc3RyaW5nIHRoYXQgdGhlIFNWR1xuICAgICAgLy8gcG9seWxpbmUgZWxlbWVudCBleHBlY3RzIChcIngxLHkxIHgyLHkyIC4uLlwiKS4gUERGIGNvb3JkaW5hdGVzIGFyZVxuICAgICAgLy8gY2FsY3VsYXRlZCBmcm9tIGEgYm90dG9tIGxlZnQgb3JpZ2luLCBzbyB0cmFuc2Zvcm0gdGhlIHBvbHlsaW5lXG4gICAgICAvLyBjb29yZGluYXRlcyB0byBhIHRvcCBsZWZ0IG9yaWdpbiBmb3IgdGhlIFNWRyBlbGVtZW50LlxuICAgICAgbGV0IHBvaW50cyA9IFtdO1xuICAgICAgZm9yIChjb25zdCBjb29yZGluYXRlIG9mIGlua0xpc3QpIHtcbiAgICAgICAgY29uc3QgeCA9IGNvb3JkaW5hdGUueCAtIGRhdGEucmVjdFswXTtcbiAgICAgICAgY29uc3QgeSA9IGRhdGEucmVjdFszXSAtIGNvb3JkaW5hdGUueTtcbiAgICAgICAgcG9pbnRzLnB1c2goYCR7eH0sJHt5fWApO1xuICAgICAgfVxuICAgICAgcG9pbnRzID0gcG9pbnRzLmpvaW4oXCIgXCIpO1xuXG4gICAgICBjb25zdCBwb2x5bGluZSA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KHRoaXMuc3ZnRWxlbWVudE5hbWUpO1xuICAgICAgcG9seWxpbmUuc2V0QXR0cmlidXRlKFwicG9pbnRzXCIsIHBvaW50cyk7XG4gICAgICAvLyBFbnN1cmUgdGhhdCB0aGUgJ3N0cm9rZS13aWR0aCcgaXMgYWx3YXlzIG5vbi16ZXJvLCBzaW5jZSBvdGhlcndpc2UgaXRcbiAgICAgIC8vIHdvbid0IGJlIHBvc3NpYmxlIHRvIG9wZW4vY2xvc2UgdGhlIHBvcHVwIChub3RlIGUuZy4gaXNzdWUgMTExMjIpLlxuICAgICAgcG9seWxpbmUuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIGRhdGEuYm9yZGVyU3R5bGUud2lkdGggfHwgMSk7XG4gICAgICBwb2x5bGluZS5zZXRBdHRyaWJ1dGUoXCJzdHJva2VcIiwgXCJ0cmFuc3BhcmVudFwiKTtcbiAgICAgIHBvbHlsaW5lLnNldEF0dHJpYnV0ZShcImZpbGxcIiwgXCJ0cmFuc3BhcmVudFwiKTtcblxuICAgICAgLy8gQ3JlYXRlIHRoZSBwb3B1cCBvdXJzZWx2ZXMgc28gdGhhdCB3ZSBjYW4gYmluZCBpdCB0byB0aGUgcG9seWxpbmVcbiAgICAgIC8vIGluc3RlYWQgb2YgdG8gdGhlIGVudGlyZSBjb250YWluZXIgKHdoaWNoIGlzIHRoZSBkZWZhdWx0KS5cbiAgICAgIHRoaXMuX2NyZWF0ZVBvcHVwKHBvbHlsaW5lLCBkYXRhKTtcblxuICAgICAgc3ZnLmFwcGVuZENoaWxkKHBvbHlsaW5lKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQoc3ZnKTtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cbn1cblxuY2xhc3MgSGlnaGxpZ2h0QW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBBbm5vdGF0aW9uRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMpIHtcbiAgICBjb25zdCBpc1JlbmRlcmFibGUgPSAhIShcbiAgICAgIHBhcmFtZXRlcnMuZGF0YS5oYXNQb3B1cCB8fFxuICAgICAgcGFyYW1ldGVycy5kYXRhLnRpdGxlT2JqPy5zdHIgfHxcbiAgICAgIHBhcmFtZXRlcnMuZGF0YS5jb250ZW50c09iaj8uc3RyIHx8XG4gICAgICBwYXJhbWV0ZXJzLmRhdGEucmljaFRleHQ/LnN0clxuICAgICk7XG4gICAgc3VwZXIocGFyYW1ldGVycywge1xuICAgICAgaXNSZW5kZXJhYmxlLFxuICAgICAgaWdub3JlQm9yZGVyOiB0cnVlLFxuICAgICAgY3JlYXRlUXVhZHJpbGF0ZXJhbHM6IHRydWUsXG4gICAgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuaGFzUG9wdXApIHtcbiAgICAgIHRoaXMuX2NyZWF0ZVBvcHVwKG51bGwsIHRoaXMuZGF0YSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucXVhZHJpbGF0ZXJhbHMpIHtcbiAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJRdWFkcmlsYXRlcmFscyhcImhpZ2hsaWdodEFubm90YXRpb25cIik7XG4gICAgfVxuXG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NOYW1lID0gXCJoaWdobGlnaHRBbm5vdGF0aW9uXCI7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICB9XG59XG5cbmNsYXNzIFVuZGVybGluZUFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgQW5ub3RhdGlvbkVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKSB7XG4gICAgY29uc3QgaXNSZW5kZXJhYmxlID0gISEoXG4gICAgICBwYXJhbWV0ZXJzLmRhdGEuaGFzUG9wdXAgfHxcbiAgICAgIHBhcmFtZXRlcnMuZGF0YS50aXRsZU9iaj8uc3RyIHx8XG4gICAgICBwYXJhbWV0ZXJzLmRhdGEuY29udGVudHNPYmo/LnN0ciB8fFxuICAgICAgcGFyYW1ldGVycy5kYXRhLnJpY2hUZXh0Py5zdHJcbiAgICApO1xuICAgIHN1cGVyKHBhcmFtZXRlcnMsIHtcbiAgICAgIGlzUmVuZGVyYWJsZSxcbiAgICAgIGlnbm9yZUJvcmRlcjogdHJ1ZSxcbiAgICAgIGNyZWF0ZVF1YWRyaWxhdGVyYWxzOiB0cnVlLFxuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGlmICghdGhpcy5kYXRhLmhhc1BvcHVwKSB7XG4gICAgICB0aGlzLl9jcmVhdGVQb3B1cChudWxsLCB0aGlzLmRhdGEpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnF1YWRyaWxhdGVyYWxzKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVuZGVyUXVhZHJpbGF0ZXJhbHMoXCJ1bmRlcmxpbmVBbm5vdGF0aW9uXCIpO1xuICAgIH1cblxuICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTmFtZSA9IFwidW5kZXJsaW5lQW5ub3RhdGlvblwiO1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgfVxufVxuXG5jbGFzcyBTcXVpZ2dseUFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgQW5ub3RhdGlvbkVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKSB7XG4gICAgY29uc3QgaXNSZW5kZXJhYmxlID0gISEoXG4gICAgICBwYXJhbWV0ZXJzLmRhdGEuaGFzUG9wdXAgfHxcbiAgICAgIHBhcmFtZXRlcnMuZGF0YS50aXRsZU9iaj8uc3RyIHx8XG4gICAgICBwYXJhbWV0ZXJzLmRhdGEuY29udGVudHNPYmo/LnN0ciB8fFxuICAgICAgcGFyYW1ldGVycy5kYXRhLnJpY2hUZXh0Py5zdHJcbiAgICApO1xuICAgIHN1cGVyKHBhcmFtZXRlcnMsIHtcbiAgICAgIGlzUmVuZGVyYWJsZSxcbiAgICAgIGlnbm9yZUJvcmRlcjogdHJ1ZSxcbiAgICAgIGNyZWF0ZVF1YWRyaWxhdGVyYWxzOiB0cnVlLFxuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGlmICghdGhpcy5kYXRhLmhhc1BvcHVwKSB7XG4gICAgICB0aGlzLl9jcmVhdGVQb3B1cChudWxsLCB0aGlzLmRhdGEpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnF1YWRyaWxhdGVyYWxzKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVuZGVyUXVhZHJpbGF0ZXJhbHMoXCJzcXVpZ2dseUFubm90YXRpb25cIik7XG4gICAgfVxuXG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NOYW1lID0gXCJzcXVpZ2dseUFubm90YXRpb25cIjtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cbn1cblxuY2xhc3MgU3RyaWtlT3V0QW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBBbm5vdGF0aW9uRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMpIHtcbiAgICBjb25zdCBpc1JlbmRlcmFibGUgPSAhIShcbiAgICAgIHBhcmFtZXRlcnMuZGF0YS5oYXNQb3B1cCB8fFxuICAgICAgcGFyYW1ldGVycy5kYXRhLnRpdGxlT2JqPy5zdHIgfHxcbiAgICAgIHBhcmFtZXRlcnMuZGF0YS5jb250ZW50c09iaj8uc3RyIHx8XG4gICAgICBwYXJhbWV0ZXJzLmRhdGEucmljaFRleHQ/LnN0clxuICAgICk7XG4gICAgc3VwZXIocGFyYW1ldGVycywge1xuICAgICAgaXNSZW5kZXJhYmxlLFxuICAgICAgaWdub3JlQm9yZGVyOiB0cnVlLFxuICAgICAgY3JlYXRlUXVhZHJpbGF0ZXJhbHM6IHRydWUsXG4gICAgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuaGFzUG9wdXApIHtcbiAgICAgIHRoaXMuX2NyZWF0ZVBvcHVwKG51bGwsIHRoaXMuZGF0YSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucXVhZHJpbGF0ZXJhbHMpIHtcbiAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJRdWFkcmlsYXRlcmFscyhcInN0cmlrZW91dEFubm90YXRpb25cIik7XG4gICAgfVxuXG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NOYW1lID0gXCJzdHJpa2VvdXRBbm5vdGF0aW9uXCI7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICB9XG59XG5cbmNsYXNzIFN0YW1wQW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBBbm5vdGF0aW9uRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMpIHtcbiAgICBjb25zdCBpc1JlbmRlcmFibGUgPSAhIShcbiAgICAgIHBhcmFtZXRlcnMuZGF0YS5oYXNQb3B1cCB8fFxuICAgICAgcGFyYW1ldGVycy5kYXRhLnRpdGxlT2JqPy5zdHIgfHxcbiAgICAgIHBhcmFtZXRlcnMuZGF0YS5jb250ZW50c09iaj8uc3RyIHx8XG4gICAgICBwYXJhbWV0ZXJzLmRhdGEucmljaFRleHQ/LnN0clxuICAgICk7XG4gICAgc3VwZXIocGFyYW1ldGVycywgeyBpc1JlbmRlcmFibGUsIGlnbm9yZUJvcmRlcjogdHJ1ZSB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc05hbWUgPSBcInN0YW1wQW5ub3RhdGlvblwiO1xuXG4gICAgaWYgKCF0aGlzLmRhdGEuaGFzUG9wdXApIHtcbiAgICAgIHRoaXMuX2NyZWF0ZVBvcHVwKG51bGwsIHRoaXMuZGF0YSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgfVxufVxuXG5jbGFzcyBGaWxlQXR0YWNobWVudEFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgQW5ub3RhdGlvbkVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKSB7XG4gICAgc3VwZXIocGFyYW1ldGVycywgeyBpc1JlbmRlcmFibGU6IHRydWUgfSk7XG5cbiAgICBjb25zdCB7IGZpbGVuYW1lLCBjb250ZW50IH0gPSB0aGlzLmRhdGEuZmlsZTtcbiAgICB0aGlzLmZpbGVuYW1lID0gZ2V0RmlsZW5hbWVGcm9tVXJsKGZpbGVuYW1lKTtcbiAgICB0aGlzLmNvbnRlbnQgPSBjb250ZW50O1xuXG4gICAgdGhpcy5saW5rU2VydmljZS5ldmVudEJ1cz8uZGlzcGF0Y2goXCJmaWxlYXR0YWNobWVudGFubm90YXRpb25cIiwge1xuICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgZmlsZW5hbWUsXG4gICAgICBjb250ZW50LFxuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTmFtZSA9IFwiZmlsZUF0dGFjaG1lbnRBbm5vdGF0aW9uXCI7XG5cbiAgICBjb25zdCB0cmlnZ2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0cmlnZ2VyLnN0eWxlLmhlaWdodCA9IHRoaXMuY29udGFpbmVyLnN0eWxlLmhlaWdodDtcbiAgICB0cmlnZ2VyLnN0eWxlLndpZHRoID0gdGhpcy5jb250YWluZXIuc3R5bGUud2lkdGg7XG4gICAgdHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIiwgdGhpcy5fZG93bmxvYWQuYmluZCh0aGlzKSk7XG5cbiAgICBpZiAoXG4gICAgICAhdGhpcy5kYXRhLmhhc1BvcHVwICYmXG4gICAgICAodGhpcy5kYXRhLnRpdGxlT2JqPy5zdHIgfHxcbiAgICAgICAgdGhpcy5kYXRhLmNvbnRlbnRzT2JqPy5zdHIgfHxcbiAgICAgICAgdGhpcy5kYXRhLnJpY2hUZXh0KVxuICAgICkge1xuICAgICAgdGhpcy5fY3JlYXRlUG9wdXAodHJpZ2dlciwgdGhpcy5kYXRhKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0cmlnZ2VyKTtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cblxuICAvKipcbiAgICogRG93bmxvYWQgdGhlIGZpbGUgYXR0YWNobWVudCBhc3NvY2lhdGVkIHdpdGggdGhpcyBhbm5vdGF0aW9uLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbWVtYmVyb2YgRmlsZUF0dGFjaG1lbnRBbm5vdGF0aW9uRWxlbWVudFxuICAgKi9cbiAgX2Rvd25sb2FkKCkge1xuICAgIHRoaXMuZG93bmxvYWRNYW5hZ2VyPy5vcGVuT3JEb3dubG9hZERhdGEoXG4gICAgICB0aGlzLmNvbnRhaW5lcixcbiAgICAgIHRoaXMuY29udGVudCxcbiAgICAgIHRoaXMuZmlsZW5hbWVcbiAgICApO1xuICB9XG59XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gQW5ub3RhdGlvbkxheWVyUGFyYW1ldGVyc1xuICogQHByb3BlcnR5IHtQYWdlVmlld3BvcnR9IHZpZXdwb3J0XG4gKiBAcHJvcGVydHkge0hUTUxEaXZFbGVtZW50fSBkaXZcbiAqIEBwcm9wZXJ0eSB7QXJyYXl9IGFubm90YXRpb25zXG4gKiBAcHJvcGVydHkge1BERlBhZ2VQcm94eX0gcGFnZVxuICogQHByb3BlcnR5IHtJUERGTGlua1NlcnZpY2V9IGxpbmtTZXJ2aWNlXG4gKiBAcHJvcGVydHkge0lEb3dubG9hZE1hbmFnZXJ9IGRvd25sb2FkTWFuYWdlclxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtpbWFnZVJlc291cmNlc1BhdGhdIC0gUGF0aCBmb3IgaW1hZ2UgcmVzb3VyY2VzLCBtYWlubHlcbiAqICAgZm9yIGFubm90YXRpb24gaWNvbnMuIEluY2x1ZGUgdHJhaWxpbmcgc2xhc2guXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHJlbmRlckZvcm1zXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtlbmFibGVTY3JpcHRpbmddIC0gRW5hYmxlIGVtYmVkZGVkIHNjcmlwdCBleGVjdXRpb24uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtoYXNKU0FjdGlvbnNdIC0gU29tZSBmaWVsZHMgaGF2ZSBKUyBhY3Rpb25zLlxuICogICBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgZmFsc2VgLlxuICogQHByb3BlcnR5IHtNYXA8c3RyaW5nLCBIVE1MQ2FudmFzRWxlbWVudD59IFthbm5vdGF0aW9uQ2FudmFzTWFwXVxuICovXG5cbmNsYXNzIEFubm90YXRpb25MYXllciB7XG4gIC8qKlxuICAgKiBSZW5kZXIgYSBuZXcgYW5ub3RhdGlvbiBsYXllciB3aXRoIGFsbCBhbm5vdGF0aW9uIGVsZW1lbnRzLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7QW5ub3RhdGlvbkxheWVyUGFyYW1ldGVyc30gcGFyYW1ldGVyc1xuICAgKiBAbWVtYmVyb2YgQW5ub3RhdGlvbkxheWVyXG4gICAqL1xuICBzdGF0aWMgcmVuZGVyKHBhcmFtZXRlcnMpIHtcbiAgICBjb25zdCBzb3J0ZWRBbm5vdGF0aW9ucyA9IFtdLFxuICAgICAgcG9wdXBBbm5vdGF0aW9ucyA9IFtdO1xuICAgIC8vIEVuc3VyZSB0aGF0IFBvcHVwIGFubm90YXRpb25zIGFyZSBoYW5kbGVkIGxhc3QsIHNpbmNlIHRoZXkncmUgZGVwZW5kYW50XG4gICAgLy8gdXBvbiB0aGUgcGFyZW50IGFubm90YXRpb24gaGF2aW5nIGFscmVhZHkgYmVlbiByZW5kZXJlZCAocGxlYXNlIHJlZmVyIHRvXG4gICAgLy8gdGhlIGBQb3B1cEFubm90YXRpb25FbGVtZW50LnJlbmRlcmAgbWV0aG9kKTsgZml4ZXMgaXNzdWUgMTEzNjIuXG4gICAgZm9yIChjb25zdCBkYXRhIG9mIHBhcmFtZXRlcnMuYW5ub3RhdGlvbnMpIHtcbiAgICAgIGlmICghZGF0YSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gZ2V0UmVjdERpbXMoZGF0YS5yZWN0KTtcbiAgICAgIGlmICh3aWR0aCA8PSAwIHx8IGhlaWdodCA8PSAwKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGRhdGEuYW5ub3RhdGlvblR5cGUgPT09IEFubm90YXRpb25UeXBlLlBPUFVQKSB7XG4gICAgICAgIHBvcHVwQW5ub3RhdGlvbnMucHVzaChkYXRhKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBzb3J0ZWRBbm5vdGF0aW9ucy5wdXNoKGRhdGEpO1xuICAgIH1cbiAgICBpZiAocG9wdXBBbm5vdGF0aW9ucy5sZW5ndGgpIHtcbiAgICAgIHNvcnRlZEFubm90YXRpb25zLnB1c2goLi4ucG9wdXBBbm5vdGF0aW9ucyk7XG4gICAgfVxuXG4gICAgY29uc3QgZGl2ID0gcGFyYW1ldGVycy5kaXY7XG5cbiAgICBmb3IgKGNvbnN0IGRhdGEgb2Ygc29ydGVkQW5ub3RhdGlvbnMpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBBbm5vdGF0aW9uRWxlbWVudEZhY3RvcnkuY3JlYXRlKHtcbiAgICAgICAgZGF0YSxcbiAgICAgICAgbGF5ZXI6IGRpdixcbiAgICAgICAgcGFnZTogcGFyYW1ldGVycy5wYWdlLFxuICAgICAgICB2aWV3cG9ydDogcGFyYW1ldGVycy52aWV3cG9ydCxcbiAgICAgICAgbGlua1NlcnZpY2U6IHBhcmFtZXRlcnMubGlua1NlcnZpY2UsXG4gICAgICAgIGRvd25sb2FkTWFuYWdlcjogcGFyYW1ldGVycy5kb3dubG9hZE1hbmFnZXIsXG4gICAgICAgIGltYWdlUmVzb3VyY2VzUGF0aDogcGFyYW1ldGVycy5pbWFnZVJlc291cmNlc1BhdGggfHwgXCJcIixcbiAgICAgICAgcmVuZGVyRm9ybXM6IHBhcmFtZXRlcnMucmVuZGVyRm9ybXMgIT09IGZhbHNlLFxuICAgICAgICBzdmdGYWN0b3J5OiBuZXcgRE9NU1ZHRmFjdG9yeSgpLFxuICAgICAgICBhbm5vdGF0aW9uU3RvcmFnZTpcbiAgICAgICAgICBwYXJhbWV0ZXJzLmFubm90YXRpb25TdG9yYWdlIHx8IG5ldyBBbm5vdGF0aW9uU3RvcmFnZSgpLFxuICAgICAgICBlbmFibGVTY3JpcHRpbmc6IHBhcmFtZXRlcnMuZW5hYmxlU2NyaXB0aW5nLFxuICAgICAgICBoYXNKU0FjdGlvbnM6IHBhcmFtZXRlcnMuaGFzSlNBY3Rpb25zLFxuICAgICAgICBmaWVsZE9iamVjdHM6IHBhcmFtZXRlcnMuZmllbGRPYmplY3RzLFxuICAgICAgICBtb3VzZVN0YXRlOiBwYXJhbWV0ZXJzLm1vdXNlU3RhdGUgfHwgeyBpc0Rvd246IGZhbHNlIH0sXG4gICAgICB9KTtcbiAgICAgIGlmIChlbGVtZW50LmlzUmVuZGVyYWJsZSkge1xuICAgICAgICBjb25zdCByZW5kZXJlZCA9IGVsZW1lbnQucmVuZGVyKCk7XG4gICAgICAgIGlmIChkYXRhLmhpZGRlbikge1xuICAgICAgICAgIHJlbmRlcmVkLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlbmRlcmVkKSkge1xuICAgICAgICAgIGZvciAoY29uc3QgcmVuZGVyZWRFbGVtZW50IG9mIHJlbmRlcmVkKSB7XG4gICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQocmVuZGVyZWRFbGVtZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBQb3B1cEFubm90YXRpb25FbGVtZW50KSB7XG4gICAgICAgICAgICAvLyBQb3B1cCBhbm5vdGF0aW9uIGVsZW1lbnRzIHNob3VsZCBub3QgYmUgb24gdG9wIG9mIG90aGVyXG4gICAgICAgICAgICAvLyBhbm5vdGF0aW9uIGVsZW1lbnRzIHRvIHByZXZlbnQgaW50ZXJmZXJpbmcgd2l0aCBtb3VzZSBldmVudHMuXG4gICAgICAgICAgICBkaXYucHJlcGVuZChyZW5kZXJlZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChyZW5kZXJlZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy4jc2V0QW5ub3RhdGlvbkNhbnZhc01hcChkaXYsIHBhcmFtZXRlcnMuYW5ub3RhdGlvbkNhbnZhc01hcCk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHRoZSBhbm5vdGF0aW9uIGVsZW1lbnRzIG9uIGV4aXN0aW5nIGFubm90YXRpb24gbGF5ZXIuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtBbm5vdGF0aW9uTGF5ZXJQYXJhbWV0ZXJzfSBwYXJhbWV0ZXJzXG4gICAqIEBtZW1iZXJvZiBBbm5vdGF0aW9uTGF5ZXJcbiAgICovXG4gIHN0YXRpYyB1cGRhdGUocGFyYW1ldGVycykge1xuICAgIGNvbnN0IHsgcGFnZSwgdmlld3BvcnQsIGFubm90YXRpb25zLCBhbm5vdGF0aW9uQ2FudmFzTWFwLCBkaXYgfSA9XG4gICAgICBwYXJhbWV0ZXJzO1xuICAgIGNvbnN0IHRyYW5zZm9ybSA9IHZpZXdwb3J0LnRyYW5zZm9ybTtcbiAgICBjb25zdCBtYXRyaXggPSBgbWF0cml4KCR7dHJhbnNmb3JtLmpvaW4oXCIsXCIpfSlgO1xuXG4gICAgbGV0IHNjYWxlLCBvd25NYXRyaXg7XG4gICAgZm9yIChjb25zdCBkYXRhIG9mIGFubm90YXRpb25zKSB7XG4gICAgICBjb25zdCBlbGVtZW50cyA9IGRpdi5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgICBgW2RhdGEtYW5ub3RhdGlvbi1pZD1cIiR7ZGF0YS5pZH1cIl1gXG4gICAgICApO1xuICAgICAgaWYgKGVsZW1lbnRzKSB7XG4gICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBlbGVtZW50cykge1xuICAgICAgICAgIGlmIChkYXRhLmhhc093bkNhbnZhcykge1xuICAgICAgICAgICAgY29uc3QgcmVjdCA9IFV0aWwubm9ybWFsaXplUmVjdChbXG4gICAgICAgICAgICAgIGRhdGEucmVjdFswXSxcbiAgICAgICAgICAgICAgcGFnZS52aWV3WzNdIC0gZGF0YS5yZWN0WzFdICsgcGFnZS52aWV3WzFdLFxuICAgICAgICAgICAgICBkYXRhLnJlY3RbMl0sXG4gICAgICAgICAgICAgIHBhZ2Uudmlld1szXSAtIGRhdGEucmVjdFszXSArIHBhZ2Uudmlld1sxXSxcbiAgICAgICAgICAgIF0pO1xuXG4gICAgICAgICAgICBpZiAoIW93bk1hdHJpeCkge1xuICAgICAgICAgICAgICAvLyBXaGVuIGFuIGFubm90YXRpb24gaGFzIGl0cyBvd24gY2FudmFzLCB0aGVuXG4gICAgICAgICAgICAgIC8vIHRoZSBzY2FsZSBoYXMgYmVlbiBhbHJlYWR5IGFwcGxpZWQgdG8gdGhlIGNhbnZhcyxcbiAgICAgICAgICAgICAgLy8gc28gd2UgbXVzbid0IHNjYWxlIGl0IHR3aWNlLlxuICAgICAgICAgICAgICBzY2FsZSA9IE1hdGguYWJzKHRyYW5zZm9ybVswXSB8fCB0cmFuc2Zvcm1bMV0pO1xuICAgICAgICAgICAgICBjb25zdCBvd25UcmFuc2Zvcm0gPSB0cmFuc2Zvcm0uc2xpY2UoKTtcbiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgICAgICAgICAgICBvd25UcmFuc2Zvcm1baV0gPSBNYXRoLnNpZ24ob3duVHJhbnNmb3JtW2ldKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBvd25NYXRyaXggPSBgbWF0cml4KCR7b3duVHJhbnNmb3JtLmpvaW4oXCIsXCIpfSlgO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBsZWZ0ID0gcmVjdFswXSAqIHNjYWxlO1xuICAgICAgICAgICAgY29uc3QgdG9wID0gcmVjdFsxXSAqIHNjYWxlO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7bGVmdH1weGA7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnRvcCA9IGAke3RvcH1weGA7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IGAkey1sZWZ0fXB4ICR7LXRvcH1weGA7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9IG93bk1hdHJpeDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBtYXRyaXg7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy4jc2V0QW5ub3RhdGlvbkNhbnZhc01hcChkaXYsIGFubm90YXRpb25DYW52YXNNYXApO1xuICAgIGRpdi5oaWRkZW4gPSBmYWxzZTtcbiAgfVxuXG4gIHN0YXRpYyAjc2V0QW5ub3RhdGlvbkNhbnZhc01hcChkaXYsIGFubm90YXRpb25DYW52YXNNYXApIHtcbiAgICBpZiAoIWFubm90YXRpb25DYW52YXNNYXApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9yIChjb25zdCBbaWQsIGNhbnZhc10gb2YgYW5ub3RhdGlvbkNhbnZhc01hcCkge1xuICAgICAgY29uc3QgZWxlbWVudCA9IGRpdi5xdWVyeVNlbGVjdG9yKGBbZGF0YS1hbm5vdGF0aW9uLWlkPVwiJHtpZH1cIl1gKTtcbiAgICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyBmaXJzdENoaWxkIH0gPSBlbGVtZW50O1xuICAgICAgaWYgKGZpcnN0Q2hpbGQubm9kZU5hbWUgPT09IFwiQ0FOVkFTXCIpIHtcbiAgICAgICAgZWxlbWVudC5yZXBsYWNlQ2hpbGQoY2FudmFzLCBmaXJzdENoaWxkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuaW5zZXJ0QmVmb3JlKGNhbnZhcywgZmlyc3RDaGlsZCk7XG4gICAgICB9XG4gICAgfVxuICAgIGFubm90YXRpb25DYW52YXNNYXAuY2xlYXIoKTtcbiAgfVxufVxuXG5leHBvcnQgeyBBbm5vdGF0aW9uTGF5ZXIgfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAyMCBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBQTEVBU0UgTk9URTogVGhpcyBmaWxlIGlzIGN1cnJlbnRseSBpbXBvcnRlZCBpbiBib3RoIHRoZSBgLi4vZGlzcGxheS9gIGFuZFxuICogICAgICAgICAgICAgIGAuLi9zY3JpcHRpbmdfYXBpL2AgZm9sZGVycywgaGVuY2UgYmUgRVhUUkVNRUxZIGNhcmVmdWwgYWJvdXRcbiAqICAgICAgICAgICAgICBpbnRyb2R1Y2luZyBhbnkgZGVwZW5kZW5jaWVzIGhlcmUgc2luY2UgdGhhdCBjYW4gbGVhZCB0byBhblxuICogICAgICAgICAgICAgIHVuZXhwZWN0ZWQvdW5uZWNlc3Nhcnkgc2l6ZSBpbmNyZWFzZSBvZiB0aGUgKmJ1aWx0KiBmaWxlcy5cbiAqL1xuXG5mdW5jdGlvbiBtYWtlQ29sb3JDb21wKG4pIHtcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgbikpICogMjU1KVxuICAgIC50b1N0cmluZygxNilcbiAgICAucGFkU3RhcnQoMiwgXCIwXCIpO1xufVxuXG4vLyBQREYgc3BlY2lmaWNhdGlvbnMgc2VjdGlvbiAxMC4zXG5jbGFzcyBDb2xvckNvbnZlcnRlcnMge1xuICBzdGF0aWMgQ01ZS19HKFtjLCB5LCBtLCBrXSkge1xuICAgIHJldHVybiBbXCJHXCIsIDEgLSBNYXRoLm1pbigxLCAwLjMgKiBjICsgMC41OSAqIG0gKyAwLjExICogeSArIGspXTtcbiAgfVxuXG4gIHN0YXRpYyBHX0NNWUsoW2ddKSB7XG4gICAgcmV0dXJuIFtcIkNNWUtcIiwgMCwgMCwgMCwgMSAtIGddO1xuICB9XG5cbiAgc3RhdGljIEdfUkdCKFtnXSkge1xuICAgIHJldHVybiBbXCJSR0JcIiwgZywgZywgZ107XG4gIH1cblxuICBzdGF0aWMgR19IVE1MKFtnXSkge1xuICAgIGNvbnN0IEcgPSBtYWtlQ29sb3JDb21wKGcpO1xuICAgIHJldHVybiBgIyR7R30ke0d9JHtHfWA7XG4gIH1cblxuICBzdGF0aWMgUkdCX0coW3IsIGcsIGJdKSB7XG4gICAgcmV0dXJuIFtcIkdcIiwgMC4zICogciArIDAuNTkgKiBnICsgMC4xMSAqIGJdO1xuICB9XG5cbiAgc3RhdGljIFJHQl9IVE1MKFtyLCBnLCBiXSkge1xuICAgIGNvbnN0IFIgPSBtYWtlQ29sb3JDb21wKHIpO1xuICAgIGNvbnN0IEcgPSBtYWtlQ29sb3JDb21wKGcpO1xuICAgIGNvbnN0IEIgPSBtYWtlQ29sb3JDb21wKGIpO1xuICAgIHJldHVybiBgIyR7Un0ke0d9JHtCfWA7XG4gIH1cblxuICBzdGF0aWMgVF9IVE1MKCkge1xuICAgIHJldHVybiBcIiMwMDAwMDAwMFwiO1xuICB9XG5cbiAgc3RhdGljIENNWUtfUkdCKFtjLCB5LCBtLCBrXSkge1xuICAgIHJldHVybiBbXG4gICAgICBcIlJHQlwiLFxuICAgICAgMSAtIE1hdGgubWluKDEsIGMgKyBrKSxcbiAgICAgIDEgLSBNYXRoLm1pbigxLCBtICsgayksXG4gICAgICAxIC0gTWF0aC5taW4oMSwgeSArIGspLFxuICAgIF07XG4gIH1cblxuICBzdGF0aWMgQ01ZS19IVE1MKGNvbXBvbmVudHMpIHtcbiAgICByZXR1cm4gdGhpcy5SR0JfSFRNTCh0aGlzLkNNWUtfUkdCKGNvbXBvbmVudHMpKTtcbiAgfVxuXG4gIHN0YXRpYyBSR0JfQ01ZSyhbciwgZywgYl0pIHtcbiAgICBjb25zdCBjID0gMSAtIHI7XG4gICAgY29uc3QgbSA9IDEgLSBnO1xuICAgIGNvbnN0IHkgPSAxIC0gYjtcbiAgICBjb25zdCBrID0gTWF0aC5taW4oYywgbSwgeSk7XG4gICAgcmV0dXJuIFtcIkNNWUtcIiwgYywgbSwgeSwga107XG4gIH1cbn1cblxuZXhwb3J0IHsgQ29sb3JDb252ZXJ0ZXJzIH07XG4iLCAiLyogQ29weXJpZ2h0IDIwMjEgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9kaXNwbGF5X3V0aWxzXCIpLlBhZ2VWaWV3cG9ydH0gUGFnZVZpZXdwb3J0ICovXG4vKiogQHR5cGVkZWYge2ltcG9ydChcIi4uLy4uL3dlYi9pbnRlcmZhY2VzXCIpLklQREZMaW5rU2VydmljZX0gSVBERkxpbmtTZXJ2aWNlICovXG5cbmltcG9ydCB7IFhmYVRleHQgfSBmcm9tIFwiLi94ZmFfdGV4dC5qc1wiO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFhmYUxheWVyUGFyYW1ldGVyc1xuICogQHByb3BlcnR5IHtQYWdlVmlld3BvcnR9IHZpZXdwb3J0XG4gKiBAcHJvcGVydHkge0hUTUxEaXZFbGVtZW50fSBkaXZcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSB4ZmFIdG1sXG4gKiBAcHJvcGVydHkge0Fubm90YXRpb25TdG9yYWdlfSBbYW5ub3RhdGlvblN0b3JhZ2VdXG4gKiBAcHJvcGVydHkge0lQREZMaW5rU2VydmljZX0gbGlua1NlcnZpY2VcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbaW50ZW50XSAtIChkZWZhdWx0IHZhbHVlIGlzICdkaXNwbGF5JykuXG4gKi9cblxuY2xhc3MgWGZhTGF5ZXIge1xuICBzdGF0aWMgc2V0dXBTdG9yYWdlKGh0bWwsIGlkLCBlbGVtZW50LCBzdG9yYWdlLCBpbnRlbnQpIHtcbiAgICBjb25zdCBzdG9yZWREYXRhID0gc3RvcmFnZS5nZXRWYWx1ZShpZCwgeyB2YWx1ZTogbnVsbCB9KTtcbiAgICBzd2l0Y2ggKGVsZW1lbnQubmFtZSkge1xuICAgICAgY2FzZSBcInRleHRhcmVhXCI6XG4gICAgICAgIGlmIChzdG9yZWREYXRhLnZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgaHRtbC50ZXh0Q29udGVudCA9IHN0b3JlZERhdGEudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGludGVudCA9PT0gXCJwcmludFwiKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaHRtbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZXZlbnQgPT4ge1xuICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHsgdmFsdWU6IGV2ZW50LnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImlucHV0XCI6XG4gICAgICAgIGlmIChcbiAgICAgICAgICBlbGVtZW50LmF0dHJpYnV0ZXMudHlwZSA9PT0gXCJyYWRpb1wiIHx8XG4gICAgICAgICAgZWxlbWVudC5hdHRyaWJ1dGVzLnR5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoc3RvcmVkRGF0YS52YWx1ZSA9PT0gZWxlbWVudC5hdHRyaWJ1dGVzLnhmYU9uKSB7XG4gICAgICAgICAgICBodG1sLnNldEF0dHJpYnV0ZShcImNoZWNrZWRcIiwgdHJ1ZSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChzdG9yZWREYXRhLnZhbHVlID09PSBlbGVtZW50LmF0dHJpYnV0ZXMueGZhT2ZmKSB7XG4gICAgICAgICAgICAvLyBUaGUgY2hlY2tlZCBhdHRyaWJ1dGUgbWF5IGhhdmUgYmVlbiBzZXQgd2hlbiBvcGVuaW5nIHRoZSBmaWxlLFxuICAgICAgICAgICAgLy8gdW5zZXQgdGhyb3VnaCB0aGUgVUkgYW5kIHdlJ3JlIGhlcmUgYmVjYXVzZSBvZiBwcmludGluZy5cbiAgICAgICAgICAgIGh0bWwucmVtb3ZlQXR0cmlidXRlKFwiY2hlY2tlZFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGludGVudCA9PT0gXCJwcmludFwiKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgaHRtbC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGV2ZW50ID0+IHtcbiAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHtcbiAgICAgICAgICAgICAgdmFsdWU6IGV2ZW50LnRhcmdldC5jaGVja2VkXG4gICAgICAgICAgICAgICAgPyBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKFwieGZhT25cIilcbiAgICAgICAgICAgICAgICA6IGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJ4ZmFPZmZcIiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoc3RvcmVkRGF0YS52YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaHRtbC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBzdG9yZWREYXRhLnZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGludGVudCA9PT0gXCJwcmludFwiKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgaHRtbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZXZlbnQgPT4ge1xuICAgICAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShpZCwgeyB2YWx1ZTogZXZlbnQudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInNlbGVjdFwiOlxuICAgICAgICBpZiAoc3RvcmVkRGF0YS52YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIGVsZW1lbnQuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGlmIChvcHRpb24uYXR0cmlidXRlcy52YWx1ZSA9PT0gc3RvcmVkRGF0YS52YWx1ZSkge1xuICAgICAgICAgICAgICBvcHRpb24uYXR0cmlidXRlcy5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGh0bWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGV2ZW50ID0+IHtcbiAgICAgICAgICBjb25zdCBvcHRpb25zID0gZXZlbnQudGFyZ2V0Lm9wdGlvbnM7XG4gICAgICAgICAgY29uc3QgdmFsdWUgPVxuICAgICAgICAgICAgb3B0aW9ucy5zZWxlY3RlZEluZGV4ID09PSAtMVxuICAgICAgICAgICAgICA/IFwiXCJcbiAgICAgICAgICAgICAgOiBvcHRpb25zW29wdGlvbnMuc2VsZWN0ZWRJbmRleF0udmFsdWU7XG4gICAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShpZCwgeyB2YWx1ZSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBzZXRBdHRyaWJ1dGVzKHsgaHRtbCwgZWxlbWVudCwgc3RvcmFnZSA9IG51bGwsIGludGVudCwgbGlua1NlcnZpY2UgfSkge1xuICAgIGNvbnN0IHsgYXR0cmlidXRlcyB9ID0gZWxlbWVudDtcbiAgICBjb25zdCBpc0hUTUxBbmNob3JFbGVtZW50ID0gaHRtbCBpbnN0YW5jZW9mIEhUTUxBbmNob3JFbGVtZW50O1xuXG4gICAgaWYgKGF0dHJpYnV0ZXMudHlwZSA9PT0gXCJyYWRpb1wiKSB7XG4gICAgICAvLyBBdm9pZCB0byBoYXZlIGEgcmFkaW8gZ3JvdXAgd2hlbiBwcmludGluZyB3aXRoIHRoZSBzYW1lIGFzIG9uZVxuICAgICAgLy8gYWxyZWFkeSBkaXNwbGF5ZWQuXG4gICAgICBhdHRyaWJ1dGVzLm5hbWUgPSBgJHthdHRyaWJ1dGVzLm5hbWV9LSR7aW50ZW50fWA7XG4gICAgfVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGF0dHJpYnV0ZXMpKSB7XG4gICAgICAvLyBXZSBkb24ndCBuZWVkIHRvIGFkZCBkYXRhSWQgaW4gdGhlIGh0bWwgb2JqZWN0IGJ1dCBpdCBjYW5cbiAgICAgIC8vIGJlIHVzZWZ1bCB0byBrbm93IGl0cyB2YWx1ZSB3aGVuIHdyaXRpbmcgcHJpbnRpbmcgdGVzdHM6XG4gICAgICAvLyBpbiB0aGlzIGNhc2UsIGRvbid0IHNraXAgZGF0YUlkIHRvIGhhdmUgaXRzIHZhbHVlLlxuICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQgfHwga2V5ID09PSBcImRhdGFJZFwiKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoa2V5ICE9PSBcInN0eWxlXCIpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gXCJ0ZXh0Q29udGVudFwiKSB7XG4gICAgICAgICAgaHRtbC50ZXh0Q29udGVudCA9IHZhbHVlO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gXCJjbGFzc1wiKSB7XG4gICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgICAgaHRtbC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZS5qb2luKFwiIFwiKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChpc0hUTUxBbmNob3JFbGVtZW50ICYmIChrZXkgPT09IFwiaHJlZlwiIHx8IGtleSA9PT0gXCJuZXdXaW5kb3dcIikpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBIYW5kbGVkIGJlbG93LlxuICAgICAgICAgIH1cbiAgICAgICAgICBodG1sLnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihodG1sLnN0eWxlLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGlzSFRNTEFuY2hvckVsZW1lbnQpIHtcbiAgICAgIGxpbmtTZXJ2aWNlLmFkZExpbmtBdHRyaWJ1dGVzKFxuICAgICAgICBodG1sLFxuICAgICAgICBhdHRyaWJ1dGVzLmhyZWYsXG4gICAgICAgIGF0dHJpYnV0ZXMubmV3V2luZG93XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgdmFsdWUgYWZ0ZXIgdGhlIG90aGVycyB0byBiZSBzdXJlIG92ZXJ3cml0ZVxuICAgIC8vIGFueSBvdGhlciB2YWx1ZXMuXG4gICAgaWYgKHN0b3JhZ2UgJiYgYXR0cmlidXRlcy5kYXRhSWQpIHtcbiAgICAgIHRoaXMuc2V0dXBTdG9yYWdlKGh0bWwsIGF0dHJpYnV0ZXMuZGF0YUlkLCBlbGVtZW50LCBzdG9yYWdlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVyIHRoZSBYRkEgbGF5ZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7WGZhTGF5ZXJQYXJhbWV0ZXJzfSBwYXJhbWV0ZXJzXG4gICAqL1xuICBzdGF0aWMgcmVuZGVyKHBhcmFtZXRlcnMpIHtcbiAgICBjb25zdCBzdG9yYWdlID0gcGFyYW1ldGVycy5hbm5vdGF0aW9uU3RvcmFnZTtcbiAgICBjb25zdCBsaW5rU2VydmljZSA9IHBhcmFtZXRlcnMubGlua1NlcnZpY2U7XG4gICAgY29uc3Qgcm9vdCA9IHBhcmFtZXRlcnMueGZhSHRtbDtcbiAgICBjb25zdCBpbnRlbnQgPSBwYXJhbWV0ZXJzLmludGVudCB8fCBcImRpc3BsYXlcIjtcbiAgICBjb25zdCByb290SHRtbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQocm9vdC5uYW1lKTtcbiAgICBpZiAocm9vdC5hdHRyaWJ1dGVzKSB7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICBodG1sOiByb290SHRtbCxcbiAgICAgICAgZWxlbWVudDogcm9vdCxcbiAgICAgICAgaW50ZW50LFxuICAgICAgICBsaW5rU2VydmljZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBzdGFjayA9IFtbcm9vdCwgLTEsIHJvb3RIdG1sXV07XG5cbiAgICBjb25zdCByb290RGl2ID0gcGFyYW1ldGVycy5kaXY7XG4gICAgcm9vdERpdi5hcHBlbmRDaGlsZChyb290SHRtbCk7XG5cbiAgICBpZiAocGFyYW1ldGVycy52aWV3cG9ydCkge1xuICAgICAgY29uc3QgdHJhbnNmb3JtID0gYG1hdHJpeCgke3BhcmFtZXRlcnMudmlld3BvcnQudHJhbnNmb3JtLmpvaW4oXCIsXCIpfSlgO1xuICAgICAgcm9vdERpdi5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgfVxuXG4gICAgLy8gU2V0IGRlZmF1bHRzLlxuICAgIGlmIChpbnRlbnQgIT09IFwicmljaFRleHRcIikge1xuICAgICAgcm9vdERpdi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInhmYUxheWVyIHhmYUZvbnRcIik7XG4gICAgfVxuXG4gICAgLy8gVGV4dCBub2RlcyB1c2VkIGZvciB0aGUgdGV4dCBoaWdobGlnaHRlci5cbiAgICBjb25zdCB0ZXh0RGl2cyA9IFtdO1xuXG4gICAgd2hpbGUgKHN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IFtwYXJlbnQsIGksIGh0bWxdID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XG4gICAgICBpZiAoaSArIDEgPT09IHBhcmVudC5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgc3RhY2sucG9wKCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjaGlsZCA9IHBhcmVudC5jaGlsZHJlblsrK3N0YWNrW3N0YWNrLmxlbmd0aCAtIDFdWzFdXTtcbiAgICAgIGlmIChjaGlsZCA9PT0gbnVsbCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyBuYW1lIH0gPSBjaGlsZDtcbiAgICAgIGlmIChuYW1lID09PSBcIiN0ZXh0XCIpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNoaWxkLnZhbHVlKTtcbiAgICAgICAgdGV4dERpdnMucHVzaChub2RlKTtcbiAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGxldCBjaGlsZEh0bWw7XG4gICAgICBpZiAoY2hpbGQ/LmF0dHJpYnV0ZXM/LnhtbG5zKSB7XG4gICAgICAgIGNoaWxkSHRtbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhjaGlsZC5hdHRyaWJ1dGVzLnhtbG5zLCBuYW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoaWxkSHRtbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSk7XG4gICAgICB9XG5cbiAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoY2hpbGRIdG1sKTtcbiAgICAgIGlmIChjaGlsZC5hdHRyaWJ1dGVzKSB7XG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgaHRtbDogY2hpbGRIdG1sLFxuICAgICAgICAgIGVsZW1lbnQ6IGNoaWxkLFxuICAgICAgICAgIHN0b3JhZ2UsXG4gICAgICAgICAgaW50ZW50LFxuICAgICAgICAgIGxpbmtTZXJ2aWNlLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoaWxkLmNoaWxkcmVuICYmIGNoaWxkLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc3RhY2sucHVzaChbY2hpbGQsIC0xLCBjaGlsZEh0bWxdKTtcbiAgICAgIH0gZWxzZSBpZiAoY2hpbGQudmFsdWUpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNoaWxkLnZhbHVlKTtcbiAgICAgICAgaWYgKFhmYVRleHQuc2hvdWxkQnVpbGRUZXh0KG5hbWUpKSB7XG4gICAgICAgICAgdGV4dERpdnMucHVzaChub2RlKTtcbiAgICAgICAgfVxuICAgICAgICBjaGlsZEh0bWwuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVE9ETzogcmUtZW5hYmxlIHRoYXQgc3R1ZmYgb25jZSB3ZSd2ZSBKUyBpbXBsZW1lbnRhdGlvbi5cbiAgICAgKiBTZWUgaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTcxOTQ2NS5cbiAgICAgKlxuICAgICAqIGZvciAoY29uc3QgZWwgb2Ygcm9vdERpdi5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAqIFwiLnhmYURpc2FibGVkIGlucHV0LCAueGZhRGlzYWJsZWQgdGV4dGFyZWFcIlxuICAgICAqICkpIHtcbiAgICAgKiBlbC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgICAgKiB9XG4gICAgICogZm9yIChjb25zdCBlbCBvZiByb290RGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICogXCIueGZhUmVhZE9ubHkgaW5wdXQsIC54ZmFSZWFkT25seSB0ZXh0YXJlYVwiXG4gICAgICogKSkge1xuICAgICAqIGVsLnNldEF0dHJpYnV0ZShcInJlYWRPbmx5XCIsIHRydWUpO1xuICAgICAqIH1cbiAgICAgKi9cblxuICAgIGZvciAoY29uc3QgZWwgb2Ygcm9vdERpdi5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgXCIueGZhTm9uSW50ZXJhY3RpdmUgaW5wdXQsIC54ZmFOb25JbnRlcmFjdGl2ZSB0ZXh0YXJlYVwiXG4gICAgKSkge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKFwicmVhZE9ubHlcIiwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRleHREaXZzLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHRoZSBYRkEgbGF5ZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7WGZhTGF5ZXJQYXJhbWV0ZXJzfSBwYXJhbWV0ZXJzXG4gICAqL1xuICBzdGF0aWMgdXBkYXRlKHBhcmFtZXRlcnMpIHtcbiAgICBjb25zdCB0cmFuc2Zvcm0gPSBgbWF0cml4KCR7cGFyYW1ldGVycy52aWV3cG9ydC50cmFuc2Zvcm0uam9pbihcIixcIil9KWA7XG4gICAgcGFyYW1ldGVycy5kaXYuc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuICAgIHBhcmFtZXRlcnMuZGl2LmhpZGRlbiA9IGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCB7IFhmYUxheWVyIH07XG4iLCAiLyogQ29weXJpZ2h0IDIwMTUgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIEFib3J0RXhjZXB0aW9uLFxuICBjcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSxcbiAgVXRpbCxcbn0gZnJvbSBcIi4uL3NoYXJlZC91dGlsLmpzXCI7XG5cbi8qKlxuICogVGV4dCBsYXllciByZW5kZXIgcGFyYW1ldGVycy5cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUZXh0TGF5ZXJSZW5kZXJQYXJhbWV0ZXJzXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vYXBpXCIpLlRleHRDb250ZW50fSBbdGV4dENvbnRlbnRdIC0gVGV4dCBjb250ZW50IHRvXG4gKiAgIHJlbmRlciAodGhlIG9iamVjdCBpcyByZXR1cm5lZCBieSB0aGUgcGFnZSdzIGBnZXRUZXh0Q29udGVudGAgbWV0aG9kKS5cbiAqIEBwcm9wZXJ0eSB7UmVhZGFibGVTdHJlYW19IFt0ZXh0Q29udGVudFN0cmVhbV0gLSBUZXh0IGNvbnRlbnQgc3RyZWFtIHRvXG4gKiAgIHJlbmRlciAodGhlIHN0cmVhbSBpcyByZXR1cm5lZCBieSB0aGUgcGFnZSdzIGBzdHJlYW1UZXh0Q29udGVudGAgbWV0aG9kKS5cbiAqIEBwcm9wZXJ0eSB7RG9jdW1lbnRGcmFnbWVudH0gY29udGFpbmVyIC0gVGhlIERPTSBub2RlIHRoYXQgd2lsbCBjb250YWluIHRoZVxuICogICB0ZXh0IHJ1bnMuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vZGlzcGxheV91dGlsc1wiKS5QYWdlVmlld3BvcnR9IHZpZXdwb3J0IC0gVGhlIHRhcmdldFxuICogICB2aWV3cG9ydCB0byBwcm9wZXJseSBsYXlvdXQgdGhlIHRleHQgcnVucy5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8SFRNTEVsZW1lbnQ+fSBbdGV4dERpdnNdIC0gSFRNTCBlbGVtZW50cyB0aGF0IGNvcnJlc3BvbmQgdG9cbiAqICAgdGhlIHRleHQgaXRlbXMgb2YgdGhlIHRleHRDb250ZW50IGlucHV0LlxuICogICBUaGlzIGlzIG91dHB1dCBhbmQgc2hhbGwgaW5pdGlhbGx5IGJlIHNldCB0byBhbiBlbXB0eSBhcnJheS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nPn0gW3RleHRDb250ZW50SXRlbXNTdHJdIC0gU3RyaW5ncyB0aGF0IGNvcnJlc3BvbmQgdG9cbiAqICAgdGhlIGBzdHJgIHByb3BlcnR5IG9mIHRoZSB0ZXh0IGl0ZW1zIG9mIHRoZSB0ZXh0Q29udGVudCBpbnB1dC5cbiAqICAgVGhpcyBpcyBvdXRwdXQgYW5kIHNoYWxsIGluaXRpYWxseSBiZSBzZXQgdG8gYW4gZW1wdHkgYXJyYXkuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RpbWVvdXRdIC0gRGVsYXkgaW4gbWlsbGlzZWNvbmRzIGJlZm9yZSByZW5kZXJpbmcgb2YgdGhlXG4gKiAgIHRleHQgcnVucyBvY2N1cnMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtlbmhhbmNlVGV4dFNlbGVjdGlvbl0gLSBXaGV0aGVyIHRvIHR1cm4gb24gdGhlIHRleHRcbiAqICAgc2VsZWN0aW9uIGVuaGFuY2VtZW50LlxuICovXG5cbmNvbnN0IE1BWF9URVhUX0RJVlNfVE9fUkVOREVSID0gMTAwMDAwO1xuY29uc3QgREVGQVVMVF9GT05UX1NJWkUgPSAzMDtcbmNvbnN0IERFRkFVTFRfRk9OVF9BU0NFTlQgPSAwLjg7XG5jb25zdCBhc2NlbnRDYWNoZSA9IG5ldyBNYXAoKTtcbmNvbnN0IEFsbFdoaXRlc3BhY2VSZWdleHAgPSAvXlxccyskL2c7XG5cbmZ1bmN0aW9uIGdldEFzY2VudChmb250RmFtaWx5LCBjdHgpIHtcbiAgY29uc3QgY2FjaGVkQXNjZW50ID0gYXNjZW50Q2FjaGUuZ2V0KGZvbnRGYW1pbHkpO1xuICBpZiAoY2FjaGVkQXNjZW50KSB7XG4gICAgcmV0dXJuIGNhY2hlZEFzY2VudDtcbiAgfVxuXG4gIGN0eC5zYXZlKCk7XG4gIGN0eC5mb250ID0gYCR7REVGQVVMVF9GT05UX1NJWkV9cHggJHtmb250RmFtaWx5fWA7XG4gIGNvbnN0IG1ldHJpY3MgPSBjdHgubWVhc3VyZVRleHQoXCJcIik7XG5cbiAgLy8gQm90aCBwcm9wZXJ0aWVzIGFyZW4ndCBhdmFpbGFibGUgYnkgZGVmYXVsdCBpbiBGaXJlZm94LlxuICBsZXQgYXNjZW50ID0gbWV0cmljcy5mb250Qm91bmRpbmdCb3hBc2NlbnQ7XG4gIGxldCBkZXNjZW50ID0gTWF0aC5hYnMobWV0cmljcy5mb250Qm91bmRpbmdCb3hEZXNjZW50KTtcbiAgaWYgKGFzY2VudCkge1xuICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgY29uc3QgcmF0aW8gPSBhc2NlbnQgLyAoYXNjZW50ICsgZGVzY2VudCk7XG4gICAgYXNjZW50Q2FjaGUuc2V0KGZvbnRGYW1pbHksIHJhdGlvKTtcbiAgICByZXR1cm4gcmF0aW87XG4gIH1cblxuICAvLyBUcnkgYmFzaWMgaGV1cmlzdGljIHRvIGd1ZXNzIGFzY2VudC9kZXNjZW50LlxuICAvLyBEcmF3IGEgZyB3aXRoIGJhc2VsaW5lIGF0IDAsMCBhbmQgdGhlbiBnZXQgdGhlIGxpbmVcbiAgLy8gbnVtYmVyIHdoZXJlIGEgcGl4ZWwgaGFzIG5vbi1udWxsIHJlZCBjb21wb25lbnQgKHN0YXJ0aW5nXG4gIC8vIGZyb20gYm90dG9tKS5cbiAgY3R4LnN0cm9rZVN0eWxlID0gXCJyZWRcIjtcbiAgY3R4LmNsZWFyUmVjdCgwLCAwLCBERUZBVUxUX0ZPTlRfU0laRSwgREVGQVVMVF9GT05UX1NJWkUpO1xuICBjdHguc3Ryb2tlVGV4dChcImdcIiwgMCwgMCk7XG4gIGxldCBwaXhlbHMgPSBjdHguZ2V0SW1hZ2VEYXRhKFxuICAgIDAsXG4gICAgMCxcbiAgICBERUZBVUxUX0ZPTlRfU0laRSxcbiAgICBERUZBVUxUX0ZPTlRfU0laRVxuICApLmRhdGE7XG4gIGRlc2NlbnQgPSAwO1xuICBmb3IgKGxldCBpID0gcGl4ZWxzLmxlbmd0aCAtIDEgLSAzOyBpID49IDA7IGkgLT0gNCkge1xuICAgIGlmIChwaXhlbHNbaV0gPiAwKSB7XG4gICAgICBkZXNjZW50ID0gTWF0aC5jZWlsKGkgLyA0IC8gREVGQVVMVF9GT05UX1NJWkUpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLy8gRHJhdyBhbiBBIHdpdGggYmFzZWxpbmUgYXQgMCxERUZBVUxUX0ZPTlRfU0laRSBhbmQgdGhlbiBnZXQgdGhlIGxpbmVcbiAgLy8gbnVtYmVyIHdoZXJlIGEgcGl4ZWwgaGFzIG5vbi1udWxsIHJlZCBjb21wb25lbnQgKHN0YXJ0aW5nXG4gIC8vIGZyb20gdG9wKS5cbiAgY3R4LmNsZWFyUmVjdCgwLCAwLCBERUZBVUxUX0ZPTlRfU0laRSwgREVGQVVMVF9GT05UX1NJWkUpO1xuICBjdHguc3Ryb2tlVGV4dChcIkFcIiwgMCwgREVGQVVMVF9GT05UX1NJWkUpO1xuICBwaXhlbHMgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIERFRkFVTFRfRk9OVF9TSVpFLCBERUZBVUxUX0ZPTlRfU0laRSkuZGF0YTtcbiAgYXNjZW50ID0gMDtcbiAgZm9yIChsZXQgaSA9IDAsIGlpID0gcGl4ZWxzLmxlbmd0aDsgaSA8IGlpOyBpICs9IDQpIHtcbiAgICBpZiAocGl4ZWxzW2ldID4gMCkge1xuICAgICAgYXNjZW50ID0gREVGQVVMVF9GT05UX1NJWkUgLSBNYXRoLmZsb29yKGkgLyA0IC8gREVGQVVMVF9GT05UX1NJWkUpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgY3R4LnJlc3RvcmUoKTtcblxuICBpZiAoYXNjZW50KSB7XG4gICAgY29uc3QgcmF0aW8gPSBhc2NlbnQgLyAoYXNjZW50ICsgZGVzY2VudCk7XG4gICAgYXNjZW50Q2FjaGUuc2V0KGZvbnRGYW1pbHksIHJhdGlvKTtcbiAgICByZXR1cm4gcmF0aW87XG4gIH1cblxuICBhc2NlbnRDYWNoZS5zZXQoZm9udEZhbWlseSwgREVGQVVMVF9GT05UX0FTQ0VOVCk7XG4gIHJldHVybiBERUZBVUxUX0ZPTlRfQVNDRU5UO1xufVxuXG5mdW5jdGlvbiBhcHBlbmRUZXh0KHRhc2ssIGdlb20sIHN0eWxlcywgY3R4KSB7XG4gIC8vIEluaXRpYWxpemUgYWxsIHVzZWQgcHJvcGVydGllcyB0byBrZWVwIHRoZSBjYWNoZXMgbW9ub21vcnBoaWMuXG4gIGNvbnN0IHRleHREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgY29uc3QgdGV4dERpdlByb3BlcnRpZXMgPSB0YXNrLl9lbmhhbmNlVGV4dFNlbGVjdGlvblxuICAgID8ge1xuICAgICAgICBhbmdsZTogMCxcbiAgICAgICAgY2FudmFzV2lkdGg6IDAsXG4gICAgICAgIGhhc1RleHQ6IGdlb20uc3RyICE9PSBcIlwiLFxuICAgICAgICBoYXNFT0w6IGdlb20uaGFzRU9MLFxuICAgICAgICBvcmlnaW5hbFRyYW5zZm9ybTogbnVsbCxcbiAgICAgICAgcGFkZGluZ0JvdHRvbTogMCxcbiAgICAgICAgcGFkZGluZ0xlZnQ6IDAsXG4gICAgICAgIHBhZGRpbmdSaWdodDogMCxcbiAgICAgICAgcGFkZGluZ1RvcDogMCxcbiAgICAgICAgc2NhbGU6IDEsXG4gICAgICB9XG4gICAgOiB7XG4gICAgICAgIGFuZ2xlOiAwLFxuICAgICAgICBjYW52YXNXaWR0aDogMCxcbiAgICAgICAgaGFzVGV4dDogZ2VvbS5zdHIgIT09IFwiXCIsXG4gICAgICAgIGhhc0VPTDogZ2VvbS5oYXNFT0wsXG4gICAgICB9O1xuXG4gIHRhc2suX3RleHREaXZzLnB1c2godGV4dERpdik7XG5cbiAgY29uc3QgdHggPSBVdGlsLnRyYW5zZm9ybSh0YXNrLl92aWV3cG9ydC50cmFuc2Zvcm0sIGdlb20udHJhbnNmb3JtKTtcbiAgbGV0IGFuZ2xlID0gTWF0aC5hdGFuMih0eFsxXSwgdHhbMF0pO1xuICBjb25zdCBzdHlsZSA9IHN0eWxlc1tnZW9tLmZvbnROYW1lXTtcbiAgaWYgKHN0eWxlLnZlcnRpY2FsKSB7XG4gICAgYW5nbGUgKz0gTWF0aC5QSSAvIDI7XG4gIH1cbiAgY29uc3QgZm9udEhlaWdodCA9IE1hdGguaHlwb3QodHhbMl0sIHR4WzNdKTtcbiAgY29uc3QgZm9udEFzY2VudCA9IGZvbnRIZWlnaHQgKiBnZXRBc2NlbnQoc3R5bGUuZm9udEZhbWlseSwgY3R4KTtcblxuICBsZXQgbGVmdCwgdG9wO1xuICBpZiAoYW5nbGUgPT09IDApIHtcbiAgICBsZWZ0ID0gdHhbNF07XG4gICAgdG9wID0gdHhbNV0gLSBmb250QXNjZW50O1xuICB9IGVsc2Uge1xuICAgIGxlZnQgPSB0eFs0XSArIGZvbnRBc2NlbnQgKiBNYXRoLnNpbihhbmdsZSk7XG4gICAgdG9wID0gdHhbNV0gLSBmb250QXNjZW50ICogTWF0aC5jb3MoYW5nbGUpO1xuICB9XG4gIC8vIFNldHRpbmcgdGhlIHN0eWxlIHByb3BlcnRpZXMgaW5kaXZpZHVhbGx5LCByYXRoZXIgdGhhbiBhbGwgYXQgb25jZSxcbiAgLy8gc2hvdWxkIGJlIE9LIHNpbmNlIHRoZSBgdGV4dERpdmAgaXNuJ3QgYXBwZW5kZWQgdG8gdGhlIGRvY3VtZW50IHlldC5cbiAgdGV4dERpdi5zdHlsZS5sZWZ0ID0gYCR7bGVmdH1weGA7XG4gIHRleHREaXYuc3R5bGUudG9wID0gYCR7dG9wfXB4YDtcbiAgdGV4dERpdi5zdHlsZS5mb250U2l6ZSA9IGAke2ZvbnRIZWlnaHR9cHhgO1xuICB0ZXh0RGl2LnN0eWxlLmZvbnRGYW1pbHkgPSBzdHlsZS5mb250RmFtaWx5O1xuXG4gIC8vIEtlZXBzIHNjcmVlbiByZWFkZXJzIGZyb20gcGF1c2luZyBvbiBldmVyeSBuZXcgdGV4dCBzcGFuLlxuICB0ZXh0RGl2LnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJwcmVzZW50YXRpb25cIik7XG5cbiAgdGV4dERpdi50ZXh0Q29udGVudCA9IGdlb20uc3RyO1xuICAvLyBnZW9tLmRpciBtYXkgYmUgJ3R0YicgZm9yIHZlcnRpY2FsIHRleHRzLlxuICB0ZXh0RGl2LmRpciA9IGdlb20uZGlyO1xuXG4gIC8vIGBmb250TmFtZWAgaXMgb25seSB1c2VkIGJ5IHRoZSBGb250SW5zcGVjdG9yLCBhbmQgd2Ugb25seSB1c2UgYGRhdGFzZXRgXG4gIC8vIGhlcmUgdG8gbWFrZSB0aGUgZm9udCBuYW1lIGF2YWlsYWJsZSBpbiB0aGUgZGVidWdnZXIuXG4gIGlmICh0YXNrLl9mb250SW5zcGVjdG9yRW5hYmxlZCkge1xuICAgIHRleHREaXYuZGF0YXNldC5mb250TmFtZSA9IGdlb20uZm9udE5hbWU7XG4gIH1cbiAgaWYgKGFuZ2xlICE9PSAwKSB7XG4gICAgdGV4dERpdlByb3BlcnRpZXMuYW5nbGUgPSBhbmdsZSAqICgxODAgLyBNYXRoLlBJKTtcbiAgfVxuICAvLyBXZSBkb24ndCBib3RoZXIgc2NhbGluZyBzaW5nbGUtY2hhciB0ZXh0IGRpdnMsIGJlY2F1c2UgaXQgaGFzIHZlcnlcbiAgLy8gbGl0dGxlIGVmZmVjdCBvbiB0ZXh0IGhpZ2hsaWdodGluZy4gVGhpcyBtYWtlcyBzY3JvbGxpbmcgb24gZG9jcyB3aXRoXG4gIC8vIGxvdHMgb2Ygc3VjaCBkaXZzIGEgbG90IGZhc3Rlci5cbiAgbGV0IHNob3VsZFNjYWxlVGV4dCA9IGZhbHNlO1xuICBpZiAoXG4gICAgZ2VvbS5zdHIubGVuZ3RoID4gMSB8fFxuICAgICh0YXNrLl9lbmhhbmNlVGV4dFNlbGVjdGlvbiAmJiBBbGxXaGl0ZXNwYWNlUmVnZXhwLnRlc3QoZ2VvbS5zdHIpKVxuICApIHtcbiAgICBzaG91bGRTY2FsZVRleHQgPSB0cnVlO1xuICB9IGVsc2UgaWYgKGdlb20uc3RyICE9PSBcIiBcIiAmJiBnZW9tLnRyYW5zZm9ybVswXSAhPT0gZ2VvbS50cmFuc2Zvcm1bM10pIHtcbiAgICBjb25zdCBhYnNTY2FsZVggPSBNYXRoLmFicyhnZW9tLnRyYW5zZm9ybVswXSksXG4gICAgICBhYnNTY2FsZVkgPSBNYXRoLmFicyhnZW9tLnRyYW5zZm9ybVszXSk7XG4gICAgLy8gV2hlbiB0aGUgaG9yaXpvbnRhbC92ZXJ0aWNhbCBzY2FsaW5nIGRpZmZlcnMgc2lnbmlmaWNhbnRseSwgYWxzbyBzY2FsZVxuICAgIC8vIGV2ZW4gc2luZ2xlLWNoYXIgdGV4dCB0byBpbXByb3ZlIGhpZ2hsaWdodGluZyAoZml4ZXMgaXNzdWUxMTcxMy5wZGYpLlxuICAgIGlmIChcbiAgICAgIGFic1NjYWxlWCAhPT0gYWJzU2NhbGVZICYmXG4gICAgICBNYXRoLm1heChhYnNTY2FsZVgsIGFic1NjYWxlWSkgLyBNYXRoLm1pbihhYnNTY2FsZVgsIGFic1NjYWxlWSkgPiAxLjVcbiAgICApIHtcbiAgICAgIHNob3VsZFNjYWxlVGV4dCA9IHRydWU7XG4gICAgfVxuICB9XG4gIGlmIChzaG91bGRTY2FsZVRleHQpIHtcbiAgICBpZiAoc3R5bGUudmVydGljYWwpIHtcbiAgICAgIHRleHREaXZQcm9wZXJ0aWVzLmNhbnZhc1dpZHRoID0gZ2VvbS5oZWlnaHQgKiB0YXNrLl92aWV3cG9ydC5zY2FsZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGV4dERpdlByb3BlcnRpZXMuY2FudmFzV2lkdGggPSBnZW9tLndpZHRoICogdGFzay5fdmlld3BvcnQuc2NhbGU7XG4gICAgfVxuICB9XG4gIHRhc2suX3RleHREaXZQcm9wZXJ0aWVzLnNldCh0ZXh0RGl2LCB0ZXh0RGl2UHJvcGVydGllcyk7XG4gIGlmICh0YXNrLl90ZXh0Q29udGVudFN0cmVhbSkge1xuICAgIHRhc2suX2xheW91dFRleHQodGV4dERpdik7XG4gIH1cblxuICBpZiAodGFzay5fZW5oYW5jZVRleHRTZWxlY3Rpb24gJiYgdGV4dERpdlByb3BlcnRpZXMuaGFzVGV4dCkge1xuICAgIGxldCBhbmdsZUNvcyA9IDEsXG4gICAgICBhbmdsZVNpbiA9IDA7XG4gICAgaWYgKGFuZ2xlICE9PSAwKSB7XG4gICAgICBhbmdsZUNvcyA9IE1hdGguY29zKGFuZ2xlKTtcbiAgICAgIGFuZ2xlU2luID0gTWF0aC5zaW4oYW5nbGUpO1xuICAgIH1cbiAgICBjb25zdCBkaXZXaWR0aCA9XG4gICAgICAoc3R5bGUudmVydGljYWwgPyBnZW9tLmhlaWdodCA6IGdlb20ud2lkdGgpICogdGFzay5fdmlld3BvcnQuc2NhbGU7XG4gICAgY29uc3QgZGl2SGVpZ2h0ID0gZm9udEhlaWdodDtcblxuICAgIGxldCBtLCBiO1xuICAgIGlmIChhbmdsZSAhPT0gMCkge1xuICAgICAgbSA9IFthbmdsZUNvcywgYW5nbGVTaW4sIC1hbmdsZVNpbiwgYW5nbGVDb3MsIGxlZnQsIHRvcF07XG4gICAgICBiID0gVXRpbC5nZXRBeGlhbEFsaWduZWRCb3VuZGluZ0JveChbMCwgMCwgZGl2V2lkdGgsIGRpdkhlaWdodF0sIG0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBiID0gW2xlZnQsIHRvcCwgbGVmdCArIGRpdldpZHRoLCB0b3AgKyBkaXZIZWlnaHRdO1xuICAgIH1cblxuICAgIHRhc2suX2JvdW5kcy5wdXNoKHtcbiAgICAgIGxlZnQ6IGJbMF0sXG4gICAgICB0b3A6IGJbMV0sXG4gICAgICByaWdodDogYlsyXSxcbiAgICAgIGJvdHRvbTogYlszXSxcbiAgICAgIGRpdjogdGV4dERpdixcbiAgICAgIHNpemU6IFtkaXZXaWR0aCwgZGl2SGVpZ2h0XSxcbiAgICAgIG0sXG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVuZGVyKHRhc2spIHtcbiAgaWYgKHRhc2suX2NhbmNlbGVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHRleHREaXZzID0gdGFzay5fdGV4dERpdnM7XG4gIGNvbnN0IGNhcGFiaWxpdHkgPSB0YXNrLl9jYXBhYmlsaXR5O1xuICBjb25zdCB0ZXh0RGl2c0xlbmd0aCA9IHRleHREaXZzLmxlbmd0aDtcblxuICAvLyBObyBwb2ludCBpbiByZW5kZXJpbmcgbWFueSBkaXZzIGFzIGl0IHdvdWxkIG1ha2UgdGhlIGJyb3dzZXJcbiAgLy8gdW51c2FibGUgZXZlbiBhZnRlciB0aGUgZGl2cyBhcmUgcmVuZGVyZWQuXG4gIGlmICh0ZXh0RGl2c0xlbmd0aCA+IE1BWF9URVhUX0RJVlNfVE9fUkVOREVSKSB7XG4gICAgdGFzay5fcmVuZGVyaW5nRG9uZSA9IHRydWU7XG4gICAgY2FwYWJpbGl0eS5yZXNvbHZlKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCF0YXNrLl90ZXh0Q29udGVudFN0cmVhbSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGV4dERpdnNMZW5ndGg7IGkrKykge1xuICAgICAgdGFzay5fbGF5b3V0VGV4dCh0ZXh0RGl2c1tpXSk7XG4gICAgfVxuICB9XG5cbiAgdGFzay5fcmVuZGVyaW5nRG9uZSA9IHRydWU7XG4gIGNhcGFiaWxpdHkucmVzb2x2ZSgpO1xufVxuXG5mdW5jdGlvbiBmaW5kUG9zaXRpdmVNaW4odHMsIG9mZnNldCwgY291bnQpIHtcbiAgbGV0IHJlc3VsdCA9IDA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgIGNvbnN0IHQgPSB0c1tvZmZzZXQrK107XG4gICAgaWYgKHQgPiAwKSB7XG4gICAgICByZXN1bHQgPSByZXN1bHQgPyBNYXRoLm1pbih0LCByZXN1bHQpIDogdDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gZXhwYW5kKHRhc2spIHtcbiAgY29uc3QgYm91bmRzID0gdGFzay5fYm91bmRzO1xuICBjb25zdCB2aWV3cG9ydCA9IHRhc2suX3ZpZXdwb3J0O1xuXG4gIGNvbnN0IGV4cGFuZGVkID0gZXhwYW5kQm91bmRzKHZpZXdwb3J0LndpZHRoLCB2aWV3cG9ydC5oZWlnaHQsIGJvdW5kcyk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZXhwYW5kZWQubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBkaXYgPSBib3VuZHNbaV0uZGl2O1xuICAgIGNvbnN0IGRpdlByb3BlcnRpZXMgPSB0YXNrLl90ZXh0RGl2UHJvcGVydGllcy5nZXQoZGl2KTtcbiAgICBpZiAoZGl2UHJvcGVydGllcy5hbmdsZSA9PT0gMCkge1xuICAgICAgZGl2UHJvcGVydGllcy5wYWRkaW5nTGVmdCA9IGJvdW5kc1tpXS5sZWZ0IC0gZXhwYW5kZWRbaV0ubGVmdDtcbiAgICAgIGRpdlByb3BlcnRpZXMucGFkZGluZ1RvcCA9IGJvdW5kc1tpXS50b3AgLSBleHBhbmRlZFtpXS50b3A7XG4gICAgICBkaXZQcm9wZXJ0aWVzLnBhZGRpbmdSaWdodCA9IGV4cGFuZGVkW2ldLnJpZ2h0IC0gYm91bmRzW2ldLnJpZ2h0O1xuICAgICAgZGl2UHJvcGVydGllcy5wYWRkaW5nQm90dG9tID0gZXhwYW5kZWRbaV0uYm90dG9tIC0gYm91bmRzW2ldLmJvdHRvbTtcbiAgICAgIHRhc2suX3RleHREaXZQcm9wZXJ0aWVzLnNldChkaXYsIGRpdlByb3BlcnRpZXMpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIC8vIEJveCBpcyByb3RhdGVkIC0tIHRyeWluZyB0byBmaW5kIHBhZGRpbmcgc28gcm90YXRlZCBkaXYgd2lsbCBub3RcbiAgICAvLyBleGNlZWQgaXRzIGV4cGFuZGVkIGJvdW5kcy5cbiAgICBjb25zdCBlID0gZXhwYW5kZWRbaV0sXG4gICAgICBiID0gYm91bmRzW2ldO1xuICAgIGNvbnN0IG0gPSBiLm0sXG4gICAgICBjID0gbVswXSxcbiAgICAgIHMgPSBtWzFdO1xuICAgIC8vIEZpbmRpbmcgaW50ZXJzZWN0aW9ucyB3aXRoIGV4cGFuZGVkIGJveC5cbiAgICBjb25zdCBwb2ludHMgPSBbWzAsIDBdLCBbMCwgYi5zaXplWzFdXSwgW2Iuc2l6ZVswXSwgMF0sIGIuc2l6ZV07XG4gICAgY29uc3QgdHMgPSBuZXcgRmxvYXQ2NEFycmF5KDY0KTtcbiAgICBmb3IgKGxldCBqID0gMCwgamogPSBwb2ludHMubGVuZ3RoOyBqIDwgamo7IGorKykge1xuICAgICAgY29uc3QgdCA9IFV0aWwuYXBwbHlUcmFuc2Zvcm0ocG9pbnRzW2pdLCBtKTtcbiAgICAgIHRzW2ogKyAwXSA9IGMgJiYgKGUubGVmdCAtIHRbMF0pIC8gYztcbiAgICAgIHRzW2ogKyA0XSA9IHMgJiYgKGUudG9wIC0gdFsxXSkgLyBzO1xuICAgICAgdHNbaiArIDhdID0gYyAmJiAoZS5yaWdodCAtIHRbMF0pIC8gYztcbiAgICAgIHRzW2ogKyAxMl0gPSBzICYmIChlLmJvdHRvbSAtIHRbMV0pIC8gcztcblxuICAgICAgdHNbaiArIDE2XSA9IHMgJiYgKGUubGVmdCAtIHRbMF0pIC8gLXM7XG4gICAgICB0c1tqICsgMjBdID0gYyAmJiAoZS50b3AgLSB0WzFdKSAvIGM7XG4gICAgICB0c1tqICsgMjRdID0gcyAmJiAoZS5yaWdodCAtIHRbMF0pIC8gLXM7XG4gICAgICB0c1tqICsgMjhdID0gYyAmJiAoZS5ib3R0b20gLSB0WzFdKSAvIGM7XG5cbiAgICAgIHRzW2ogKyAzMl0gPSBjICYmIChlLmxlZnQgLSB0WzBdKSAvIC1jO1xuICAgICAgdHNbaiArIDM2XSA9IHMgJiYgKGUudG9wIC0gdFsxXSkgLyAtcztcbiAgICAgIHRzW2ogKyA0MF0gPSBjICYmIChlLnJpZ2h0IC0gdFswXSkgLyAtYztcbiAgICAgIHRzW2ogKyA0NF0gPSBzICYmIChlLmJvdHRvbSAtIHRbMV0pIC8gLXM7XG5cbiAgICAgIHRzW2ogKyA0OF0gPSBzICYmIChlLmxlZnQgLSB0WzBdKSAvIHM7XG4gICAgICB0c1tqICsgNTJdID0gYyAmJiAoZS50b3AgLSB0WzFdKSAvIC1jO1xuICAgICAgdHNbaiArIDU2XSA9IHMgJiYgKGUucmlnaHQgLSB0WzBdKSAvIHM7XG4gICAgICB0c1tqICsgNjBdID0gYyAmJiAoZS5ib3R0b20gLSB0WzFdKSAvIC1jO1xuICAgIH1cbiAgICAvLyBOb3QgYmFzZWQgb24gbWF0aCwgYnV0IHRvIHNpbXBsaWZ5IGNhbGN1bGF0aW9ucywgdXNpbmcgY29zIGFuZCBzaW5cbiAgICAvLyBhYnNvbHV0ZSB2YWx1ZXMgdG8gbm90IGV4Y2VlZCB0aGUgYm94IChpdCBjYW4gYnV0IGluc2lnbmlmaWNhbnRseSkuXG4gICAgY29uc3QgYm94U2NhbGUgPSAxICsgTWF0aC5taW4oTWF0aC5hYnMoYyksIE1hdGguYWJzKHMpKTtcbiAgICBkaXZQcm9wZXJ0aWVzLnBhZGRpbmdMZWZ0ID0gZmluZFBvc2l0aXZlTWluKHRzLCAzMiwgMTYpIC8gYm94U2NhbGU7XG4gICAgZGl2UHJvcGVydGllcy5wYWRkaW5nVG9wID0gZmluZFBvc2l0aXZlTWluKHRzLCA0OCwgMTYpIC8gYm94U2NhbGU7XG4gICAgZGl2UHJvcGVydGllcy5wYWRkaW5nUmlnaHQgPSBmaW5kUG9zaXRpdmVNaW4odHMsIDAsIDE2KSAvIGJveFNjYWxlO1xuICAgIGRpdlByb3BlcnRpZXMucGFkZGluZ0JvdHRvbSA9IGZpbmRQb3NpdGl2ZU1pbih0cywgMTYsIDE2KSAvIGJveFNjYWxlO1xuICAgIHRhc2suX3RleHREaXZQcm9wZXJ0aWVzLnNldChkaXYsIGRpdlByb3BlcnRpZXMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGV4cGFuZEJvdW5kcyh3aWR0aCwgaGVpZ2h0LCBib3hlcykge1xuICBjb25zdCBib3VuZHMgPSBib3hlcy5tYXAoZnVuY3Rpb24gKGJveCwgaSkge1xuICAgIHJldHVybiB7XG4gICAgICB4MTogYm94LmxlZnQsXG4gICAgICB5MTogYm94LnRvcCxcbiAgICAgIHgyOiBib3gucmlnaHQsXG4gICAgICB5MjogYm94LmJvdHRvbSxcbiAgICAgIGluZGV4OiBpLFxuICAgICAgeDFOZXc6IHVuZGVmaW5lZCxcbiAgICAgIHgyTmV3OiB1bmRlZmluZWQsXG4gICAgfTtcbiAgfSk7XG4gIGV4cGFuZEJvdW5kc0xUUih3aWR0aCwgYm91bmRzKTtcblxuICBjb25zdCBleHBhbmRlZCA9IG5ldyBBcnJheShib3hlcy5sZW5ndGgpO1xuICBmb3IgKGNvbnN0IGIgb2YgYm91bmRzKSB7XG4gICAgY29uc3QgaSA9IGIuaW5kZXg7XG4gICAgZXhwYW5kZWRbaV0gPSB7XG4gICAgICBsZWZ0OiBiLngxTmV3LFxuICAgICAgdG9wOiAwLFxuICAgICAgcmlnaHQ6IGIueDJOZXcsXG4gICAgICBib3R0b206IDAsXG4gICAgfTtcbiAgfVxuXG4gIC8vIFJvdGF0aW5nIG9uIDkwIGRlZ3JlZXMgYW5kIGV4dGVuZGluZyBleHRlbmRlZCBib3hlcy4gUmV1c2luZyB0aGUgYm91bmRzXG4gIC8vIGFycmF5IGFuZCBvYmplY3RzLlxuICBib3hlcy5tYXAoZnVuY3Rpb24gKGJveCwgaSkge1xuICAgIGNvbnN0IGUgPSBleHBhbmRlZFtpXSxcbiAgICAgIGIgPSBib3VuZHNbaV07XG4gICAgYi54MSA9IGJveC50b3A7XG4gICAgYi55MSA9IHdpZHRoIC0gZS5yaWdodDtcbiAgICBiLngyID0gYm94LmJvdHRvbTtcbiAgICBiLnkyID0gd2lkdGggLSBlLmxlZnQ7XG4gICAgYi5pbmRleCA9IGk7XG4gICAgYi54MU5ldyA9IHVuZGVmaW5lZDtcbiAgICBiLngyTmV3ID0gdW5kZWZpbmVkO1xuICB9KTtcbiAgZXhwYW5kQm91bmRzTFRSKGhlaWdodCwgYm91bmRzKTtcblxuICBmb3IgKGNvbnN0IGIgb2YgYm91bmRzKSB7XG4gICAgY29uc3QgaSA9IGIuaW5kZXg7XG4gICAgZXhwYW5kZWRbaV0udG9wID0gYi54MU5ldztcbiAgICBleHBhbmRlZFtpXS5ib3R0b20gPSBiLngyTmV3O1xuICB9XG4gIHJldHVybiBleHBhbmRlZDtcbn1cblxuZnVuY3Rpb24gZXhwYW5kQm91bmRzTFRSKHdpZHRoLCBib3VuZHMpIHtcbiAgLy8gU29ydGluZyBieSB4MSBjb29yZGluYXRlIGFuZCB3YWxrIGJ5IHRoZSBib3VuZHMgaW4gdGhlIHNhbWUgb3JkZXIuXG4gIGJvdW5kcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgcmV0dXJuIGEueDEgLSBiLngxIHx8IGEuaW5kZXggLSBiLmluZGV4O1xuICB9KTtcblxuICAvLyBGaXJzdCB3ZSBzZWUgb24gdGhlIGhvcml6b24gaXMgYSBmYWtlIGJvdW5kYXJ5LlxuICBjb25zdCBmYWtlQm91bmRhcnkgPSB7XG4gICAgeDE6IC1JbmZpbml0eSxcbiAgICB5MTogLUluZmluaXR5LFxuICAgIHgyOiAwLFxuICAgIHkyOiBJbmZpbml0eSxcbiAgICBpbmRleDogLTEsXG4gICAgeDFOZXc6IDAsXG4gICAgeDJOZXc6IDAsXG4gIH07XG4gIGNvbnN0IGhvcml6b24gPSBbXG4gICAge1xuICAgICAgc3RhcnQ6IC1JbmZpbml0eSxcbiAgICAgIGVuZDogSW5maW5pdHksXG4gICAgICBib3VuZGFyeTogZmFrZUJvdW5kYXJ5LFxuICAgIH0sXG4gIF07XG5cbiAgZm9yIChjb25zdCBib3VuZGFyeSBvZiBib3VuZHMpIHtcbiAgICAvLyBTZWFyY2hpbmcgZm9yIHRoZSBhZmZlY3RlZCBwYXJ0IG9mIGhvcml6b24uXG4gICAgLy8gVE9ETyByZWQtYmxhY2sgdHJlZSBvciBzaW1wbGUgYmluYXJ5IHNlYXJjaFxuICAgIGxldCBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGhvcml6b24ubGVuZ3RoICYmIGhvcml6b25baV0uZW5kIDw9IGJvdW5kYXJ5LnkxKSB7XG4gICAgICBpKys7XG4gICAgfVxuICAgIGxldCBqID0gaG9yaXpvbi5sZW5ndGggLSAxO1xuICAgIHdoaWxlIChqID49IDAgJiYgaG9yaXpvbltqXS5zdGFydCA+PSBib3VuZGFyeS55Mikge1xuICAgICAgai0tO1xuICAgIH1cblxuICAgIGxldCBob3Jpem9uUGFydCwgYWZmZWN0ZWRCb3VuZGFyeTtcbiAgICBsZXQgcSxcbiAgICAgIGssXG4gICAgICBtYXhYTmV3ID0gLUluZmluaXR5O1xuICAgIGZvciAocSA9IGk7IHEgPD0gajsgcSsrKSB7XG4gICAgICBob3Jpem9uUGFydCA9IGhvcml6b25bcV07XG4gICAgICBhZmZlY3RlZEJvdW5kYXJ5ID0gaG9yaXpvblBhcnQuYm91bmRhcnk7XG4gICAgICBsZXQgeE5ldztcbiAgICAgIGlmIChhZmZlY3RlZEJvdW5kYXJ5LngyID4gYm91bmRhcnkueDEpIHtcbiAgICAgICAgLy8gSW4gdGhlIG1pZGRsZSBvZiB0aGUgcHJldmlvdXMgZWxlbWVudCwgbmV3IHggc2hhbGwgYmUgYXQgdGhlXG4gICAgICAgIC8vIGJvdW5kYXJ5IHN0YXJ0LiBFeHRlbmRpbmcgaWYgZnVydGhlciBpZiB0aGUgYWZmZWN0ZWQgYm91bmRhcnlcbiAgICAgICAgLy8gcGxhY2VkIG9uIHRvcCBvZiB0aGUgY3VycmVudCBvbmUuXG4gICAgICAgIHhOZXcgPVxuICAgICAgICAgIGFmZmVjdGVkQm91bmRhcnkuaW5kZXggPiBib3VuZGFyeS5pbmRleFxuICAgICAgICAgICAgPyBhZmZlY3RlZEJvdW5kYXJ5LngxTmV3XG4gICAgICAgICAgICA6IGJvdW5kYXJ5LngxO1xuICAgICAgfSBlbHNlIGlmIChhZmZlY3RlZEJvdW5kYXJ5LngyTmV3ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gV2UgaGF2ZSBzb21lIHNwYWNlIGluIGJldHdlZW4sIG5ldyB4IGluIG1pZGRsZSB3aWxsIGJlIGEgZmFpclxuICAgICAgICAvLyBjaG9pY2UuXG4gICAgICAgIHhOZXcgPSAoYWZmZWN0ZWRCb3VuZGFyeS54MiArIGJvdW5kYXJ5LngxKSAvIDI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBBZmZlY3RlZCBib3VuZGFyeSBoYXMgeDJuZXcgc2V0LCB1c2luZyBpdCBhcyBuZXcgeC5cbiAgICAgICAgeE5ldyA9IGFmZmVjdGVkQm91bmRhcnkueDJOZXc7XG4gICAgICB9XG4gICAgICBpZiAoeE5ldyA+IG1heFhOZXcpIHtcbiAgICAgICAgbWF4WE5ldyA9IHhOZXc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2V0IG5ldyB4MSBmb3IgY3VycmVudCBib3VuZGFyeS5cbiAgICBib3VuZGFyeS54MU5ldyA9IG1heFhOZXc7XG5cbiAgICAvLyBBZGp1c3RzIG5ldyB4MiBmb3IgdGhlIGFmZmVjdGVkIGJvdW5kYXJpZXMuXG4gICAgZm9yIChxID0gaTsgcSA8PSBqOyBxKyspIHtcbiAgICAgIGhvcml6b25QYXJ0ID0gaG9yaXpvbltxXTtcbiAgICAgIGFmZmVjdGVkQm91bmRhcnkgPSBob3Jpem9uUGFydC5ib3VuZGFyeTtcbiAgICAgIGlmIChhZmZlY3RlZEJvdW5kYXJ5LngyTmV3ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gV2FzIG5vdCBzZXQgeWV0LCBjaG9vc2luZyBuZXcgeCBpZiBwb3NzaWJsZS5cbiAgICAgICAgaWYgKGFmZmVjdGVkQm91bmRhcnkueDIgPiBib3VuZGFyeS54MSkge1xuICAgICAgICAgIC8vIEN1cnJlbnQgYW5kIGFmZmVjdGVkIGJvdW5kYXJpZXMgaW50ZXJzZWN0LiBJZiBhZmZlY3RlZCBib3VuZGFyeVxuICAgICAgICAgIC8vIGlzIHBsYWNlZCBvbiB0b3Agb2YgdGhlIGN1cnJlbnQsIHNocmlua2luZyB0aGUgYWZmZWN0ZWQuXG4gICAgICAgICAgaWYgKGFmZmVjdGVkQm91bmRhcnkuaW5kZXggPiBib3VuZGFyeS5pbmRleCkge1xuICAgICAgICAgICAgYWZmZWN0ZWRCb3VuZGFyeS54Mk5ldyA9IGFmZmVjdGVkQm91bmRhcnkueDI7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFmZmVjdGVkQm91bmRhcnkueDJOZXcgPSBtYXhYTmV3O1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFmZmVjdGVkQm91bmRhcnkueDJOZXcgPiBtYXhYTmV3KSB7XG4gICAgICAgIC8vIEFmZmVjdGVkIGJvdW5kYXJ5IGlzIHRvdWNoaW5nIG5ldyB4LCBwdXNoaW5nIGl0IGJhY2suXG4gICAgICAgIGFmZmVjdGVkQm91bmRhcnkueDJOZXcgPSBNYXRoLm1heChtYXhYTmV3LCBhZmZlY3RlZEJvdW5kYXJ5LngyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGaXhpbmcgdGhlIGhvcml6b24uXG4gICAgY29uc3QgY2hhbmdlZEhvcml6b24gPSBbXTtcbiAgICBsZXQgbGFzdEJvdW5kYXJ5ID0gbnVsbDtcbiAgICBmb3IgKHEgPSBpOyBxIDw9IGo7IHErKykge1xuICAgICAgaG9yaXpvblBhcnQgPSBob3Jpem9uW3FdO1xuICAgICAgYWZmZWN0ZWRCb3VuZGFyeSA9IGhvcml6b25QYXJ0LmJvdW5kYXJ5O1xuICAgICAgLy8gQ2hlY2tpbmcgd2hpY2ggYm91bmRhcnkgd2lsbCBiZSB2aXNpYmxlLlxuICAgICAgY29uc3QgdXNlQm91bmRhcnkgPVxuICAgICAgICBhZmZlY3RlZEJvdW5kYXJ5LngyID4gYm91bmRhcnkueDIgPyBhZmZlY3RlZEJvdW5kYXJ5IDogYm91bmRhcnk7XG4gICAgICBpZiAobGFzdEJvdW5kYXJ5ID09PSB1c2VCb3VuZGFyeSkge1xuICAgICAgICAvLyBNZXJnaW5nIHdpdGggcHJldmlvdXMuXG4gICAgICAgIGNoYW5nZWRIb3Jpem9uW2NoYW5nZWRIb3Jpem9uLmxlbmd0aCAtIDFdLmVuZCA9IGhvcml6b25QYXJ0LmVuZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoYW5nZWRIb3Jpem9uLnB1c2goe1xuICAgICAgICAgIHN0YXJ0OiBob3Jpem9uUGFydC5zdGFydCxcbiAgICAgICAgICBlbmQ6IGhvcml6b25QYXJ0LmVuZCxcbiAgICAgICAgICBib3VuZGFyeTogdXNlQm91bmRhcnksXG4gICAgICAgIH0pO1xuICAgICAgICBsYXN0Qm91bmRhcnkgPSB1c2VCb3VuZGFyeTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGhvcml6b25baV0uc3RhcnQgPCBib3VuZGFyeS55MSkge1xuICAgICAgY2hhbmdlZEhvcml6b25bMF0uc3RhcnQgPSBib3VuZGFyeS55MTtcbiAgICAgIGNoYW5nZWRIb3Jpem9uLnVuc2hpZnQoe1xuICAgICAgICBzdGFydDogaG9yaXpvbltpXS5zdGFydCxcbiAgICAgICAgZW5kOiBib3VuZGFyeS55MSxcbiAgICAgICAgYm91bmRhcnk6IGhvcml6b25baV0uYm91bmRhcnksXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGJvdW5kYXJ5LnkyIDwgaG9yaXpvbltqXS5lbmQpIHtcbiAgICAgIGNoYW5nZWRIb3Jpem9uW2NoYW5nZWRIb3Jpem9uLmxlbmd0aCAtIDFdLmVuZCA9IGJvdW5kYXJ5LnkyO1xuICAgICAgY2hhbmdlZEhvcml6b24ucHVzaCh7XG4gICAgICAgIHN0YXJ0OiBib3VuZGFyeS55MixcbiAgICAgICAgZW5kOiBob3Jpem9uW2pdLmVuZCxcbiAgICAgICAgYm91bmRhcnk6IGhvcml6b25bal0uYm91bmRhcnksXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBTZXQgeDIgbmV3IG9mIGJvdW5kYXJ5IHRoYXQgaXMgbm8gbG9uZ2VyIHZpc2libGUgKHNlZSBvdmVybGFwcGluZyBjYXNlXG4gICAgLy8gYWJvdmUpLlxuICAgIC8vIFRPRE8gbW9yZSBlZmZpY2llbnQsIGUuZy4gdmlhIHJlZmVyZW5jZSBjb3VudGluZy5cbiAgICBmb3IgKHEgPSBpOyBxIDw9IGo7IHErKykge1xuICAgICAgaG9yaXpvblBhcnQgPSBob3Jpem9uW3FdO1xuICAgICAgYWZmZWN0ZWRCb3VuZGFyeSA9IGhvcml6b25QYXJ0LmJvdW5kYXJ5O1xuICAgICAgaWYgKGFmZmVjdGVkQm91bmRhcnkueDJOZXcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGxldCB1c2VkID0gZmFsc2U7XG4gICAgICBmb3IgKFxuICAgICAgICBrID0gaSAtIDE7XG4gICAgICAgICF1c2VkICYmIGsgPj0gMCAmJiBob3Jpem9uW2tdLnN0YXJ0ID49IGFmZmVjdGVkQm91bmRhcnkueTE7XG4gICAgICAgIGstLVxuICAgICAgKSB7XG4gICAgICAgIHVzZWQgPSBob3Jpem9uW2tdLmJvdW5kYXJ5ID09PSBhZmZlY3RlZEJvdW5kYXJ5O1xuICAgICAgfVxuICAgICAgZm9yIChcbiAgICAgICAgayA9IGogKyAxO1xuICAgICAgICAhdXNlZCAmJiBrIDwgaG9yaXpvbi5sZW5ndGggJiYgaG9yaXpvbltrXS5lbmQgPD0gYWZmZWN0ZWRCb3VuZGFyeS55MjtcbiAgICAgICAgaysrXG4gICAgICApIHtcbiAgICAgICAgdXNlZCA9IGhvcml6b25ba10uYm91bmRhcnkgPT09IGFmZmVjdGVkQm91bmRhcnk7XG4gICAgICB9XG4gICAgICBmb3IgKGsgPSAwOyAhdXNlZCAmJiBrIDwgY2hhbmdlZEhvcml6b24ubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgdXNlZCA9IGNoYW5nZWRIb3Jpem9uW2tdLmJvdW5kYXJ5ID09PSBhZmZlY3RlZEJvdW5kYXJ5O1xuICAgICAgfVxuICAgICAgaWYgKCF1c2VkKSB7XG4gICAgICAgIGFmZmVjdGVkQm91bmRhcnkueDJOZXcgPSBtYXhYTmV3O1xuICAgICAgfVxuICAgIH1cblxuICAgIEFycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkoXG4gICAgICBob3Jpem9uLFxuICAgICAgW2ksIGogLSBpICsgMV0uY29uY2F0KGNoYW5nZWRIb3Jpem9uKVxuICAgICk7XG4gIH1cblxuICAvLyBTZXQgbmV3IHgyIGZvciBhbGwgdW5zZXQgYm91bmRhcmllcy5cbiAgZm9yIChjb25zdCBob3Jpem9uUGFydCBvZiBob3Jpem9uKSB7XG4gICAgY29uc3QgYWZmZWN0ZWRCb3VuZGFyeSA9IGhvcml6b25QYXJ0LmJvdW5kYXJ5O1xuICAgIGlmIChhZmZlY3RlZEJvdW5kYXJ5LngyTmV3ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGFmZmVjdGVkQm91bmRhcnkueDJOZXcgPSBNYXRoLm1heCh3aWR0aCwgYWZmZWN0ZWRCb3VuZGFyeS54Mik7XG4gICAgfVxuICB9XG59XG5cbmNsYXNzIFRleHRMYXllclJlbmRlclRhc2sge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgdGV4dENvbnRlbnQsXG4gICAgdGV4dENvbnRlbnRTdHJlYW0sXG4gICAgY29udGFpbmVyLFxuICAgIHZpZXdwb3J0LFxuICAgIHRleHREaXZzLFxuICAgIHRleHRDb250ZW50SXRlbXNTdHIsXG4gICAgZW5oYW5jZVRleHRTZWxlY3Rpb24sXG4gIH0pIHtcbiAgICB0aGlzLl90ZXh0Q29udGVudCA9IHRleHRDb250ZW50O1xuICAgIHRoaXMuX3RleHRDb250ZW50U3RyZWFtID0gdGV4dENvbnRlbnRTdHJlYW07XG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIHRoaXMuX2RvY3VtZW50ID0gY29udGFpbmVyLm93bmVyRG9jdW1lbnQ7XG4gICAgdGhpcy5fdmlld3BvcnQgPSB2aWV3cG9ydDtcbiAgICB0aGlzLl90ZXh0RGl2cyA9IHRleHREaXZzIHx8IFtdO1xuICAgIHRoaXMuX3RleHRDb250ZW50SXRlbXNTdHIgPSB0ZXh0Q29udGVudEl0ZW1zU3RyIHx8IFtdO1xuICAgIHRoaXMuX2VuaGFuY2VUZXh0U2VsZWN0aW9uID0gISFlbmhhbmNlVGV4dFNlbGVjdGlvbjtcbiAgICB0aGlzLl9mb250SW5zcGVjdG9yRW5hYmxlZCA9ICEhZ2xvYmFsVGhpcy5Gb250SW5zcGVjdG9yPy5lbmFibGVkO1xuXG4gICAgdGhpcy5fcmVhZGVyID0gbnVsbDtcbiAgICB0aGlzLl9sYXlvdXRUZXh0TGFzdEZvbnRTaXplID0gbnVsbDtcbiAgICB0aGlzLl9sYXlvdXRUZXh0TGFzdEZvbnRGYW1pbHkgPSBudWxsO1xuICAgIHRoaXMuX2xheW91dFRleHRDdHggPSBudWxsO1xuICAgIHRoaXMuX3RleHREaXZQcm9wZXJ0aWVzID0gbmV3IFdlYWtNYXAoKTtcbiAgICB0aGlzLl9yZW5kZXJpbmdEb25lID0gZmFsc2U7XG4gICAgdGhpcy5fY2FuY2VsZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9jYXBhYmlsaXR5ID0gY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHkoKTtcbiAgICB0aGlzLl9yZW5kZXJUaW1lciA9IG51bGw7XG4gICAgdGhpcy5fYm91bmRzID0gW107XG5cbiAgICAvLyBBbHdheXMgY2xlYW4tdXAgdGhlIHRlbXBvcmFyeSBjYW52YXMgb25jZSByZW5kZXJpbmcgaXMgbm8gbG9uZ2VyIHBlbmRpbmcuXG4gICAgdGhpcy5fY2FwYWJpbGl0eS5wcm9taXNlXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5fZW5oYW5jZVRleHRTZWxlY3Rpb24pIHtcbiAgICAgICAgICAvLyBUaGUgYHRleHREaXZgIHByb3BlcnRpZXMgYXJlIG5vIGxvbmdlciBuZWVkZWQuXG4gICAgICAgICAgdGhpcy5fdGV4dERpdlByb3BlcnRpZXMgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2xheW91dFRleHRDdHgpIHtcbiAgICAgICAgICAvLyBaZXJvaW5nIHRoZSB3aWR0aCBhbmQgaGVpZ2h0IGNhdXNlIEZpcmVmb3ggdG8gcmVsZWFzZSBncmFwaGljc1xuICAgICAgICAgIC8vIHJlc291cmNlcyBpbW1lZGlhdGVseSwgd2hpY2ggY2FuIGdyZWF0bHkgcmVkdWNlIG1lbW9yeSBjb25zdW1wdGlvbi5cbiAgICAgICAgICB0aGlzLl9sYXlvdXRUZXh0Q3R4LmNhbnZhcy53aWR0aCA9IDA7XG4gICAgICAgICAgdGhpcy5fbGF5b3V0VGV4dEN0eC5jYW52YXMuaGVpZ2h0ID0gMDtcbiAgICAgICAgICB0aGlzLl9sYXlvdXRUZXh0Q3R4ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgIC8vIEF2b2lkIFwiVW5jYXVnaHQgcHJvbWlzZVwiIG1lc3NhZ2VzIGluIHRoZSBjb25zb2xlLlxuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUHJvbWlzZSBmb3IgdGV4dExheWVyIHJlbmRlcmluZyB0YXNrIGNvbXBsZXRpb24uXG4gICAqIEB0eXBlIHtQcm9taXNlPHZvaWQ+fVxuICAgKi9cbiAgZ2V0IHByb21pc2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYW5jZWwgcmVuZGVyaW5nIG9mIHRoZSB0ZXh0TGF5ZXIuXG4gICAqL1xuICBjYW5jZWwoKSB7XG4gICAgdGhpcy5fY2FuY2VsZWQgPSB0cnVlO1xuICAgIGlmICh0aGlzLl9yZWFkZXIpIHtcbiAgICAgIHRoaXMuX3JlYWRlclxuICAgICAgICAuY2FuY2VsKG5ldyBBYm9ydEV4Y2VwdGlvbihcIlRleHRMYXllciB0YXNrIGNhbmNlbGxlZC5cIikpXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgLy8gQXZvaWQgXCJVbmNhdWdodCBwcm9taXNlXCIgbWVzc2FnZXMgaW4gdGhlIGNvbnNvbGUuXG4gICAgICAgIH0pO1xuICAgICAgdGhpcy5fcmVhZGVyID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3JlbmRlclRpbWVyICE9PSBudWxsKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5fcmVuZGVyVGltZXIpO1xuICAgICAgdGhpcy5fcmVuZGVyVGltZXIgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLl9jYXBhYmlsaXR5LnJlamVjdChuZXcgRXJyb3IoXCJUZXh0TGF5ZXIgdGFzayBjYW5jZWxsZWQuXCIpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3Byb2Nlc3NJdGVtcyhpdGVtcywgc3R5bGVDYWNoZSkge1xuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBpdGVtcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKGl0ZW1zW2ldLnN0ciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBpdGVtc1tpXS50eXBlID09PSBcImJlZ2luTWFya2VkQ29udGVudFByb3BzXCIgfHxcbiAgICAgICAgICBpdGVtc1tpXS50eXBlID09PSBcImJlZ2luTWFya2VkQ29udGVudFwiXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuX2NvbnRhaW5lcjtcbiAgICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICB0aGlzLl9jb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm1hcmtlZENvbnRlbnRcIik7XG4gICAgICAgICAgaWYgKGl0ZW1zW2ldLmlkICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9jb250YWluZXIuc2V0QXR0cmlidXRlKFwiaWRcIiwgYCR7aXRlbXNbaV0uaWR9YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLl9jb250YWluZXIpO1xuICAgICAgICB9IGVsc2UgaWYgKGl0ZW1zW2ldLnR5cGUgPT09IFwiZW5kTWFya2VkQ29udGVudFwiKSB7XG4gICAgICAgICAgdGhpcy5fY29udGFpbmVyID0gdGhpcy5fY29udGFpbmVyLnBhcmVudE5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB0aGlzLl90ZXh0Q29udGVudEl0ZW1zU3RyLnB1c2goaXRlbXNbaV0uc3RyKTtcbiAgICAgIGFwcGVuZFRleHQodGhpcywgaXRlbXNbaV0sIHN0eWxlQ2FjaGUsIHRoaXMuX2xheW91dFRleHRDdHgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2xheW91dFRleHQodGV4dERpdikge1xuICAgIGNvbnN0IHRleHREaXZQcm9wZXJ0aWVzID0gdGhpcy5fdGV4dERpdlByb3BlcnRpZXMuZ2V0KHRleHREaXYpO1xuXG4gICAgbGV0IHRyYW5zZm9ybSA9IFwiXCI7XG4gICAgaWYgKHRleHREaXZQcm9wZXJ0aWVzLmNhbnZhc1dpZHRoICE9PSAwICYmIHRleHREaXZQcm9wZXJ0aWVzLmhhc1RleHQpIHtcbiAgICAgIGNvbnN0IHsgZm9udFNpemUsIGZvbnRGYW1pbHkgfSA9IHRleHREaXYuc3R5bGU7XG5cbiAgICAgIC8vIE9ubHkgYnVpbGQgZm9udCBzdHJpbmcgYW5kIHNldCB0byBjb250ZXh0IGlmIGRpZmZlcmVudCBmcm9tIGxhc3QuXG4gICAgICBpZiAoXG4gICAgICAgIGZvbnRTaXplICE9PSB0aGlzLl9sYXlvdXRUZXh0TGFzdEZvbnRTaXplIHx8XG4gICAgICAgIGZvbnRGYW1pbHkgIT09IHRoaXMuX2xheW91dFRleHRMYXN0Rm9udEZhbWlseVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuX2xheW91dFRleHRDdHguZm9udCA9IGAke2ZvbnRTaXplfSAke2ZvbnRGYW1pbHl9YDtcbiAgICAgICAgdGhpcy5fbGF5b3V0VGV4dExhc3RGb250U2l6ZSA9IGZvbnRTaXplO1xuICAgICAgICB0aGlzLl9sYXlvdXRUZXh0TGFzdEZvbnRGYW1pbHkgPSBmb250RmFtaWx5O1xuICAgICAgfVxuICAgICAgLy8gT25seSBtZWFzdXJlIHRoZSB3aWR0aCBmb3IgbXVsdGktY2hhciB0ZXh0IGRpdnMsIHNlZSBgYXBwZW5kVGV4dGAuXG4gICAgICBjb25zdCB7IHdpZHRoIH0gPSB0aGlzLl9sYXlvdXRUZXh0Q3R4Lm1lYXN1cmVUZXh0KHRleHREaXYudGV4dENvbnRlbnQpO1xuXG4gICAgICBpZiAod2lkdGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHNjYWxlID0gdGV4dERpdlByb3BlcnRpZXMuY2FudmFzV2lkdGggLyB3aWR0aDtcbiAgICAgICAgaWYgKHRoaXMuX2VuaGFuY2VUZXh0U2VsZWN0aW9uKSB7XG4gICAgICAgICAgdGV4dERpdlByb3BlcnRpZXMuc2NhbGUgPSBzY2FsZTtcbiAgICAgICAgfVxuICAgICAgICB0cmFuc2Zvcm0gPSBgc2NhbGVYKCR7c2NhbGV9KWA7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0ZXh0RGl2UHJvcGVydGllcy5hbmdsZSAhPT0gMCkge1xuICAgICAgdHJhbnNmb3JtID0gYHJvdGF0ZSgke3RleHREaXZQcm9wZXJ0aWVzLmFuZ2xlfWRlZykgJHt0cmFuc2Zvcm19YDtcbiAgICB9XG4gICAgaWYgKHRyYW5zZm9ybS5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAodGhpcy5fZW5oYW5jZVRleHRTZWxlY3Rpb24pIHtcbiAgICAgICAgdGV4dERpdlByb3BlcnRpZXMub3JpZ2luYWxUcmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgICB9XG4gICAgICB0ZXh0RGl2LnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICB9XG5cbiAgICBpZiAodGV4dERpdlByb3BlcnRpZXMuaGFzVGV4dCkge1xuICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKHRleHREaXYpO1xuICAgIH1cbiAgICBpZiAodGV4dERpdlByb3BlcnRpZXMuaGFzRU9MKSB7XG4gICAgICBjb25zdCBiciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKTtcbiAgICAgIGJyLnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJwcmVzZW50YXRpb25cIik7XG4gICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQoYnIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3JlbmRlcih0aW1lb3V0ID0gMCkge1xuICAgIGNvbnN0IGNhcGFiaWxpdHkgPSBjcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSgpO1xuICAgIGxldCBzdHlsZUNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgIC8vIFRoZSB0ZW1wb3JhcnkgY2FudmFzIGlzIHVzZWQgdG8gbWVhc3VyZSB0ZXh0IGxlbmd0aCBpbiB0aGUgRE9NLlxuICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgY2FudmFzLmhlaWdodCA9IGNhbnZhcy53aWR0aCA9IERFRkFVTFRfRk9OVF9TSVpFO1xuXG4gICAgdGhpcy5fbGF5b3V0VGV4dEN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiwgeyBhbHBoYTogZmFsc2UgfSk7XG5cbiAgICBpZiAodGhpcy5fdGV4dENvbnRlbnQpIHtcbiAgICAgIGNvbnN0IHRleHRJdGVtcyA9IHRoaXMuX3RleHRDb250ZW50Lml0ZW1zO1xuICAgICAgY29uc3QgdGV4dFN0eWxlcyA9IHRoaXMuX3RleHRDb250ZW50LnN0eWxlcztcbiAgICAgIHRoaXMuX3Byb2Nlc3NJdGVtcyh0ZXh0SXRlbXMsIHRleHRTdHlsZXMpO1xuICAgICAgY2FwYWJpbGl0eS5yZXNvbHZlKCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl90ZXh0Q29udGVudFN0cmVhbSkge1xuICAgICAgY29uc3QgcHVtcCA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5fcmVhZGVyLnJlYWQoKS50aGVuKCh7IHZhbHVlLCBkb25lIH0pID0+IHtcbiAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgY2FwYWJpbGl0eS5yZXNvbHZlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihzdHlsZUNhY2hlLCB2YWx1ZS5zdHlsZXMpO1xuICAgICAgICAgIHRoaXMuX3Byb2Nlc3NJdGVtcyh2YWx1ZS5pdGVtcywgc3R5bGVDYWNoZSk7XG4gICAgICAgICAgcHVtcCgpO1xuICAgICAgICB9LCBjYXBhYmlsaXR5LnJlamVjdCk7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLl9yZWFkZXIgPSB0aGlzLl90ZXh0Q29udGVudFN0cmVhbS5nZXRSZWFkZXIoKTtcbiAgICAgIHB1bXAoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnTmVpdGhlciBcInRleHRDb250ZW50XCIgbm9yIFwidGV4dENvbnRlbnRTdHJlYW1cIiBwYXJhbWV0ZXJzIHNwZWNpZmllZC4nXG4gICAgICApO1xuICAgIH1cblxuICAgIGNhcGFiaWxpdHkucHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIHN0eWxlQ2FjaGUgPSBudWxsO1xuICAgICAgaWYgKCF0aW1lb3V0KSB7XG4gICAgICAgIC8vIFJlbmRlciByaWdodCBhd2F5XG4gICAgICAgIHJlbmRlcih0aGlzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFNjaGVkdWxlXG4gICAgICAgIHRoaXMuX3JlbmRlclRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgcmVuZGVyKHRoaXMpO1xuICAgICAgICAgIHRoaXMuX3JlbmRlclRpbWVyID0gbnVsbDtcbiAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICB9XG4gICAgfSwgdGhpcy5fY2FwYWJpbGl0eS5yZWplY3QpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2V4cGFuZERpdnNdXG4gICAqL1xuICBleHBhbmRUZXh0RGl2cyhleHBhbmREaXZzID0gZmFsc2UpIHtcbiAgICBpZiAoIXRoaXMuX2VuaGFuY2VUZXh0U2VsZWN0aW9uIHx8ICF0aGlzLl9yZW5kZXJpbmdEb25lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLl9ib3VuZHMgIT09IG51bGwpIHtcbiAgICAgIGV4cGFuZCh0aGlzKTtcbiAgICAgIHRoaXMuX2JvdW5kcyA9IG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHRyYW5zZm9ybUJ1ZiA9IFtdLFxuICAgICAgcGFkZGluZ0J1ZiA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gdGhpcy5fdGV4dERpdnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgY29uc3QgZGl2ID0gdGhpcy5fdGV4dERpdnNbaV07XG4gICAgICBjb25zdCBkaXZQcm9wcyA9IHRoaXMuX3RleHREaXZQcm9wZXJ0aWVzLmdldChkaXYpO1xuXG4gICAgICBpZiAoIWRpdlByb3BzLmhhc1RleHQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoZXhwYW5kRGl2cykge1xuICAgICAgICB0cmFuc2Zvcm1CdWYubGVuZ3RoID0gMDtcbiAgICAgICAgcGFkZGluZ0J1Zi5sZW5ndGggPSAwO1xuXG4gICAgICAgIGlmIChkaXZQcm9wcy5vcmlnaW5hbFRyYW5zZm9ybSkge1xuICAgICAgICAgIHRyYW5zZm9ybUJ1Zi5wdXNoKGRpdlByb3BzLm9yaWdpbmFsVHJhbnNmb3JtKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGl2UHJvcHMucGFkZGluZ1RvcCA+IDApIHtcbiAgICAgICAgICBwYWRkaW5nQnVmLnB1c2goYCR7ZGl2UHJvcHMucGFkZGluZ1RvcH1weGApO1xuICAgICAgICAgIHRyYW5zZm9ybUJ1Zi5wdXNoKGB0cmFuc2xhdGVZKCR7LWRpdlByb3BzLnBhZGRpbmdUb3B9cHgpYCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGFkZGluZ0J1Zi5wdXNoKDApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkaXZQcm9wcy5wYWRkaW5nUmlnaHQgPiAwKSB7XG4gICAgICAgICAgcGFkZGluZ0J1Zi5wdXNoKGAke2RpdlByb3BzLnBhZGRpbmdSaWdodCAvIGRpdlByb3BzLnNjYWxlfXB4YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGFkZGluZ0J1Zi5wdXNoKDApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkaXZQcm9wcy5wYWRkaW5nQm90dG9tID4gMCkge1xuICAgICAgICAgIHBhZGRpbmdCdWYucHVzaChgJHtkaXZQcm9wcy5wYWRkaW5nQm90dG9tfXB4YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGFkZGluZ0J1Zi5wdXNoKDApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkaXZQcm9wcy5wYWRkaW5nTGVmdCA+IDApIHtcbiAgICAgICAgICBwYWRkaW5nQnVmLnB1c2goYCR7ZGl2UHJvcHMucGFkZGluZ0xlZnQgLyBkaXZQcm9wcy5zY2FsZX1weGApO1xuICAgICAgICAgIHRyYW5zZm9ybUJ1Zi5wdXNoKFxuICAgICAgICAgICAgYHRyYW5zbGF0ZVgoJHstZGl2UHJvcHMucGFkZGluZ0xlZnQgLyBkaXZQcm9wcy5zY2FsZX1weClgXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYWRkaW5nQnVmLnB1c2goMCk7XG4gICAgICAgIH1cblxuICAgICAgICBkaXYuc3R5bGUucGFkZGluZyA9IHBhZGRpbmdCdWYuam9pbihcIiBcIik7XG4gICAgICAgIGlmICh0cmFuc2Zvcm1CdWYubGVuZ3RoKSB7XG4gICAgICAgICAgZGl2LnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybUJ1Zi5qb2luKFwiIFwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGl2LnN0eWxlLnBhZGRpbmcgPSBudWxsO1xuICAgICAgICBkaXYuc3R5bGUudHJhbnNmb3JtID0gZGl2UHJvcHMub3JpZ2luYWxUcmFuc2Zvcm07XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtUZXh0TGF5ZXJSZW5kZXJQYXJhbWV0ZXJzfSByZW5kZXJQYXJhbWV0ZXJzXG4gKiBAcmV0dXJucyB7VGV4dExheWVyUmVuZGVyVGFza31cbiAqL1xuZnVuY3Rpb24gcmVuZGVyVGV4dExheWVyKHJlbmRlclBhcmFtZXRlcnMpIHtcbiAgY29uc3QgdGFzayA9IG5ldyBUZXh0TGF5ZXJSZW5kZXJUYXNrKHtcbiAgICB0ZXh0Q29udGVudDogcmVuZGVyUGFyYW1ldGVycy50ZXh0Q29udGVudCxcbiAgICB0ZXh0Q29udGVudFN0cmVhbTogcmVuZGVyUGFyYW1ldGVycy50ZXh0Q29udGVudFN0cmVhbSxcbiAgICBjb250YWluZXI6IHJlbmRlclBhcmFtZXRlcnMuY29udGFpbmVyLFxuICAgIHZpZXdwb3J0OiByZW5kZXJQYXJhbWV0ZXJzLnZpZXdwb3J0LFxuICAgIHRleHREaXZzOiByZW5kZXJQYXJhbWV0ZXJzLnRleHREaXZzLFxuICAgIHRleHRDb250ZW50SXRlbXNTdHI6IHJlbmRlclBhcmFtZXRlcnMudGV4dENvbnRlbnRJdGVtc1N0cixcbiAgICBlbmhhbmNlVGV4dFNlbGVjdGlvbjogcmVuZGVyUGFyYW1ldGVycy5lbmhhbmNlVGV4dFNlbGVjdGlvbixcbiAgfSk7XG4gIHRhc2suX3JlbmRlcihyZW5kZXJQYXJhbWV0ZXJzLnRpbWVvdXQpO1xuICByZXR1cm4gdGFzaztcbn1cblxuZXhwb3J0IHsgcmVuZGVyVGV4dExheWVyIH07XG4iLCAiLyogQ29weXJpZ2h0IDIwMTIgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiBnbG9iYWxzIF9fbm9uX3dlYnBhY2tfcmVxdWlyZV9fICovXG5cbmltcG9ydCB7XG4gIEZPTlRfSURFTlRJVFlfTUFUUklYLFxuICBJREVOVElUWV9NQVRSSVgsXG4gIEltYWdlS2luZCxcbiAgT1BTLFxuICBUZXh0UmVuZGVyaW5nTW9kZSxcbiAgdW5yZWFjaGFibGUsXG4gIFV0aWwsXG4gIHdhcm4sXG59IGZyb20gXCIuLi9zaGFyZWQvdXRpbC5qc1wiO1xuaW1wb3J0IHsgRE9NU1ZHRmFjdG9yeSB9IGZyb20gXCIuL2Rpc3BsYXlfdXRpbHMuanNcIjtcbmltcG9ydCB7IGlzTm9kZUpTIH0gZnJvbSBcIi4uL3NoYXJlZC9pc19ub2RlLmpzXCI7XG5cbi8qKiBAdHlwZSB7YW55fSAqL1xubGV0IFNWR0dyYXBoaWNzID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB1bnJlYWNoYWJsZShcIk5vdCBpbXBsZW1lbnRlZDogU1ZHR3JhcGhpY3NcIik7XG4gIH1cbn07XG5cbmlmIChcbiAgdHlwZW9mIFBERkpTRGV2ID09PSBcInVuZGVmaW5lZFwiIHx8XG4gIFBERkpTRGV2LnRlc3QoXCIhUFJPRFVDVElPTiB8fCBHRU5FUklDXCIpXG4pIHtcbiAgY29uc3QgU1ZHX0RFRkFVTFRTID0ge1xuICAgIGZvbnRTdHlsZTogXCJub3JtYWxcIixcbiAgICBmb250V2VpZ2h0OiBcIm5vcm1hbFwiLFxuICAgIGZpbGxDb2xvcjogXCIjMDAwMDAwXCIsXG4gIH07XG4gIGNvbnN0IFhNTF9OUyA9IFwiaHR0cDovL3d3dy53My5vcmcvWE1MLzE5OTgvbmFtZXNwYWNlXCI7XG4gIGNvbnN0IFhMSU5LX05TID0gXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCI7XG4gIGNvbnN0IExJTkVfQ0FQX1NUWUxFUyA9IFtcImJ1dHRcIiwgXCJyb3VuZFwiLCBcInNxdWFyZVwiXTtcbiAgY29uc3QgTElORV9KT0lOX1NUWUxFUyA9IFtcIm1pdGVyXCIsIFwicm91bmRcIiwgXCJiZXZlbFwiXTtcblxuICBjb25zdCBjcmVhdGVPYmplY3RVUkwgPSBmdW5jdGlvbiAoXG4gICAgZGF0YSxcbiAgICBjb250ZW50VHlwZSA9IFwiXCIsXG4gICAgZm9yY2VEYXRhU2NoZW1hID0gZmFsc2VcbiAgKSB7XG4gICAgaWYgKFxuICAgICAgVVJMLmNyZWF0ZU9iamVjdFVSTCAmJlxuICAgICAgdHlwZW9mIEJsb2IgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgICFmb3JjZURhdGFTY2hlbWFcbiAgICApIHtcbiAgICAgIHJldHVybiBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtkYXRhXSwgeyB0eXBlOiBjb250ZW50VHlwZSB9KSk7XG4gICAgfVxuICAgIC8vIEJsb2IvY3JlYXRlT2JqZWN0VVJMIGlzIG5vdCBhdmFpbGFibGUsIGZhbGxpbmcgYmFjayB0byBkYXRhIHNjaGVtYS5cbiAgICBjb25zdCBkaWdpdHMgPVxuICAgICAgXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPVwiO1xuXG4gICAgbGV0IGJ1ZmZlciA9IGBkYXRhOiR7Y29udGVudFR5cGV9O2Jhc2U2NCxgO1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGRhdGEubGVuZ3RoOyBpIDwgaWk7IGkgKz0gMykge1xuICAgICAgY29uc3QgYjEgPSBkYXRhW2ldICYgMHhmZjtcbiAgICAgIGNvbnN0IGIyID0gZGF0YVtpICsgMV0gJiAweGZmO1xuICAgICAgY29uc3QgYjMgPSBkYXRhW2kgKyAyXSAmIDB4ZmY7XG4gICAgICBjb25zdCBkMSA9IGIxID4+IDIsXG4gICAgICAgIGQyID0gKChiMSAmIDMpIDw8IDQpIHwgKGIyID4+IDQpO1xuICAgICAgY29uc3QgZDMgPSBpICsgMSA8IGlpID8gKChiMiAmIDB4ZikgPDwgMikgfCAoYjMgPj4gNikgOiA2NDtcbiAgICAgIGNvbnN0IGQ0ID0gaSArIDIgPCBpaSA/IGIzICYgMHgzZiA6IDY0O1xuICAgICAgYnVmZmVyICs9IGRpZ2l0c1tkMV0gKyBkaWdpdHNbZDJdICsgZGlnaXRzW2QzXSArIGRpZ2l0c1tkNF07XG4gICAgfVxuICAgIHJldHVybiBidWZmZXI7XG4gIH07XG5cbiAgY29uc3QgY29udmVydEltZ0RhdGFUb1BuZyA9IChmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgUE5HX0hFQURFUiA9IG5ldyBVaW50OEFycmF5KFtcbiAgICAgIDB4ODksIDB4NTAsIDB4NGUsIDB4NDcsIDB4MGQsIDB4MGEsIDB4MWEsIDB4MGEsXG4gICAgXSk7XG4gICAgY29uc3QgQ0hVTktfV1JBUFBFUl9TSVpFID0gMTI7XG5cbiAgICBjb25zdCBjcmNUYWJsZSA9IG5ldyBJbnQzMkFycmF5KDI1Nik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xuICAgICAgbGV0IGMgPSBpO1xuICAgICAgZm9yIChsZXQgaCA9IDA7IGggPCA4OyBoKyspIHtcbiAgICAgICAgaWYgKGMgJiAxKSB7XG4gICAgICAgICAgYyA9IDB4ZWRiODgzMjAgXiAoKGMgPj4gMSkgJiAweDdmZmZmZmZmKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjID0gKGMgPj4gMSkgJiAweDdmZmZmZmZmO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjcmNUYWJsZVtpXSA9IGM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JjMzIoZGF0YSwgc3RhcnQsIGVuZCkge1xuICAgICAgbGV0IGNyYyA9IC0xO1xuICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICAgICAgY29uc3QgYSA9IChjcmMgXiBkYXRhW2ldKSAmIDB4ZmY7XG4gICAgICAgIGNvbnN0IGIgPSBjcmNUYWJsZVthXTtcbiAgICAgICAgY3JjID0gKGNyYyA+Pj4gOCkgXiBiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNyYyBeIC0xO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHdyaXRlUG5nQ2h1bmsodHlwZSwgYm9keSwgZGF0YSwgb2Zmc2V0KSB7XG4gICAgICBsZXQgcCA9IG9mZnNldDtcbiAgICAgIGNvbnN0IGxlbiA9IGJvZHkubGVuZ3RoO1xuXG4gICAgICBkYXRhW3BdID0gKGxlbiA+PiAyNCkgJiAweGZmO1xuICAgICAgZGF0YVtwICsgMV0gPSAobGVuID4+IDE2KSAmIDB4ZmY7XG4gICAgICBkYXRhW3AgKyAyXSA9IChsZW4gPj4gOCkgJiAweGZmO1xuICAgICAgZGF0YVtwICsgM10gPSBsZW4gJiAweGZmO1xuICAgICAgcCArPSA0O1xuXG4gICAgICBkYXRhW3BdID0gdHlwZS5jaGFyQ29kZUF0KDApICYgMHhmZjtcbiAgICAgIGRhdGFbcCArIDFdID0gdHlwZS5jaGFyQ29kZUF0KDEpICYgMHhmZjtcbiAgICAgIGRhdGFbcCArIDJdID0gdHlwZS5jaGFyQ29kZUF0KDIpICYgMHhmZjtcbiAgICAgIGRhdGFbcCArIDNdID0gdHlwZS5jaGFyQ29kZUF0KDMpICYgMHhmZjtcbiAgICAgIHAgKz0gNDtcblxuICAgICAgZGF0YS5zZXQoYm9keSwgcCk7XG4gICAgICBwICs9IGJvZHkubGVuZ3RoO1xuXG4gICAgICBjb25zdCBjcmMgPSBjcmMzMihkYXRhLCBvZmZzZXQgKyA0LCBwKTtcbiAgICAgIGRhdGFbcF0gPSAoY3JjID4+IDI0KSAmIDB4ZmY7XG4gICAgICBkYXRhW3AgKyAxXSA9IChjcmMgPj4gMTYpICYgMHhmZjtcbiAgICAgIGRhdGFbcCArIDJdID0gKGNyYyA+PiA4KSAmIDB4ZmY7XG4gICAgICBkYXRhW3AgKyAzXSA9IGNyYyAmIDB4ZmY7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRsZXIzMihkYXRhLCBzdGFydCwgZW5kKSB7XG4gICAgICBsZXQgYSA9IDE7XG4gICAgICBsZXQgYiA9IDA7XG4gICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgICAgICBhID0gKGEgKyAoZGF0YVtpXSAmIDB4ZmYpKSAlIDY1NTIxO1xuICAgICAgICBiID0gKGIgKyBhKSAlIDY1NTIxO1xuICAgICAgfVxuICAgICAgcmV0dXJuIChiIDw8IDE2KSB8IGE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtVaW50OEFycmF5fSBsaXRlcmFscyBUaGUgaW5wdXQgZGF0YS5cbiAgICAgKiBAcmV0dXJucyB7VWludDhBcnJheX0gVGhlIERFRkxBVEUtY29tcHJlc3NlZCBkYXRhIHN0cmVhbSBpbiB6bGliIGZvcm1hdC5cbiAgICAgKiAgIFRoaXMgaXMgdGhlIHJlcXVpcmVkIGZvcm1hdCBmb3IgY29tcHJlc3NlZCBzdHJlYW1zIGluIHRoZSBQTkcgZm9ybWF0OlxuICAgICAqICAgaHR0cDovL3d3dy5saWJwbmcub3JnL3B1Yi9wbmcvc3BlYy8xLjIvUE5HLUNvbXByZXNzaW9uLmh0bWxcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBkZWZsYXRlU3luYyhsaXRlcmFscykge1xuICAgICAgaWYgKCFpc05vZGVKUykge1xuICAgICAgICAvLyB6bGliIGlzIGNlcnRhaW5seSBub3QgYXZhaWxhYmxlIG91dHNpZGUgb2YgTm9kZS5qcy4gV2UgY2FuIGVpdGhlciB1c2VcbiAgICAgICAgLy8gdGhlIHBha28gbGlicmFyeSBmb3IgY2xpZW50LXNpZGUgREVGTEFURSBjb21wcmVzc2lvbiwgb3IgdXNlIHRoZVxuICAgICAgICAvLyBjYW52YXMgQVBJIG9mIHRoZSBicm93c2VyIHRvIG9idGFpbiBhIG1vcmUgb3B0aW1hbCBQTkcgZmlsZS5cbiAgICAgICAgcmV0dXJuIGRlZmxhdGVTeW5jVW5jb21wcmVzc2VkKGxpdGVyYWxzKTtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIE5PVEU6IFRoaXMgaW1wbGVtZW50YXRpb24gaXMgZmFyIGZyb20gcGVyZmVjdCwgYnV0IGFscmVhZHkgd2F5IGJldHRlclxuICAgICAgICAvLyB0aGFuIG5vdCBhcHBseWluZyBhbnkgY29tcHJlc3Npb24uXG4gICAgICAgIC8vXG4gICAgICAgIC8vIEEgYmV0dGVyIGFsZ29yaXRobSB3aWxsIHRyeSB0byBjaG9vc2UgYSBnb29kIHByZWRpY3Rvci9maWx0ZXIgYW5kXG4gICAgICAgIC8vIHRoZW4gY2hvb3NlIGEgc3VpdGFibGUgemxpYiBjb21wcmVzc2lvbiBzdHJhdGVneSAoZS5nLiAzLFpfUkxFKS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gTm9kZSB2MC4xMS4xMiB6bGliLmRlZmxhdGVTeW5jIGlzIGludHJvZHVjZWQgKGFuZCByZXR1cm5zIGEgQnVmZmVyKS5cbiAgICAgICAgLy8gTm9kZSB2My4wLjAgICBCdWZmZXIgaW5oZXJpdHMgZnJvbSBVaW50OEFycmF5LlxuICAgICAgICAvLyBOb2RlIHY4LjAuMCAgIHpsaWIuZGVmbGF0ZVN5bmMgYWNjZXB0cyBVaW50OEFycmF5IGFzIGlucHV0LlxuICAgICAgICBsZXQgaW5wdXQ7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgICAgICBpZiAocGFyc2VJbnQocHJvY2Vzcy52ZXJzaW9ucy5ub2RlKSA+PSA4KSB7XG4gICAgICAgICAgaW5wdXQgPSBsaXRlcmFscztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgICAgICAgICBpbnB1dCA9IEJ1ZmZlci5mcm9tKGxpdGVyYWxzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvdXRwdXQgPSBfX25vbl93ZWJwYWNrX3JlcXVpcmVfXyhcInpsaWJcIikuZGVmbGF0ZVN5bmMoaW5wdXQsIHtcbiAgICAgICAgICBsZXZlbDogOSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBvdXRwdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gb3V0cHV0IDogbmV3IFVpbnQ4QXJyYXkob3V0cHV0KTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICBcIk5vdCBjb21wcmVzc2luZyBQTkcgYmVjYXVzZSB6bGliLmRlZmxhdGVTeW5jIGlzIHVuYXZhaWxhYmxlOiBcIiArIGVcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRlZmxhdGVTeW5jVW5jb21wcmVzc2VkKGxpdGVyYWxzKTtcbiAgICB9XG5cbiAgICAvLyBBbiBpbXBsZW1lbnRhdGlvbiBvZiBERUZMQVRFIHdpdGggY29tcHJlc3Npb24gbGV2ZWwgMCAoWl9OT19DT01QUkVTU0lPTikuXG4gICAgZnVuY3Rpb24gZGVmbGF0ZVN5bmNVbmNvbXByZXNzZWQobGl0ZXJhbHMpIHtcbiAgICAgIGxldCBsZW4gPSBsaXRlcmFscy5sZW5ndGg7XG4gICAgICBjb25zdCBtYXhCbG9ja0xlbmd0aCA9IDB4ZmZmZjtcblxuICAgICAgY29uc3QgZGVmbGF0ZUJsb2NrcyA9IE1hdGguY2VpbChsZW4gLyBtYXhCbG9ja0xlbmd0aCk7XG4gICAgICBjb25zdCBpZGF0ID0gbmV3IFVpbnQ4QXJyYXkoMiArIGxlbiArIGRlZmxhdGVCbG9ja3MgKiA1ICsgNCk7XG4gICAgICBsZXQgcGkgPSAwO1xuICAgICAgaWRhdFtwaSsrXSA9IDB4Nzg7IC8vIGNvbXByZXNzaW9uIG1ldGhvZCBhbmQgZmxhZ3NcbiAgICAgIGlkYXRbcGkrK10gPSAweDljOyAvLyBmbGFnc1xuXG4gICAgICBsZXQgcG9zID0gMDtcbiAgICAgIHdoaWxlIChsZW4gPiBtYXhCbG9ja0xlbmd0aCkge1xuICAgICAgICAvLyB3cml0aW5nIG5vbi1maW5hbCBERUZMQVRFIGJsb2NrcyB0eXBlIDAgYW5kIGxlbmd0aCBvZiA2NTUzNVxuICAgICAgICBpZGF0W3BpKytdID0gMHgwMDtcbiAgICAgICAgaWRhdFtwaSsrXSA9IDB4ZmY7XG4gICAgICAgIGlkYXRbcGkrK10gPSAweGZmO1xuICAgICAgICBpZGF0W3BpKytdID0gMHgwMDtcbiAgICAgICAgaWRhdFtwaSsrXSA9IDB4MDA7XG4gICAgICAgIGlkYXQuc2V0KGxpdGVyYWxzLnN1YmFycmF5KHBvcywgcG9zICsgbWF4QmxvY2tMZW5ndGgpLCBwaSk7XG4gICAgICAgIHBpICs9IG1heEJsb2NrTGVuZ3RoO1xuICAgICAgICBwb3MgKz0gbWF4QmxvY2tMZW5ndGg7XG4gICAgICAgIGxlbiAtPSBtYXhCbG9ja0xlbmd0aDtcbiAgICAgIH1cblxuICAgICAgLy8gd3JpdGluZyBub24tZmluYWwgREVGTEFURSBibG9ja3MgdHlwZSAwXG4gICAgICBpZGF0W3BpKytdID0gMHgwMTtcbiAgICAgIGlkYXRbcGkrK10gPSBsZW4gJiAweGZmO1xuICAgICAgaWRhdFtwaSsrXSA9IChsZW4gPj4gOCkgJiAweGZmO1xuICAgICAgaWRhdFtwaSsrXSA9IH5sZW4gJiAweGZmZmYgJiAweGZmO1xuICAgICAgaWRhdFtwaSsrXSA9ICgofmxlbiAmIDB4ZmZmZikgPj4gOCkgJiAweGZmO1xuICAgICAgaWRhdC5zZXQobGl0ZXJhbHMuc3ViYXJyYXkocG9zKSwgcGkpO1xuICAgICAgcGkgKz0gbGl0ZXJhbHMubGVuZ3RoIC0gcG9zO1xuXG4gICAgICBjb25zdCBhZGxlciA9IGFkbGVyMzIobGl0ZXJhbHMsIDAsIGxpdGVyYWxzLmxlbmd0aCk7IC8vIGNoZWNrc3VtXG4gICAgICBpZGF0W3BpKytdID0gKGFkbGVyID4+IDI0KSAmIDB4ZmY7XG4gICAgICBpZGF0W3BpKytdID0gKGFkbGVyID4+IDE2KSAmIDB4ZmY7XG4gICAgICBpZGF0W3BpKytdID0gKGFkbGVyID4+IDgpICYgMHhmZjtcbiAgICAgIGlkYXRbcGkrK10gPSBhZGxlciAmIDB4ZmY7XG4gICAgICByZXR1cm4gaWRhdDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbmNvZGUoaW1nRGF0YSwga2luZCwgZm9yY2VEYXRhU2NoZW1hLCBpc01hc2spIHtcbiAgICAgIGNvbnN0IHdpZHRoID0gaW1nRGF0YS53aWR0aDtcbiAgICAgIGNvbnN0IGhlaWdodCA9IGltZ0RhdGEuaGVpZ2h0O1xuICAgICAgbGV0IGJpdERlcHRoLCBjb2xvclR5cGUsIGxpbmVTaXplO1xuICAgICAgY29uc3QgYnl0ZXMgPSBpbWdEYXRhLmRhdGE7XG5cbiAgICAgIHN3aXRjaCAoa2luZCkge1xuICAgICAgICBjYXNlIEltYWdlS2luZC5HUkFZU0NBTEVfMUJQUDpcbiAgICAgICAgICBjb2xvclR5cGUgPSAwO1xuICAgICAgICAgIGJpdERlcHRoID0gMTtcbiAgICAgICAgICBsaW5lU2l6ZSA9ICh3aWR0aCArIDcpID4+IDM7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgSW1hZ2VLaW5kLlJHQl8yNEJQUDpcbiAgICAgICAgICBjb2xvclR5cGUgPSAyO1xuICAgICAgICAgIGJpdERlcHRoID0gODtcbiAgICAgICAgICBsaW5lU2l6ZSA9IHdpZHRoICogMztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBJbWFnZUtpbmQuUkdCQV8zMkJQUDpcbiAgICAgICAgICBjb2xvclR5cGUgPSA2O1xuICAgICAgICAgIGJpdERlcHRoID0gODtcbiAgICAgICAgICBsaW5lU2l6ZSA9IHdpZHRoICogNDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIGZvcm1hdFwiKTtcbiAgICAgIH1cblxuICAgICAgLy8gcHJlZml4IGV2ZXJ5IHJvdyB3aXRoIHByZWRpY3RvciAwXG4gICAgICBjb25zdCBsaXRlcmFscyA9IG5ldyBVaW50OEFycmF5KCgxICsgbGluZVNpemUpICogaGVpZ2h0KTtcbiAgICAgIGxldCBvZmZzZXRMaXRlcmFscyA9IDAsXG4gICAgICAgIG9mZnNldEJ5dGVzID0gMDtcbiAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgaGVpZ2h0OyArK3kpIHtcbiAgICAgICAgbGl0ZXJhbHNbb2Zmc2V0TGl0ZXJhbHMrK10gPSAwOyAvLyBubyBwcmVkaWN0aW9uXG4gICAgICAgIGxpdGVyYWxzLnNldChcbiAgICAgICAgICBieXRlcy5zdWJhcnJheShvZmZzZXRCeXRlcywgb2Zmc2V0Qnl0ZXMgKyBsaW5lU2l6ZSksXG4gICAgICAgICAgb2Zmc2V0TGl0ZXJhbHNcbiAgICAgICAgKTtcbiAgICAgICAgb2Zmc2V0Qnl0ZXMgKz0gbGluZVNpemU7XG4gICAgICAgIG9mZnNldExpdGVyYWxzICs9IGxpbmVTaXplO1xuICAgICAgfVxuXG4gICAgICBpZiAoa2luZCA9PT0gSW1hZ2VLaW5kLkdSQVlTQ0FMRV8xQlBQICYmIGlzTWFzaykge1xuICAgICAgICAvLyBpbnZlcnRpbmcgZm9yIGltYWdlIG1hc2tzXG4gICAgICAgIG9mZnNldExpdGVyYWxzID0gMDtcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xuICAgICAgICAgIG9mZnNldExpdGVyYWxzKys7IC8vIHNraXBwaW5nIHByZWRpY3RvclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZVNpemU7IGkrKykge1xuICAgICAgICAgICAgbGl0ZXJhbHNbb2Zmc2V0TGl0ZXJhbHMrK10gXj0gMHhmZjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgaWhkciA9IG5ldyBVaW50OEFycmF5KFtcbiAgICAgICAgKHdpZHRoID4+IDI0KSAmIDB4ZmYsXG4gICAgICAgICh3aWR0aCA+PiAxNikgJiAweGZmLFxuICAgICAgICAod2lkdGggPj4gOCkgJiAweGZmLFxuICAgICAgICB3aWR0aCAmIDB4ZmYsXG4gICAgICAgIChoZWlnaHQgPj4gMjQpICYgMHhmZixcbiAgICAgICAgKGhlaWdodCA+PiAxNikgJiAweGZmLFxuICAgICAgICAoaGVpZ2h0ID4+IDgpICYgMHhmZixcbiAgICAgICAgaGVpZ2h0ICYgMHhmZixcbiAgICAgICAgYml0RGVwdGgsIC8vIGJpdCBkZXB0aFxuICAgICAgICBjb2xvclR5cGUsIC8vIGNvbG9yIHR5cGVcbiAgICAgICAgMHgwMCwgLy8gY29tcHJlc3Npb24gbWV0aG9kXG4gICAgICAgIDB4MDAsIC8vIGZpbHRlciBtZXRob2RcbiAgICAgICAgMHgwMCwgLy8gaW50ZXJsYWNlIG1ldGhvZFxuICAgICAgXSk7XG4gICAgICBjb25zdCBpZGF0ID0gZGVmbGF0ZVN5bmMobGl0ZXJhbHMpO1xuXG4gICAgICAvLyBQTkcgY29uc2lzdHMgb2Y6IGhlYWRlciwgSUhEUitkYXRhLCBJREFUK2RhdGEsIGFuZCBJRU5ELlxuICAgICAgY29uc3QgcG5nTGVuZ3RoID1cbiAgICAgICAgUE5HX0hFQURFUi5sZW5ndGggKyBDSFVOS19XUkFQUEVSX1NJWkUgKiAzICsgaWhkci5sZW5ndGggKyBpZGF0Lmxlbmd0aDtcbiAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVWludDhBcnJheShwbmdMZW5ndGgpO1xuICAgICAgbGV0IG9mZnNldCA9IDA7XG4gICAgICBkYXRhLnNldChQTkdfSEVBREVSLCBvZmZzZXQpO1xuICAgICAgb2Zmc2V0ICs9IFBOR19IRUFERVIubGVuZ3RoO1xuICAgICAgd3JpdGVQbmdDaHVuayhcIklIRFJcIiwgaWhkciwgZGF0YSwgb2Zmc2V0KTtcbiAgICAgIG9mZnNldCArPSBDSFVOS19XUkFQUEVSX1NJWkUgKyBpaGRyLmxlbmd0aDtcbiAgICAgIHdyaXRlUG5nQ2h1bmsoXCJJREFUQVwiLCBpZGF0LCBkYXRhLCBvZmZzZXQpO1xuICAgICAgb2Zmc2V0ICs9IENIVU5LX1dSQVBQRVJfU0laRSArIGlkYXQubGVuZ3RoO1xuICAgICAgd3JpdGVQbmdDaHVuayhcIklFTkRcIiwgbmV3IFVpbnQ4QXJyYXkoMCksIGRhdGEsIG9mZnNldCk7XG5cbiAgICAgIHJldHVybiBjcmVhdGVPYmplY3RVUkwoZGF0YSwgXCJpbWFnZS9wbmdcIiwgZm9yY2VEYXRhU2NoZW1hKTtcbiAgICB9XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2hhZG93XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGNvbnZlcnRJbWdEYXRhVG9QbmcoaW1nRGF0YSwgZm9yY2VEYXRhU2NoZW1hLCBpc01hc2spIHtcbiAgICAgIGNvbnN0IGtpbmQgPVxuICAgICAgICBpbWdEYXRhLmtpbmQgPT09IHVuZGVmaW5lZCA/IEltYWdlS2luZC5HUkFZU0NBTEVfMUJQUCA6IGltZ0RhdGEua2luZDtcbiAgICAgIHJldHVybiBlbmNvZGUoaW1nRGF0YSwga2luZCwgZm9yY2VEYXRhU2NoZW1hLCBpc01hc2spO1xuICAgIH07XG4gIH0pKCk7XG5cbiAgY2xhc3MgU1ZHRXh0cmFTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICB0aGlzLmZvbnRTaXplU2NhbGUgPSAxO1xuICAgICAgdGhpcy5mb250V2VpZ2h0ID0gU1ZHX0RFRkFVTFRTLmZvbnRXZWlnaHQ7XG4gICAgICB0aGlzLmZvbnRTaXplID0gMDtcblxuICAgICAgdGhpcy50ZXh0TWF0cml4ID0gSURFTlRJVFlfTUFUUklYO1xuICAgICAgdGhpcy5mb250TWF0cml4ID0gRk9OVF9JREVOVElUWV9NQVRSSVg7XG4gICAgICB0aGlzLmxlYWRpbmcgPSAwO1xuICAgICAgdGhpcy50ZXh0UmVuZGVyaW5nTW9kZSA9IFRleHRSZW5kZXJpbmdNb2RlLkZJTEw7XG4gICAgICB0aGlzLnRleHRNYXRyaXhTY2FsZSA9IDE7XG5cbiAgICAgIC8vIEN1cnJlbnQgcG9pbnQgKGluIHVzZXIgY29vcmRpbmF0ZXMpXG4gICAgICB0aGlzLnggPSAwO1xuICAgICAgdGhpcy55ID0gMDtcblxuICAgICAgLy8gU3RhcnQgb2YgdGV4dCBsaW5lIChpbiB0ZXh0IGNvb3JkaW5hdGVzKVxuICAgICAgdGhpcy5saW5lWCA9IDA7XG4gICAgICB0aGlzLmxpbmVZID0gMDtcblxuICAgICAgLy8gQ2hhcmFjdGVyIGFuZCB3b3JkIHNwYWNpbmdcbiAgICAgIHRoaXMuY2hhclNwYWNpbmcgPSAwO1xuICAgICAgdGhpcy53b3JkU3BhY2luZyA9IDA7XG4gICAgICB0aGlzLnRleHRIU2NhbGUgPSAxO1xuICAgICAgdGhpcy50ZXh0UmlzZSA9IDA7XG5cbiAgICAgIC8vIERlZmF1bHQgZm9yZWdyb3VuZCBhbmQgYmFja2dyb3VuZCBjb2xvcnNcbiAgICAgIHRoaXMuZmlsbENvbG9yID0gU1ZHX0RFRkFVTFRTLmZpbGxDb2xvcjtcbiAgICAgIHRoaXMuc3Ryb2tlQ29sb3IgPSBcIiMwMDAwMDBcIjtcblxuICAgICAgdGhpcy5maWxsQWxwaGEgPSAxO1xuICAgICAgdGhpcy5zdHJva2VBbHBoYSA9IDE7XG4gICAgICB0aGlzLmxpbmVXaWR0aCA9IDE7XG4gICAgICB0aGlzLmxpbmVKb2luID0gXCJcIjtcbiAgICAgIHRoaXMubGluZUNhcCA9IFwiXCI7XG4gICAgICB0aGlzLm1pdGVyTGltaXQgPSAwO1xuXG4gICAgICB0aGlzLmRhc2hBcnJheSA9IFtdO1xuICAgICAgdGhpcy5kYXNoUGhhc2UgPSAwO1xuXG4gICAgICB0aGlzLmRlcGVuZGVuY2llcyA9IFtdO1xuXG4gICAgICAvLyBDbGlwcGluZ1xuICAgICAgdGhpcy5hY3RpdmVDbGlwVXJsID0gbnVsbDtcbiAgICAgIHRoaXMuY2xpcEdyb3VwID0gbnVsbDtcblxuICAgICAgdGhpcy5tYXNrSWQgPSBcIlwiO1xuICAgIH1cblxuICAgIGNsb25lKCkge1xuICAgICAgcmV0dXJuIE9iamVjdC5jcmVhdGUodGhpcyk7XG4gICAgfVxuXG4gICAgc2V0Q3VycmVudFBvaW50KHgsIHkpIHtcbiAgICAgIHRoaXMueCA9IHg7XG4gICAgICB0aGlzLnkgPSB5O1xuICAgIH1cbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbm5lci1kZWNsYXJhdGlvbnNcbiAgZnVuY3Rpb24gb3BMaXN0VG9UcmVlKG9wTGlzdCkge1xuICAgIGxldCBvcFRyZWUgPSBbXTtcbiAgICBjb25zdCB0bXAgPSBbXTtcblxuICAgIGZvciAoY29uc3Qgb3BMaXN0RWxlbWVudCBvZiBvcExpc3QpIHtcbiAgICAgIGlmIChvcExpc3RFbGVtZW50LmZuID09PSBcInNhdmVcIikge1xuICAgICAgICBvcFRyZWUucHVzaCh7IGZuSWQ6IDkyLCBmbjogXCJncm91cFwiLCBpdGVtczogW10gfSk7XG4gICAgICAgIHRtcC5wdXNoKG9wVHJlZSk7XG4gICAgICAgIG9wVHJlZSA9IG9wVHJlZVtvcFRyZWUubGVuZ3RoIC0gMV0uaXRlbXM7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAob3BMaXN0RWxlbWVudC5mbiA9PT0gXCJyZXN0b3JlXCIpIHtcbiAgICAgICAgb3BUcmVlID0gdG1wLnBvcCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3BUcmVlLnB1c2gob3BMaXN0RWxlbWVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvcFRyZWU7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgZmxvYXQgbnVtYmVyIGFzIGEgc3RyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0gdmFsdWUge251bWJlcn0gLSBUaGUgZmxvYXQgbnVtYmVyIHRvIGZvcm1hdC5cbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbm5lci1kZWNsYXJhdGlvbnNcbiAgZnVuY3Rpb24gcGYodmFsdWUpIHtcbiAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcih2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICAgIH1cbiAgICBjb25zdCBzID0gdmFsdWUudG9GaXhlZCgxMCk7XG4gICAgbGV0IGkgPSBzLmxlbmd0aCAtIDE7XG4gICAgaWYgKHNbaV0gIT09IFwiMFwiKSB7XG4gICAgICByZXR1cm4gcztcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgdHJhaWxpbmcgemVyb3MuXG4gICAgZG8ge1xuICAgICAgaS0tO1xuICAgIH0gd2hpbGUgKHNbaV0gPT09IFwiMFwiKTtcbiAgICByZXR1cm4gcy5zdWJzdHJpbmcoMCwgc1tpXSA9PT0gXCIuXCIgPyBpIDogaSArIDEpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhIHRyYW5zZm9ybSBtYXRyaXggYXMgYSBzdHJpbmcuIFRoZSBzdGFuZGFyZCByb3RhdGlvbiwgc2NhbGUgYW5kXG4gICAqIHRyYW5zbGF0aW9uIG1hdHJpY2VzIGFyZSByZXBsYWNlZCBieSB0aGVpciBzaG9ydGVyIGZvcm1zLCBhbmQgZm9yXG4gICAqIGlkZW50aXR5IG1hdHJpY2VzIGFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZCB0byBzYXZlIG1lbW9yeS5cbiAgICpcbiAgICogQHBhcmFtIG0ge0FycmF5fSAtIFRoZSB0cmFuc2Zvcm0gbWF0cml4IHRvIGZvcm1hdC5cbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbm5lci1kZWNsYXJhdGlvbnNcbiAgZnVuY3Rpb24gcG0obSkge1xuICAgIGlmIChtWzRdID09PSAwICYmIG1bNV0gPT09IDApIHtcbiAgICAgIGlmIChtWzFdID09PSAwICYmIG1bMl0gPT09IDApIHtcbiAgICAgICAgaWYgKG1bMF0gPT09IDEgJiYgbVszXSA9PT0gMSkge1xuICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgc2NhbGUoJHtwZihtWzBdKX0gJHtwZihtWzNdKX0pYDtcbiAgICAgIH1cbiAgICAgIGlmIChtWzBdID09PSBtWzNdICYmIG1bMV0gPT09IC1tWzJdKSB7XG4gICAgICAgIGNvbnN0IGEgPSAoTWF0aC5hY29zKG1bMF0pICogMTgwKSAvIE1hdGguUEk7XG4gICAgICAgIHJldHVybiBgcm90YXRlKCR7cGYoYSl9KWA7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChtWzBdID09PSAxICYmIG1bMV0gPT09IDAgJiYgbVsyXSA9PT0gMCAmJiBtWzNdID09PSAxKSB7XG4gICAgICAgIHJldHVybiBgdHJhbnNsYXRlKCR7cGYobVs0XSl9ICR7cGYobVs1XSl9KWA7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgICBgbWF0cml4KCR7cGYobVswXSl9ICR7cGYobVsxXSl9ICR7cGYobVsyXSl9ICR7cGYobVszXSl9ICR7cGYobVs0XSl9IGAgK1xuICAgICAgYCR7cGYobVs1XSl9KWBcbiAgICApO1xuICB9XG5cbiAgLy8gVGhlIGNvdW50cyBiZWxvdyBhcmUgcmVsZXZhbnQgZm9yIGFsbCBwYWdlcywgc28gdGhleSBoYXZlIHRvIGJlIGdsb2JhbFxuICAvLyBpbnN0ZWFkIG9mIGJlaW5nIG1lbWJlcnMgb2YgYFNWR0dyYXBoaWNzYCAod2hpY2ggaXMgcmVjcmVhdGVkIGZvclxuICAvLyBlYWNoIHBhZ2UpLlxuICBsZXQgY2xpcENvdW50ID0gMDtcbiAgbGV0IG1hc2tDb3VudCA9IDA7XG4gIGxldCBzaGFkaW5nQ291bnQgPSAwO1xuXG4gIFNWR0dyYXBoaWNzID0gY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKGNvbW1vbk9ianMsIG9ianMsIGZvcmNlRGF0YVNjaGVtYSA9IGZhbHNlKSB7XG4gICAgICB0aGlzLnN2Z0ZhY3RvcnkgPSBuZXcgRE9NU1ZHRmFjdG9yeSgpO1xuXG4gICAgICB0aGlzLmN1cnJlbnQgPSBuZXcgU1ZHRXh0cmFTdGF0ZSgpO1xuICAgICAgdGhpcy50cmFuc2Zvcm1NYXRyaXggPSBJREVOVElUWV9NQVRSSVg7IC8vIEdyYXBoaWNzIHN0YXRlIG1hdHJpeFxuICAgICAgdGhpcy50cmFuc2Zvcm1TdGFjayA9IFtdO1xuICAgICAgdGhpcy5leHRyYVN0YWNrID0gW107XG4gICAgICB0aGlzLmNvbW1vbk9ianMgPSBjb21tb25PYmpzO1xuICAgICAgdGhpcy5vYmpzID0gb2JqcztcbiAgICAgIHRoaXMucGVuZGluZ0NsaXAgPSBudWxsO1xuICAgICAgdGhpcy5wZW5kaW5nRU9GaWxsID0gZmFsc2U7XG5cbiAgICAgIHRoaXMuZW1iZWRGb250cyA9IGZhbHNlO1xuICAgICAgdGhpcy5lbWJlZGRlZEZvbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgIHRoaXMuY3NzU3R5bGUgPSBudWxsO1xuICAgICAgdGhpcy5mb3JjZURhdGFTY2hlbWEgPSAhIWZvcmNlRGF0YVNjaGVtYTtcblxuICAgICAgLy8gSW4gYHNyYy9zaGFyZWQvdXRpbC5qc2AgdGhlIG9wZXJhdG9yIG5hbWVzIGFyZSBtYXBwZWQgdG8gSURzLlxuICAgICAgLy8gVGhlIGxpc3QgYmVsb3cgcmVwcmVzZW50cyB0aGUgcmV2ZXJzZSBvZiB0aGF0LCBpLmUuLCBpdCBtYXBzIElEc1xuICAgICAgLy8gdG8gb3BlcmF0b3IgbmFtZXMuXG4gICAgICB0aGlzLl9vcGVyYXRvcklkTWFwcGluZyA9IFtdO1xuICAgICAgZm9yIChjb25zdCBvcCBpbiBPUFMpIHtcbiAgICAgICAgdGhpcy5fb3BlcmF0b3JJZE1hcHBpbmdbT1BTW29wXV0gPSBvcDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzYXZlKCkge1xuICAgICAgdGhpcy50cmFuc2Zvcm1TdGFjay5wdXNoKHRoaXMudHJhbnNmb3JtTWF0cml4KTtcbiAgICAgIGNvbnN0IG9sZCA9IHRoaXMuY3VycmVudDtcbiAgICAgIHRoaXMuZXh0cmFTdGFjay5wdXNoKG9sZCk7XG4gICAgICB0aGlzLmN1cnJlbnQgPSBvbGQuY2xvbmUoKTtcbiAgICB9XG5cbiAgICByZXN0b3JlKCkge1xuICAgICAgdGhpcy50cmFuc2Zvcm1NYXRyaXggPSB0aGlzLnRyYW5zZm9ybVN0YWNrLnBvcCgpO1xuICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5leHRyYVN0YWNrLnBvcCgpO1xuICAgICAgdGhpcy5wZW5kaW5nQ2xpcCA9IG51bGw7XG4gICAgICB0aGlzLnRncnAgPSBudWxsO1xuICAgIH1cblxuICAgIGdyb3VwKGl0ZW1zKSB7XG4gICAgICB0aGlzLnNhdmUoKTtcbiAgICAgIHRoaXMuZXhlY3V0ZU9wVHJlZShpdGVtcyk7XG4gICAgICB0aGlzLnJlc3RvcmUoKTtcbiAgICB9XG5cbiAgICBsb2FkRGVwZW5kZW5jaWVzKG9wZXJhdG9yTGlzdCkge1xuICAgICAgY29uc3QgZm5BcnJheSA9IG9wZXJhdG9yTGlzdC5mbkFycmF5O1xuICAgICAgY29uc3QgYXJnc0FycmF5ID0gb3BlcmF0b3JMaXN0LmFyZ3NBcnJheTtcblxuICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gZm5BcnJheS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgIGlmIChmbkFycmF5W2ldICE9PSBPUFMuZGVwZW5kZW5jeSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCBvYmogb2YgYXJnc0FycmF5W2ldKSB7XG4gICAgICAgICAgY29uc3Qgb2Jqc1Bvb2wgPSBvYmouc3RhcnRzV2l0aChcImdfXCIpID8gdGhpcy5jb21tb25PYmpzIDogdGhpcy5vYmpzO1xuICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIG9ianNQb29sLmdldChvYmosIHJlc29sdmUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMuY3VycmVudC5kZXBlbmRlbmNpZXMucHVzaChwcm9taXNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHRoaXMuY3VycmVudC5kZXBlbmRlbmNpZXMpO1xuICAgIH1cblxuICAgIHRyYW5zZm9ybShhLCBiLCBjLCBkLCBlLCBmKSB7XG4gICAgICBjb25zdCB0cmFuc2Zvcm1NYXRyaXggPSBbYSwgYiwgYywgZCwgZSwgZl07XG4gICAgICB0aGlzLnRyYW5zZm9ybU1hdHJpeCA9IFV0aWwudHJhbnNmb3JtKFxuICAgICAgICB0aGlzLnRyYW5zZm9ybU1hdHJpeCxcbiAgICAgICAgdHJhbnNmb3JtTWF0cml4XG4gICAgICApO1xuICAgICAgdGhpcy50Z3JwID0gbnVsbDtcbiAgICB9XG5cbiAgICBnZXRTVkcob3BlcmF0b3JMaXN0LCB2aWV3cG9ydCkge1xuICAgICAgdGhpcy52aWV3cG9ydCA9IHZpZXdwb3J0O1xuXG4gICAgICBjb25zdCBzdmdFbGVtZW50ID0gdGhpcy5faW5pdGlhbGl6ZSh2aWV3cG9ydCk7XG4gICAgICByZXR1cm4gdGhpcy5sb2FkRGVwZW5kZW5jaWVzKG9wZXJhdG9yTGlzdCkudGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtTWF0cml4ID0gSURFTlRJVFlfTUFUUklYO1xuICAgICAgICB0aGlzLmV4ZWN1dGVPcFRyZWUodGhpcy5jb252ZXJ0T3BMaXN0KG9wZXJhdG9yTGlzdCkpO1xuICAgICAgICByZXR1cm4gc3ZnRWxlbWVudDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnZlcnRPcExpc3Qob3BlcmF0b3JMaXN0KSB7XG4gICAgICBjb25zdCBvcGVyYXRvcklkTWFwcGluZyA9IHRoaXMuX29wZXJhdG9ySWRNYXBwaW5nO1xuICAgICAgY29uc3QgYXJnc0FycmF5ID0gb3BlcmF0b3JMaXN0LmFyZ3NBcnJheTtcbiAgICAgIGNvbnN0IGZuQXJyYXkgPSBvcGVyYXRvckxpc3QuZm5BcnJheTtcbiAgICAgIGNvbnN0IG9wTGlzdCA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gZm5BcnJheS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGZuSWQgPSBmbkFycmF5W2ldO1xuICAgICAgICBvcExpc3QucHVzaCh7XG4gICAgICAgICAgZm5JZCxcbiAgICAgICAgICBmbjogb3BlcmF0b3JJZE1hcHBpbmdbZm5JZF0sXG4gICAgICAgICAgYXJnczogYXJnc0FycmF5W2ldLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvcExpc3RUb1RyZWUob3BMaXN0KTtcbiAgICB9XG5cbiAgICBleGVjdXRlT3BUcmVlKG9wVHJlZSkge1xuICAgICAgZm9yIChjb25zdCBvcFRyZWVFbGVtZW50IG9mIG9wVHJlZSkge1xuICAgICAgICBjb25zdCBmbiA9IG9wVHJlZUVsZW1lbnQuZm47XG4gICAgICAgIGNvbnN0IGZuSWQgPSBvcFRyZWVFbGVtZW50LmZuSWQ7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSBvcFRyZWVFbGVtZW50LmFyZ3M7XG5cbiAgICAgICAgc3dpdGNoIChmbklkIHwgMCkge1xuICAgICAgICAgIGNhc2UgT1BTLmJlZ2luVGV4dDpcbiAgICAgICAgICAgIHRoaXMuYmVnaW5UZXh0KCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIE9QUy5kZXBlbmRlbmN5OlxuICAgICAgICAgICAgLy8gSGFuZGxlZCBpbiBgbG9hZERlcGVuZGVuY2llc2AsIHNvIG5vIHdhcm5pbmcgc2hvdWxkIGJlIHNob3duLlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBPUFMuc2V0TGVhZGluZzpcbiAgICAgICAgICAgIHRoaXMuc2V0TGVhZGluZyhhcmdzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLnNldExlYWRpbmdNb3ZlVGV4dDpcbiAgICAgICAgICAgIHRoaXMuc2V0TGVhZGluZ01vdmVUZXh0KGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBPUFMuc2V0Rm9udDpcbiAgICAgICAgICAgIHRoaXMuc2V0Rm9udChhcmdzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLnNob3dUZXh0OlxuICAgICAgICAgICAgdGhpcy5zaG93VGV4dChhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLnNob3dTcGFjZWRUZXh0OlxuICAgICAgICAgICAgdGhpcy5zaG93VGV4dChhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLmVuZFRleHQ6XG4gICAgICAgICAgICB0aGlzLmVuZFRleHQoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLm1vdmVUZXh0OlxuICAgICAgICAgICAgdGhpcy5tb3ZlVGV4dChhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLnNldENoYXJTcGFjaW5nOlxuICAgICAgICAgICAgdGhpcy5zZXRDaGFyU3BhY2luZyhhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLnNldFdvcmRTcGFjaW5nOlxuICAgICAgICAgICAgdGhpcy5zZXRXb3JkU3BhY2luZyhhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLnNldEhTY2FsZTpcbiAgICAgICAgICAgIHRoaXMuc2V0SFNjYWxlKGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBPUFMuc2V0VGV4dE1hdHJpeDpcbiAgICAgICAgICAgIHRoaXMuc2V0VGV4dE1hdHJpeChcbiAgICAgICAgICAgICAgYXJnc1swXSxcbiAgICAgICAgICAgICAgYXJnc1sxXSxcbiAgICAgICAgICAgICAgYXJnc1syXSxcbiAgICAgICAgICAgICAgYXJnc1szXSxcbiAgICAgICAgICAgICAgYXJnc1s0XSxcbiAgICAgICAgICAgICAgYXJnc1s1XVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLnNldFRleHRSaXNlOlxuICAgICAgICAgICAgdGhpcy5zZXRUZXh0UmlzZShhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLnNldFRleHRSZW5kZXJpbmdNb2RlOlxuICAgICAgICAgICAgdGhpcy5zZXRUZXh0UmVuZGVyaW5nTW9kZShhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLnNldExpbmVXaWR0aDpcbiAgICAgICAgICAgIHRoaXMuc2V0TGluZVdpZHRoKGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBPUFMuc2V0TGluZUpvaW46XG4gICAgICAgICAgICB0aGlzLnNldExpbmVKb2luKGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBPUFMuc2V0TGluZUNhcDpcbiAgICAgICAgICAgIHRoaXMuc2V0TGluZUNhcChhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLnNldE1pdGVyTGltaXQ6XG4gICAgICAgICAgICB0aGlzLnNldE1pdGVyTGltaXQoYXJnc1swXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIE9QUy5zZXRGaWxsUkdCQ29sb3I6XG4gICAgICAgICAgICB0aGlzLnNldEZpbGxSR0JDb2xvcihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLnNldFN0cm9rZVJHQkNvbG9yOlxuICAgICAgICAgICAgdGhpcy5zZXRTdHJva2VSR0JDb2xvcihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLnNldFN0cm9rZUNvbG9yTjpcbiAgICAgICAgICAgIHRoaXMuc2V0U3Ryb2tlQ29sb3JOKGFyZ3MpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBPUFMuc2V0RmlsbENvbG9yTjpcbiAgICAgICAgICAgIHRoaXMuc2V0RmlsbENvbG9yTihhcmdzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLnNoYWRpbmdGaWxsOlxuICAgICAgICAgICAgdGhpcy5zaGFkaW5nRmlsbChhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLnNldERhc2g6XG4gICAgICAgICAgICB0aGlzLnNldERhc2goYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIE9QUy5zZXRSZW5kZXJpbmdJbnRlbnQ6XG4gICAgICAgICAgICB0aGlzLnNldFJlbmRlcmluZ0ludGVudChhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLnNldEZsYXRuZXNzOlxuICAgICAgICAgICAgdGhpcy5zZXRGbGF0bmVzcyhhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLnNldEdTdGF0ZTpcbiAgICAgICAgICAgIHRoaXMuc2V0R1N0YXRlKGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBPUFMuZmlsbDpcbiAgICAgICAgICAgIHRoaXMuZmlsbCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBPUFMuZW9GaWxsOlxuICAgICAgICAgICAgdGhpcy5lb0ZpbGwoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLnN0cm9rZTpcbiAgICAgICAgICAgIHRoaXMuc3Ryb2tlKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIE9QUy5maWxsU3Ryb2tlOlxuICAgICAgICAgICAgdGhpcy5maWxsU3Ryb2tlKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIE9QUy5lb0ZpbGxTdHJva2U6XG4gICAgICAgICAgICB0aGlzLmVvRmlsbFN0cm9rZSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBPUFMuY2xpcDpcbiAgICAgICAgICAgIHRoaXMuY2xpcChcIm5vbnplcm9cIik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIE9QUy5lb0NsaXA6XG4gICAgICAgICAgICB0aGlzLmNsaXAoXCJldmVub2RkXCIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBPUFMucGFpbnRTb2xpZENvbG9ySW1hZ2VNYXNrOlxuICAgICAgICAgICAgdGhpcy5wYWludFNvbGlkQ29sb3JJbWFnZU1hc2soKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLnBhaW50SW1hZ2VYT2JqZWN0OlxuICAgICAgICAgICAgdGhpcy5wYWludEltYWdlWE9iamVjdChhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLnBhaW50SW5saW5lSW1hZ2VYT2JqZWN0OlxuICAgICAgICAgICAgdGhpcy5wYWludElubGluZUltYWdlWE9iamVjdChhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLnBhaW50SW1hZ2VNYXNrWE9iamVjdDpcbiAgICAgICAgICAgIHRoaXMucGFpbnRJbWFnZU1hc2tYT2JqZWN0KGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBPUFMucGFpbnRGb3JtWE9iamVjdEJlZ2luOlxuICAgICAgICAgICAgdGhpcy5wYWludEZvcm1YT2JqZWN0QmVnaW4oYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIE9QUy5wYWludEZvcm1YT2JqZWN0RW5kOlxuICAgICAgICAgICAgdGhpcy5wYWludEZvcm1YT2JqZWN0RW5kKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIE9QUy5jbG9zZVBhdGg6XG4gICAgICAgICAgICB0aGlzLmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBPUFMuY2xvc2VTdHJva2U6XG4gICAgICAgICAgICB0aGlzLmNsb3NlU3Ryb2tlKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIE9QUy5jbG9zZUZpbGxTdHJva2U6XG4gICAgICAgICAgICB0aGlzLmNsb3NlRmlsbFN0cm9rZSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBPUFMuY2xvc2VFT0ZpbGxTdHJva2U6XG4gICAgICAgICAgICB0aGlzLmNsb3NlRU9GaWxsU3Ryb2tlKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIE9QUy5uZXh0TGluZTpcbiAgICAgICAgICAgIHRoaXMubmV4dExpbmUoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLnRyYW5zZm9ybTpcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtKFxuICAgICAgICAgICAgICBhcmdzWzBdLFxuICAgICAgICAgICAgICBhcmdzWzFdLFxuICAgICAgICAgICAgICBhcmdzWzJdLFxuICAgICAgICAgICAgICBhcmdzWzNdLFxuICAgICAgICAgICAgICBhcmdzWzRdLFxuICAgICAgICAgICAgICBhcmdzWzVdXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBPUFMuY29uc3RydWN0UGF0aDpcbiAgICAgICAgICAgIHRoaXMuY29uc3RydWN0UGF0aChhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLmVuZFBhdGg6XG4gICAgICAgICAgICB0aGlzLmVuZFBhdGgoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgOTI6XG4gICAgICAgICAgICB0aGlzLmdyb3VwKG9wVHJlZUVsZW1lbnQuaXRlbXMpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHdhcm4oYFVuaW1wbGVtZW50ZWQgb3BlcmF0b3IgJHtmbn1gKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2V0V29yZFNwYWNpbmcod29yZFNwYWNpbmcpIHtcbiAgICAgIHRoaXMuY3VycmVudC53b3JkU3BhY2luZyA9IHdvcmRTcGFjaW5nO1xuICAgIH1cblxuICAgIHNldENoYXJTcGFjaW5nKGNoYXJTcGFjaW5nKSB7XG4gICAgICB0aGlzLmN1cnJlbnQuY2hhclNwYWNpbmcgPSBjaGFyU3BhY2luZztcbiAgICB9XG5cbiAgICBuZXh0TGluZSgpIHtcbiAgICAgIHRoaXMubW92ZVRleHQoMCwgdGhpcy5jdXJyZW50LmxlYWRpbmcpO1xuICAgIH1cblxuICAgIHNldFRleHRNYXRyaXgoYSwgYiwgYywgZCwgZSwgZikge1xuICAgICAgY29uc3QgY3VycmVudCA9IHRoaXMuY3VycmVudDtcbiAgICAgIGN1cnJlbnQudGV4dE1hdHJpeCA9IGN1cnJlbnQubGluZU1hdHJpeCA9IFthLCBiLCBjLCBkLCBlLCBmXTtcbiAgICAgIGN1cnJlbnQudGV4dE1hdHJpeFNjYWxlID0gTWF0aC5oeXBvdChhLCBiKTtcblxuICAgICAgY3VycmVudC54ID0gY3VycmVudC5saW5lWCA9IDA7XG4gICAgICBjdXJyZW50LnkgPSBjdXJyZW50LmxpbmVZID0gMDtcblxuICAgICAgY3VycmVudC54Y29vcmRzID0gW107XG4gICAgICBjdXJyZW50Lnljb29yZHMgPSBbXTtcbiAgICAgIGN1cnJlbnQudHNwYW4gPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudChcInN2Zzp0c3BhblwiKTtcbiAgICAgIGN1cnJlbnQudHNwYW4uc2V0QXR0cmlidXRlTlMobnVsbCwgXCJmb250LWZhbWlseVwiLCBjdXJyZW50LmZvbnRGYW1pbHkpO1xuICAgICAgY3VycmVudC50c3Bhbi5zZXRBdHRyaWJ1dGVOUyhcbiAgICAgICAgbnVsbCxcbiAgICAgICAgXCJmb250LXNpemVcIixcbiAgICAgICAgYCR7cGYoY3VycmVudC5mb250U2l6ZSl9cHhgXG4gICAgICApO1xuICAgICAgY3VycmVudC50c3Bhbi5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInlcIiwgcGYoLWN1cnJlbnQueSkpO1xuXG4gICAgICBjdXJyZW50LnR4dEVsZW1lbnQgPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudChcInN2Zzp0ZXh0XCIpO1xuICAgICAgY3VycmVudC50eHRFbGVtZW50LmFwcGVuZENoaWxkKGN1cnJlbnQudHNwYW4pO1xuICAgIH1cblxuICAgIGJlZ2luVGV4dCgpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmN1cnJlbnQ7XG4gICAgICBjdXJyZW50LnggPSBjdXJyZW50LmxpbmVYID0gMDtcbiAgICAgIGN1cnJlbnQueSA9IGN1cnJlbnQubGluZVkgPSAwO1xuICAgICAgY3VycmVudC50ZXh0TWF0cml4ID0gSURFTlRJVFlfTUFUUklYO1xuICAgICAgY3VycmVudC5saW5lTWF0cml4ID0gSURFTlRJVFlfTUFUUklYO1xuICAgICAgY3VycmVudC50ZXh0TWF0cml4U2NhbGUgPSAxO1xuICAgICAgY3VycmVudC50c3BhbiA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnOnRzcGFuXCIpO1xuICAgICAgY3VycmVudC50eHRFbGVtZW50ID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJzdmc6dGV4dFwiKTtcbiAgICAgIGN1cnJlbnQudHh0Z3JwID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJzdmc6Z1wiKTtcbiAgICAgIGN1cnJlbnQueGNvb3JkcyA9IFtdO1xuICAgICAgY3VycmVudC55Y29vcmRzID0gW107XG4gICAgfVxuXG4gICAgbW92ZVRleHQoeCwgeSkge1xuICAgICAgY29uc3QgY3VycmVudCA9IHRoaXMuY3VycmVudDtcbiAgICAgIGN1cnJlbnQueCA9IGN1cnJlbnQubGluZVggKz0geDtcbiAgICAgIGN1cnJlbnQueSA9IGN1cnJlbnQubGluZVkgKz0geTtcblxuICAgICAgY3VycmVudC54Y29vcmRzID0gW107XG4gICAgICBjdXJyZW50Lnljb29yZHMgPSBbXTtcbiAgICAgIGN1cnJlbnQudHNwYW4gPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudChcInN2Zzp0c3BhblwiKTtcbiAgICAgIGN1cnJlbnQudHNwYW4uc2V0QXR0cmlidXRlTlMobnVsbCwgXCJmb250LWZhbWlseVwiLCBjdXJyZW50LmZvbnRGYW1pbHkpO1xuICAgICAgY3VycmVudC50c3Bhbi5zZXRBdHRyaWJ1dGVOUyhcbiAgICAgICAgbnVsbCxcbiAgICAgICAgXCJmb250LXNpemVcIixcbiAgICAgICAgYCR7cGYoY3VycmVudC5mb250U2l6ZSl9cHhgXG4gICAgICApO1xuICAgICAgY3VycmVudC50c3Bhbi5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInlcIiwgcGYoLWN1cnJlbnQueSkpO1xuICAgIH1cblxuICAgIHNob3dUZXh0KGdseXBocykge1xuICAgICAgY29uc3QgY3VycmVudCA9IHRoaXMuY3VycmVudDtcbiAgICAgIGNvbnN0IGZvbnQgPSBjdXJyZW50LmZvbnQ7XG4gICAgICBjb25zdCBmb250U2l6ZSA9IGN1cnJlbnQuZm9udFNpemU7XG4gICAgICBpZiAoZm9udFNpemUgPT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmb250U2l6ZVNjYWxlID0gY3VycmVudC5mb250U2l6ZVNjYWxlO1xuICAgICAgY29uc3QgY2hhclNwYWNpbmcgPSBjdXJyZW50LmNoYXJTcGFjaW5nO1xuICAgICAgY29uc3Qgd29yZFNwYWNpbmcgPSBjdXJyZW50LndvcmRTcGFjaW5nO1xuICAgICAgY29uc3QgZm9udERpcmVjdGlvbiA9IGN1cnJlbnQuZm9udERpcmVjdGlvbjtcbiAgICAgIGNvbnN0IHRleHRIU2NhbGUgPSBjdXJyZW50LnRleHRIU2NhbGUgKiBmb250RGlyZWN0aW9uO1xuICAgICAgY29uc3QgdmVydGljYWwgPSBmb250LnZlcnRpY2FsO1xuICAgICAgY29uc3Qgc3BhY2luZ0RpciA9IHZlcnRpY2FsID8gMSA6IC0xO1xuICAgICAgY29uc3QgZGVmYXVsdFZNZXRyaWNzID0gZm9udC5kZWZhdWx0Vk1ldHJpY3M7XG4gICAgICBjb25zdCB3aWR0aEFkdmFuY2VTY2FsZSA9IGZvbnRTaXplICogY3VycmVudC5mb250TWF0cml4WzBdO1xuXG4gICAgICBsZXQgeCA9IDA7XG4gICAgICBmb3IgKGNvbnN0IGdseXBoIG9mIGdseXBocykge1xuICAgICAgICBpZiAoZ2x5cGggPT09IG51bGwpIHtcbiAgICAgICAgICAvLyBXb3JkIGJyZWFrXG4gICAgICAgICAgeCArPSBmb250RGlyZWN0aW9uICogd29yZFNwYWNpbmc7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGdseXBoID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgeCArPSAoc3BhY2luZ0RpciAqIGdseXBoICogZm9udFNpemUpIC8gMTAwMDtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNwYWNpbmcgPSAoZ2x5cGguaXNTcGFjZSA/IHdvcmRTcGFjaW5nIDogMCkgKyBjaGFyU3BhY2luZztcbiAgICAgICAgY29uc3QgY2hhcmFjdGVyID0gZ2x5cGguZm9udENoYXI7XG4gICAgICAgIGxldCBzY2FsZWRYLCBzY2FsZWRZO1xuICAgICAgICBsZXQgd2lkdGggPSBnbHlwaC53aWR0aDtcbiAgICAgICAgaWYgKHZlcnRpY2FsKSB7XG4gICAgICAgICAgbGV0IHZ4O1xuICAgICAgICAgIGNvbnN0IHZtZXRyaWMgPSBnbHlwaC52bWV0cmljIHx8IGRlZmF1bHRWTWV0cmljcztcbiAgICAgICAgICB2eCA9IGdseXBoLnZtZXRyaWMgPyB2bWV0cmljWzFdIDogd2lkdGggKiAwLjU7XG4gICAgICAgICAgdnggPSAtdnggKiB3aWR0aEFkdmFuY2VTY2FsZTtcbiAgICAgICAgICBjb25zdCB2eSA9IHZtZXRyaWNbMl0gKiB3aWR0aEFkdmFuY2VTY2FsZTtcblxuICAgICAgICAgIHdpZHRoID0gdm1ldHJpYyA/IC12bWV0cmljWzBdIDogd2lkdGg7XG4gICAgICAgICAgc2NhbGVkWCA9IHZ4IC8gZm9udFNpemVTY2FsZTtcbiAgICAgICAgICBzY2FsZWRZID0gKHggKyB2eSkgLyBmb250U2l6ZVNjYWxlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNjYWxlZFggPSB4IC8gZm9udFNpemVTY2FsZTtcbiAgICAgICAgICBzY2FsZWRZID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChnbHlwaC5pc0luRm9udCB8fCBmb250Lm1pc3NpbmdGaWxlKSB7XG4gICAgICAgICAgY3VycmVudC54Y29vcmRzLnB1c2goY3VycmVudC54ICsgc2NhbGVkWCk7XG4gICAgICAgICAgaWYgKHZlcnRpY2FsKSB7XG4gICAgICAgICAgICBjdXJyZW50Lnljb29yZHMucHVzaCgtY3VycmVudC55ICsgc2NhbGVkWSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGN1cnJlbnQudHNwYW4udGV4dENvbnRlbnQgKz0gY2hhcmFjdGVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFRPRE86IFRvIGFzc2lzdCB3aXRoIHRleHQgc2VsZWN0aW9uLCB3ZSBzaG91bGQgcmVwbGFjZSB0aGUgbWlzc2luZ1xuICAgICAgICAgIC8vIGNoYXJhY3RlciB3aXRoIGEgc3BhY2UgY2hhcmFjdGVyIGlmIGNoYXJXaWR0aCBpcyBub3QgemVyby5cbiAgICAgICAgICAvLyBCdXQgd2UgY2Fubm90IGp1c3QgZG8gXCJjaGFyYWN0ZXIgPSAnICdcIiwgYmVjYXVzZSB0aGUgJyAnIGNoYXJhY3RlclxuICAgICAgICAgIC8vIG1pZ2h0IGFjdHVhbGx5IG1hcCB0byBhIGRpZmZlcmVudCBnbHlwaC5cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjaGFyV2lkdGg7XG4gICAgICAgIGlmICh2ZXJ0aWNhbCkge1xuICAgICAgICAgIGNoYXJXaWR0aCA9IHdpZHRoICogd2lkdGhBZHZhbmNlU2NhbGUgLSBzcGFjaW5nICogZm9udERpcmVjdGlvbjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGFyV2lkdGggPSB3aWR0aCAqIHdpZHRoQWR2YW5jZVNjYWxlICsgc3BhY2luZyAqIGZvbnREaXJlY3Rpb247XG4gICAgICAgIH1cblxuICAgICAgICB4ICs9IGNoYXJXaWR0aDtcbiAgICAgIH1cbiAgICAgIGN1cnJlbnQudHNwYW4uc2V0QXR0cmlidXRlTlMoXG4gICAgICAgIG51bGwsXG4gICAgICAgIFwieFwiLFxuICAgICAgICBjdXJyZW50Lnhjb29yZHMubWFwKHBmKS5qb2luKFwiIFwiKVxuICAgICAgKTtcbiAgICAgIGlmICh2ZXJ0aWNhbCkge1xuICAgICAgICBjdXJyZW50LnRzcGFuLnNldEF0dHJpYnV0ZU5TKFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgXCJ5XCIsXG4gICAgICAgICAgY3VycmVudC55Y29vcmRzLm1hcChwZikuam9pbihcIiBcIilcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnQudHNwYW4uc2V0QXR0cmlidXRlTlMobnVsbCwgXCJ5XCIsIHBmKC1jdXJyZW50LnkpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHZlcnRpY2FsKSB7XG4gICAgICAgIGN1cnJlbnQueSAtPSB4O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudC54ICs9IHggKiB0ZXh0SFNjYWxlO1xuICAgICAgfVxuXG4gICAgICBjdXJyZW50LnRzcGFuLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiZm9udC1mYW1pbHlcIiwgY3VycmVudC5mb250RmFtaWx5KTtcbiAgICAgIGN1cnJlbnQudHNwYW4uc2V0QXR0cmlidXRlTlMoXG4gICAgICAgIG51bGwsXG4gICAgICAgIFwiZm9udC1zaXplXCIsXG4gICAgICAgIGAke3BmKGN1cnJlbnQuZm9udFNpemUpfXB4YFxuICAgICAgKTtcbiAgICAgIGlmIChjdXJyZW50LmZvbnRTdHlsZSAhPT0gU1ZHX0RFRkFVTFRTLmZvbnRTdHlsZSkge1xuICAgICAgICBjdXJyZW50LnRzcGFuLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiZm9udC1zdHlsZVwiLCBjdXJyZW50LmZvbnRTdHlsZSk7XG4gICAgICB9XG4gICAgICBpZiAoY3VycmVudC5mb250V2VpZ2h0ICE9PSBTVkdfREVGQVVMVFMuZm9udFdlaWdodCkge1xuICAgICAgICBjdXJyZW50LnRzcGFuLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiZm9udC13ZWlnaHRcIiwgY3VycmVudC5mb250V2VpZ2h0KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZmlsbFN0cm9rZU1vZGUgPVxuICAgICAgICBjdXJyZW50LnRleHRSZW5kZXJpbmdNb2RlICYgVGV4dFJlbmRlcmluZ01vZGUuRklMTF9TVFJPS0VfTUFTSztcbiAgICAgIGlmIChcbiAgICAgICAgZmlsbFN0cm9rZU1vZGUgPT09IFRleHRSZW5kZXJpbmdNb2RlLkZJTEwgfHxcbiAgICAgICAgZmlsbFN0cm9rZU1vZGUgPT09IFRleHRSZW5kZXJpbmdNb2RlLkZJTExfU1RST0tFXG4gICAgICApIHtcbiAgICAgICAgaWYgKGN1cnJlbnQuZmlsbENvbG9yICE9PSBTVkdfREVGQVVMVFMuZmlsbENvbG9yKSB7XG4gICAgICAgICAgY3VycmVudC50c3Bhbi5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImZpbGxcIiwgY3VycmVudC5maWxsQ29sb3IpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJyZW50LmZpbGxBbHBoYSA8IDEpIHtcbiAgICAgICAgICBjdXJyZW50LnRzcGFuLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiZmlsbC1vcGFjaXR5XCIsIGN1cnJlbnQuZmlsbEFscGhhKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjdXJyZW50LnRleHRSZW5kZXJpbmdNb2RlID09PSBUZXh0UmVuZGVyaW5nTW9kZS5BRERfVE9fUEFUSCkge1xuICAgICAgICAvLyBXb3JrYXJvdW5kIGZvciBGaXJlZm94OiBXZSBtdXN0IHNldCBmaWxsPVwidHJhbnNwYXJlbnRcIiBiZWNhdXNlXG4gICAgICAgIC8vIGZpbGw9XCJub25lXCIgd291bGQgZ2VuZXJhdGUgYW4gZW1wdHkgY2xpcHBpbmcgcGF0aC5cbiAgICAgICAgY3VycmVudC50c3Bhbi5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImZpbGxcIiwgXCJ0cmFuc3BhcmVudFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnQudHNwYW4uc2V0QXR0cmlidXRlTlMobnVsbCwgXCJmaWxsXCIsIFwibm9uZVwiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBmaWxsU3Ryb2tlTW9kZSA9PT0gVGV4dFJlbmRlcmluZ01vZGUuU1RST0tFIHx8XG4gICAgICAgIGZpbGxTdHJva2VNb2RlID09PSBUZXh0UmVuZGVyaW5nTW9kZS5GSUxMX1NUUk9LRVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IGxpbmVXaWR0aFNjYWxlID0gMSAvIChjdXJyZW50LnRleHRNYXRyaXhTY2FsZSB8fCAxKTtcbiAgICAgICAgdGhpcy5fc2V0U3Ryb2tlQXR0cmlidXRlcyhjdXJyZW50LnRzcGFuLCBsaW5lV2lkdGhTY2FsZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEluY2x1ZGUgdGhlIHRleHQgcmlzZSBpbiB0aGUgdGV4dCBtYXRyaXggc2luY2UgdGhlIGBwbWAgZnVuY3Rpb25cbiAgICAgIC8vIGNyZWF0ZXMgdGhlIFNWRyBlbGVtZW50J3MgYHRyYW5zbGF0ZWAgZW50cnkgKHdvcmsgb24gYSBjb3B5IHRvIGF2b2lkXG4gICAgICAvLyBhbHRlcmluZyB0aGUgb3JpZ2luYWwgdGV4dCBtYXRyaXgpLlxuICAgICAgbGV0IHRleHRNYXRyaXggPSBjdXJyZW50LnRleHRNYXRyaXg7XG4gICAgICBpZiAoY3VycmVudC50ZXh0UmlzZSAhPT0gMCkge1xuICAgICAgICB0ZXh0TWF0cml4ID0gdGV4dE1hdHJpeC5zbGljZSgpO1xuICAgICAgICB0ZXh0TWF0cml4WzVdICs9IGN1cnJlbnQudGV4dFJpc2U7XG4gICAgICB9XG5cbiAgICAgIGN1cnJlbnQudHh0RWxlbWVudC5zZXRBdHRyaWJ1dGVOUyhcbiAgICAgICAgbnVsbCxcbiAgICAgICAgXCJ0cmFuc2Zvcm1cIixcbiAgICAgICAgYCR7cG0odGV4dE1hdHJpeCl9IHNjYWxlKCR7cGYodGV4dEhTY2FsZSl9LCAtMSlgXG4gICAgICApO1xuICAgICAgY3VycmVudC50eHRFbGVtZW50LnNldEF0dHJpYnV0ZU5TKFhNTF9OUywgXCJ4bWw6c3BhY2VcIiwgXCJwcmVzZXJ2ZVwiKTtcbiAgICAgIGN1cnJlbnQudHh0RWxlbWVudC5hcHBlbmRDaGlsZChjdXJyZW50LnRzcGFuKTtcbiAgICAgIGN1cnJlbnQudHh0Z3JwLmFwcGVuZENoaWxkKGN1cnJlbnQudHh0RWxlbWVudCk7XG5cbiAgICAgIHRoaXMuX2Vuc3VyZVRyYW5zZm9ybUdyb3VwKCkuYXBwZW5kQ2hpbGQoY3VycmVudC50eHRFbGVtZW50KTtcbiAgICB9XG5cbiAgICBzZXRMZWFkaW5nTW92ZVRleHQoeCwgeSkge1xuICAgICAgdGhpcy5zZXRMZWFkaW5nKC15KTtcbiAgICAgIHRoaXMubW92ZVRleHQoeCwgeSk7XG4gICAgfVxuXG4gICAgYWRkRm9udFN0eWxlKGZvbnRPYmopIHtcbiAgICAgIGlmICghZm9udE9iai5kYXRhKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBcImFkZEZvbnRTdHlsZTogTm8gZm9udCBkYXRhIGF2YWlsYWJsZSwgXCIgK1xuICAgICAgICAgICAgJ2Vuc3VyZSB0aGF0IHRoZSBcImZvbnRFeHRyYVByb3BlcnRpZXNcIiBBUEkgcGFyYW1ldGVyIGlzIHNldC4nXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuY3NzU3R5bGUpIHtcbiAgICAgICAgdGhpcy5jc3NTdHlsZSA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnOnN0eWxlXCIpO1xuICAgICAgICB0aGlzLmNzc1N0eWxlLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwidHlwZVwiLCBcInRleHQvY3NzXCIpO1xuICAgICAgICB0aGlzLmRlZnMuYXBwZW5kQ2hpbGQodGhpcy5jc3NTdHlsZSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVybCA9IGNyZWF0ZU9iamVjdFVSTChcbiAgICAgICAgZm9udE9iai5kYXRhLFxuICAgICAgICBmb250T2JqLm1pbWV0eXBlLFxuICAgICAgICB0aGlzLmZvcmNlRGF0YVNjaGVtYVxuICAgICAgKTtcbiAgICAgIHRoaXMuY3NzU3R5bGUudGV4dENvbnRlbnQgKz1cbiAgICAgICAgYEBmb250LWZhY2UgeyBmb250LWZhbWlseTogXCIke2ZvbnRPYmoubG9hZGVkTmFtZX1cIjtgICtcbiAgICAgICAgYCBzcmM6IHVybCgke3VybH0pOyB9XFxuYDtcbiAgICB9XG5cbiAgICBzZXRGb250KGRldGFpbHMpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmN1cnJlbnQ7XG4gICAgICBjb25zdCBmb250T2JqID0gdGhpcy5jb21tb25PYmpzLmdldChkZXRhaWxzWzBdKTtcbiAgICAgIGxldCBzaXplID0gZGV0YWlsc1sxXTtcbiAgICAgIGN1cnJlbnQuZm9udCA9IGZvbnRPYmo7XG5cbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5lbWJlZEZvbnRzICYmXG4gICAgICAgICFmb250T2JqLm1pc3NpbmdGaWxlICYmXG4gICAgICAgICF0aGlzLmVtYmVkZGVkRm9udHNbZm9udE9iai5sb2FkZWROYW1lXVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuYWRkRm9udFN0eWxlKGZvbnRPYmopO1xuICAgICAgICB0aGlzLmVtYmVkZGVkRm9udHNbZm9udE9iai5sb2FkZWROYW1lXSA9IGZvbnRPYmo7XG4gICAgICB9XG4gICAgICBjdXJyZW50LmZvbnRNYXRyaXggPSBmb250T2JqLmZvbnRNYXRyaXggfHwgRk9OVF9JREVOVElUWV9NQVRSSVg7XG5cbiAgICAgIGxldCBib2xkID0gXCJub3JtYWxcIjtcbiAgICAgIGlmIChmb250T2JqLmJsYWNrKSB7XG4gICAgICAgIGJvbGQgPSBcIjkwMFwiO1xuICAgICAgfSBlbHNlIGlmIChmb250T2JqLmJvbGQpIHtcbiAgICAgICAgYm9sZCA9IFwiYm9sZFwiO1xuICAgICAgfVxuICAgICAgY29uc3QgaXRhbGljID0gZm9udE9iai5pdGFsaWMgPyBcIml0YWxpY1wiIDogXCJub3JtYWxcIjtcblxuICAgICAgaWYgKHNpemUgPCAwKSB7XG4gICAgICAgIHNpemUgPSAtc2l6ZTtcbiAgICAgICAgY3VycmVudC5mb250RGlyZWN0aW9uID0gLTE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50LmZvbnREaXJlY3Rpb24gPSAxO1xuICAgICAgfVxuICAgICAgY3VycmVudC5mb250U2l6ZSA9IHNpemU7XG4gICAgICBjdXJyZW50LmZvbnRGYW1pbHkgPSBmb250T2JqLmxvYWRlZE5hbWU7XG4gICAgICBjdXJyZW50LmZvbnRXZWlnaHQgPSBib2xkO1xuICAgICAgY3VycmVudC5mb250U3R5bGUgPSBpdGFsaWM7XG5cbiAgICAgIGN1cnJlbnQudHNwYW4gPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudChcInN2Zzp0c3BhblwiKTtcbiAgICAgIGN1cnJlbnQudHNwYW4uc2V0QXR0cmlidXRlTlMobnVsbCwgXCJ5XCIsIHBmKC1jdXJyZW50LnkpKTtcbiAgICAgIGN1cnJlbnQueGNvb3JkcyA9IFtdO1xuICAgICAgY3VycmVudC55Y29vcmRzID0gW107XG4gICAgfVxuXG4gICAgZW5kVGV4dCgpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmN1cnJlbnQ7XG4gICAgICBpZiAoXG4gICAgICAgIGN1cnJlbnQudGV4dFJlbmRlcmluZ01vZGUgJiBUZXh0UmVuZGVyaW5nTW9kZS5BRERfVE9fUEFUSF9GTEFHICYmXG4gICAgICAgIGN1cnJlbnQudHh0RWxlbWVudD8uaGFzQ2hpbGROb2RlcygpXG4gICAgICApIHtcbiAgICAgICAgLy8gSWYgbm8gZ2x5cGhzIGFyZSBzaG93biAoaS5lLiBubyBjaGlsZCBub2RlcyksIG5vIGNsaXBwaW5nIG9jY3Vycy5cbiAgICAgICAgY3VycmVudC5lbGVtZW50ID0gY3VycmVudC50eHRFbGVtZW50O1xuICAgICAgICB0aGlzLmNsaXAoXCJub256ZXJvXCIpO1xuICAgICAgICB0aGlzLmVuZFBhdGgoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQYXRoIHByb3BlcnRpZXNcbiAgICBzZXRMaW5lV2lkdGgod2lkdGgpIHtcbiAgICAgIGlmICh3aWR0aCA+IDApIHtcbiAgICAgICAgdGhpcy5jdXJyZW50LmxpbmVXaWR0aCA9IHdpZHRoO1xuICAgICAgfVxuICAgIH1cblxuICAgIHNldExpbmVDYXAoc3R5bGUpIHtcbiAgICAgIHRoaXMuY3VycmVudC5saW5lQ2FwID0gTElORV9DQVBfU1RZTEVTW3N0eWxlXTtcbiAgICB9XG5cbiAgICBzZXRMaW5lSm9pbihzdHlsZSkge1xuICAgICAgdGhpcy5jdXJyZW50LmxpbmVKb2luID0gTElORV9KT0lOX1NUWUxFU1tzdHlsZV07XG4gICAgfVxuXG4gICAgc2V0TWl0ZXJMaW1pdChsaW1pdCkge1xuICAgICAgdGhpcy5jdXJyZW50Lm1pdGVyTGltaXQgPSBsaW1pdDtcbiAgICB9XG5cbiAgICBzZXRTdHJva2VBbHBoYShzdHJva2VBbHBoYSkge1xuICAgICAgdGhpcy5jdXJyZW50LnN0cm9rZUFscGhhID0gc3Ryb2tlQWxwaGE7XG4gICAgfVxuXG4gICAgc2V0U3Ryb2tlUkdCQ29sb3IociwgZywgYikge1xuICAgICAgdGhpcy5jdXJyZW50LnN0cm9rZUNvbG9yID0gVXRpbC5tYWtlSGV4Q29sb3IociwgZywgYik7XG4gICAgfVxuXG4gICAgc2V0RmlsbEFscGhhKGZpbGxBbHBoYSkge1xuICAgICAgdGhpcy5jdXJyZW50LmZpbGxBbHBoYSA9IGZpbGxBbHBoYTtcbiAgICB9XG5cbiAgICBzZXRGaWxsUkdCQ29sb3IociwgZywgYikge1xuICAgICAgdGhpcy5jdXJyZW50LmZpbGxDb2xvciA9IFV0aWwubWFrZUhleENvbG9yKHIsIGcsIGIpO1xuICAgICAgdGhpcy5jdXJyZW50LnRzcGFuID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJzdmc6dHNwYW5cIik7XG4gICAgICB0aGlzLmN1cnJlbnQueGNvb3JkcyA9IFtdO1xuICAgICAgdGhpcy5jdXJyZW50Lnljb29yZHMgPSBbXTtcbiAgICB9XG5cbiAgICBzZXRTdHJva2VDb2xvck4oYXJncykge1xuICAgICAgdGhpcy5jdXJyZW50LnN0cm9rZUNvbG9yID0gdGhpcy5fbWFrZUNvbG9yTl9QYXR0ZXJuKGFyZ3MpO1xuICAgIH1cblxuICAgIHNldEZpbGxDb2xvck4oYXJncykge1xuICAgICAgdGhpcy5jdXJyZW50LmZpbGxDb2xvciA9IHRoaXMuX21ha2VDb2xvck5fUGF0dGVybihhcmdzKTtcbiAgICB9XG5cbiAgICBzaGFkaW5nRmlsbChhcmdzKSB7XG4gICAgICBjb25zdCB3aWR0aCA9IHRoaXMudmlld3BvcnQud2lkdGg7XG4gICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLnZpZXdwb3J0LmhlaWdodDtcbiAgICAgIGNvbnN0IGludiA9IFV0aWwuaW52ZXJzZVRyYW5zZm9ybSh0aGlzLnRyYW5zZm9ybU1hdHJpeCk7XG4gICAgICBjb25zdCBibCA9IFV0aWwuYXBwbHlUcmFuc2Zvcm0oWzAsIDBdLCBpbnYpO1xuICAgICAgY29uc3QgYnIgPSBVdGlsLmFwcGx5VHJhbnNmb3JtKFswLCBoZWlnaHRdLCBpbnYpO1xuICAgICAgY29uc3QgdWwgPSBVdGlsLmFwcGx5VHJhbnNmb3JtKFt3aWR0aCwgMF0sIGludik7XG4gICAgICBjb25zdCB1ciA9IFV0aWwuYXBwbHlUcmFuc2Zvcm0oW3dpZHRoLCBoZWlnaHRdLCBpbnYpO1xuICAgICAgY29uc3QgeDAgPSBNYXRoLm1pbihibFswXSwgYnJbMF0sIHVsWzBdLCB1clswXSk7XG4gICAgICBjb25zdCB5MCA9IE1hdGgubWluKGJsWzFdLCBiclsxXSwgdWxbMV0sIHVyWzFdKTtcbiAgICAgIGNvbnN0IHgxID0gTWF0aC5tYXgoYmxbMF0sIGJyWzBdLCB1bFswXSwgdXJbMF0pO1xuICAgICAgY29uc3QgeTEgPSBNYXRoLm1heChibFsxXSwgYnJbMV0sIHVsWzFdLCB1clsxXSk7XG5cbiAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudChcInN2ZzpyZWN0XCIpO1xuICAgICAgcmVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInhcIiwgeDApO1xuICAgICAgcmVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInlcIiwgeTApO1xuICAgICAgcmVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcIndpZHRoXCIsIHgxIC0geDApO1xuICAgICAgcmVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImhlaWdodFwiLCB5MSAtIHkwKTtcbiAgICAgIHJlY3Quc2V0QXR0cmlidXRlTlMobnVsbCwgXCJmaWxsXCIsIHRoaXMuX21ha2VTaGFkaW5nUGF0dGVybihhcmdzKSk7XG4gICAgICBpZiAodGhpcy5jdXJyZW50LmZpbGxBbHBoYSA8IDEpIHtcbiAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImZpbGwtb3BhY2l0eVwiLCB0aGlzLmN1cnJlbnQuZmlsbEFscGhhKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2Vuc3VyZVRyYW5zZm9ybUdyb3VwKCkuYXBwZW5kQ2hpbGQocmVjdCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfbWFrZUNvbG9yTl9QYXR0ZXJuKGFyZ3MpIHtcbiAgICAgIGlmIChhcmdzWzBdID09PSBcIlRpbGluZ1BhdHRlcm5cIikge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWFrZVRpbGluZ1BhdHRlcm4oYXJncyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fbWFrZVNoYWRpbmdQYXR0ZXJuKGFyZ3MpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX21ha2VUaWxpbmdQYXR0ZXJuKGFyZ3MpIHtcbiAgICAgIGNvbnN0IGNvbG9yID0gYXJnc1sxXTtcbiAgICAgIGNvbnN0IG9wZXJhdG9yTGlzdCA9IGFyZ3NbMl07XG4gICAgICBjb25zdCBtYXRyaXggPSBhcmdzWzNdIHx8IElERU5USVRZX01BVFJJWDtcbiAgICAgIGNvbnN0IFt4MCwgeTAsIHgxLCB5MV0gPSBhcmdzWzRdO1xuICAgICAgY29uc3QgeHN0ZXAgPSBhcmdzWzVdO1xuICAgICAgY29uc3QgeXN0ZXAgPSBhcmdzWzZdO1xuICAgICAgY29uc3QgcGFpbnRUeXBlID0gYXJnc1s3XTtcblxuICAgICAgY29uc3QgdGlsaW5nSWQgPSBgc2hhZGluZyR7c2hhZGluZ0NvdW50Kyt9YDtcbiAgICAgIGNvbnN0IFt0eDAsIHR5MCwgdHgxLCB0eTFdID0gVXRpbC5ub3JtYWxpemVSZWN0KFtcbiAgICAgICAgLi4uVXRpbC5hcHBseVRyYW5zZm9ybShbeDAsIHkwXSwgbWF0cml4KSxcbiAgICAgICAgLi4uVXRpbC5hcHBseVRyYW5zZm9ybShbeDEsIHkxXSwgbWF0cml4KSxcbiAgICAgIF0pO1xuICAgICAgY29uc3QgW3hzY2FsZSwgeXNjYWxlXSA9IFV0aWwuc2luZ3VsYXJWYWx1ZURlY29tcG9zZTJkU2NhbGUobWF0cml4KTtcbiAgICAgIGNvbnN0IHR4c3RlcCA9IHhzdGVwICogeHNjYWxlO1xuICAgICAgY29uc3QgdHlzdGVwID0geXN0ZXAgKiB5c2NhbGU7XG5cbiAgICAgIGNvbnN0IHRpbGluZyA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnOnBhdHRlcm5cIik7XG4gICAgICB0aWxpbmcuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJpZFwiLCB0aWxpbmdJZCk7XG4gICAgICB0aWxpbmcuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJwYXR0ZXJuVW5pdHNcIiwgXCJ1c2VyU3BhY2VPblVzZVwiKTtcbiAgICAgIHRpbGluZy5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcIndpZHRoXCIsIHR4c3RlcCk7XG4gICAgICB0aWxpbmcuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJoZWlnaHRcIiwgdHlzdGVwKTtcbiAgICAgIHRpbGluZy5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInhcIiwgYCR7dHgwfWApO1xuICAgICAgdGlsaW5nLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwieVwiLCBgJHt0eTB9YCk7XG5cbiAgICAgIC8vIFNhdmUgY3VycmVudCBzdGF0ZS5cbiAgICAgIGNvbnN0IHN2ZyA9IHRoaXMuc3ZnO1xuICAgICAgY29uc3QgdHJhbnNmb3JtTWF0cml4ID0gdGhpcy50cmFuc2Zvcm1NYXRyaXg7XG4gICAgICBjb25zdCBmaWxsQ29sb3IgPSB0aGlzLmN1cnJlbnQuZmlsbENvbG9yO1xuICAgICAgY29uc3Qgc3Ryb2tlQ29sb3IgPSB0aGlzLmN1cnJlbnQuc3Ryb2tlQ29sb3I7XG5cbiAgICAgIGNvbnN0IGJib3ggPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlKHR4MSAtIHR4MCwgdHkxIC0gdHkwKTtcbiAgICAgIHRoaXMuc3ZnID0gYmJveDtcbiAgICAgIHRoaXMudHJhbnNmb3JtTWF0cml4ID0gbWF0cml4O1xuICAgICAgaWYgKHBhaW50VHlwZSA9PT0gMikge1xuICAgICAgICBjb25zdCBjc3NDb2xvciA9IFV0aWwubWFrZUhleENvbG9yKC4uLmNvbG9yKTtcbiAgICAgICAgdGhpcy5jdXJyZW50LmZpbGxDb2xvciA9IGNzc0NvbG9yO1xuICAgICAgICB0aGlzLmN1cnJlbnQuc3Ryb2tlQ29sb3IgPSBjc3NDb2xvcjtcbiAgICAgIH1cbiAgICAgIHRoaXMuZXhlY3V0ZU9wVHJlZSh0aGlzLmNvbnZlcnRPcExpc3Qob3BlcmF0b3JMaXN0KSk7XG5cbiAgICAgIC8vIFJlc3RvcmUgc2F2ZWQgc3RhdGUuXG4gICAgICB0aGlzLnN2ZyA9IHN2ZztcbiAgICAgIHRoaXMudHJhbnNmb3JtTWF0cml4ID0gdHJhbnNmb3JtTWF0cml4O1xuICAgICAgdGhpcy5jdXJyZW50LmZpbGxDb2xvciA9IGZpbGxDb2xvcjtcbiAgICAgIHRoaXMuY3VycmVudC5zdHJva2VDb2xvciA9IHN0cm9rZUNvbG9yO1xuXG4gICAgICB0aWxpbmcuYXBwZW5kQ2hpbGQoYmJveC5jaGlsZE5vZGVzWzBdKTtcbiAgICAgIHRoaXMuZGVmcy5hcHBlbmRDaGlsZCh0aWxpbmcpO1xuICAgICAgcmV0dXJuIGB1cmwoIyR7dGlsaW5nSWR9KWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfbWFrZVNoYWRpbmdQYXR0ZXJuKGFyZ3MpIHtcbiAgICAgIGlmICh0eXBlb2YgYXJncyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBhcmdzID0gdGhpcy5vYmpzLmdldChhcmdzKTtcbiAgICAgIH1cbiAgICAgIHN3aXRjaCAoYXJnc1swXSkge1xuICAgICAgICBjYXNlIFwiUmFkaWFsQXhpYWxcIjpcbiAgICAgICAgICBjb25zdCBzaGFkaW5nSWQgPSBgc2hhZGluZyR7c2hhZGluZ0NvdW50Kyt9YDtcbiAgICAgICAgICBjb25zdCBjb2xvclN0b3BzID0gYXJnc1szXTtcbiAgICAgICAgICBsZXQgZ3JhZGllbnQ7XG5cbiAgICAgICAgICBzd2l0Y2ggKGFyZ3NbMV0pIHtcbiAgICAgICAgICAgIGNhc2UgXCJheGlhbFwiOlxuICAgICAgICAgICAgICBjb25zdCBwb2ludDAgPSBhcmdzWzRdO1xuICAgICAgICAgICAgICBjb25zdCBwb2ludDEgPSBhcmdzWzVdO1xuICAgICAgICAgICAgICBncmFkaWVudCA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnOmxpbmVhckdyYWRpZW50XCIpO1xuICAgICAgICAgICAgICBncmFkaWVudC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImlkXCIsIHNoYWRpbmdJZCk7XG4gICAgICAgICAgICAgIGdyYWRpZW50LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiZ3JhZGllbnRVbml0c1wiLCBcInVzZXJTcGFjZU9uVXNlXCIpO1xuICAgICAgICAgICAgICBncmFkaWVudC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcIngxXCIsIHBvaW50MFswXSk7XG4gICAgICAgICAgICAgIGdyYWRpZW50LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwieTFcIiwgcG9pbnQwWzFdKTtcbiAgICAgICAgICAgICAgZ3JhZGllbnQuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJ4MlwiLCBwb2ludDFbMF0pO1xuICAgICAgICAgICAgICBncmFkaWVudC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInkyXCIsIHBvaW50MVsxXSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInJhZGlhbFwiOlxuICAgICAgICAgICAgICBjb25zdCBmb2NhbFBvaW50ID0gYXJnc1s0XTtcbiAgICAgICAgICAgICAgY29uc3QgY2lyY2xlUG9pbnQgPSBhcmdzWzVdO1xuICAgICAgICAgICAgICBjb25zdCBmb2NhbFJhZGl1cyA9IGFyZ3NbNl07XG4gICAgICAgICAgICAgIGNvbnN0IGNpcmNsZVJhZGl1cyA9IGFyZ3NbN107XG4gICAgICAgICAgICAgIGdyYWRpZW50ID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJzdmc6cmFkaWFsR3JhZGllbnRcIik7XG4gICAgICAgICAgICAgIGdyYWRpZW50LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiaWRcIiwgc2hhZGluZ0lkKTtcbiAgICAgICAgICAgICAgZ3JhZGllbnQuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJncmFkaWVudFVuaXRzXCIsIFwidXNlclNwYWNlT25Vc2VcIik7XG4gICAgICAgICAgICAgIGdyYWRpZW50LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiY3hcIiwgY2lyY2xlUG9pbnRbMF0pO1xuICAgICAgICAgICAgICBncmFkaWVudC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImN5XCIsIGNpcmNsZVBvaW50WzFdKTtcbiAgICAgICAgICAgICAgZ3JhZGllbnQuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJyXCIsIGNpcmNsZVJhZGl1cyk7XG4gICAgICAgICAgICAgIGdyYWRpZW50LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiZnhcIiwgZm9jYWxQb2ludFswXSk7XG4gICAgICAgICAgICAgIGdyYWRpZW50LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiZnlcIiwgZm9jYWxQb2ludFsxXSk7XG4gICAgICAgICAgICAgIGdyYWRpZW50LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiZnJcIiwgZm9jYWxSYWRpdXMpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBSYWRpYWxBeGlhbCB0eXBlOiAke2FyZ3NbMV19YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoY29uc3QgY29sb3JTdG9wIG9mIGNvbG9yU3RvcHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0b3AgPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudChcInN2ZzpzdG9wXCIpO1xuICAgICAgICAgICAgc3RvcC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcIm9mZnNldFwiLCBjb2xvclN0b3BbMF0pO1xuICAgICAgICAgICAgc3RvcC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInN0b3AtY29sb3JcIiwgY29sb3JTdG9wWzFdKTtcbiAgICAgICAgICAgIGdyYWRpZW50LmFwcGVuZENoaWxkKHN0b3ApO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmRlZnMuYXBwZW5kQ2hpbGQoZ3JhZGllbnQpO1xuICAgICAgICAgIHJldHVybiBgdXJsKCMke3NoYWRpbmdJZH0pYDtcbiAgICAgICAgY2FzZSBcIk1lc2hcIjpcbiAgICAgICAgICB3YXJuKFwiVW5pbXBsZW1lbnRlZCBwYXR0ZXJuIE1lc2hcIik7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGNhc2UgXCJEdW1teVwiOlxuICAgICAgICAgIHJldHVybiBcImhvdHBpbmtcIjtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gSVIgdHlwZTogJHthcmdzWzBdfWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHNldERhc2goZGFzaEFycmF5LCBkYXNoUGhhc2UpIHtcbiAgICAgIHRoaXMuY3VycmVudC5kYXNoQXJyYXkgPSBkYXNoQXJyYXk7XG4gICAgICB0aGlzLmN1cnJlbnQuZGFzaFBoYXNlID0gZGFzaFBoYXNlO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdFBhdGgob3BzLCBhcmdzKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50O1xuICAgICAgbGV0IHggPSBjdXJyZW50LngsXG4gICAgICAgIHkgPSBjdXJyZW50Lnk7XG4gICAgICBsZXQgZCA9IFtdO1xuICAgICAgbGV0IGogPSAwO1xuXG4gICAgICBmb3IgKGNvbnN0IG9wIG9mIG9wcykge1xuICAgICAgICBzd2l0Y2ggKG9wIHwgMCkge1xuICAgICAgICAgIGNhc2UgT1BTLnJlY3RhbmdsZTpcbiAgICAgICAgICAgIHggPSBhcmdzW2orK107XG4gICAgICAgICAgICB5ID0gYXJnc1tqKytdO1xuICAgICAgICAgICAgY29uc3Qgd2lkdGggPSBhcmdzW2orK107XG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBhcmdzW2orK107XG4gICAgICAgICAgICBjb25zdCB4dyA9IHggKyB3aWR0aDtcbiAgICAgICAgICAgIGNvbnN0IHloID0geSArIGhlaWdodDtcbiAgICAgICAgICAgIGQucHVzaChcbiAgICAgICAgICAgICAgXCJNXCIsXG4gICAgICAgICAgICAgIHBmKHgpLFxuICAgICAgICAgICAgICBwZih5KSxcbiAgICAgICAgICAgICAgXCJMXCIsXG4gICAgICAgICAgICAgIHBmKHh3KSxcbiAgICAgICAgICAgICAgcGYoeSksXG4gICAgICAgICAgICAgIFwiTFwiLFxuICAgICAgICAgICAgICBwZih4dyksXG4gICAgICAgICAgICAgIHBmKHloKSxcbiAgICAgICAgICAgICAgXCJMXCIsXG4gICAgICAgICAgICAgIHBmKHgpLFxuICAgICAgICAgICAgICBwZih5aCksXG4gICAgICAgICAgICAgIFwiWlwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBPUFMubW92ZVRvOlxuICAgICAgICAgICAgeCA9IGFyZ3NbaisrXTtcbiAgICAgICAgICAgIHkgPSBhcmdzW2orK107XG4gICAgICAgICAgICBkLnB1c2goXCJNXCIsIHBmKHgpLCBwZih5KSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIE9QUy5saW5lVG86XG4gICAgICAgICAgICB4ID0gYXJnc1tqKytdO1xuICAgICAgICAgICAgeSA9IGFyZ3NbaisrXTtcbiAgICAgICAgICAgIGQucHVzaChcIkxcIiwgcGYoeCksIHBmKHkpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLmN1cnZlVG86XG4gICAgICAgICAgICB4ID0gYXJnc1tqICsgNF07XG4gICAgICAgICAgICB5ID0gYXJnc1tqICsgNV07XG4gICAgICAgICAgICBkLnB1c2goXG4gICAgICAgICAgICAgIFwiQ1wiLFxuICAgICAgICAgICAgICBwZihhcmdzW2pdKSxcbiAgICAgICAgICAgICAgcGYoYXJnc1tqICsgMV0pLFxuICAgICAgICAgICAgICBwZihhcmdzW2ogKyAyXSksXG4gICAgICAgICAgICAgIHBmKGFyZ3NbaiArIDNdKSxcbiAgICAgICAgICAgICAgcGYoeCksXG4gICAgICAgICAgICAgIHBmKHkpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaiArPSA2O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBPUFMuY3VydmVUbzI6XG4gICAgICAgICAgICBkLnB1c2goXG4gICAgICAgICAgICAgIFwiQ1wiLFxuICAgICAgICAgICAgICBwZih4KSxcbiAgICAgICAgICAgICAgcGYoeSksXG4gICAgICAgICAgICAgIHBmKGFyZ3Nbal0pLFxuICAgICAgICAgICAgICBwZihhcmdzW2ogKyAxXSksXG4gICAgICAgICAgICAgIHBmKGFyZ3NbaiArIDJdKSxcbiAgICAgICAgICAgICAgcGYoYXJnc1tqICsgM10pXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgeCA9IGFyZ3NbaiArIDJdO1xuICAgICAgICAgICAgeSA9IGFyZ3NbaiArIDNdO1xuICAgICAgICAgICAgaiArPSA0O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBPUFMuY3VydmVUbzM6XG4gICAgICAgICAgICB4ID0gYXJnc1tqICsgMl07XG4gICAgICAgICAgICB5ID0gYXJnc1tqICsgM107XG4gICAgICAgICAgICBkLnB1c2goXG4gICAgICAgICAgICAgIFwiQ1wiLFxuICAgICAgICAgICAgICBwZihhcmdzW2pdKSxcbiAgICAgICAgICAgICAgcGYoYXJnc1tqICsgMV0pLFxuICAgICAgICAgICAgICBwZih4KSxcbiAgICAgICAgICAgICAgcGYoeSksXG4gICAgICAgICAgICAgIHBmKHgpLFxuICAgICAgICAgICAgICBwZih5KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGogKz0gNDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgT1BTLmNsb3NlUGF0aDpcbiAgICAgICAgICAgIGQucHVzaChcIlpcIik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBkID0gZC5qb2luKFwiIFwiKTtcblxuICAgICAgaWYgKFxuICAgICAgICBjdXJyZW50LnBhdGggJiZcbiAgICAgICAgb3BzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgb3BzWzBdICE9PSBPUFMucmVjdGFuZ2xlICYmXG4gICAgICAgIG9wc1swXSAhPT0gT1BTLm1vdmVUb1xuICAgICAgKSB7XG4gICAgICAgIC8vIElmIGEgcGF0aCBkb2VzIG5vdCBzdGFydCB3aXRoIGFuIE9QUy5yZWN0YW5nbGUgb3IgT1BTLm1vdmVUbywgaXQgaGFzXG4gICAgICAgIC8vIHByb2JhYmx5IGJlZW4gZGl2aWRlZCBpbnRvIHR3byBPUFMuY29uc3RydWN0UGF0aCBvcGVyYXRvcnMgYnlcbiAgICAgICAgLy8gT3BlcmF0b3JMaXN0LiBBcHBlbmQgdGhlIGNvbW1hbmRzIHRvIHRoZSBwcmV2aW91cyBwYXRoIGVsZW1lbnQuXG4gICAgICAgIGQgPSBjdXJyZW50LnBhdGguZ2V0QXR0cmlidXRlTlMobnVsbCwgXCJkXCIpICsgZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnQucGF0aCA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnOnBhdGhcIik7XG4gICAgICAgIHRoaXMuX2Vuc3VyZVRyYW5zZm9ybUdyb3VwKCkuYXBwZW5kQ2hpbGQoY3VycmVudC5wYXRoKTtcbiAgICAgIH1cblxuICAgICAgY3VycmVudC5wYXRoLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiZFwiLCBkKTtcbiAgICAgIGN1cnJlbnQucGF0aC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImZpbGxcIiwgXCJub25lXCIpO1xuXG4gICAgICAvLyBTYXZpbmcgYSByZWZlcmVuY2UgaW4gY3VycmVudC5lbGVtZW50IHNvIHRoYXQgaXQgY2FuIGJlIGFkZHJlc3NlZFxuICAgICAgLy8gaW4gJ2ZpbGwnIGFuZCAnc3Ryb2tlJ1xuICAgICAgY3VycmVudC5lbGVtZW50ID0gY3VycmVudC5wYXRoO1xuICAgICAgY3VycmVudC5zZXRDdXJyZW50UG9pbnQoeCwgeSk7XG4gICAgfVxuXG4gICAgZW5kUGF0aCgpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmN1cnJlbnQ7XG5cbiAgICAgIC8vIFBhaW50aW5nIG9wZXJhdG9ycyBlbmQgYSBwYXRoLlxuICAgICAgY3VycmVudC5wYXRoID0gbnVsbDtcblxuICAgICAgaWYgKCF0aGlzLnBlbmRpbmdDbGlwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICghY3VycmVudC5lbGVtZW50KSB7XG4gICAgICAgIHRoaXMucGVuZGluZ0NsaXAgPSBudWxsO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCB0aGUgY3VycmVudCBwYXRoIHRvIGEgY2xpcHBpbmcgcGF0aC5cbiAgICAgIGNvbnN0IGNsaXBJZCA9IGBjbGlwcGF0aCR7Y2xpcENvdW50Kyt9YDtcbiAgICAgIGNvbnN0IGNsaXBQYXRoID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJzdmc6Y2xpcFBhdGhcIik7XG4gICAgICBjbGlwUGF0aC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImlkXCIsIGNsaXBJZCk7XG4gICAgICBjbGlwUGF0aC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInRyYW5zZm9ybVwiLCBwbSh0aGlzLnRyYW5zZm9ybU1hdHJpeCkpO1xuXG4gICAgICAvLyBBIGRlZXAgY2xvbmUgaXMgbmVlZGVkIHdoZW4gdGV4dCBpcyB1c2VkIGFzIGEgY2xpcHBpbmcgcGF0aC5cbiAgICAgIGNvbnN0IGNsaXBFbGVtZW50ID0gY3VycmVudC5lbGVtZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgICAgIGlmICh0aGlzLnBlbmRpbmdDbGlwID09PSBcImV2ZW5vZGRcIikge1xuICAgICAgICBjbGlwRWxlbWVudC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImNsaXAtcnVsZVwiLCBcImV2ZW5vZGRcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbGlwRWxlbWVudC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImNsaXAtcnVsZVwiLCBcIm5vbnplcm9cIik7XG4gICAgICB9XG4gICAgICB0aGlzLnBlbmRpbmdDbGlwID0gbnVsbDtcbiAgICAgIGNsaXBQYXRoLmFwcGVuZENoaWxkKGNsaXBFbGVtZW50KTtcbiAgICAgIHRoaXMuZGVmcy5hcHBlbmRDaGlsZChjbGlwUGF0aCk7XG5cbiAgICAgIGlmIChjdXJyZW50LmFjdGl2ZUNsaXBVcmwpIHtcbiAgICAgICAgLy8gVGhlIHByZXZpb3VzIGNsaXBwaW5nIGdyb3VwIGNvbnRlbnQgY2FuIGdvIG91dCBvZiBvcmRlciAtLSByZXNldHRpbmdcbiAgICAgICAgLy8gY2FjaGVkIGNsaXBHcm91cHMuXG4gICAgICAgIGN1cnJlbnQuY2xpcEdyb3VwID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBwcmV2IG9mIHRoaXMuZXh0cmFTdGFjaykge1xuICAgICAgICAgIHByZXYuY2xpcEdyb3VwID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvLyBJbnRlcnNlY3Qgd2l0aCB0aGUgcHJldmlvdXMgY2xpcHBpbmcgcGF0aC5cbiAgICAgICAgY2xpcFBhdGguc2V0QXR0cmlidXRlTlMobnVsbCwgXCJjbGlwLXBhdGhcIiwgY3VycmVudC5hY3RpdmVDbGlwVXJsKTtcbiAgICAgIH1cbiAgICAgIGN1cnJlbnQuYWN0aXZlQ2xpcFVybCA9IGB1cmwoIyR7Y2xpcElkfSlgO1xuXG4gICAgICB0aGlzLnRncnAgPSBudWxsO1xuICAgIH1cblxuICAgIGNsaXAodHlwZSkge1xuICAgICAgdGhpcy5wZW5kaW5nQ2xpcCA9IHR5cGU7XG4gICAgfVxuXG4gICAgY2xvc2VQYXRoKCkge1xuICAgICAgY29uc3QgY3VycmVudCA9IHRoaXMuY3VycmVudDtcbiAgICAgIGlmIChjdXJyZW50LnBhdGgpIHtcbiAgICAgICAgY29uc3QgZCA9IGAke2N1cnJlbnQucGF0aC5nZXRBdHRyaWJ1dGVOUyhudWxsLCBcImRcIil9WmA7XG4gICAgICAgIGN1cnJlbnQucGF0aC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImRcIiwgZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2V0TGVhZGluZyhsZWFkaW5nKSB7XG4gICAgICB0aGlzLmN1cnJlbnQubGVhZGluZyA9IC1sZWFkaW5nO1xuICAgIH1cblxuICAgIHNldFRleHRSaXNlKHRleHRSaXNlKSB7XG4gICAgICB0aGlzLmN1cnJlbnQudGV4dFJpc2UgPSB0ZXh0UmlzZTtcbiAgICB9XG5cbiAgICBzZXRUZXh0UmVuZGVyaW5nTW9kZSh0ZXh0UmVuZGVyaW5nTW9kZSkge1xuICAgICAgdGhpcy5jdXJyZW50LnRleHRSZW5kZXJpbmdNb2RlID0gdGV4dFJlbmRlcmluZ01vZGU7XG4gICAgfVxuXG4gICAgc2V0SFNjYWxlKHNjYWxlKSB7XG4gICAgICB0aGlzLmN1cnJlbnQudGV4dEhTY2FsZSA9IHNjYWxlIC8gMTAwO1xuICAgIH1cblxuICAgIHNldFJlbmRlcmluZ0ludGVudChpbnRlbnQpIHtcbiAgICAgIC8vIFRoaXMgb3BlcmF0aW9uIGlzIGlnbm9yZWQgc2luY2Ugd2UgaGF2ZW4ndCBmb3VuZCBhIHVzZSBjYXNlIGZvciBpdCB5ZXQuXG4gICAgfVxuXG4gICAgc2V0RmxhdG5lc3MoZmxhdG5lc3MpIHtcbiAgICAgIC8vIFRoaXMgb3BlcmF0aW9uIGlzIGlnbm9yZWQgc2luY2Ugd2UgaGF2ZW4ndCBmb3VuZCBhIHVzZSBjYXNlIGZvciBpdCB5ZXQuXG4gICAgfVxuXG4gICAgc2V0R1N0YXRlKHN0YXRlcykge1xuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2Ygc3RhdGVzKSB7XG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgICAgY2FzZSBcIkxXXCI6XG4gICAgICAgICAgICB0aGlzLnNldExpbmVXaWR0aCh2YWx1ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiTENcIjpcbiAgICAgICAgICAgIHRoaXMuc2V0TGluZUNhcCh2YWx1ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiTEpcIjpcbiAgICAgICAgICAgIHRoaXMuc2V0TGluZUpvaW4odmFsdWUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIk1MXCI6XG4gICAgICAgICAgICB0aGlzLnNldE1pdGVyTGltaXQodmFsdWUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIkRcIjpcbiAgICAgICAgICAgIHRoaXMuc2V0RGFzaCh2YWx1ZVswXSwgdmFsdWVbMV0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIlJJXCI6XG4gICAgICAgICAgICB0aGlzLnNldFJlbmRlcmluZ0ludGVudCh2YWx1ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiRkxcIjpcbiAgICAgICAgICAgIHRoaXMuc2V0RmxhdG5lc3ModmFsdWUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIkZvbnRcIjpcbiAgICAgICAgICAgIHRoaXMuc2V0Rm9udCh2YWx1ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiQ0FcIjpcbiAgICAgICAgICAgIHRoaXMuc2V0U3Ryb2tlQWxwaGEodmFsdWUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcImNhXCI6XG4gICAgICAgICAgICB0aGlzLnNldEZpbGxBbHBoYSh2YWx1ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgd2FybihgVW5pbXBsZW1lbnRlZCBncmFwaGljIHN0YXRlIG9wZXJhdG9yICR7a2V5fWApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmaWxsKCkge1xuICAgICAgY29uc3QgY3VycmVudCA9IHRoaXMuY3VycmVudDtcbiAgICAgIGlmIChjdXJyZW50LmVsZW1lbnQpIHtcbiAgICAgICAgY3VycmVudC5lbGVtZW50LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiZmlsbFwiLCBjdXJyZW50LmZpbGxDb2xvcik7XG4gICAgICAgIGN1cnJlbnQuZWxlbWVudC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImZpbGwtb3BhY2l0eVwiLCBjdXJyZW50LmZpbGxBbHBoYSk7XG4gICAgICAgIHRoaXMuZW5kUGF0aCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHN0cm9rZSgpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmN1cnJlbnQ7XG4gICAgICBpZiAoY3VycmVudC5lbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX3NldFN0cm9rZUF0dHJpYnV0ZXMoY3VycmVudC5lbGVtZW50KTtcbiAgICAgICAgY3VycmVudC5lbGVtZW50LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiZmlsbFwiLCBcIm5vbmVcIik7XG4gICAgICAgIHRoaXMuZW5kUGF0aCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX3NldFN0cm9rZUF0dHJpYnV0ZXMoZWxlbWVudCwgbGluZVdpZHRoU2NhbGUgPSAxKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50O1xuICAgICAgbGV0IGRhc2hBcnJheSA9IGN1cnJlbnQuZGFzaEFycmF5O1xuICAgICAgaWYgKGxpbmVXaWR0aFNjYWxlICE9PSAxICYmIGRhc2hBcnJheS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGRhc2hBcnJheSA9IGRhc2hBcnJheS5tYXAoZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIGxpbmVXaWR0aFNjYWxlICogdmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInN0cm9rZVwiLCBjdXJyZW50LnN0cm9rZUNvbG9yKTtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJzdHJva2Utb3BhY2l0eVwiLCBjdXJyZW50LnN0cm9rZUFscGhhKTtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJzdHJva2UtbWl0ZXJsaW1pdFwiLCBwZihjdXJyZW50Lm1pdGVyTGltaXQpKTtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJzdHJva2UtbGluZWNhcFwiLCBjdXJyZW50LmxpbmVDYXApO1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInN0cm9rZS1saW5lam9pblwiLCBjdXJyZW50LmxpbmVKb2luKTtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlTlMoXG4gICAgICAgIG51bGwsXG4gICAgICAgIFwic3Ryb2tlLXdpZHRoXCIsXG4gICAgICAgIHBmKGxpbmVXaWR0aFNjYWxlICogY3VycmVudC5saW5lV2lkdGgpICsgXCJweFwiXG4gICAgICApO1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGVOUyhcbiAgICAgICAgbnVsbCxcbiAgICAgICAgXCJzdHJva2UtZGFzaGFycmF5XCIsXG4gICAgICAgIGRhc2hBcnJheS5tYXAocGYpLmpvaW4oXCIgXCIpXG4gICAgICApO1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGVOUyhcbiAgICAgICAgbnVsbCxcbiAgICAgICAgXCJzdHJva2UtZGFzaG9mZnNldFwiLFxuICAgICAgICBwZihsaW5lV2lkdGhTY2FsZSAqIGN1cnJlbnQuZGFzaFBoYXNlKSArIFwicHhcIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICBlb0ZpbGwoKSB7XG4gICAgICBpZiAodGhpcy5jdXJyZW50LmVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50LmVsZW1lbnQuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJmaWxsLXJ1bGVcIiwgXCJldmVub2RkXCIpO1xuICAgICAgfVxuICAgICAgdGhpcy5maWxsKCk7XG4gICAgfVxuXG4gICAgZmlsbFN0cm9rZSgpIHtcbiAgICAgIC8vIE9yZGVyIGlzIGltcG9ydGFudCBzaW5jZSBzdHJva2Ugd2FudHMgZmlsbCB0byBiZSBub25lLlxuICAgICAgLy8gRmlyc3Qgc3Ryb2tlLCB0aGVuIGlmIGZpbGwgbmVlZGVkLCBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuLlxuICAgICAgdGhpcy5zdHJva2UoKTtcbiAgICAgIHRoaXMuZmlsbCgpO1xuICAgIH1cblxuICAgIGVvRmlsbFN0cm9rZSgpIHtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnQuZWxlbWVudCkge1xuICAgICAgICB0aGlzLmN1cnJlbnQuZWxlbWVudC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImZpbGwtcnVsZVwiLCBcImV2ZW5vZGRcIik7XG4gICAgICB9XG4gICAgICB0aGlzLmZpbGxTdHJva2UoKTtcbiAgICB9XG5cbiAgICBjbG9zZVN0cm9rZSgpIHtcbiAgICAgIHRoaXMuY2xvc2VQYXRoKCk7XG4gICAgICB0aGlzLnN0cm9rZSgpO1xuICAgIH1cblxuICAgIGNsb3NlRmlsbFN0cm9rZSgpIHtcbiAgICAgIHRoaXMuY2xvc2VQYXRoKCk7XG4gICAgICB0aGlzLmZpbGxTdHJva2UoKTtcbiAgICB9XG5cbiAgICBjbG9zZUVPRmlsbFN0cm9rZSgpIHtcbiAgICAgIHRoaXMuY2xvc2VQYXRoKCk7XG4gICAgICB0aGlzLmVvRmlsbFN0cm9rZSgpO1xuICAgIH1cblxuICAgIHBhaW50U29saWRDb2xvckltYWdlTWFzaygpIHtcbiAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudChcInN2ZzpyZWN0XCIpO1xuICAgICAgcmVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInhcIiwgXCIwXCIpO1xuICAgICAgcmVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInlcIiwgXCIwXCIpO1xuICAgICAgcmVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcIndpZHRoXCIsIFwiMXB4XCIpO1xuICAgICAgcmVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImhlaWdodFwiLCBcIjFweFwiKTtcbiAgICAgIHJlY3Quc2V0QXR0cmlidXRlTlMobnVsbCwgXCJmaWxsXCIsIHRoaXMuY3VycmVudC5maWxsQ29sb3IpO1xuXG4gICAgICB0aGlzLl9lbnN1cmVUcmFuc2Zvcm1Hcm91cCgpLmFwcGVuZENoaWxkKHJlY3QpO1xuICAgIH1cblxuICAgIHBhaW50SW1hZ2VYT2JqZWN0KG9iaklkKSB7XG4gICAgICBjb25zdCBpbWdEYXRhID0gb2JqSWQuc3RhcnRzV2l0aChcImdfXCIpXG4gICAgICAgID8gdGhpcy5jb21tb25PYmpzLmdldChvYmpJZClcbiAgICAgICAgOiB0aGlzLm9ianMuZ2V0KG9iaklkKTtcbiAgICAgIGlmICghaW1nRGF0YSkge1xuICAgICAgICB3YXJuKGBEZXBlbmRlbnQgaW1hZ2Ugd2l0aCBvYmplY3QgSUQgJHtvYmpJZH0gaXMgbm90IHJlYWR5IHlldGApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLnBhaW50SW5saW5lSW1hZ2VYT2JqZWN0KGltZ0RhdGEpO1xuICAgIH1cblxuICAgIHBhaW50SW5saW5lSW1hZ2VYT2JqZWN0KGltZ0RhdGEsIG1hc2spIHtcbiAgICAgIGNvbnN0IHdpZHRoID0gaW1nRGF0YS53aWR0aDtcbiAgICAgIGNvbnN0IGhlaWdodCA9IGltZ0RhdGEuaGVpZ2h0O1xuXG4gICAgICBjb25zdCBpbWdTcmMgPSBjb252ZXJ0SW1nRGF0YVRvUG5nKGltZ0RhdGEsIHRoaXMuZm9yY2VEYXRhU2NoZW1hLCAhIW1hc2spO1xuICAgICAgY29uc3QgY2xpcHJlY3QgPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudChcInN2ZzpyZWN0XCIpO1xuICAgICAgY2xpcHJlY3Quc2V0QXR0cmlidXRlTlMobnVsbCwgXCJ4XCIsIFwiMFwiKTtcbiAgICAgIGNsaXByZWN0LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwieVwiLCBcIjBcIik7XG4gICAgICBjbGlwcmVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcIndpZHRoXCIsIHBmKHdpZHRoKSk7XG4gICAgICBjbGlwcmVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImhlaWdodFwiLCBwZihoZWlnaHQpKTtcbiAgICAgIHRoaXMuY3VycmVudC5lbGVtZW50ID0gY2xpcHJlY3Q7XG4gICAgICB0aGlzLmNsaXAoXCJub256ZXJvXCIpO1xuXG4gICAgICBjb25zdCBpbWdFbCA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnOmltYWdlXCIpO1xuICAgICAgaW1nRWwuc2V0QXR0cmlidXRlTlMoWExJTktfTlMsIFwieGxpbms6aHJlZlwiLCBpbWdTcmMpO1xuICAgICAgaW1nRWwuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJ4XCIsIFwiMFwiKTtcbiAgICAgIGltZ0VsLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwieVwiLCBwZigtaGVpZ2h0KSk7XG4gICAgICBpbWdFbC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcIndpZHRoXCIsIHBmKHdpZHRoKSArIFwicHhcIik7XG4gICAgICBpbWdFbC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImhlaWdodFwiLCBwZihoZWlnaHQpICsgXCJweFwiKTtcbiAgICAgIGltZ0VsLnNldEF0dHJpYnV0ZU5TKFxuICAgICAgICBudWxsLFxuICAgICAgICBcInRyYW5zZm9ybVwiLFxuICAgICAgICBgc2NhbGUoJHtwZigxIC8gd2lkdGgpfSAke3BmKC0xIC8gaGVpZ2h0KX0pYFxuICAgICAgKTtcbiAgICAgIGlmIChtYXNrKSB7XG4gICAgICAgIG1hc2suYXBwZW5kQ2hpbGQoaW1nRWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fZW5zdXJlVHJhbnNmb3JtR3JvdXAoKS5hcHBlbmRDaGlsZChpbWdFbCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcGFpbnRJbWFnZU1hc2tYT2JqZWN0KGltZ0RhdGEpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmN1cnJlbnQ7XG4gICAgICBjb25zdCB3aWR0aCA9IGltZ0RhdGEud2lkdGg7XG4gICAgICBjb25zdCBoZWlnaHQgPSBpbWdEYXRhLmhlaWdodDtcbiAgICAgIGNvbnN0IGZpbGxDb2xvciA9IGN1cnJlbnQuZmlsbENvbG9yO1xuXG4gICAgICBjdXJyZW50Lm1hc2tJZCA9IGBtYXNrJHttYXNrQ291bnQrK31gO1xuICAgICAgY29uc3QgbWFzayA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnOm1hc2tcIik7XG4gICAgICBtYXNrLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiaWRcIiwgY3VycmVudC5tYXNrSWQpO1xuXG4gICAgICBjb25zdCByZWN0ID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJzdmc6cmVjdFwiKTtcbiAgICAgIHJlY3Quc2V0QXR0cmlidXRlTlMobnVsbCwgXCJ4XCIsIFwiMFwiKTtcbiAgICAgIHJlY3Quc2V0QXR0cmlidXRlTlMobnVsbCwgXCJ5XCIsIFwiMFwiKTtcbiAgICAgIHJlY3Quc2V0QXR0cmlidXRlTlMobnVsbCwgXCJ3aWR0aFwiLCBwZih3aWR0aCkpO1xuICAgICAgcmVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImhlaWdodFwiLCBwZihoZWlnaHQpKTtcbiAgICAgIHJlY3Quc2V0QXR0cmlidXRlTlMobnVsbCwgXCJmaWxsXCIsIGZpbGxDb2xvcik7XG4gICAgICByZWN0LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwibWFza1wiLCBgdXJsKCMke2N1cnJlbnQubWFza0lkfSlgKTtcblxuICAgICAgdGhpcy5kZWZzLmFwcGVuZENoaWxkKG1hc2spO1xuICAgICAgdGhpcy5fZW5zdXJlVHJhbnNmb3JtR3JvdXAoKS5hcHBlbmRDaGlsZChyZWN0KTtcblxuICAgICAgdGhpcy5wYWludElubGluZUltYWdlWE9iamVjdChpbWdEYXRhLCBtYXNrKTtcbiAgICB9XG5cbiAgICBwYWludEZvcm1YT2JqZWN0QmVnaW4obWF0cml4LCBiYm94KSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShtYXRyaXgpICYmIG1hdHJpeC5sZW5ndGggPT09IDYpIHtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0oXG4gICAgICAgICAgbWF0cml4WzBdLFxuICAgICAgICAgIG1hdHJpeFsxXSxcbiAgICAgICAgICBtYXRyaXhbMl0sXG4gICAgICAgICAgbWF0cml4WzNdLFxuICAgICAgICAgIG1hdHJpeFs0XSxcbiAgICAgICAgICBtYXRyaXhbNV1cbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGJib3gpIHtcbiAgICAgICAgY29uc3Qgd2lkdGggPSBiYm94WzJdIC0gYmJveFswXTtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gYmJveFszXSAtIGJib3hbMV07XG5cbiAgICAgICAgY29uc3QgY2xpcHJlY3QgPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudChcInN2ZzpyZWN0XCIpO1xuICAgICAgICBjbGlwcmVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInhcIiwgYmJveFswXSk7XG4gICAgICAgIGNsaXByZWN0LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwieVwiLCBiYm94WzFdKTtcbiAgICAgICAgY2xpcHJlY3Quc2V0QXR0cmlidXRlTlMobnVsbCwgXCJ3aWR0aFwiLCBwZih3aWR0aCkpO1xuICAgICAgICBjbGlwcmVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImhlaWdodFwiLCBwZihoZWlnaHQpKTtcbiAgICAgICAgdGhpcy5jdXJyZW50LmVsZW1lbnQgPSBjbGlwcmVjdDtcbiAgICAgICAgdGhpcy5jbGlwKFwibm9uemVyb1wiKTtcbiAgICAgICAgdGhpcy5lbmRQYXRoKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcGFpbnRGb3JtWE9iamVjdEVuZCgpIHt9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9pbml0aWFsaXplKHZpZXdwb3J0KSB7XG4gICAgICBjb25zdCBzdmcgPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlKHZpZXdwb3J0LndpZHRoLCB2aWV3cG9ydC5oZWlnaHQpO1xuXG4gICAgICAvLyBDcmVhdGUgdGhlIGRlZmluaXRpb25zIGVsZW1lbnQuXG4gICAgICBjb25zdCBkZWZpbml0aW9ucyA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnOmRlZnNcIik7XG4gICAgICBzdmcuYXBwZW5kQ2hpbGQoZGVmaW5pdGlvbnMpO1xuICAgICAgdGhpcy5kZWZzID0gZGVmaW5pdGlvbnM7XG5cbiAgICAgIC8vIENyZWF0ZSB0aGUgcm9vdCBncm91cCBlbGVtZW50LCB3aGljaCBhY3RzIGEgY29udGFpbmVyIGZvciBhbGwgb3RoZXJcbiAgICAgIC8vIGdyb3VwcyBhbmQgYXBwbGllcyB0aGUgdmlld3BvcnQgdHJhbnNmb3JtLlxuICAgICAgY29uc3Qgcm9vdEdyb3VwID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJzdmc6Z1wiKTtcbiAgICAgIHJvb3RHcm91cC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInRyYW5zZm9ybVwiLCBwbSh2aWV3cG9ydC50cmFuc2Zvcm0pKTtcbiAgICAgIHN2Zy5hcHBlbmRDaGlsZChyb290R3JvdXApO1xuXG4gICAgICAvLyBGb3IgdGhlIGNvbnN0cnVjdGlvbiBvZiB0aGUgU1ZHIGltYWdlIHdlIGFyZSBvbmx5IGludGVyZXN0ZWQgaW4gdGhlXG4gICAgICAvLyByb290IGdyb3VwLCBzbyB3ZSBleHBvc2UgaXQgYXMgdGhlIGVudHJ5IHBvaW50IG9mIHRoZSBTVkcgaW1hZ2UgZm9yXG4gICAgICAvLyB0aGUgb3RoZXIgY29kZSBpbiB0aGlzIGNsYXNzLlxuICAgICAgdGhpcy5zdmcgPSByb290R3JvdXA7XG5cbiAgICAgIHJldHVybiBzdmc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfZW5zdXJlQ2xpcEdyb3VwKCkge1xuICAgICAgaWYgKCF0aGlzLmN1cnJlbnQuY2xpcEdyb3VwKSB7XG4gICAgICAgIGNvbnN0IGNsaXBHcm91cCA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnOmdcIik7XG4gICAgICAgIGNsaXBHcm91cC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImNsaXAtcGF0aFwiLCB0aGlzLmN1cnJlbnQuYWN0aXZlQ2xpcFVybCk7XG4gICAgICAgIHRoaXMuc3ZnLmFwcGVuZENoaWxkKGNsaXBHcm91cCk7XG4gICAgICAgIHRoaXMuY3VycmVudC5jbGlwR3JvdXAgPSBjbGlwR3JvdXA7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5jdXJyZW50LmNsaXBHcm91cDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9lbnN1cmVUcmFuc2Zvcm1Hcm91cCgpIHtcbiAgICAgIGlmICghdGhpcy50Z3JwKSB7XG4gICAgICAgIHRoaXMudGdycCA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnOmdcIik7XG4gICAgICAgIHRoaXMudGdycC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInRyYW5zZm9ybVwiLCBwbSh0aGlzLnRyYW5zZm9ybU1hdHJpeCkpO1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50LmFjdGl2ZUNsaXBVcmwpIHtcbiAgICAgICAgICB0aGlzLl9lbnN1cmVDbGlwR3JvdXAoKS5hcHBlbmRDaGlsZCh0aGlzLnRncnApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc3ZnLmFwcGVuZENoaWxkKHRoaXMudGdycCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnRncnA7XG4gICAgfVxuICB9O1xufVxuXG5leHBvcnQgeyBTVkdHcmFwaGljcyB9O1xuIiwgIi8qIENvcHlyaWdodCAyMDEyIE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyogZ2xvYmFscyBfX25vbl93ZWJwYWNrX3JlcXVpcmVfXyAqL1xuXG5pbXBvcnQge1xuICBBYm9ydEV4Y2VwdGlvbixcbiAgYXNzZXJ0LFxuICBjcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSxcbiAgTWlzc2luZ1BERkV4Y2VwdGlvbixcbn0gZnJvbSBcIi4uL3NoYXJlZC91dGlsLmpzXCI7XG5pbXBvcnQge1xuICBleHRyYWN0RmlsZW5hbWVGcm9tSGVhZGVyLFxuICB2YWxpZGF0ZVJhbmdlUmVxdWVzdENhcGFiaWxpdGllcyxcbn0gZnJvbSBcIi4vbmV0d29ya191dGlscy5qc1wiO1xuXG5pZiAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJNT1pDRU5UUkFMXCIpKSB7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICAnTW9kdWxlIFwiLi9ub2RlX3N0cmVhbS5qc1wiIHNoYWxsIG5vdCBiZSB1c2VkIHdpdGggTU9aQ0VOVFJBTCBidWlsZHMuJ1xuICApO1xufVxuXG5jb25zdCBmcyA9IF9fbm9uX3dlYnBhY2tfcmVxdWlyZV9fKFwiZnNcIik7XG5jb25zdCBodHRwID0gX19ub25fd2VicGFja19yZXF1aXJlX18oXCJodHRwXCIpO1xuY29uc3QgaHR0cHMgPSBfX25vbl93ZWJwYWNrX3JlcXVpcmVfXyhcImh0dHBzXCIpO1xuY29uc3QgdXJsID0gX19ub25fd2VicGFja19yZXF1aXJlX18oXCJ1cmxcIik7XG5cbmNvbnN0IGZpbGVVcmlSZWdleCA9IC9eZmlsZTpcXC9cXC9cXC9bYS16QS1aXTpcXC8vO1xuXG5mdW5jdGlvbiBwYXJzZVVybChzb3VyY2VVcmwpIHtcbiAgY29uc3QgcGFyc2VkVXJsID0gdXJsLnBhcnNlKHNvdXJjZVVybCk7XG4gIGlmIChwYXJzZWRVcmwucHJvdG9jb2wgPT09IFwiZmlsZTpcIiB8fCBwYXJzZWRVcmwuaG9zdCkge1xuICAgIHJldHVybiBwYXJzZWRVcmw7XG4gIH1cbiAgLy8gUHJlcGVuZGluZyAnZmlsZTovLy8nIHRvIFdpbmRvd3MgYWJzb2x1dGUgcGF0aC5cbiAgaWYgKC9eW2Etel06Wy9cXFxcXS9pLnRlc3Qoc291cmNlVXJsKSkge1xuICAgIHJldHVybiB1cmwucGFyc2UoYGZpbGU6Ly8vJHtzb3VyY2VVcmx9YCk7XG4gIH1cbiAgLy8gQ2hhbmdlcyBwcm90b2NvbCB0byAnZmlsZTonIGlmIHVybCByZWZlcnMgdG8gZmlsZXN5c3RlbS5cbiAgaWYgKCFwYXJzZWRVcmwuaG9zdCkge1xuICAgIHBhcnNlZFVybC5wcm90b2NvbCA9IFwiZmlsZTpcIjtcbiAgfVxuICByZXR1cm4gcGFyc2VkVXJsO1xufVxuXG5jbGFzcyBQREZOb2RlU3RyZWFtIHtcbiAgY29uc3RydWN0b3Ioc291cmNlKSB7XG4gICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgdGhpcy51cmwgPSBwYXJzZVVybChzb3VyY2UudXJsKTtcbiAgICB0aGlzLmlzSHR0cCA9XG4gICAgICB0aGlzLnVybC5wcm90b2NvbCA9PT0gXCJodHRwOlwiIHx8IHRoaXMudXJsLnByb3RvY29sID09PSBcImh0dHBzOlwiO1xuICAgIC8vIENoZWNrIGlmIHVybCByZWZlcnMgdG8gZmlsZXN5c3RlbS5cbiAgICB0aGlzLmlzRnNVcmwgPSB0aGlzLnVybC5wcm90b2NvbCA9PT0gXCJmaWxlOlwiO1xuICAgIHRoaXMuaHR0cEhlYWRlcnMgPSAodGhpcy5pc0h0dHAgJiYgc291cmNlLmh0dHBIZWFkZXJzKSB8fCB7fTtcblxuICAgIHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyID0gbnVsbDtcbiAgICB0aGlzLl9yYW5nZVJlcXVlc3RSZWFkZXJzID0gW107XG4gIH1cblxuICBnZXQgX3Byb2dyZXNzaXZlRGF0YUxlbmd0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXI/Ll9sb2FkZWQgPz8gMDtcbiAgfVxuXG4gIGdldEZ1bGxSZWFkZXIoKSB7XG4gICAgYXNzZXJ0KFxuICAgICAgIXRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyLFxuICAgICAgXCJQREZOb2RlU3RyZWFtLmdldEZ1bGxSZWFkZXIgY2FuIG9ubHkgYmUgY2FsbGVkIG9uY2UuXCJcbiAgICApO1xuICAgIHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyID0gdGhpcy5pc0ZzVXJsXG4gICAgICA/IG5ldyBQREZOb2RlU3RyZWFtRnNGdWxsUmVhZGVyKHRoaXMpXG4gICAgICA6IG5ldyBQREZOb2RlU3RyZWFtRnVsbFJlYWRlcih0aGlzKTtcbiAgICByZXR1cm4gdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXI7XG4gIH1cblxuICBnZXRSYW5nZVJlYWRlcihzdGFydCwgZW5kKSB7XG4gICAgaWYgKGVuZCA8PSB0aGlzLl9wcm9ncmVzc2l2ZURhdGFMZW5ndGgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCByYW5nZVJlYWRlciA9IHRoaXMuaXNGc1VybFxuICAgICAgPyBuZXcgUERGTm9kZVN0cmVhbUZzUmFuZ2VSZWFkZXIodGhpcywgc3RhcnQsIGVuZClcbiAgICAgIDogbmV3IFBERk5vZGVTdHJlYW1SYW5nZVJlYWRlcih0aGlzLCBzdGFydCwgZW5kKTtcbiAgICB0aGlzLl9yYW5nZVJlcXVlc3RSZWFkZXJzLnB1c2gocmFuZ2VSZWFkZXIpO1xuICAgIHJldHVybiByYW5nZVJlYWRlcjtcbiAgfVxuXG4gIGNhbmNlbEFsbFJlcXVlc3RzKHJlYXNvbikge1xuICAgIGlmICh0aGlzLl9mdWxsUmVxdWVzdFJlYWRlcikge1xuICAgICAgdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXIuY2FuY2VsKHJlYXNvbik7XG4gICAgfVxuICAgIGZvciAoY29uc3QgcmVhZGVyIG9mIHRoaXMuX3JhbmdlUmVxdWVzdFJlYWRlcnMuc2xpY2UoMCkpIHtcbiAgICAgIHJlYWRlci5jYW5jZWwocmVhc29uKTtcbiAgICB9XG4gIH1cbn1cblxuY2xhc3MgQmFzZUZ1bGxSZWFkZXIge1xuICBjb25zdHJ1Y3RvcihzdHJlYW0pIHtcbiAgICB0aGlzLl91cmwgPSBzdHJlYW0udXJsO1xuICAgIHRoaXMuX2RvbmUgPSBmYWxzZTtcbiAgICB0aGlzLl9zdG9yZWRFcnJvciA9IG51bGw7XG4gICAgdGhpcy5vblByb2dyZXNzID0gbnVsbDtcbiAgICBjb25zdCBzb3VyY2UgPSBzdHJlYW0uc291cmNlO1xuICAgIHRoaXMuX2NvbnRlbnRMZW5ndGggPSBzb3VyY2UubGVuZ3RoOyAvLyBvcHRpb25hbFxuICAgIHRoaXMuX2xvYWRlZCA9IDA7XG4gICAgdGhpcy5fZmlsZW5hbWUgPSBudWxsO1xuXG4gICAgdGhpcy5fZGlzYWJsZVJhbmdlID0gc291cmNlLmRpc2FibGVSYW5nZSB8fCBmYWxzZTtcbiAgICB0aGlzLl9yYW5nZUNodW5rU2l6ZSA9IHNvdXJjZS5yYW5nZUNodW5rU2l6ZTtcbiAgICBpZiAoIXRoaXMuX3JhbmdlQ2h1bmtTaXplICYmICF0aGlzLl9kaXNhYmxlUmFuZ2UpIHtcbiAgICAgIHRoaXMuX2Rpc2FibGVSYW5nZSA9IHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5faXNTdHJlYW1pbmdTdXBwb3J0ZWQgPSAhc291cmNlLmRpc2FibGVTdHJlYW07XG4gICAgdGhpcy5faXNSYW5nZVN1cHBvcnRlZCA9ICFzb3VyY2UuZGlzYWJsZVJhbmdlO1xuXG4gICAgdGhpcy5fcmVhZGFibGVTdHJlYW0gPSBudWxsO1xuICAgIHRoaXMuX3JlYWRDYXBhYmlsaXR5ID0gY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHkoKTtcbiAgICB0aGlzLl9oZWFkZXJzQ2FwYWJpbGl0eSA9IGNyZWF0ZVByb21pc2VDYXBhYmlsaXR5KCk7XG4gIH1cblxuICBnZXQgaGVhZGVyc1JlYWR5KCkge1xuICAgIHJldHVybiB0aGlzLl9oZWFkZXJzQ2FwYWJpbGl0eS5wcm9taXNlO1xuICB9XG5cbiAgZ2V0IGZpbGVuYW1lKCkge1xuICAgIHJldHVybiB0aGlzLl9maWxlbmFtZTtcbiAgfVxuXG4gIGdldCBjb250ZW50TGVuZ3RoKCkge1xuICAgIHJldHVybiB0aGlzLl9jb250ZW50TGVuZ3RoO1xuICB9XG5cbiAgZ2V0IGlzUmFuZ2VTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzUmFuZ2VTdXBwb3J0ZWQ7XG4gIH1cblxuICBnZXQgaXNTdHJlYW1pbmdTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzU3RyZWFtaW5nU3VwcG9ydGVkO1xuICB9XG5cbiAgYXN5bmMgcmVhZCgpIHtcbiAgICBhd2FpdCB0aGlzLl9yZWFkQ2FwYWJpbGl0eS5wcm9taXNlO1xuICAgIGlmICh0aGlzLl9kb25lKSB7XG4gICAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gICAgfVxuICAgIGlmICh0aGlzLl9zdG9yZWRFcnJvcikge1xuICAgICAgdGhyb3cgdGhpcy5fc3RvcmVkRXJyb3I7XG4gICAgfVxuXG4gICAgY29uc3QgY2h1bmsgPSB0aGlzLl9yZWFkYWJsZVN0cmVhbS5yZWFkKCk7XG4gICAgaWYgKGNodW5rID09PSBudWxsKSB7XG4gICAgICB0aGlzLl9yZWFkQ2FwYWJpbGl0eSA9IGNyZWF0ZVByb21pc2VDYXBhYmlsaXR5KCk7XG4gICAgICByZXR1cm4gdGhpcy5yZWFkKCk7XG4gICAgfVxuICAgIHRoaXMuX2xvYWRlZCArPSBjaHVuay5sZW5ndGg7XG4gICAgaWYgKHRoaXMub25Qcm9ncmVzcykge1xuICAgICAgdGhpcy5vblByb2dyZXNzKHtcbiAgICAgICAgbG9hZGVkOiB0aGlzLl9sb2FkZWQsXG4gICAgICAgIHRvdGFsOiB0aGlzLl9jb250ZW50TGVuZ3RoLFxuICAgICAgfSk7XG4gICAgfVxuICAgIC8vIEVuc3VyZSB0aGF0IGByZWFkKClgIG1ldGhvZCByZXR1cm5zIEFycmF5QnVmZmVyLlxuICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGNodW5rKS5idWZmZXI7XG4gICAgcmV0dXJuIHsgdmFsdWU6IGJ1ZmZlciwgZG9uZTogZmFsc2UgfTtcbiAgfVxuXG4gIGNhbmNlbChyZWFzb24pIHtcbiAgICAvLyBDYWxsIGB0aGlzLl9lcnJvcigpYCBtZXRob2Qgd2hlbiBjYW5jZWwgaXMgY2FsbGVkXG4gICAgLy8gYmVmb3JlIF9yZWFkYWJsZVN0cmVhbSBpcyBzZXQuXG4gICAgaWYgKCF0aGlzLl9yZWFkYWJsZVN0cmVhbSkge1xuICAgICAgdGhpcy5fZXJyb3IocmVhc29uKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fcmVhZGFibGVTdHJlYW0uZGVzdHJveShyZWFzb24pO1xuICB9XG5cbiAgX2Vycm9yKHJlYXNvbikge1xuICAgIHRoaXMuX3N0b3JlZEVycm9yID0gcmVhc29uO1xuICAgIHRoaXMuX3JlYWRDYXBhYmlsaXR5LnJlc29sdmUoKTtcbiAgfVxuXG4gIF9zZXRSZWFkYWJsZVN0cmVhbShyZWFkYWJsZVN0cmVhbSkge1xuICAgIHRoaXMuX3JlYWRhYmxlU3RyZWFtID0gcmVhZGFibGVTdHJlYW07XG4gICAgcmVhZGFibGVTdHJlYW0ub24oXCJyZWFkYWJsZVwiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9yZWFkQ2FwYWJpbGl0eS5yZXNvbHZlKCk7XG4gICAgfSk7XG5cbiAgICByZWFkYWJsZVN0cmVhbS5vbihcImVuZFwiLCAoKSA9PiB7XG4gICAgICAvLyBEZXN0cm95IHJlYWRhYmxlIHRvIG1pbmltaXplIHJlc291cmNlIHVzYWdlLlxuICAgICAgcmVhZGFibGVTdHJlYW0uZGVzdHJveSgpO1xuICAgICAgdGhpcy5fZG9uZSA9IHRydWU7XG4gICAgICB0aGlzLl9yZWFkQ2FwYWJpbGl0eS5yZXNvbHZlKCk7XG4gICAgfSk7XG5cbiAgICByZWFkYWJsZVN0cmVhbS5vbihcImVycm9yXCIsIHJlYXNvbiA9PiB7XG4gICAgICB0aGlzLl9lcnJvcihyZWFzb24pO1xuICAgIH0pO1xuXG4gICAgLy8gV2UgbmVlZCB0byBzdG9wIHJlYWRpbmcgd2hlbiByYW5nZSBpcyBzdXBwb3J0ZWQgYW5kIHN0cmVhbWluZyBpc1xuICAgIC8vIGRpc2FibGVkLlxuICAgIGlmICghdGhpcy5faXNTdHJlYW1pbmdTdXBwb3J0ZWQgJiYgdGhpcy5faXNSYW5nZVN1cHBvcnRlZCkge1xuICAgICAgdGhpcy5fZXJyb3IobmV3IEFib3J0RXhjZXB0aW9uKFwic3RyZWFtaW5nIGlzIGRpc2FibGVkXCIpKTtcbiAgICB9XG5cbiAgICAvLyBEZXN0cm95IFJlYWRhYmxlU3RyZWFtIGlmIGFscmVhZHkgaW4gZXJyb3JlZCBzdGF0ZS5cbiAgICBpZiAodGhpcy5fc3RvcmVkRXJyb3IpIHtcbiAgICAgIHRoaXMuX3JlYWRhYmxlU3RyZWFtLmRlc3Ryb3kodGhpcy5fc3RvcmVkRXJyb3IpO1xuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBCYXNlUmFuZ2VSZWFkZXIge1xuICBjb25zdHJ1Y3RvcihzdHJlYW0pIHtcbiAgICB0aGlzLl91cmwgPSBzdHJlYW0udXJsO1xuICAgIHRoaXMuX2RvbmUgPSBmYWxzZTtcbiAgICB0aGlzLl9zdG9yZWRFcnJvciA9IG51bGw7XG4gICAgdGhpcy5vblByb2dyZXNzID0gbnVsbDtcbiAgICB0aGlzLl9sb2FkZWQgPSAwO1xuICAgIHRoaXMuX3JlYWRhYmxlU3RyZWFtID0gbnVsbDtcbiAgICB0aGlzLl9yZWFkQ2FwYWJpbGl0eSA9IGNyZWF0ZVByb21pc2VDYXBhYmlsaXR5KCk7XG4gICAgY29uc3Qgc291cmNlID0gc3RyZWFtLnNvdXJjZTtcbiAgICB0aGlzLl9pc1N0cmVhbWluZ1N1cHBvcnRlZCA9ICFzb3VyY2UuZGlzYWJsZVN0cmVhbTtcbiAgfVxuXG4gIGdldCBpc1N0cmVhbWluZ1N1cHBvcnRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNTdHJlYW1pbmdTdXBwb3J0ZWQ7XG4gIH1cblxuICBhc3luYyByZWFkKCkge1xuICAgIGF3YWl0IHRoaXMuX3JlYWRDYXBhYmlsaXR5LnByb21pc2U7XG4gICAgaWYgKHRoaXMuX2RvbmUpIHtcbiAgICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3N0b3JlZEVycm9yKSB7XG4gICAgICB0aHJvdyB0aGlzLl9zdG9yZWRFcnJvcjtcbiAgICB9XG5cbiAgICBjb25zdCBjaHVuayA9IHRoaXMuX3JlYWRhYmxlU3RyZWFtLnJlYWQoKTtcbiAgICBpZiAoY2h1bmsgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuX3JlYWRDYXBhYmlsaXR5ID0gY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHkoKTtcbiAgICAgIHJldHVybiB0aGlzLnJlYWQoKTtcbiAgICB9XG4gICAgdGhpcy5fbG9hZGVkICs9IGNodW5rLmxlbmd0aDtcbiAgICBpZiAodGhpcy5vblByb2dyZXNzKSB7XG4gICAgICB0aGlzLm9uUHJvZ3Jlc3MoeyBsb2FkZWQ6IHRoaXMuX2xvYWRlZCB9KTtcbiAgICB9XG4gICAgLy8gRW5zdXJlIHRoYXQgYHJlYWQoKWAgbWV0aG9kIHJldHVybnMgQXJyYXlCdWZmZXIuXG4gICAgY29uc3QgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoY2h1bmspLmJ1ZmZlcjtcbiAgICByZXR1cm4geyB2YWx1ZTogYnVmZmVyLCBkb25lOiBmYWxzZSB9O1xuICB9XG5cbiAgY2FuY2VsKHJlYXNvbikge1xuICAgIC8vIENhbGwgYHRoaXMuX2Vycm9yKClgIG1ldGhvZCB3aGVuIGNhbmNlbCBpcyBjYWxsZWRcbiAgICAvLyBiZWZvcmUgX3JlYWRhYmxlU3RyZWFtIGlzIHNldC5cbiAgICBpZiAoIXRoaXMuX3JlYWRhYmxlU3RyZWFtKSB7XG4gICAgICB0aGlzLl9lcnJvcihyZWFzb24pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9yZWFkYWJsZVN0cmVhbS5kZXN0cm95KHJlYXNvbik7XG4gIH1cblxuICBfZXJyb3IocmVhc29uKSB7XG4gICAgdGhpcy5fc3RvcmVkRXJyb3IgPSByZWFzb247XG4gICAgdGhpcy5fcmVhZENhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICB9XG5cbiAgX3NldFJlYWRhYmxlU3RyZWFtKHJlYWRhYmxlU3RyZWFtKSB7XG4gICAgdGhpcy5fcmVhZGFibGVTdHJlYW0gPSByZWFkYWJsZVN0cmVhbTtcbiAgICByZWFkYWJsZVN0cmVhbS5vbihcInJlYWRhYmxlXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX3JlYWRDYXBhYmlsaXR5LnJlc29sdmUoKTtcbiAgICB9KTtcblxuICAgIHJlYWRhYmxlU3RyZWFtLm9uKFwiZW5kXCIsICgpID0+IHtcbiAgICAgIC8vIERlc3Ryb3kgcmVhZGFibGVTdHJlYW0gdG8gbWluaW1pemUgcmVzb3VyY2UgdXNhZ2UuXG4gICAgICByZWFkYWJsZVN0cmVhbS5kZXN0cm95KCk7XG4gICAgICB0aGlzLl9kb25lID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3JlYWRDYXBhYmlsaXR5LnJlc29sdmUoKTtcbiAgICB9KTtcblxuICAgIHJlYWRhYmxlU3RyZWFtLm9uKFwiZXJyb3JcIiwgcmVhc29uID0+IHtcbiAgICAgIHRoaXMuX2Vycm9yKHJlYXNvbik7XG4gICAgfSk7XG5cbiAgICAvLyBEZXN0cm95IHJlYWRhYmxlU3RyZWFtIGlmIGFscmVhZHkgaW4gZXJyb3JlZCBzdGF0ZS5cbiAgICBpZiAodGhpcy5fc3RvcmVkRXJyb3IpIHtcbiAgICAgIHRoaXMuX3JlYWRhYmxlU3RyZWFtLmRlc3Ryb3kodGhpcy5fc3RvcmVkRXJyb3IpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVSZXF1ZXN0T3B0aW9ucyhwYXJzZWRVcmwsIGhlYWRlcnMpIHtcbiAgcmV0dXJuIHtcbiAgICBwcm90b2NvbDogcGFyc2VkVXJsLnByb3RvY29sLFxuICAgIGF1dGg6IHBhcnNlZFVybC5hdXRoLFxuICAgIGhvc3Q6IHBhcnNlZFVybC5ob3N0bmFtZSxcbiAgICBwb3J0OiBwYXJzZWRVcmwucG9ydCxcbiAgICBwYXRoOiBwYXJzZWRVcmwucGF0aCxcbiAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgaGVhZGVycyxcbiAgfTtcbn1cblxuY2xhc3MgUERGTm9kZVN0cmVhbUZ1bGxSZWFkZXIgZXh0ZW5kcyBCYXNlRnVsbFJlYWRlciB7XG4gIGNvbnN0cnVjdG9yKHN0cmVhbSkge1xuICAgIHN1cGVyKHN0cmVhbSk7XG5cbiAgICBjb25zdCBoYW5kbGVSZXNwb25zZSA9IHJlc3BvbnNlID0+IHtcbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXNDb2RlID09PSA0MDQpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgTWlzc2luZ1BERkV4Y2VwdGlvbihgTWlzc2luZyBQREYgXCIke3RoaXMuX3VybH1cIi5gKTtcbiAgICAgICAgdGhpcy5fc3RvcmVkRXJyb3IgPSBlcnJvcjtcbiAgICAgICAgdGhpcy5faGVhZGVyc0NhcGFiaWxpdHkucmVqZWN0KGVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5faGVhZGVyc0NhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICAgICAgdGhpcy5fc2V0UmVhZGFibGVTdHJlYW0ocmVzcG9uc2UpO1xuXG4gICAgICBjb25zdCBnZXRSZXNwb25zZUhlYWRlciA9IG5hbWUgPT4ge1xuICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCBoZWFkZXJzIG5hbWUgYXJlIGluIGxvd2VyIGNhc2UsIGFzIG1lbnRpb25lZFxuICAgICAgICAvLyBoZXJlOiBodHRwczovL25vZGVqcy5vcmcvYXBpL2h0dHAuaHRtbCNodHRwX21lc3NhZ2VfaGVhZGVycy5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RyZWFtLmhlYWRlcnNbbmFtZS50b0xvd2VyQ2FzZSgpXTtcbiAgICAgIH07XG4gICAgICBjb25zdCB7IGFsbG93UmFuZ2VSZXF1ZXN0cywgc3VnZ2VzdGVkTGVuZ3RoIH0gPVxuICAgICAgICB2YWxpZGF0ZVJhbmdlUmVxdWVzdENhcGFiaWxpdGllcyh7XG4gICAgICAgICAgZ2V0UmVzcG9uc2VIZWFkZXIsXG4gICAgICAgICAgaXNIdHRwOiBzdHJlYW0uaXNIdHRwLFxuICAgICAgICAgIHJhbmdlQ2h1bmtTaXplOiB0aGlzLl9yYW5nZUNodW5rU2l6ZSxcbiAgICAgICAgICBkaXNhYmxlUmFuZ2U6IHRoaXMuX2Rpc2FibGVSYW5nZSxcbiAgICAgICAgfSk7XG5cbiAgICAgIHRoaXMuX2lzUmFuZ2VTdXBwb3J0ZWQgPSBhbGxvd1JhbmdlUmVxdWVzdHM7XG4gICAgICAvLyBTZXR0aW5nIHJpZ2h0IGNvbnRlbnQgbGVuZ3RoLlxuICAgICAgdGhpcy5fY29udGVudExlbmd0aCA9IHN1Z2dlc3RlZExlbmd0aCB8fCB0aGlzLl9jb250ZW50TGVuZ3RoO1xuXG4gICAgICB0aGlzLl9maWxlbmFtZSA9IGV4dHJhY3RGaWxlbmFtZUZyb21IZWFkZXIoZ2V0UmVzcG9uc2VIZWFkZXIpO1xuICAgIH07XG5cbiAgICB0aGlzLl9yZXF1ZXN0ID0gbnVsbDtcbiAgICBpZiAodGhpcy5fdXJsLnByb3RvY29sID09PSBcImh0dHA6XCIpIHtcbiAgICAgIHRoaXMuX3JlcXVlc3QgPSBodHRwLnJlcXVlc3QoXG4gICAgICAgIGNyZWF0ZVJlcXVlc3RPcHRpb25zKHRoaXMuX3VybCwgc3RyZWFtLmh0dHBIZWFkZXJzKSxcbiAgICAgICAgaGFuZGxlUmVzcG9uc2VcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3JlcXVlc3QgPSBodHRwcy5yZXF1ZXN0KFxuICAgICAgICBjcmVhdGVSZXF1ZXN0T3B0aW9ucyh0aGlzLl91cmwsIHN0cmVhbS5odHRwSGVhZGVycyksXG4gICAgICAgIGhhbmRsZVJlc3BvbnNlXG4gICAgICApO1xuICAgIH1cblxuICAgIHRoaXMuX3JlcXVlc3Qub24oXCJlcnJvclwiLCByZWFzb24gPT4ge1xuICAgICAgdGhpcy5fc3RvcmVkRXJyb3IgPSByZWFzb247XG4gICAgICB0aGlzLl9oZWFkZXJzQ2FwYWJpbGl0eS5yZWplY3QocmVhc29uKTtcbiAgICB9KTtcbiAgICAvLyBOb3RlOiBgcmVxdWVzdC5lbmQoZGF0YSlgIGlzIHVzZWQgdG8gd3JpdGUgYGRhdGFgIHRvIHJlcXVlc3QgYm9keVxuICAgIC8vIGFuZCBub3RpZnkgZW5kIG9mIHJlcXVlc3QuIEJ1dCBvbmUgc2hvdWxkIGFsd2F5cyBjYWxsIGByZXF1ZXN0LmVuZCgpYFxuICAgIC8vIGV2ZW4gaWYgdGhlcmUgaXMgbm8gZGF0YSB0byB3cml0ZSAtLSAodG8gbm90aWZ5IHRoZSBlbmQgb2YgcmVxdWVzdCkuXG4gICAgdGhpcy5fcmVxdWVzdC5lbmQoKTtcbiAgfVxufVxuXG5jbGFzcyBQREZOb2RlU3RyZWFtUmFuZ2VSZWFkZXIgZXh0ZW5kcyBCYXNlUmFuZ2VSZWFkZXIge1xuICBjb25zdHJ1Y3RvcihzdHJlYW0sIHN0YXJ0LCBlbmQpIHtcbiAgICBzdXBlcihzdHJlYW0pO1xuXG4gICAgdGhpcy5faHR0cEhlYWRlcnMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IHByb3BlcnR5IGluIHN0cmVhbS5odHRwSGVhZGVycykge1xuICAgICAgY29uc3QgdmFsdWUgPSBzdHJlYW0uaHR0cEhlYWRlcnNbcHJvcGVydHldO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2h0dHBIZWFkZXJzW3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgIH1cbiAgICB0aGlzLl9odHRwSGVhZGVycy5SYW5nZSA9IGBieXRlcz0ke3N0YXJ0fS0ke2VuZCAtIDF9YDtcblxuICAgIGNvbnN0IGhhbmRsZVJlc3BvbnNlID0gcmVzcG9uc2UgPT4ge1xuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1c0NvZGUgPT09IDQwNCkge1xuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBNaXNzaW5nUERGRXhjZXB0aW9uKGBNaXNzaW5nIFBERiBcIiR7dGhpcy5fdXJsfVwiLmApO1xuICAgICAgICB0aGlzLl9zdG9yZWRFcnJvciA9IGVycm9yO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLl9zZXRSZWFkYWJsZVN0cmVhbShyZXNwb25zZSk7XG4gICAgfTtcblxuICAgIHRoaXMuX3JlcXVlc3QgPSBudWxsO1xuICAgIGlmICh0aGlzLl91cmwucHJvdG9jb2wgPT09IFwiaHR0cDpcIikge1xuICAgICAgdGhpcy5fcmVxdWVzdCA9IGh0dHAucmVxdWVzdChcbiAgICAgICAgY3JlYXRlUmVxdWVzdE9wdGlvbnModGhpcy5fdXJsLCB0aGlzLl9odHRwSGVhZGVycyksXG4gICAgICAgIGhhbmRsZVJlc3BvbnNlXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9yZXF1ZXN0ID0gaHR0cHMucmVxdWVzdChcbiAgICAgICAgY3JlYXRlUmVxdWVzdE9wdGlvbnModGhpcy5fdXJsLCB0aGlzLl9odHRwSGVhZGVycyksXG4gICAgICAgIGhhbmRsZVJlc3BvbnNlXG4gICAgICApO1xuICAgIH1cblxuICAgIHRoaXMuX3JlcXVlc3Qub24oXCJlcnJvclwiLCByZWFzb24gPT4ge1xuICAgICAgdGhpcy5fc3RvcmVkRXJyb3IgPSByZWFzb247XG4gICAgfSk7XG4gICAgdGhpcy5fcmVxdWVzdC5lbmQoKTtcbiAgfVxufVxuXG5jbGFzcyBQREZOb2RlU3RyZWFtRnNGdWxsUmVhZGVyIGV4dGVuZHMgQmFzZUZ1bGxSZWFkZXIge1xuICBjb25zdHJ1Y3RvcihzdHJlYW0pIHtcbiAgICBzdXBlcihzdHJlYW0pO1xuXG4gICAgbGV0IHBhdGggPSBkZWNvZGVVUklDb21wb25lbnQodGhpcy5fdXJsLnBhdGgpO1xuXG4gICAgLy8gUmVtb3ZlIHRoZSBleHRyYSBzbGFzaCB0byBnZXQgcmlnaHQgcGF0aCBmcm9tIHVybCBsaWtlIGBmaWxlOi8vL0M6L2BcbiAgICBpZiAoZmlsZVVyaVJlZ2V4LnRlc3QodGhpcy5fdXJsLmhyZWYpKSB7XG4gICAgICBwYXRoID0gcGF0aC5yZXBsYWNlKC9eXFwvLywgXCJcIik7XG4gICAgfVxuXG4gICAgZnMubHN0YXQocGF0aCwgKGVycm9yLCBzdGF0KSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yLmNvZGUgPT09IFwiRU5PRU5UXCIpIHtcbiAgICAgICAgICBlcnJvciA9IG5ldyBNaXNzaW5nUERGRXhjZXB0aW9uKGBNaXNzaW5nIFBERiBcIiR7cGF0aH1cIi5gKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zdG9yZWRFcnJvciA9IGVycm9yO1xuICAgICAgICB0aGlzLl9oZWFkZXJzQ2FwYWJpbGl0eS5yZWplY3QoZXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBTZXR0aW5nIHJpZ2h0IGNvbnRlbnQgbGVuZ3RoLlxuICAgICAgdGhpcy5fY29udGVudExlbmd0aCA9IHN0YXQuc2l6ZTtcblxuICAgICAgdGhpcy5fc2V0UmVhZGFibGVTdHJlYW0oZnMuY3JlYXRlUmVhZFN0cmVhbShwYXRoKSk7XG4gICAgICB0aGlzLl9oZWFkZXJzQ2FwYWJpbGl0eS5yZXNvbHZlKCk7XG4gICAgfSk7XG4gIH1cbn1cblxuY2xhc3MgUERGTm9kZVN0cmVhbUZzUmFuZ2VSZWFkZXIgZXh0ZW5kcyBCYXNlUmFuZ2VSZWFkZXIge1xuICBjb25zdHJ1Y3RvcihzdHJlYW0sIHN0YXJ0LCBlbmQpIHtcbiAgICBzdXBlcihzdHJlYW0pO1xuXG4gICAgbGV0IHBhdGggPSBkZWNvZGVVUklDb21wb25lbnQodGhpcy5fdXJsLnBhdGgpO1xuXG4gICAgLy8gUmVtb3ZlIHRoZSBleHRyYSBzbGFzaCB0byBnZXQgcmlnaHQgcGF0aCBmcm9tIHVybCBsaWtlIGBmaWxlOi8vL0M6L2BcbiAgICBpZiAoZmlsZVVyaVJlZ2V4LnRlc3QodGhpcy5fdXJsLmhyZWYpKSB7XG4gICAgICBwYXRoID0gcGF0aC5yZXBsYWNlKC9eXFwvLywgXCJcIik7XG4gICAgfVxuXG4gICAgdGhpcy5fc2V0UmVhZGFibGVTdHJlYW0oZnMuY3JlYXRlUmVhZFN0cmVhbShwYXRoLCB7IHN0YXJ0LCBlbmQ6IGVuZCAtIDEgfSkpO1xuICB9XG59XG5cbmV4cG9ydCB7IFBERk5vZGVTdHJlYW0gfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAxMiBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgYXNzZXJ0LFxuICBNaXNzaW5nUERGRXhjZXB0aW9uLFxuICBVbmV4cGVjdGVkUmVzcG9uc2VFeGNlcHRpb24sXG59IGZyb20gXCIuLi9zaGFyZWQvdXRpbC5qc1wiO1xuaW1wb3J0IHsgZ2V0RmlsZW5hbWVGcm9tQ29udGVudERpc3Bvc2l0aW9uSGVhZGVyIH0gZnJvbSBcIi4vY29udGVudF9kaXNwb3NpdGlvbi5qc1wiO1xuaW1wb3J0IHsgaXNQZGZGaWxlIH0gZnJvbSBcIi4vZGlzcGxheV91dGlscy5qc1wiO1xuXG5mdW5jdGlvbiB2YWxpZGF0ZVJhbmdlUmVxdWVzdENhcGFiaWxpdGllcyh7XG4gIGdldFJlc3BvbnNlSGVhZGVyLFxuICBpc0h0dHAsXG4gIHJhbmdlQ2h1bmtTaXplLFxuICBkaXNhYmxlUmFuZ2UsXG59KSB7XG4gIGlmIChcbiAgICB0eXBlb2YgUERGSlNEZXYgPT09IFwidW5kZWZpbmVkXCIgfHxcbiAgICBQREZKU0Rldi50ZXN0KFwiIVBST0RVQ1RJT04gfHwgVEVTVElOR1wiKVxuICApIHtcbiAgICBhc3NlcnQoXG4gICAgICBOdW1iZXIuaXNJbnRlZ2VyKHJhbmdlQ2h1bmtTaXplKSAmJiByYW5nZUNodW5rU2l6ZSA+IDAsXG4gICAgICBcInJhbmdlQ2h1bmtTaXplIG11c3QgYmUgYW4gaW50ZWdlciBsYXJnZXIgdGhhbiB6ZXJvLlwiXG4gICAgKTtcbiAgfVxuICBjb25zdCByZXR1cm5WYWx1ZXMgPSB7XG4gICAgYWxsb3dSYW5nZVJlcXVlc3RzOiBmYWxzZSxcbiAgICBzdWdnZXN0ZWRMZW5ndGg6IHVuZGVmaW5lZCxcbiAgfTtcblxuICBjb25zdCBsZW5ndGggPSBwYXJzZUludChnZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtTGVuZ3RoXCIpLCAxMCk7XG4gIGlmICghTnVtYmVyLmlzSW50ZWdlcihsZW5ndGgpKSB7XG4gICAgcmV0dXJuIHJldHVyblZhbHVlcztcbiAgfVxuXG4gIHJldHVyblZhbHVlcy5zdWdnZXN0ZWRMZW5ndGggPSBsZW5ndGg7XG5cbiAgaWYgKGxlbmd0aCA8PSAyICogcmFuZ2VDaHVua1NpemUpIHtcbiAgICAvLyBUaGUgZmlsZSBzaXplIGlzIHNtYWxsZXIgdGhhbiB0aGUgc2l6ZSBvZiB0d28gY2h1bmtzLCBzbyBpdCBkb2VzIG5vdFxuICAgIC8vIG1ha2UgYW55IHNlbnNlIHRvIGFib3J0IHRoZSByZXF1ZXN0IGFuZCByZXRyeSB3aXRoIGEgcmFuZ2UgcmVxdWVzdC5cbiAgICByZXR1cm4gcmV0dXJuVmFsdWVzO1xuICB9XG5cbiAgaWYgKGRpc2FibGVSYW5nZSB8fCAhaXNIdHRwKSB7XG4gICAgcmV0dXJuIHJldHVyblZhbHVlcztcbiAgfVxuICBpZiAoZ2V0UmVzcG9uc2VIZWFkZXIoXCJBY2NlcHQtUmFuZ2VzXCIpICE9PSBcImJ5dGVzXCIpIHtcbiAgICByZXR1cm4gcmV0dXJuVmFsdWVzO1xuICB9XG5cbiAgY29uc3QgY29udGVudEVuY29kaW5nID0gZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LUVuY29kaW5nXCIpIHx8IFwiaWRlbnRpdHlcIjtcbiAgaWYgKGNvbnRlbnRFbmNvZGluZyAhPT0gXCJpZGVudGl0eVwiKSB7XG4gICAgcmV0dXJuIHJldHVyblZhbHVlcztcbiAgfVxuXG4gIHJldHVyblZhbHVlcy5hbGxvd1JhbmdlUmVxdWVzdHMgPSB0cnVlO1xuICByZXR1cm4gcmV0dXJuVmFsdWVzO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0RmlsZW5hbWVGcm9tSGVhZGVyKGdldFJlc3BvbnNlSGVhZGVyKSB7XG4gIGNvbnN0IGNvbnRlbnREaXNwb3NpdGlvbiA9IGdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1EaXNwb3NpdGlvblwiKTtcbiAgaWYgKGNvbnRlbnREaXNwb3NpdGlvbikge1xuICAgIGxldCBmaWxlbmFtZSA9IGdldEZpbGVuYW1lRnJvbUNvbnRlbnREaXNwb3NpdGlvbkhlYWRlcihjb250ZW50RGlzcG9zaXRpb24pO1xuICAgIGlmIChmaWxlbmFtZS5pbmNsdWRlcyhcIiVcIikpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGZpbGVuYW1lID0gZGVjb2RlVVJJQ29tcG9uZW50KGZpbGVuYW1lKTtcbiAgICAgIH0gY2F0Y2ggKGV4KSB7fVxuICAgIH1cbiAgICBpZiAoaXNQZGZGaWxlKGZpbGVuYW1lKSkge1xuICAgICAgcmV0dXJuIGZpbGVuYW1lO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlUmVzcG9uc2VTdGF0dXNFcnJvcihzdGF0dXMsIHVybCkge1xuICBpZiAoc3RhdHVzID09PSA0MDQgfHwgKHN0YXR1cyA9PT0gMCAmJiB1cmwuc3RhcnRzV2l0aChcImZpbGU6XCIpKSkge1xuICAgIHJldHVybiBuZXcgTWlzc2luZ1BERkV4Y2VwdGlvbignTWlzc2luZyBQREYgXCInICsgdXJsICsgJ1wiLicpO1xuICB9XG4gIHJldHVybiBuZXcgVW5leHBlY3RlZFJlc3BvbnNlRXhjZXB0aW9uKFxuICAgIGBVbmV4cGVjdGVkIHNlcnZlciByZXNwb25zZSAoJHtzdGF0dXN9KSB3aGlsZSByZXRyaWV2aW5nIFBERiBcIiR7dXJsfVwiLmAsXG4gICAgc3RhdHVzXG4gICk7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlUmVzcG9uc2VTdGF0dXMoc3RhdHVzKSB7XG4gIHJldHVybiBzdGF0dXMgPT09IDIwMCB8fCBzdGF0dXMgPT09IDIwNjtcbn1cblxuZXhwb3J0IHtcbiAgY3JlYXRlUmVzcG9uc2VTdGF0dXNFcnJvcixcbiAgZXh0cmFjdEZpbGVuYW1lRnJvbUhlYWRlcixcbiAgdmFsaWRhdGVSYW5nZVJlcXVlc3RDYXBhYmlsaXRpZXMsXG4gIHZhbGlkYXRlUmVzcG9uc2VTdGF0dXMsXG59O1xuIiwgIi8qIENvcHlyaWdodCAyMDE3IE1vemlsbGEgRm91bmRhdGlvblxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBzdHJpbmdUb0J5dGVzIH0gZnJvbSBcIi4uL3NoYXJlZC91dGlsLmpzXCI7XG5cbi8vIFRoaXMgZ2V0RmlsZW5hbWVGcm9tQ29udGVudERpc3Bvc2l0aW9uSGVhZGVyIGZ1bmN0aW9uIGlzIGFkYXB0ZWQgZnJvbVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL1JvYi0tVy9vcGVuLWluLWJyb3dzZXIvYmxvYi83ZTJlMzVhMzhiOGI0ZTk4MWIxMWRhN2IyZjAxZGYwMTQ5MDQ5ZTkyL2V4dGVuc2lvbi9jb250ZW50LWRpc3Bvc2l0aW9uLmpzXG4vLyB3aXRoIHRoZSBmb2xsb3dpbmcgY2hhbmdlczpcbi8vIC0gTW9kaWZpZWQgdG8gY29uZm9ybSB0byBQREYuanMncyBjb2Rpbmcgc3R5bGUuXG4vLyAtIE1vdmUgcmV0dXJuIHRvIHRoZSBlbmQgb2YgdGhlIGZ1bmN0aW9uIHRvIHByZXZlbnQgQmFiZWwgZnJvbSBkcm9wcGluZyB0aGVcbi8vICAgZnVuY3Rpb24gZGVjbGFyYXRpb25zLlxuXG4vKipcbiAqIEV4dHJhY3QgZmlsZSBuYW1lIGZyb20gdGhlIENvbnRlbnQtRGlzcG9zaXRpb24gSFRUUCByZXNwb25zZSBoZWFkZXIuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbnRlbnREaXNwb3NpdGlvblxuICogQHJldHVybnMge3N0cmluZ30gRmlsZW5hbWUsIGlmIGZvdW5kIGluIHRoZSBDb250ZW50LURpc3Bvc2l0aW9uIGhlYWRlci5cbiAqL1xuZnVuY3Rpb24gZ2V0RmlsZW5hbWVGcm9tQ29udGVudERpc3Bvc2l0aW9uSGVhZGVyKGNvbnRlbnREaXNwb3NpdGlvbikge1xuICBsZXQgbmVlZHNFbmNvZGluZ0ZpeHVwID0gdHJ1ZTtcblxuICAvLyBmaWxlbmFtZSo9ZXh0LXZhbHVlIChcImV4dC12YWx1ZVwiIGZyb20gUkZDIDU5ODcsIHJlZmVyZW5jZWQgYnkgUkZDIDYyNjYpLlxuICBsZXQgdG1wID0gdG9QYXJhbVJlZ0V4cChcImZpbGVuYW1lXFxcXCpcIiwgXCJpXCIpLmV4ZWMoY29udGVudERpc3Bvc2l0aW9uKTtcbiAgaWYgKHRtcCkge1xuICAgIHRtcCA9IHRtcFsxXTtcbiAgICBsZXQgZmlsZW5hbWUgPSByZmMyNjE2dW5xdW90ZSh0bXApO1xuICAgIGZpbGVuYW1lID0gdW5lc2NhcGUoZmlsZW5hbWUpO1xuICAgIGZpbGVuYW1lID0gcmZjNTk4N2RlY29kZShmaWxlbmFtZSk7XG4gICAgZmlsZW5hbWUgPSByZmMyMDQ3ZGVjb2RlKGZpbGVuYW1lKTtcbiAgICByZXR1cm4gZml4dXBFbmNvZGluZyhmaWxlbmFtZSk7XG4gIH1cblxuICAvLyBDb250aW51YXRpb25zIChSRkMgMjIzMSBzZWN0aW9uIDMsIHJlZmVyZW5jZWQgYnkgUkZDIDU5ODcgc2VjdGlvbiAzLjEpLlxuICAvLyBmaWxlbmFtZSpuKj1wYXJ0XG4gIC8vIGZpbGVuYW1lKm49cGFydFxuICB0bXAgPSByZmMyMjMxZ2V0cGFyYW0oY29udGVudERpc3Bvc2l0aW9uKTtcbiAgaWYgKHRtcCkge1xuICAgIC8vIFJGQyAyMDQ3LCBzZWN0aW9uXG4gICAgY29uc3QgZmlsZW5hbWUgPSByZmMyMDQ3ZGVjb2RlKHRtcCk7XG4gICAgcmV0dXJuIGZpeHVwRW5jb2RpbmcoZmlsZW5hbWUpO1xuICB9XG5cbiAgLy8gZmlsZW5hbWU9dmFsdWUgKFJGQyA1OTg3LCBzZWN0aW9uIDQuMSkuXG4gIHRtcCA9IHRvUGFyYW1SZWdFeHAoXCJmaWxlbmFtZVwiLCBcImlcIikuZXhlYyhjb250ZW50RGlzcG9zaXRpb24pO1xuICBpZiAodG1wKSB7XG4gICAgdG1wID0gdG1wWzFdO1xuICAgIGxldCBmaWxlbmFtZSA9IHJmYzI2MTZ1bnF1b3RlKHRtcCk7XG4gICAgZmlsZW5hbWUgPSByZmMyMDQ3ZGVjb2RlKGZpbGVuYW1lKTtcbiAgICByZXR1cm4gZml4dXBFbmNvZGluZyhmaWxlbmFtZSk7XG4gIH1cblxuICAvLyBBZnRlciB0aGlzIGxpbmUgdGhlcmUgYXJlIG9ubHkgZnVuY3Rpb24gZGVjbGFyYXRpb25zLiBXZSBjYW5ub3QgcHV0XG4gIC8vIFwicmV0dXJuXCIgaGVyZSBmb3IgcmVhZGFiaWxpdHkgYmVjYXVzZSBiYWJlbCB3b3VsZCB0aGVuIGRyb3AgdGhlIGZ1bmN0aW9uXG4gIC8vIGRlY2xhcmF0aW9ucy4uLlxuICBmdW5jdGlvbiB0b1BhcmFtUmVnRXhwKGF0dHJpYnV0ZVBhdHRlcm4sIGZsYWdzKSB7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoXG4gICAgICBcIig/Ol58OylcXFxccypcIiArXG4gICAgICAgIGF0dHJpYnV0ZVBhdHRlcm4gK1xuICAgICAgICBcIlxcXFxzKj1cXFxccypcIiArXG4gICAgICAgIC8vIENhcHR1cmVzOiB2YWx1ZSA9IHRva2VuIHwgcXVvdGVkLXN0cmluZ1xuICAgICAgICAvLyAoUkZDIDI2MTYsIHNlY3Rpb24gMy42IGFuZCByZWZlcmVuY2VkIGJ5IFJGQyA2MjY2IDQuMSlcbiAgICAgICAgXCIoXCIgK1xuICAgICAgICAnW15cIjtcXFxcc11bXjtcXFxcc10qJyArXG4gICAgICAgIFwifFwiICtcbiAgICAgICAgJ1wiKD86W15cIlxcXFxcXFxcXXxcXFxcXFxcXFwiPykrXCI/JyArXG4gICAgICAgIFwiKVwiLFxuICAgICAgZmxhZ3NcbiAgICApO1xuICB9XG4gIGZ1bmN0aW9uIHRleHRkZWNvZGUoZW5jb2RpbmcsIHZhbHVlKSB7XG4gICAgaWYgKGVuY29kaW5nKSB7XG4gICAgICBpZiAoIS9eW1xceDAwLVxceEZGXSskLy50ZXN0KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKGVuY29kaW5nLCB7IGZhdGFsOiB0cnVlIH0pO1xuICAgICAgICBjb25zdCBidWZmZXIgPSBzdHJpbmdUb0J5dGVzKHZhbHVlKTtcbiAgICAgICAgdmFsdWUgPSBkZWNvZGVyLmRlY29kZShidWZmZXIpO1xuICAgICAgICBuZWVkc0VuY29kaW5nRml4dXAgPSBmYWxzZTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gVGV4dERlY29kZXIgY29uc3RydWN0b3IgdGhyZXcgLSB1bnJlY29nbml6ZWQgZW5jb2RpbmcuXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBmdW5jdGlvbiBmaXh1cEVuY29kaW5nKHZhbHVlKSB7XG4gICAgaWYgKG5lZWRzRW5jb2RpbmdGaXh1cCAmJiAvW1xceDgwLVxceGZmXS8udGVzdCh2YWx1ZSkpIHtcbiAgICAgIC8vIE1heWJlIG11bHRpLWJ5dGUgVVRGLTguXG4gICAgICB2YWx1ZSA9IHRleHRkZWNvZGUoXCJ1dGYtOFwiLCB2YWx1ZSk7XG4gICAgICBpZiAobmVlZHNFbmNvZGluZ0ZpeHVwKSB7XG4gICAgICAgIC8vIFRyeSBpc28tODg1OS0xIGVuY29kaW5nLlxuICAgICAgICB2YWx1ZSA9IHRleHRkZWNvZGUoXCJpc28tODg1OS0xXCIsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGZ1bmN0aW9uIHJmYzIyMzFnZXRwYXJhbShjb250ZW50RGlzcG9zaXRpb25TdHIpIHtcbiAgICBjb25zdCBtYXRjaGVzID0gW107XG4gICAgbGV0IG1hdGNoO1xuICAgIC8vIEl0ZXJhdGUgb3ZlciBhbGwgZmlsZW5hbWUqbj0gYW5kIGZpbGVuYW1lKm4qPSB3aXRoIG4gYmVpbmcgYW4gaW50ZWdlclxuICAgIC8vIG9mIGF0IGxlYXN0IHplcm8uIEFueSBub24temVybyBudW1iZXIgbXVzdCBub3Qgc3RhcnQgd2l0aCAnMCcuXG4gICAgY29uc3QgaXRlciA9IHRvUGFyYW1SZWdFeHAoXCJmaWxlbmFtZVxcXFwqKCg/ITBcXFxcZClcXFxcZCspKFxcXFwqPylcIiwgXCJpZ1wiKTtcbiAgICB3aGlsZSAoKG1hdGNoID0gaXRlci5leGVjKGNvbnRlbnREaXNwb3NpdGlvblN0cikpICE9PSBudWxsKSB7XG4gICAgICBsZXQgWywgbiwgcXVvdCwgcGFydF0gPSBtYXRjaDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBwcmVmZXItY29uc3RcbiAgICAgIG4gPSBwYXJzZUludChuLCAxMCk7XG4gICAgICBpZiAobiBpbiBtYXRjaGVzKSB7XG4gICAgICAgIC8vIElnbm9yZSBhbnl0aGluZyBhZnRlciB0aGUgaW52YWxpZCBzZWNvbmQgZmlsZW5hbWUqMC5cbiAgICAgICAgaWYgKG4gPT09IDApIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIG1hdGNoZXNbbl0gPSBbcXVvdCwgcGFydF07XG4gICAgfVxuICAgIGNvbnN0IHBhcnRzID0gW107XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCBtYXRjaGVzLmxlbmd0aDsgKytuKSB7XG4gICAgICBpZiAoIShuIGluIG1hdGNoZXMpKSB7XG4gICAgICAgIC8vIE51bWJlcnMgbXVzdCBiZSBjb25zZWN1dGl2ZS4gVHJ1bmNhdGUgd2hlbiB0aGVyZSBpcyBhIGhvbGUuXG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgbGV0IFtxdW90LCBwYXJ0XSA9IG1hdGNoZXNbbl07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcHJlZmVyLWNvbnN0XG4gICAgICBwYXJ0ID0gcmZjMjYxNnVucXVvdGUocGFydCk7XG4gICAgICBpZiAocXVvdCkge1xuICAgICAgICBwYXJ0ID0gdW5lc2NhcGUocGFydCk7XG4gICAgICAgIGlmIChuID09PSAwKSB7XG4gICAgICAgICAgcGFydCA9IHJmYzU5ODdkZWNvZGUocGFydCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHBhcnRzLnB1c2gocGFydCk7XG4gICAgfVxuICAgIHJldHVybiBwYXJ0cy5qb2luKFwiXCIpO1xuICB9XG4gIGZ1bmN0aW9uIHJmYzI2MTZ1bnF1b3RlKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlLnN0YXJ0c1dpdGgoJ1wiJykpIHtcbiAgICAgIGNvbnN0IHBhcnRzID0gdmFsdWUuc2xpY2UoMSkuc3BsaXQoJ1xcXFxcIicpO1xuICAgICAgLy8gRmluZCB0aGUgZmlyc3QgdW5lc2NhcGVkIFwiIGFuZCB0ZXJtaW5hdGUgdGhlcmUuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGNvbnN0IHF1b3RpbmRleCA9IHBhcnRzW2ldLmluZGV4T2YoJ1wiJyk7XG4gICAgICAgIGlmIChxdW90aW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgcGFydHNbaV0gPSBwYXJ0c1tpXS5zbGljZSgwLCBxdW90aW5kZXgpO1xuICAgICAgICAgIHBhcnRzLmxlbmd0aCA9IGkgKyAxOyAvLyBUcnVuY2F0ZXMgYW5kIHN0b3AgdGhlIGl0ZXJhdGlvbi5cbiAgICAgICAgfVxuICAgICAgICBwYXJ0c1tpXSA9IHBhcnRzW2ldLnJlcGxhY2UoL1xcXFwoLikvZywgXCIkMVwiKTtcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gcGFydHMuam9pbignXCInKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGZ1bmN0aW9uIHJmYzU5ODdkZWNvZGUoZXh0dmFsdWUpIHtcbiAgICAvLyBEZWNvZGVzIFwiZXh0LXZhbHVlXCIgZnJvbSBSRkMgNTk4Ny5cbiAgICBjb25zdCBlbmNvZGluZ2VuZCA9IGV4dHZhbHVlLmluZGV4T2YoXCInXCIpO1xuICAgIGlmIChlbmNvZGluZ2VuZCA9PT0gLTEpIHtcbiAgICAgIC8vIFNvbWUgc2VydmVycyBzZW5kIFwiZmlsZW5hbWUqPVwiIHdpdGhvdXQgZW5jb2RpbmcgJ2xhbmd1YWdlJyBwcmVmaXgsXG4gICAgICAvLyBlLmcuIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9Sb2ItLVcvb3Blbi1pbi1icm93c2VyL2lzc3Vlcy8yNlxuICAgICAgLy8gTGV0J3MgYWNjZXB0IHRoZSB2YWx1ZSBsaWtlIEZpcmVmb3ggKDU3KSAoQ2hyb21lIDYyIHJlamVjdHMgaXQpLlxuICAgICAgcmV0dXJuIGV4dHZhbHVlO1xuICAgIH1cbiAgICBjb25zdCBlbmNvZGluZyA9IGV4dHZhbHVlLnNsaWNlKDAsIGVuY29kaW5nZW5kKTtcbiAgICBjb25zdCBsYW5ndmFsdWUgPSBleHR2YWx1ZS5zbGljZShlbmNvZGluZ2VuZCArIDEpO1xuICAgIC8vIElnbm9yZSBsYW5ndWFnZSAoUkZDIDU5ODcgc2VjdGlvbiAzLjIuMSwgYW5kIFJGQyA2MjY2IHNlY3Rpb24gNC4xICkuXG4gICAgY29uc3QgdmFsdWUgPSBsYW5ndmFsdWUucmVwbGFjZSgvXlteJ10qJy8sIFwiXCIpO1xuICAgIHJldHVybiB0ZXh0ZGVjb2RlKGVuY29kaW5nLCB2YWx1ZSk7XG4gIH1cbiAgZnVuY3Rpb24gcmZjMjA0N2RlY29kZSh2YWx1ZSkge1xuICAgIC8vIFJGQyAyMDQ3LWRlY29kZSB0aGUgcmVzdWx0LiBGaXJlZm94IHRyaWVkIHRvIGRyb3Agc3VwcG9ydCBmb3IgaXQsIGJ1dFxuICAgIC8vIGJhY2tlZCBvdXQgYmVjYXVzZSBzb21lIHNlcnZlcnMgdXNlIGl0IC0gaHR0cHM6Ly9idWd6aWwubGEvODc1NjE1XG4gICAgLy8gRmlyZWZveCdzIGNvbmRpdGlvbiBmb3IgZGVjb2RpbmcgaXMgaGVyZTogaHR0cHM6Ly9zZWFyY2hmb3gub3JnL21vemlsbGEtY2VudHJhbC9yZXYvNGE1OTBhNWExNWUzNWQ4OGEzYjIzZGQ2YWMzYzQ3MWNmODViMDRhOC9uZXR3ZXJrL21pbWUvbnNNSU1FSGVhZGVyUGFyYW1JbXBsLmNwcCM3NDItNzQ4XG5cbiAgICAvLyBXZSBhcmUgbW9yZSBzdHJpY3QgYW5kIG9ubHkgcmVjb2duaXplIFJGQyAyMDQ3LWVuY29kaW5nIGlmIHRoZSB2YWx1ZVxuICAgIC8vIHN0YXJ0cyB3aXRoIFwiPT9cIiwgc2luY2UgdGhlbiBpdCBpcyBsaWtlbHkgdGhhdCB0aGUgZnVsbCB2YWx1ZSBpc1xuICAgIC8vIFJGQyAyMDQ3LWVuY29kZWQuXG5cbiAgICAvLyBGaXJlZm94IGFsc28gZGVjb2RlcyB3b3JkcyBldmVuIHdoZXJlIFJGQyAyMDQ3IHNlY3Rpb24gNSBzdGF0ZXM6XG4gICAgLy8gXCJBbiAnZW5jb2RlZC13b3JkJyBNVVNUIE5PVCBhcHBlYXIgd2l0aGluIGEgJ3F1b3RlZC1zdHJpbmcnLlwiXG4gICAgaWYgKCF2YWx1ZS5zdGFydHNXaXRoKFwiPT9cIikgfHwgL1tcXHgwMC1cXHgxOVxceDgwLVxceGZmXS8udGVzdCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgLy8gUkZDIDIwNDcsIHNlY3Rpb24gMi40XG4gICAgLy8gZW5jb2RlZC13b3JkID0gXCI9P1wiIGNoYXJzZXQgXCI/XCIgZW5jb2RpbmcgXCI/XCIgZW5jb2RlZC10ZXh0IFwiPz1cIlxuICAgIC8vIGNoYXJzZXQgPSB0b2tlbiAoYnV0IGxldCdzIHJlc3RyaWN0IHRvIGNoYXJhY3RlcnMgdGhhdCBkZW5vdGUgYVxuICAgIC8vICAgICAgIHBvc3NpYmx5IHZhbGlkIGVuY29kaW5nKS5cbiAgICAvLyBlbmNvZGluZyA9IHEgb3IgYlxuICAgIC8vIGVuY29kZWQtdGV4dCA9IGFueSBwcmludGFibGUgQVNDSUkgY2hhcmFjdGVyIG90aGVyIHRoYW4gPyBvciBzcGFjZS5cbiAgICAvLyAgICAgICAgLi4uIGJ1dCBGaXJlZm94IHBlcm1pdHMgPyBhbmQgc3BhY2UuXG4gICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoXG4gICAgICAvPVxcPyhbXFx3LV0qKVxcPyhbUXFCYl0pXFw/KCg/OlteP118XFw/KD8hPSkpKilcXD89L2csXG4gICAgICBmdW5jdGlvbiAobWF0Y2hlcywgY2hhcnNldCwgZW5jb2RpbmcsIHRleHQpIHtcbiAgICAgICAgaWYgKGVuY29kaW5nID09PSBcInFcIiB8fCBlbmNvZGluZyA9PT0gXCJRXCIpIHtcbiAgICAgICAgICAvLyBSRkMgMjA0NyBzZWN0aW9uIDQuMi5cbiAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9fL2csIFwiIFwiKTtcbiAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC89KFswLTlhLWZBLUZdezJ9KS9nLCBmdW5jdGlvbiAobWF0Y2gsIGhleCkge1xuICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoaGV4LCAxNikpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiB0ZXh0ZGVjb2RlKGNoYXJzZXQsIHRleHQpO1xuICAgICAgICB9IC8vIGVsc2UgZW5jb2RpbmcgaXMgYiBvciBCIC0gYmFzZTY0IChSRkMgMjA0NyBzZWN0aW9uIDQuMSlcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0ZXh0ID0gYXRvYih0ZXh0KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgcmV0dXJuIHRleHRkZWNvZGUoY2hhcnNldCwgdGV4dCk7XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBcIlwiO1xufVxuXG5leHBvcnQgeyBnZXRGaWxlbmFtZUZyb21Db250ZW50RGlzcG9zaXRpb25IZWFkZXIgfTtcbiIsICIvKiBDb3B5cmlnaHQgMjAxMiBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgYXNzZXJ0LFxuICBjcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSxcbiAgc3RyaW5nVG9CeXRlcyxcbn0gZnJvbSBcIi4uL3NoYXJlZC91dGlsLmpzXCI7XG5pbXBvcnQge1xuICBjcmVhdGVSZXNwb25zZVN0YXR1c0Vycm9yLFxuICBleHRyYWN0RmlsZW5hbWVGcm9tSGVhZGVyLFxuICB2YWxpZGF0ZVJhbmdlUmVxdWVzdENhcGFiaWxpdGllcyxcbn0gZnJvbSBcIi4vbmV0d29ya191dGlscy5qc1wiO1xuXG5pZiAodHlwZW9mIFBERkpTRGV2ICE9PSBcInVuZGVmaW5lZFwiICYmIFBERkpTRGV2LnRlc3QoXCJNT1pDRU5UUkFMXCIpKSB7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICAnTW9kdWxlIFwiLi9uZXR3b3JrLmpzXCIgc2hhbGwgbm90IGJlIHVzZWQgd2l0aCBNT1pDRU5UUkFMIGJ1aWxkcy4nXG4gICk7XG59XG5cbmNvbnN0IE9LX1JFU1BPTlNFID0gMjAwO1xuY29uc3QgUEFSVElBTF9DT05URU5UX1JFU1BPTlNFID0gMjA2O1xuXG5mdW5jdGlvbiBnZXRBcnJheUJ1ZmZlcih4aHIpIHtcbiAgY29uc3QgZGF0YSA9IHhoci5yZXNwb25zZTtcbiAgaWYgKHR5cGVvZiBkYXRhICE9PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgY29uc3QgYXJyYXkgPSBzdHJpbmdUb0J5dGVzKGRhdGEpO1xuICByZXR1cm4gYXJyYXkuYnVmZmVyO1xufVxuXG5jbGFzcyBOZXR3b3JrTWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKHVybCwgYXJncyA9IHt9KSB7XG4gICAgdGhpcy51cmwgPSB1cmw7XG4gICAgdGhpcy5pc0h0dHAgPSAvXmh0dHBzPzovaS50ZXN0KHVybCk7XG4gICAgdGhpcy5odHRwSGVhZGVycyA9ICh0aGlzLmlzSHR0cCAmJiBhcmdzLmh0dHBIZWFkZXJzKSB8fCBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMud2l0aENyZWRlbnRpYWxzID0gYXJncy53aXRoQ3JlZGVudGlhbHMgfHwgZmFsc2U7XG4gICAgdGhpcy5nZXRYaHIgPVxuICAgICAgYXJncy5nZXRYaHIgfHxcbiAgICAgIGZ1bmN0aW9uIE5ldHdvcmtNYW5hZ2VyX2dldFhocigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgfTtcblxuICAgIHRoaXMuY3VyclhocklkID0gMDtcbiAgICB0aGlzLnBlbmRpbmdSZXF1ZXN0cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH1cblxuICByZXF1ZXN0UmFuZ2UoYmVnaW4sIGVuZCwgbGlzdGVuZXJzKSB7XG4gICAgY29uc3QgYXJncyA9IHtcbiAgICAgIGJlZ2luLFxuICAgICAgZW5kLFxuICAgIH07XG4gICAgZm9yIChjb25zdCBwcm9wIGluIGxpc3RlbmVycykge1xuICAgICAgYXJnc1twcm9wXSA9IGxpc3RlbmVyc1twcm9wXTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChhcmdzKTtcbiAgfVxuXG4gIHJlcXVlc3RGdWxsKGxpc3RlbmVycykge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QobGlzdGVuZXJzKTtcbiAgfVxuXG4gIHJlcXVlc3QoYXJncykge1xuICAgIGNvbnN0IHhociA9IHRoaXMuZ2V0WGhyKCk7XG4gICAgY29uc3QgeGhySWQgPSB0aGlzLmN1cnJYaHJJZCsrO1xuICAgIGNvbnN0IHBlbmRpbmdSZXF1ZXN0ID0gKHRoaXMucGVuZGluZ1JlcXVlc3RzW3hocklkXSA9IHsgeGhyIH0pO1xuXG4gICAgeGhyLm9wZW4oXCJHRVRcIiwgdGhpcy51cmwpO1xuICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0aGlzLndpdGhDcmVkZW50aWFscztcbiAgICBmb3IgKGNvbnN0IHByb3BlcnR5IGluIHRoaXMuaHR0cEhlYWRlcnMpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5odHRwSGVhZGVyc1twcm9wZXJ0eV07XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIocHJvcGVydHksIHZhbHVlKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaXNIdHRwICYmIFwiYmVnaW5cIiBpbiBhcmdzICYmIFwiZW5kXCIgaW4gYXJncykge1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJSYW5nZVwiLCBgYnl0ZXM9JHthcmdzLmJlZ2lufS0ke2FyZ3MuZW5kIC0gMX1gKTtcbiAgICAgIHBlbmRpbmdSZXF1ZXN0LmV4cGVjdGVkU3RhdHVzID0gUEFSVElBTF9DT05URU5UX1JFU1BPTlNFO1xuICAgIH0gZWxzZSB7XG4gICAgICBwZW5kaW5nUmVxdWVzdC5leHBlY3RlZFN0YXR1cyA9IE9LX1JFU1BPTlNFO1xuICAgIH1cbiAgICB4aHIucmVzcG9uc2VUeXBlID0gXCJhcnJheWJ1ZmZlclwiO1xuXG4gICAgaWYgKGFyZ3Mub25FcnJvcikge1xuICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgIGFyZ3Mub25FcnJvcih4aHIuc3RhdHVzKTtcbiAgICAgIH07XG4gICAgfVxuICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSB0aGlzLm9uU3RhdGVDaGFuZ2UuYmluZCh0aGlzLCB4aHJJZCk7XG4gICAgeGhyLm9ucHJvZ3Jlc3MgPSB0aGlzLm9uUHJvZ3Jlc3MuYmluZCh0aGlzLCB4aHJJZCk7XG5cbiAgICBwZW5kaW5nUmVxdWVzdC5vbkhlYWRlcnNSZWNlaXZlZCA9IGFyZ3Mub25IZWFkZXJzUmVjZWl2ZWQ7XG4gICAgcGVuZGluZ1JlcXVlc3Qub25Eb25lID0gYXJncy5vbkRvbmU7XG4gICAgcGVuZGluZ1JlcXVlc3Qub25FcnJvciA9IGFyZ3Mub25FcnJvcjtcbiAgICBwZW5kaW5nUmVxdWVzdC5vblByb2dyZXNzID0gYXJncy5vblByb2dyZXNzO1xuXG4gICAgeGhyLnNlbmQobnVsbCk7XG5cbiAgICByZXR1cm4geGhySWQ7XG4gIH1cblxuICBvblByb2dyZXNzKHhocklkLCBldnQpIHtcbiAgICBjb25zdCBwZW5kaW5nUmVxdWVzdCA9IHRoaXMucGVuZGluZ1JlcXVlc3RzW3hocklkXTtcbiAgICBpZiAoIXBlbmRpbmdSZXF1ZXN0KSB7XG4gICAgICByZXR1cm47IC8vIE1heWJlIGFib3J0UmVxdWVzdCB3YXMgY2FsbGVkLi4uXG4gICAgfVxuICAgIHBlbmRpbmdSZXF1ZXN0Lm9uUHJvZ3Jlc3M/LihldnQpO1xuICB9XG5cbiAgb25TdGF0ZUNoYW5nZSh4aHJJZCwgZXZ0KSB7XG4gICAgY29uc3QgcGVuZGluZ1JlcXVlc3QgPSB0aGlzLnBlbmRpbmdSZXF1ZXN0c1t4aHJJZF07XG4gICAgaWYgKCFwZW5kaW5nUmVxdWVzdCkge1xuICAgICAgcmV0dXJuOyAvLyBNYXliZSBhYm9ydFJlcXVlc3Qgd2FzIGNhbGxlZC4uLlxuICAgIH1cblxuICAgIGNvbnN0IHhociA9IHBlbmRpbmdSZXF1ZXN0LnhocjtcbiAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPj0gMiAmJiBwZW5kaW5nUmVxdWVzdC5vbkhlYWRlcnNSZWNlaXZlZCkge1xuICAgICAgcGVuZGluZ1JlcXVlc3Qub25IZWFkZXJzUmVjZWl2ZWQoKTtcbiAgICAgIGRlbGV0ZSBwZW5kaW5nUmVxdWVzdC5vbkhlYWRlcnNSZWNlaXZlZDtcbiAgICB9XG5cbiAgICBpZiAoeGhyLnJlYWR5U3RhdGUgIT09IDQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoISh4aHJJZCBpbiB0aGlzLnBlbmRpbmdSZXF1ZXN0cykpIHtcbiAgICAgIC8vIFRoZSBYSFIgcmVxdWVzdCBtaWdodCBoYXZlIGJlZW4gYWJvcnRlZCBpbiBvbkhlYWRlcnNSZWNlaXZlZCgpXG4gICAgICAvLyBjYWxsYmFjaywgaW4gd2hpY2ggY2FzZSB3ZSBzaG91bGQgYWJvcnQgcmVxdWVzdC5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBkZWxldGUgdGhpcy5wZW5kaW5nUmVxdWVzdHNbeGhySWRdO1xuXG4gICAgLy8gU3VjY2VzcyBzdGF0dXMgPT0gMCBjYW4gYmUgb24gZnRwLCBmaWxlIGFuZCBvdGhlciBwcm90b2NvbHMuXG4gICAgaWYgKHhoci5zdGF0dXMgPT09IDAgJiYgdGhpcy5pc0h0dHApIHtcbiAgICAgIHBlbmRpbmdSZXF1ZXN0Lm9uRXJyb3I/Lih4aHIuc3RhdHVzKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgeGhyU3RhdHVzID0geGhyLnN0YXR1cyB8fCBPS19SRVNQT05TRTtcblxuICAgIC8vIEZyb20gaHR0cDovL3d3dy53My5vcmcvUHJvdG9jb2xzL3JmYzI2MTYvcmZjMjYxNi1zZWMxNC5odG1sI3NlYzE0LjM1LjI6XG4gICAgLy8gXCJBIHNlcnZlciBNQVkgaWdub3JlIHRoZSBSYW5nZSBoZWFkZXJcIi4gVGhpcyBtZWFucyBpdCdzIHBvc3NpYmxlIHRvXG4gICAgLy8gZ2V0IGEgMjAwIHJhdGhlciB0aGFuIGEgMjA2IHJlc3BvbnNlIGZyb20gYSByYW5nZSByZXF1ZXN0LlxuICAgIGNvbnN0IG9rX3Jlc3BvbnNlX29uX3JhbmdlX3JlcXVlc3QgPVxuICAgICAgeGhyU3RhdHVzID09PSBPS19SRVNQT05TRSAmJlxuICAgICAgcGVuZGluZ1JlcXVlc3QuZXhwZWN0ZWRTdGF0dXMgPT09IFBBUlRJQUxfQ09OVEVOVF9SRVNQT05TRTtcblxuICAgIGlmIChcbiAgICAgICFva19yZXNwb25zZV9vbl9yYW5nZV9yZXF1ZXN0ICYmXG4gICAgICB4aHJTdGF0dXMgIT09IHBlbmRpbmdSZXF1ZXN0LmV4cGVjdGVkU3RhdHVzXG4gICAgKSB7XG4gICAgICBwZW5kaW5nUmVxdWVzdC5vbkVycm9yPy4oeGhyLnN0YXR1cyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY2h1bmsgPSBnZXRBcnJheUJ1ZmZlcih4aHIpO1xuICAgIGlmICh4aHJTdGF0dXMgPT09IFBBUlRJQUxfQ09OVEVOVF9SRVNQT05TRSkge1xuICAgICAgY29uc3QgcmFuZ2VIZWFkZXIgPSB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LVJhbmdlXCIpO1xuICAgICAgY29uc3QgbWF0Y2hlcyA9IC9ieXRlcyAoXFxkKyktKFxcZCspXFwvKFxcZCspLy5leGVjKHJhbmdlSGVhZGVyKTtcbiAgICAgIHBlbmRpbmdSZXF1ZXN0Lm9uRG9uZSh7XG4gICAgICAgIGJlZ2luOiBwYXJzZUludChtYXRjaGVzWzFdLCAxMCksXG4gICAgICAgIGNodW5rLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChjaHVuaykge1xuICAgICAgcGVuZGluZ1JlcXVlc3Qub25Eb25lKHtcbiAgICAgICAgYmVnaW46IDAsXG4gICAgICAgIGNodW5rLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBlbmRpbmdSZXF1ZXN0Lm9uRXJyb3I/Lih4aHIuc3RhdHVzKTtcbiAgICB9XG4gIH1cblxuICBnZXRSZXF1ZXN0WGhyKHhocklkKSB7XG4gICAgcmV0dXJuIHRoaXMucGVuZGluZ1JlcXVlc3RzW3hocklkXS54aHI7XG4gIH1cblxuICBpc1BlbmRpbmdSZXF1ZXN0KHhocklkKSB7XG4gICAgcmV0dXJuIHhocklkIGluIHRoaXMucGVuZGluZ1JlcXVlc3RzO1xuICB9XG5cbiAgYWJvcnRSZXF1ZXN0KHhocklkKSB7XG4gICAgY29uc3QgeGhyID0gdGhpcy5wZW5kaW5nUmVxdWVzdHNbeGhySWRdLnhocjtcbiAgICBkZWxldGUgdGhpcy5wZW5kaW5nUmVxdWVzdHNbeGhySWRdO1xuICAgIHhoci5hYm9ydCgpO1xuICB9XG59XG5cbi8qKiBAaW1wbGVtZW50cyB7SVBERlN0cmVhbX0gKi9cbmNsYXNzIFBERk5ldHdvcmtTdHJlYW0ge1xuICBjb25zdHJ1Y3Rvcihzb3VyY2UpIHtcbiAgICB0aGlzLl9zb3VyY2UgPSBzb3VyY2U7XG4gICAgdGhpcy5fbWFuYWdlciA9IG5ldyBOZXR3b3JrTWFuYWdlcihzb3VyY2UudXJsLCB7XG4gICAgICBodHRwSGVhZGVyczogc291cmNlLmh0dHBIZWFkZXJzLFxuICAgICAgd2l0aENyZWRlbnRpYWxzOiBzb3VyY2Uud2l0aENyZWRlbnRpYWxzLFxuICAgIH0pO1xuICAgIHRoaXMuX3JhbmdlQ2h1bmtTaXplID0gc291cmNlLnJhbmdlQ2h1bmtTaXplO1xuICAgIHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyID0gbnVsbDtcbiAgICB0aGlzLl9yYW5nZVJlcXVlc3RSZWFkZXJzID0gW107XG4gIH1cblxuICBfb25SYW5nZVJlcXVlc3RSZWFkZXJDbG9zZWQocmVhZGVyKSB7XG4gICAgY29uc3QgaSA9IHRoaXMuX3JhbmdlUmVxdWVzdFJlYWRlcnMuaW5kZXhPZihyZWFkZXIpO1xuICAgIGlmIChpID49IDApIHtcbiAgICAgIHRoaXMuX3JhbmdlUmVxdWVzdFJlYWRlcnMuc3BsaWNlKGksIDEpO1xuICAgIH1cbiAgfVxuXG4gIGdldEZ1bGxSZWFkZXIoKSB7XG4gICAgYXNzZXJ0KFxuICAgICAgIXRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyLFxuICAgICAgXCJQREZOZXR3b3JrU3RyZWFtLmdldEZ1bGxSZWFkZXIgY2FuIG9ubHkgYmUgY2FsbGVkIG9uY2UuXCJcbiAgICApO1xuICAgIHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyID0gbmV3IFBERk5ldHdvcmtTdHJlYW1GdWxsUmVxdWVzdFJlYWRlcihcbiAgICAgIHRoaXMuX21hbmFnZXIsXG4gICAgICB0aGlzLl9zb3VyY2VcbiAgICApO1xuICAgIHJldHVybiB0aGlzLl9mdWxsUmVxdWVzdFJlYWRlcjtcbiAgfVxuXG4gIGdldFJhbmdlUmVhZGVyKGJlZ2luLCBlbmQpIHtcbiAgICBjb25zdCByZWFkZXIgPSBuZXcgUERGTmV0d29ya1N0cmVhbVJhbmdlUmVxdWVzdFJlYWRlcihcbiAgICAgIHRoaXMuX21hbmFnZXIsXG4gICAgICBiZWdpbixcbiAgICAgIGVuZFxuICAgICk7XG4gICAgcmVhZGVyLm9uQ2xvc2VkID0gdGhpcy5fb25SYW5nZVJlcXVlc3RSZWFkZXJDbG9zZWQuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9yYW5nZVJlcXVlc3RSZWFkZXJzLnB1c2gocmVhZGVyKTtcbiAgICByZXR1cm4gcmVhZGVyO1xuICB9XG5cbiAgY2FuY2VsQWxsUmVxdWVzdHMocmVhc29uKSB7XG4gICAgdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXI/LmNhbmNlbChyZWFzb24pO1xuXG4gICAgZm9yIChjb25zdCByZWFkZXIgb2YgdGhpcy5fcmFuZ2VSZXF1ZXN0UmVhZGVycy5zbGljZSgwKSkge1xuICAgICAgcmVhZGVyLmNhbmNlbChyZWFzb24pO1xuICAgIH1cbiAgfVxufVxuXG4vKiogQGltcGxlbWVudHMge0lQREZTdHJlYW1SZWFkZXJ9ICovXG5jbGFzcyBQREZOZXR3b3JrU3RyZWFtRnVsbFJlcXVlc3RSZWFkZXIge1xuICBjb25zdHJ1Y3RvcihtYW5hZ2VyLCBzb3VyY2UpIHtcbiAgICB0aGlzLl9tYW5hZ2VyID0gbWFuYWdlcjtcblxuICAgIGNvbnN0IGFyZ3MgPSB7XG4gICAgICBvbkhlYWRlcnNSZWNlaXZlZDogdGhpcy5fb25IZWFkZXJzUmVjZWl2ZWQuYmluZCh0aGlzKSxcbiAgICAgIG9uRG9uZTogdGhpcy5fb25Eb25lLmJpbmQodGhpcyksXG4gICAgICBvbkVycm9yOiB0aGlzLl9vbkVycm9yLmJpbmQodGhpcyksXG4gICAgICBvblByb2dyZXNzOiB0aGlzLl9vblByb2dyZXNzLmJpbmQodGhpcyksXG4gICAgfTtcbiAgICB0aGlzLl91cmwgPSBzb3VyY2UudXJsO1xuICAgIHRoaXMuX2Z1bGxSZXF1ZXN0SWQgPSBtYW5hZ2VyLnJlcXVlc3RGdWxsKGFyZ3MpO1xuICAgIHRoaXMuX2hlYWRlcnNSZWNlaXZlZENhcGFiaWxpdHkgPSBjcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSgpO1xuICAgIHRoaXMuX2Rpc2FibGVSYW5nZSA9IHNvdXJjZS5kaXNhYmxlUmFuZ2UgfHwgZmFsc2U7XG4gICAgdGhpcy5fY29udGVudExlbmd0aCA9IHNvdXJjZS5sZW5ndGg7IC8vIE9wdGlvbmFsXG4gICAgdGhpcy5fcmFuZ2VDaHVua1NpemUgPSBzb3VyY2UucmFuZ2VDaHVua1NpemU7XG4gICAgaWYgKCF0aGlzLl9yYW5nZUNodW5rU2l6ZSAmJiAhdGhpcy5fZGlzYWJsZVJhbmdlKSB7XG4gICAgICB0aGlzLl9kaXNhYmxlUmFuZ2UgPSB0cnVlO1xuICAgIH1cblxuICAgIHRoaXMuX2lzU3RyZWFtaW5nU3VwcG9ydGVkID0gZmFsc2U7XG4gICAgdGhpcy5faXNSYW5nZVN1cHBvcnRlZCA9IGZhbHNlO1xuXG4gICAgdGhpcy5fY2FjaGVkQ2h1bmtzID0gW107XG4gICAgdGhpcy5fcmVxdWVzdHMgPSBbXTtcbiAgICB0aGlzLl9kb25lID0gZmFsc2U7XG4gICAgdGhpcy5fc3RvcmVkRXJyb3IgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fZmlsZW5hbWUgPSBudWxsO1xuXG4gICAgdGhpcy5vblByb2dyZXNzID0gbnVsbDtcbiAgfVxuXG4gIF9vbkhlYWRlcnNSZWNlaXZlZCgpIHtcbiAgICBjb25zdCBmdWxsUmVxdWVzdFhocklkID0gdGhpcy5fZnVsbFJlcXVlc3RJZDtcbiAgICBjb25zdCBmdWxsUmVxdWVzdFhociA9IHRoaXMuX21hbmFnZXIuZ2V0UmVxdWVzdFhocihmdWxsUmVxdWVzdFhocklkKTtcblxuICAgIGNvbnN0IGdldFJlc3BvbnNlSGVhZGVyID0gbmFtZSA9PiB7XG4gICAgICByZXR1cm4gZnVsbFJlcXVlc3RYaHIuZ2V0UmVzcG9uc2VIZWFkZXIobmFtZSk7XG4gICAgfTtcbiAgICBjb25zdCB7IGFsbG93UmFuZ2VSZXF1ZXN0cywgc3VnZ2VzdGVkTGVuZ3RoIH0gPVxuICAgICAgdmFsaWRhdGVSYW5nZVJlcXVlc3RDYXBhYmlsaXRpZXMoe1xuICAgICAgICBnZXRSZXNwb25zZUhlYWRlcixcbiAgICAgICAgaXNIdHRwOiB0aGlzLl9tYW5hZ2VyLmlzSHR0cCxcbiAgICAgICAgcmFuZ2VDaHVua1NpemU6IHRoaXMuX3JhbmdlQ2h1bmtTaXplLFxuICAgICAgICBkaXNhYmxlUmFuZ2U6IHRoaXMuX2Rpc2FibGVSYW5nZSxcbiAgICAgIH0pO1xuXG4gICAgaWYgKGFsbG93UmFuZ2VSZXF1ZXN0cykge1xuICAgICAgdGhpcy5faXNSYW5nZVN1cHBvcnRlZCA9IHRydWU7XG4gICAgfVxuICAgIC8vIFNldHRpbmcgcmlnaHQgY29udGVudCBsZW5ndGguXG4gICAgdGhpcy5fY29udGVudExlbmd0aCA9IHN1Z2dlc3RlZExlbmd0aCB8fCB0aGlzLl9jb250ZW50TGVuZ3RoO1xuXG4gICAgdGhpcy5fZmlsZW5hbWUgPSBleHRyYWN0RmlsZW5hbWVGcm9tSGVhZGVyKGdldFJlc3BvbnNlSGVhZGVyKTtcblxuICAgIGlmICh0aGlzLl9pc1JhbmdlU3VwcG9ydGVkKSB7XG4gICAgICAvLyBOT1RFOiBieSBjYW5jZWxsaW5nIHRoZSBmdWxsIHJlcXVlc3QsIGFuZCB0aGVuIGlzc3VpbmcgcmFuZ2VcbiAgICAgIC8vIHJlcXVlc3RzLCB0aGVyZSB3aWxsIGJlIGFuIGlzc3VlIGZvciBzaXRlcyB3aGVyZSB5b3UgY2FuIG9ubHlcbiAgICAgIC8vIHJlcXVlc3QgdGhlIHBkZiBvbmNlLiBIb3dldmVyLCBpZiB0aGlzIGlzIHRoZSBjYXNlLCB0aGVuIHRoZVxuICAgICAgLy8gc2VydmVyIHNob3VsZCBub3QgYmUgcmV0dXJuaW5nIHRoYXQgaXQgY2FuIHN1cHBvcnQgcmFuZ2UgcmVxdWVzdHMuXG4gICAgICB0aGlzLl9tYW5hZ2VyLmFib3J0UmVxdWVzdChmdWxsUmVxdWVzdFhocklkKTtcbiAgICB9XG5cbiAgICB0aGlzLl9oZWFkZXJzUmVjZWl2ZWRDYXBhYmlsaXR5LnJlc29sdmUoKTtcbiAgfVxuXG4gIF9vbkRvbmUoZGF0YSkge1xuICAgIGlmIChkYXRhKSB7XG4gICAgICBpZiAodGhpcy5fcmVxdWVzdHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCByZXF1ZXN0Q2FwYWJpbGl0eSA9IHRoaXMuX3JlcXVlc3RzLnNoaWZ0KCk7XG4gICAgICAgIHJlcXVlc3RDYXBhYmlsaXR5LnJlc29sdmUoeyB2YWx1ZTogZGF0YS5jaHVuaywgZG9uZTogZmFsc2UgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9jYWNoZWRDaHVua3MucHVzaChkYXRhLmNodW5rKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fZG9uZSA9IHRydWU7XG4gICAgaWYgKHRoaXMuX2NhY2hlZENodW5rcy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvciAoY29uc3QgcmVxdWVzdENhcGFiaWxpdHkgb2YgdGhpcy5fcmVxdWVzdHMpIHtcbiAgICAgIHJlcXVlc3RDYXBhYmlsaXR5LnJlc29sdmUoeyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH0pO1xuICAgIH1cbiAgICB0aGlzLl9yZXF1ZXN0cy5sZW5ndGggPSAwO1xuICB9XG5cbiAgX29uRXJyb3Ioc3RhdHVzKSB7XG4gICAgdGhpcy5fc3RvcmVkRXJyb3IgPSBjcmVhdGVSZXNwb25zZVN0YXR1c0Vycm9yKHN0YXR1cywgdGhpcy5fdXJsKTtcbiAgICB0aGlzLl9oZWFkZXJzUmVjZWl2ZWRDYXBhYmlsaXR5LnJlamVjdCh0aGlzLl9zdG9yZWRFcnJvcik7XG4gICAgZm9yIChjb25zdCByZXF1ZXN0Q2FwYWJpbGl0eSBvZiB0aGlzLl9yZXF1ZXN0cykge1xuICAgICAgcmVxdWVzdENhcGFiaWxpdHkucmVqZWN0KHRoaXMuX3N0b3JlZEVycm9yKTtcbiAgICB9XG4gICAgdGhpcy5fcmVxdWVzdHMubGVuZ3RoID0gMDtcbiAgICB0aGlzLl9jYWNoZWRDaHVua3MubGVuZ3RoID0gMDtcbiAgfVxuXG4gIF9vblByb2dyZXNzKGV2dCkge1xuICAgIHRoaXMub25Qcm9ncmVzcz8uKHtcbiAgICAgIGxvYWRlZDogZXZ0LmxvYWRlZCxcbiAgICAgIHRvdGFsOiBldnQubGVuZ3RoQ29tcHV0YWJsZSA/IGV2dC50b3RhbCA6IHRoaXMuX2NvbnRlbnRMZW5ndGgsXG4gICAgfSk7XG4gIH1cblxuICBnZXQgZmlsZW5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZpbGVuYW1lO1xuICB9XG5cbiAgZ2V0IGlzUmFuZ2VTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzUmFuZ2VTdXBwb3J0ZWQ7XG4gIH1cblxuICBnZXQgaXNTdHJlYW1pbmdTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzU3RyZWFtaW5nU3VwcG9ydGVkO1xuICB9XG5cbiAgZ2V0IGNvbnRlbnRMZW5ndGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbnRlbnRMZW5ndGg7XG4gIH1cblxuICBnZXQgaGVhZGVyc1JlYWR5KCkge1xuICAgIHJldHVybiB0aGlzLl9oZWFkZXJzUmVjZWl2ZWRDYXBhYmlsaXR5LnByb21pc2U7XG4gIH1cblxuICBhc3luYyByZWFkKCkge1xuICAgIGlmICh0aGlzLl9zdG9yZWRFcnJvcikge1xuICAgICAgdGhyb3cgdGhpcy5fc3RvcmVkRXJyb3I7XG4gICAgfVxuICAgIGlmICh0aGlzLl9jYWNoZWRDaHVua3MubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgY2h1bmsgPSB0aGlzLl9jYWNoZWRDaHVua3Muc2hpZnQoKTtcbiAgICAgIHJldHVybiB7IHZhbHVlOiBjaHVuaywgZG9uZTogZmFsc2UgfTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2RvbmUpIHtcbiAgICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgICB9XG4gICAgY29uc3QgcmVxdWVzdENhcGFiaWxpdHkgPSBjcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSgpO1xuICAgIHRoaXMuX3JlcXVlc3RzLnB1c2gocmVxdWVzdENhcGFiaWxpdHkpO1xuICAgIHJldHVybiByZXF1ZXN0Q2FwYWJpbGl0eS5wcm9taXNlO1xuICB9XG5cbiAgY2FuY2VsKHJlYXNvbikge1xuICAgIHRoaXMuX2RvbmUgPSB0cnVlO1xuICAgIHRoaXMuX2hlYWRlcnNSZWNlaXZlZENhcGFiaWxpdHkucmVqZWN0KHJlYXNvbik7XG4gICAgZm9yIChjb25zdCByZXF1ZXN0Q2FwYWJpbGl0eSBvZiB0aGlzLl9yZXF1ZXN0cykge1xuICAgICAgcmVxdWVzdENhcGFiaWxpdHkucmVzb2x2ZSh7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfSk7XG4gICAgfVxuICAgIHRoaXMuX3JlcXVlc3RzLmxlbmd0aCA9IDA7XG4gICAgaWYgKHRoaXMuX21hbmFnZXIuaXNQZW5kaW5nUmVxdWVzdCh0aGlzLl9mdWxsUmVxdWVzdElkKSkge1xuICAgICAgdGhpcy5fbWFuYWdlci5hYm9ydFJlcXVlc3QodGhpcy5fZnVsbFJlcXVlc3RJZCk7XG4gICAgfVxuICAgIHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyID0gbnVsbDtcbiAgfVxufVxuXG4vKiogQGltcGxlbWVudHMge0lQREZTdHJlYW1SYW5nZVJlYWRlcn0gKi9cbmNsYXNzIFBERk5ldHdvcmtTdHJlYW1SYW5nZVJlcXVlc3RSZWFkZXIge1xuICBjb25zdHJ1Y3RvcihtYW5hZ2VyLCBiZWdpbiwgZW5kKSB7XG4gICAgdGhpcy5fbWFuYWdlciA9IG1hbmFnZXI7XG5cbiAgICBjb25zdCBhcmdzID0ge1xuICAgICAgb25Eb25lOiB0aGlzLl9vbkRvbmUuYmluZCh0aGlzKSxcbiAgICAgIG9uRXJyb3I6IHRoaXMuX29uRXJyb3IuYmluZCh0aGlzKSxcbiAgICAgIG9uUHJvZ3Jlc3M6IHRoaXMuX29uUHJvZ3Jlc3MuYmluZCh0aGlzKSxcbiAgICB9O1xuICAgIHRoaXMuX3VybCA9IG1hbmFnZXIudXJsO1xuICAgIHRoaXMuX3JlcXVlc3RJZCA9IG1hbmFnZXIucmVxdWVzdFJhbmdlKGJlZ2luLCBlbmQsIGFyZ3MpO1xuICAgIHRoaXMuX3JlcXVlc3RzID0gW107XG4gICAgdGhpcy5fcXVldWVkQ2h1bmsgPSBudWxsO1xuICAgIHRoaXMuX2RvbmUgPSBmYWxzZTtcbiAgICB0aGlzLl9zdG9yZWRFcnJvciA9IHVuZGVmaW5lZDtcblxuICAgIHRoaXMub25Qcm9ncmVzcyA9IG51bGw7XG4gICAgdGhpcy5vbkNsb3NlZCA9IG51bGw7XG4gIH1cblxuICBfY2xvc2UoKSB7XG4gICAgdGhpcy5vbkNsb3NlZD8uKHRoaXMpO1xuICB9XG5cbiAgX29uRG9uZShkYXRhKSB7XG4gICAgY29uc3QgY2h1bmsgPSBkYXRhLmNodW5rO1xuICAgIGlmICh0aGlzLl9yZXF1ZXN0cy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCByZXF1ZXN0Q2FwYWJpbGl0eSA9IHRoaXMuX3JlcXVlc3RzLnNoaWZ0KCk7XG4gICAgICByZXF1ZXN0Q2FwYWJpbGl0eS5yZXNvbHZlKHsgdmFsdWU6IGNodW5rLCBkb25lOiBmYWxzZSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcXVldWVkQ2h1bmsgPSBjaHVuaztcbiAgICB9XG4gICAgdGhpcy5fZG9uZSA9IHRydWU7XG4gICAgZm9yIChjb25zdCByZXF1ZXN0Q2FwYWJpbGl0eSBvZiB0aGlzLl9yZXF1ZXN0cykge1xuICAgICAgcmVxdWVzdENhcGFiaWxpdHkucmVzb2x2ZSh7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfSk7XG4gICAgfVxuICAgIHRoaXMuX3JlcXVlc3RzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5fY2xvc2UoKTtcbiAgfVxuXG4gIF9vbkVycm9yKHN0YXR1cykge1xuICAgIHRoaXMuX3N0b3JlZEVycm9yID0gY3JlYXRlUmVzcG9uc2VTdGF0dXNFcnJvcihzdGF0dXMsIHRoaXMuX3VybCk7XG4gICAgZm9yIChjb25zdCByZXF1ZXN0Q2FwYWJpbGl0eSBvZiB0aGlzLl9yZXF1ZXN0cykge1xuICAgICAgcmVxdWVzdENhcGFiaWxpdHkucmVqZWN0KHRoaXMuX3N0b3JlZEVycm9yKTtcbiAgICB9XG4gICAgdGhpcy5fcmVxdWVzdHMubGVuZ3RoID0gMDtcbiAgICB0aGlzLl9xdWV1ZWRDaHVuayA9IG51bGw7XG4gIH1cblxuICBfb25Qcm9ncmVzcyhldnQpIHtcbiAgICBpZiAoIXRoaXMuaXNTdHJlYW1pbmdTdXBwb3J0ZWQpIHtcbiAgICAgIHRoaXMub25Qcm9ncmVzcz8uKHsgbG9hZGVkOiBldnQubG9hZGVkIH0pO1xuICAgIH1cbiAgfVxuXG4gIGdldCBpc1N0cmVhbWluZ1N1cHBvcnRlZCgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBhc3luYyByZWFkKCkge1xuICAgIGlmICh0aGlzLl9zdG9yZWRFcnJvcikge1xuICAgICAgdGhyb3cgdGhpcy5fc3RvcmVkRXJyb3I7XG4gICAgfVxuICAgIGlmICh0aGlzLl9xdWV1ZWRDaHVuayAhPT0gbnVsbCkge1xuICAgICAgY29uc3QgY2h1bmsgPSB0aGlzLl9xdWV1ZWRDaHVuaztcbiAgICAgIHRoaXMuX3F1ZXVlZENodW5rID0gbnVsbDtcbiAgICAgIHJldHVybiB7IHZhbHVlOiBjaHVuaywgZG9uZTogZmFsc2UgfTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2RvbmUpIHtcbiAgICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgICB9XG4gICAgY29uc3QgcmVxdWVzdENhcGFiaWxpdHkgPSBjcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSgpO1xuICAgIHRoaXMuX3JlcXVlc3RzLnB1c2gocmVxdWVzdENhcGFiaWxpdHkpO1xuICAgIHJldHVybiByZXF1ZXN0Q2FwYWJpbGl0eS5wcm9taXNlO1xuICB9XG5cbiAgY2FuY2VsKHJlYXNvbikge1xuICAgIHRoaXMuX2RvbmUgPSB0cnVlO1xuICAgIGZvciAoY29uc3QgcmVxdWVzdENhcGFiaWxpdHkgb2YgdGhpcy5fcmVxdWVzdHMpIHtcbiAgICAgIHJlcXVlc3RDYXBhYmlsaXR5LnJlc29sdmUoeyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH0pO1xuICAgIH1cbiAgICB0aGlzLl9yZXF1ZXN0cy5sZW5ndGggPSAwO1xuICAgIGlmICh0aGlzLl9tYW5hZ2VyLmlzUGVuZGluZ1JlcXVlc3QodGhpcy5fcmVxdWVzdElkKSkge1xuICAgICAgdGhpcy5fbWFuYWdlci5hYm9ydFJlcXVlc3QodGhpcy5fcmVxdWVzdElkKTtcbiAgICB9XG4gICAgdGhpcy5fY2xvc2UoKTtcbiAgfVxufVxuXG5leHBvcnQgeyBQREZOZXR3b3JrU3RyZWFtIH07XG4iLCAiLyogQ29weXJpZ2h0IDIwMTIgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIEFib3J0RXhjZXB0aW9uLFxuICBhc3NlcnQsXG4gIGNyZWF0ZVByb21pc2VDYXBhYmlsaXR5LFxufSBmcm9tIFwiLi4vc2hhcmVkL3V0aWwuanNcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZVJlc3BvbnNlU3RhdHVzRXJyb3IsXG4gIGV4dHJhY3RGaWxlbmFtZUZyb21IZWFkZXIsXG4gIHZhbGlkYXRlUmFuZ2VSZXF1ZXN0Q2FwYWJpbGl0aWVzLFxuICB2YWxpZGF0ZVJlc3BvbnNlU3RhdHVzLFxufSBmcm9tIFwiLi9uZXR3b3JrX3V0aWxzLmpzXCI7XG5cbmlmICh0eXBlb2YgUERGSlNEZXYgIT09IFwidW5kZWZpbmVkXCIgJiYgUERGSlNEZXYudGVzdChcIk1PWkNFTlRSQUxcIikpIHtcbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgICdNb2R1bGUgXCIuL2ZldGNoX3N0cmVhbS5qc1wiIHNoYWxsIG5vdCBiZSB1c2VkIHdpdGggTU9aQ0VOVFJBTCBidWlsZHMuJ1xuICApO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVGZXRjaE9wdGlvbnMoaGVhZGVycywgd2l0aENyZWRlbnRpYWxzLCBhYm9ydENvbnRyb2xsZXIpIHtcbiAgcmV0dXJuIHtcbiAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgaGVhZGVycyxcbiAgICBzaWduYWw6IGFib3J0Q29udHJvbGxlcj8uc2lnbmFsLFxuICAgIG1vZGU6IFwiY29yc1wiLFxuICAgIGNyZWRlbnRpYWxzOiB3aXRoQ3JlZGVudGlhbHMgPyBcImluY2x1ZGVcIiA6IFwic2FtZS1vcmlnaW5cIixcbiAgICByZWRpcmVjdDogXCJmb2xsb3dcIixcbiAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlSGVhZGVycyhodHRwSGVhZGVycykge1xuICBjb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcbiAgZm9yIChjb25zdCBwcm9wZXJ0eSBpbiBodHRwSGVhZGVycykge1xuICAgIGNvbnN0IHZhbHVlID0gaHR0cEhlYWRlcnNbcHJvcGVydHldO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBoZWFkZXJzLmFwcGVuZChwcm9wZXJ0eSwgdmFsdWUpO1xuICB9XG4gIHJldHVybiBoZWFkZXJzO1xufVxuXG4vKiogQGltcGxlbWVudHMge0lQREZTdHJlYW19ICovXG5jbGFzcyBQREZGZXRjaFN0cmVhbSB7XG4gIGNvbnN0cnVjdG9yKHNvdXJjZSkge1xuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIHRoaXMuaXNIdHRwID0gL15odHRwcz86L2kudGVzdChzb3VyY2UudXJsKTtcbiAgICB0aGlzLmh0dHBIZWFkZXJzID0gKHRoaXMuaXNIdHRwICYmIHNvdXJjZS5odHRwSGVhZGVycykgfHwge307XG5cbiAgICB0aGlzLl9mdWxsUmVxdWVzdFJlYWRlciA9IG51bGw7XG4gICAgdGhpcy5fcmFuZ2VSZXF1ZXN0UmVhZGVycyA9IFtdO1xuICB9XG5cbiAgZ2V0IF9wcm9ncmVzc2l2ZURhdGFMZW5ndGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyPy5fbG9hZGVkID8/IDA7XG4gIH1cblxuICBnZXRGdWxsUmVhZGVyKCkge1xuICAgIGFzc2VydChcbiAgICAgICF0aGlzLl9mdWxsUmVxdWVzdFJlYWRlcixcbiAgICAgIFwiUERGRmV0Y2hTdHJlYW0uZ2V0RnVsbFJlYWRlciBjYW4gb25seSBiZSBjYWxsZWQgb25jZS5cIlxuICAgICk7XG4gICAgdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXIgPSBuZXcgUERGRmV0Y2hTdHJlYW1SZWFkZXIodGhpcyk7XG4gICAgcmV0dXJuIHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyO1xuICB9XG5cbiAgZ2V0UmFuZ2VSZWFkZXIoYmVnaW4sIGVuZCkge1xuICAgIGlmIChlbmQgPD0gdGhpcy5fcHJvZ3Jlc3NpdmVEYXRhTGVuZ3RoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgcmVhZGVyID0gbmV3IFBERkZldGNoU3RyZWFtUmFuZ2VSZWFkZXIodGhpcywgYmVnaW4sIGVuZCk7XG4gICAgdGhpcy5fcmFuZ2VSZXF1ZXN0UmVhZGVycy5wdXNoKHJlYWRlcik7XG4gICAgcmV0dXJuIHJlYWRlcjtcbiAgfVxuXG4gIGNhbmNlbEFsbFJlcXVlc3RzKHJlYXNvbikge1xuICAgIGlmICh0aGlzLl9mdWxsUmVxdWVzdFJlYWRlcikge1xuICAgICAgdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXIuY2FuY2VsKHJlYXNvbik7XG4gICAgfVxuICAgIGZvciAoY29uc3QgcmVhZGVyIG9mIHRoaXMuX3JhbmdlUmVxdWVzdFJlYWRlcnMuc2xpY2UoMCkpIHtcbiAgICAgIHJlYWRlci5jYW5jZWwocmVhc29uKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqIEBpbXBsZW1lbnRzIHtJUERGU3RyZWFtUmVhZGVyfSAqL1xuY2xhc3MgUERGRmV0Y2hTdHJlYW1SZWFkZXIge1xuICBjb25zdHJ1Y3RvcihzdHJlYW0pIHtcbiAgICB0aGlzLl9zdHJlYW0gPSBzdHJlYW07XG4gICAgdGhpcy5fcmVhZGVyID0gbnVsbDtcbiAgICB0aGlzLl9sb2FkZWQgPSAwO1xuICAgIHRoaXMuX2ZpbGVuYW1lID0gbnVsbDtcbiAgICBjb25zdCBzb3VyY2UgPSBzdHJlYW0uc291cmNlO1xuICAgIHRoaXMuX3dpdGhDcmVkZW50aWFscyA9IHNvdXJjZS53aXRoQ3JlZGVudGlhbHMgfHwgZmFsc2U7XG4gICAgdGhpcy5fY29udGVudExlbmd0aCA9IHNvdXJjZS5sZW5ndGg7XG4gICAgdGhpcy5faGVhZGVyc0NhcGFiaWxpdHkgPSBjcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSgpO1xuICAgIHRoaXMuX2Rpc2FibGVSYW5nZSA9IHNvdXJjZS5kaXNhYmxlUmFuZ2UgfHwgZmFsc2U7XG4gICAgdGhpcy5fcmFuZ2VDaHVua1NpemUgPSBzb3VyY2UucmFuZ2VDaHVua1NpemU7XG4gICAgaWYgKCF0aGlzLl9yYW5nZUNodW5rU2l6ZSAmJiAhdGhpcy5fZGlzYWJsZVJhbmdlKSB7XG4gICAgICB0aGlzLl9kaXNhYmxlUmFuZ2UgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgQWJvcnRDb250cm9sbGVyICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB0aGlzLl9hYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgfVxuICAgIHRoaXMuX2lzU3RyZWFtaW5nU3VwcG9ydGVkID0gIXNvdXJjZS5kaXNhYmxlU3RyZWFtO1xuICAgIHRoaXMuX2lzUmFuZ2VTdXBwb3J0ZWQgPSAhc291cmNlLmRpc2FibGVSYW5nZTtcblxuICAgIHRoaXMuX2hlYWRlcnMgPSBjcmVhdGVIZWFkZXJzKHRoaXMuX3N0cmVhbS5odHRwSGVhZGVycyk7XG5cbiAgICBjb25zdCB1cmwgPSBzb3VyY2UudXJsO1xuICAgIGZldGNoKFxuICAgICAgdXJsLFxuICAgICAgY3JlYXRlRmV0Y2hPcHRpb25zKFxuICAgICAgICB0aGlzLl9oZWFkZXJzLFxuICAgICAgICB0aGlzLl93aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgIHRoaXMuX2Fib3J0Q29udHJvbGxlclxuICAgICAgKVxuICAgIClcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgaWYgKCF2YWxpZGF0ZVJlc3BvbnNlU3RhdHVzKHJlc3BvbnNlLnN0YXR1cykpIHtcbiAgICAgICAgICB0aHJvdyBjcmVhdGVSZXNwb25zZVN0YXR1c0Vycm9yKHJlc3BvbnNlLnN0YXR1cywgdXJsKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9yZWFkZXIgPSByZXNwb25zZS5ib2R5LmdldFJlYWRlcigpO1xuICAgICAgICB0aGlzLl9oZWFkZXJzQ2FwYWJpbGl0eS5yZXNvbHZlKCk7XG5cbiAgICAgICAgY29uc3QgZ2V0UmVzcG9uc2VIZWFkZXIgPSBuYW1lID0+IHtcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuaGVhZGVycy5nZXQobmFtZSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHsgYWxsb3dSYW5nZVJlcXVlc3RzLCBzdWdnZXN0ZWRMZW5ndGggfSA9XG4gICAgICAgICAgdmFsaWRhdGVSYW5nZVJlcXVlc3RDYXBhYmlsaXRpZXMoe1xuICAgICAgICAgICAgZ2V0UmVzcG9uc2VIZWFkZXIsXG4gICAgICAgICAgICBpc0h0dHA6IHRoaXMuX3N0cmVhbS5pc0h0dHAsXG4gICAgICAgICAgICByYW5nZUNodW5rU2l6ZTogdGhpcy5fcmFuZ2VDaHVua1NpemUsXG4gICAgICAgICAgICBkaXNhYmxlUmFuZ2U6IHRoaXMuX2Rpc2FibGVSYW5nZSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLl9pc1JhbmdlU3VwcG9ydGVkID0gYWxsb3dSYW5nZVJlcXVlc3RzO1xuICAgICAgICAvLyBTZXR0aW5nIHJpZ2h0IGNvbnRlbnQgbGVuZ3RoLlxuICAgICAgICB0aGlzLl9jb250ZW50TGVuZ3RoID0gc3VnZ2VzdGVkTGVuZ3RoIHx8IHRoaXMuX2NvbnRlbnRMZW5ndGg7XG5cbiAgICAgICAgdGhpcy5fZmlsZW5hbWUgPSBleHRyYWN0RmlsZW5hbWVGcm9tSGVhZGVyKGdldFJlc3BvbnNlSGVhZGVyKTtcblxuICAgICAgICAvLyBXZSBuZWVkIHRvIHN0b3AgcmVhZGluZyB3aGVuIHJhbmdlIGlzIHN1cHBvcnRlZCBhbmQgc3RyZWFtaW5nIGlzXG4gICAgICAgIC8vIGRpc2FibGVkLlxuICAgICAgICBpZiAoIXRoaXMuX2lzU3RyZWFtaW5nU3VwcG9ydGVkICYmIHRoaXMuX2lzUmFuZ2VTdXBwb3J0ZWQpIHtcbiAgICAgICAgICB0aGlzLmNhbmNlbChuZXcgQWJvcnRFeGNlcHRpb24oXCJTdHJlYW1pbmcgaXMgZGlzYWJsZWQuXCIpKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCh0aGlzLl9oZWFkZXJzQ2FwYWJpbGl0eS5yZWplY3QpO1xuXG4gICAgdGhpcy5vblByb2dyZXNzID0gbnVsbDtcbiAgfVxuXG4gIGdldCBoZWFkZXJzUmVhZHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hlYWRlcnNDYXBhYmlsaXR5LnByb21pc2U7XG4gIH1cblxuICBnZXQgZmlsZW5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZpbGVuYW1lO1xuICB9XG5cbiAgZ2V0IGNvbnRlbnRMZW5ndGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbnRlbnRMZW5ndGg7XG4gIH1cblxuICBnZXQgaXNSYW5nZVN1cHBvcnRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNSYW5nZVN1cHBvcnRlZDtcbiAgfVxuXG4gIGdldCBpc1N0cmVhbWluZ1N1cHBvcnRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNTdHJlYW1pbmdTdXBwb3J0ZWQ7XG4gIH1cblxuICBhc3luYyByZWFkKCkge1xuICAgIGF3YWl0IHRoaXMuX2hlYWRlcnNDYXBhYmlsaXR5LnByb21pc2U7XG4gICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgdGhpcy5fcmVhZGVyLnJlYWQoKTtcbiAgICBpZiAoZG9uZSkge1xuICAgICAgcmV0dXJuIHsgdmFsdWUsIGRvbmUgfTtcbiAgICB9XG4gICAgdGhpcy5fbG9hZGVkICs9IHZhbHVlLmJ5dGVMZW5ndGg7XG4gICAgaWYgKHRoaXMub25Qcm9ncmVzcykge1xuICAgICAgdGhpcy5vblByb2dyZXNzKHtcbiAgICAgICAgbG9hZGVkOiB0aGlzLl9sb2FkZWQsXG4gICAgICAgIHRvdGFsOiB0aGlzLl9jb250ZW50TGVuZ3RoLFxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KHZhbHVlKS5idWZmZXI7XG4gICAgcmV0dXJuIHsgdmFsdWU6IGJ1ZmZlciwgZG9uZTogZmFsc2UgfTtcbiAgfVxuXG4gIGNhbmNlbChyZWFzb24pIHtcbiAgICBpZiAodGhpcy5fcmVhZGVyKSB7XG4gICAgICB0aGlzLl9yZWFkZXIuY2FuY2VsKHJlYXNvbik7XG4gICAgfVxuICAgIGlmICh0aGlzLl9hYm9ydENvbnRyb2xsZXIpIHtcbiAgICAgIHRoaXMuX2Fib3J0Q29udHJvbGxlci5hYm9ydCgpO1xuICAgIH1cbiAgfVxufVxuXG4vKiogQGltcGxlbWVudHMge0lQREZTdHJlYW1SYW5nZVJlYWRlcn0gKi9cbmNsYXNzIFBERkZldGNoU3RyZWFtUmFuZ2VSZWFkZXIge1xuICBjb25zdHJ1Y3RvcihzdHJlYW0sIGJlZ2luLCBlbmQpIHtcbiAgICB0aGlzLl9zdHJlYW0gPSBzdHJlYW07XG4gICAgdGhpcy5fcmVhZGVyID0gbnVsbDtcbiAgICB0aGlzLl9sb2FkZWQgPSAwO1xuICAgIGNvbnN0IHNvdXJjZSA9IHN0cmVhbS5zb3VyY2U7XG4gICAgdGhpcy5fd2l0aENyZWRlbnRpYWxzID0gc291cmNlLndpdGhDcmVkZW50aWFscyB8fCBmYWxzZTtcbiAgICB0aGlzLl9yZWFkQ2FwYWJpbGl0eSA9IGNyZWF0ZVByb21pc2VDYXBhYmlsaXR5KCk7XG4gICAgdGhpcy5faXNTdHJlYW1pbmdTdXBwb3J0ZWQgPSAhc291cmNlLmRpc2FibGVTdHJlYW07XG5cbiAgICBpZiAodHlwZW9mIEFib3J0Q29udHJvbGxlciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhpcy5fYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIH1cblxuICAgIHRoaXMuX2hlYWRlcnMgPSBjcmVhdGVIZWFkZXJzKHRoaXMuX3N0cmVhbS5odHRwSGVhZGVycyk7XG4gICAgdGhpcy5faGVhZGVycy5hcHBlbmQoXCJSYW5nZVwiLCBgYnl0ZXM9JHtiZWdpbn0tJHtlbmQgLSAxfWApO1xuXG4gICAgY29uc3QgdXJsID0gc291cmNlLnVybDtcbiAgICBmZXRjaChcbiAgICAgIHVybCxcbiAgICAgIGNyZWF0ZUZldGNoT3B0aW9ucyhcbiAgICAgICAgdGhpcy5faGVhZGVycyxcbiAgICAgICAgdGhpcy5fd2l0aENyZWRlbnRpYWxzLFxuICAgICAgICB0aGlzLl9hYm9ydENvbnRyb2xsZXJcbiAgICAgIClcbiAgICApXG4gICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgIGlmICghdmFsaWRhdGVSZXNwb25zZVN0YXR1cyhyZXNwb25zZS5zdGF0dXMpKSB7XG4gICAgICAgICAgdGhyb3cgY3JlYXRlUmVzcG9uc2VTdGF0dXNFcnJvcihyZXNwb25zZS5zdGF0dXMsIHVybCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVhZENhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICAgICAgICB0aGlzLl9yZWFkZXIgPSByZXNwb25zZS5ib2R5LmdldFJlYWRlcigpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCh0aGlzLl9yZWFkQ2FwYWJpbGl0eS5yZWplY3QpO1xuXG4gICAgdGhpcy5vblByb2dyZXNzID0gbnVsbDtcbiAgfVxuXG4gIGdldCBpc1N0cmVhbWluZ1N1cHBvcnRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNTdHJlYW1pbmdTdXBwb3J0ZWQ7XG4gIH1cblxuICBhc3luYyByZWFkKCkge1xuICAgIGF3YWl0IHRoaXMuX3JlYWRDYXBhYmlsaXR5LnByb21pc2U7XG4gICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgdGhpcy5fcmVhZGVyLnJlYWQoKTtcbiAgICBpZiAoZG9uZSkge1xuICAgICAgcmV0dXJuIHsgdmFsdWUsIGRvbmUgfTtcbiAgICB9XG4gICAgdGhpcy5fbG9hZGVkICs9IHZhbHVlLmJ5dGVMZW5ndGg7XG4gICAgaWYgKHRoaXMub25Qcm9ncmVzcykge1xuICAgICAgdGhpcy5vblByb2dyZXNzKHsgbG9hZGVkOiB0aGlzLl9sb2FkZWQgfSk7XG4gICAgfVxuICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KHZhbHVlKS5idWZmZXI7XG4gICAgcmV0dXJuIHsgdmFsdWU6IGJ1ZmZlciwgZG9uZTogZmFsc2UgfTtcbiAgfVxuXG4gIGNhbmNlbChyZWFzb24pIHtcbiAgICBpZiAodGhpcy5fcmVhZGVyKSB7XG4gICAgICB0aGlzLl9yZWFkZXIuY2FuY2VsKHJlYXNvbik7XG4gICAgfVxuICAgIGlmICh0aGlzLl9hYm9ydENvbnRyb2xsZXIpIHtcbiAgICAgIHRoaXMuX2Fib3J0Q29udHJvbGxlci5hYm9ydCgpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgeyBQREZGZXRjaFN0cmVhbSB9O1xuIiwgIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd19wZGZqc19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193X3BkZmpzX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCAiLyogQ29weXJpZ2h0IDIwMTIgTW96aWxsYSBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG4vKiogQHR5cGVkZWYge2ltcG9ydChcIi4vZGlzcGxheS9hcGlcIikuUERGRG9jdW1lbnRMb2FkaW5nVGFza30gUERGRG9jdW1lbnRMb2FkaW5nVGFzayAqL1xuLyoqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL2Rpc3BsYXkvYXBpXCIpLlBERkRvY3VtZW50UHJveHl9IFBERkRvY3VtZW50UHJveHkgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9kaXNwbGF5L2FwaVwiKS5QREZQYWdlUHJveHl9IFBERlBhZ2VQcm94eSAqL1xuLyoqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL2Rpc3BsYXkvYXBpXCIpLlJlbmRlclRhc2t9IFJlbmRlclRhc2sgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9kaXNwbGF5L2Rpc3BsYXlfdXRpbHNcIikuUGFnZVZpZXdwb3J0fSBQYWdlVmlld3BvcnQgKi9cblxuaW1wb3J0IHtcbiAgQW5ub3RhdGlvbk1vZGUsXG4gIENNYXBDb21wcmVzc2lvblR5cGUsXG4gIGNyZWF0ZVByb21pc2VDYXBhYmlsaXR5LFxuICBjcmVhdGVWYWxpZEFic29sdXRlVXJsLFxuICBJbnZhbGlkUERGRXhjZXB0aW9uLFxuICBNaXNzaW5nUERGRXhjZXB0aW9uLFxuICBPUFMsXG4gIFBhc3N3b3JkUmVzcG9uc2VzLFxuICBQZXJtaXNzaW9uRmxhZyxcbiAgc2hhZG93LFxuICBVbmV4cGVjdGVkUmVzcG9uc2VFeGNlcHRpb24sXG4gIFVOU1VQUE9SVEVEX0ZFQVRVUkVTLFxuICBVdGlsLFxuICBWZXJib3NpdHlMZXZlbCxcbn0gZnJvbSBcIi4vc2hhcmVkL3V0aWwuanNcIjtcbmltcG9ydCB7XG4gIGJ1aWxkLFxuICBnZXREb2N1bWVudCxcbiAgTG9vcGJhY2tQb3J0LFxuICBQREZEYXRhUmFuZ2VUcmFuc3BvcnQsXG4gIFBERldvcmtlcixcbiAgc2V0UERGTmV0d29ya1N0cmVhbUZhY3RvcnksXG4gIHZlcnNpb24sXG59IGZyb20gXCIuL2Rpc3BsYXkvYXBpLmpzXCI7XG5pbXBvcnQge1xuICBnZXRGaWxlbmFtZUZyb21VcmwsXG4gIGdldFBkZkZpbGVuYW1lRnJvbVVybCxcbiAgZ2V0WGZhUGFnZVZpZXdwb3J0LFxuICBpc1BkZkZpbGUsXG4gIGlzVmFsaWRGZXRjaFVybCxcbiAgbG9hZFNjcmlwdCxcbiAgUERGRGF0ZVN0cmluZyxcbiAgUGl4ZWxzUGVySW5jaCxcbiAgUmVuZGVyaW5nQ2FuY2VsbGVkRXhjZXB0aW9uLFxufSBmcm9tIFwiLi9kaXNwbGF5L2Rpc3BsYXlfdXRpbHMuanNcIjtcbmltcG9ydCB7IEFubm90YXRpb25MYXllciB9IGZyb20gXCIuL2Rpc3BsYXkvYW5ub3RhdGlvbl9sYXllci5qc1wiO1xuaW1wb3J0IHsgR2xvYmFsV29ya2VyT3B0aW9ucyB9IGZyb20gXCIuL2Rpc3BsYXkvd29ya2VyX29wdGlvbnMuanNcIjtcbmltcG9ydCB7IGlzTm9kZUpTIH0gZnJvbSBcIi4vc2hhcmVkL2lzX25vZGUuanNcIjtcbmltcG9ydCB7IHJlbmRlclRleHRMYXllciB9IGZyb20gXCIuL2Rpc3BsYXkvdGV4dF9sYXllci5qc1wiO1xuaW1wb3J0IHsgU1ZHR3JhcGhpY3MgfSBmcm9tIFwiLi9kaXNwbGF5L3N2Zy5qc1wiO1xuaW1wb3J0IHsgWGZhTGF5ZXIgfSBmcm9tIFwiLi9kaXNwbGF5L3hmYV9sYXllci5qc1wiO1xuXG4vKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMgKi9cbmNvbnN0IHBkZmpzVmVyc2lvbiA9XG4gIHR5cGVvZiBQREZKU0RldiAhPT0gXCJ1bmRlZmluZWRcIiA/IFBERkpTRGV2LmV2YWwoXCJCVU5ETEVfVkVSU0lPTlwiKSA6IHZvaWQgMDtcbi8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycyAqL1xuY29uc3QgcGRmanNCdWlsZCA9XG4gIHR5cGVvZiBQREZKU0RldiAhPT0gXCJ1bmRlZmluZWRcIiA/IFBERkpTRGV2LmV2YWwoXCJCVU5ETEVfQlVJTERcIikgOiB2b2lkIDA7XG5cbmlmICh0eXBlb2YgUERGSlNEZXYgPT09IFwidW5kZWZpbmVkXCIgfHwgIVBERkpTRGV2LnRlc3QoXCJQUk9EVUNUSU9OXCIpKSB7XG4gIGNvbnN0IHN0cmVhbXNQcm9taXNlID0gUHJvbWlzZS5hbGwoW1xuICAgIGltcG9ydChcInBkZmpzL2Rpc3BsYXkvbmV0d29yay5qc1wiKSxcbiAgICBpbXBvcnQoXCJwZGZqcy9kaXNwbGF5L2ZldGNoX3N0cmVhbS5qc1wiKSxcbiAgXSk7XG5cbiAgc2V0UERGTmV0d29ya1N0cmVhbUZhY3RvcnkoYXN5bmMgcGFyYW1zID0+IHtcbiAgICBjb25zdCBbeyBQREZOZXR3b3JrU3RyZWFtIH0sIHsgUERGRmV0Y2hTdHJlYW0gfV0gPSBhd2FpdCBzdHJlYW1zUHJvbWlzZTtcbiAgICBpZiAoaXNWYWxpZEZldGNoVXJsKHBhcmFtcy51cmwpKSB7XG4gICAgICByZXR1cm4gbmV3IFBERkZldGNoU3RyZWFtKHBhcmFtcyk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUERGTmV0d29ya1N0cmVhbShwYXJhbXMpO1xuICB9KTtcbn0gZWxzZSBpZiAoUERGSlNEZXYudGVzdChcIkdFTkVSSUMgfHwgQ0hST01FXCIpKSB7XG4gIGlmIChQREZKU0Rldi50ZXN0KFwiR0VORVJJQ1wiKSAmJiBpc05vZGVKUykge1xuICAgIGNvbnN0IHsgUERGTm9kZVN0cmVhbSB9ID0gcmVxdWlyZShcIi4vZGlzcGxheS9ub2RlX3N0cmVhbS5qc1wiKTtcblxuICAgIHNldFBERk5ldHdvcmtTdHJlYW1GYWN0b3J5KHBhcmFtcyA9PiB7XG4gICAgICByZXR1cm4gbmV3IFBERk5vZGVTdHJlYW0ocGFyYW1zKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCB7IFBERk5ldHdvcmtTdHJlYW0gfSA9IHJlcXVpcmUoXCIuL2Rpc3BsYXkvbmV0d29yay5qc1wiKTtcbiAgICBjb25zdCB7IFBERkZldGNoU3RyZWFtIH0gPSByZXF1aXJlKFwiLi9kaXNwbGF5L2ZldGNoX3N0cmVhbS5qc1wiKTtcblxuICAgIHNldFBERk5ldHdvcmtTdHJlYW1GYWN0b3J5KHBhcmFtcyA9PiB7XG4gICAgICBpZiAoaXNWYWxpZEZldGNoVXJsKHBhcmFtcy51cmwpKSB7XG4gICAgICAgIHJldHVybiBuZXcgUERGRmV0Y2hTdHJlYW0ocGFyYW1zKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgUERGTmV0d29ya1N0cmVhbShwYXJhbXMpO1xuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCB7XG4gIEFubm90YXRpb25MYXllcixcbiAgQW5ub3RhdGlvbk1vZGUsXG4gIGJ1aWxkLFxuICBDTWFwQ29tcHJlc3Npb25UeXBlLFxuICBjcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSxcbiAgY3JlYXRlVmFsaWRBYnNvbHV0ZVVybCxcbiAgZ2V0RG9jdW1lbnQsXG4gIGdldEZpbGVuYW1lRnJvbVVybCxcbiAgZ2V0UGRmRmlsZW5hbWVGcm9tVXJsLFxuICBnZXRYZmFQYWdlVmlld3BvcnQsXG4gIEdsb2JhbFdvcmtlck9wdGlvbnMsXG4gIEludmFsaWRQREZFeGNlcHRpb24sXG4gIGlzUGRmRmlsZSxcbiAgbG9hZFNjcmlwdCxcbiAgTG9vcGJhY2tQb3J0LFxuICBNaXNzaW5nUERGRXhjZXB0aW9uLFxuICBPUFMsXG4gIFBhc3N3b3JkUmVzcG9uc2VzLFxuICBQREZEYXRhUmFuZ2VUcmFuc3BvcnQsXG4gIFBERkRhdGVTdHJpbmcsXG4gIFBERldvcmtlcixcbiAgUGVybWlzc2lvbkZsYWcsXG4gIFBpeGVsc1BlckluY2gsXG4gIFJlbmRlcmluZ0NhbmNlbGxlZEV4Y2VwdGlvbixcbiAgcmVuZGVyVGV4dExheWVyLFxuICBzaGFkb3csXG4gIFNWR0dyYXBoaWNzLFxuICBVbmV4cGVjdGVkUmVzcG9uc2VFeGNlcHRpb24sXG4gIFVOU1VQUE9SVEVEX0ZFQVRVUkVTLFxuICBVdGlsLFxuICBWZXJib3NpdHlMZXZlbCxcbiAgdmVyc2lvbixcbiAgWGZhTGF5ZXIsXG59O1xuIiwgImltcG9ydCAqIGFzIHBkZmpzTGliIGZyb20gJ3BkZmpzLWRpc3QvYnVpbGQvcGRmJzsgXHJcbmltcG9ydCB7IFNWR0dyYXBoaWNzIH0gZnJvbSAncGRmanMtZGlzdCc7XHJcbnBkZmpzTGliLkdsb2JhbFdvcmtlck9wdGlvbnMud29ya2VyU3JjID0gJ2h0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3BkZi5qcy8yLjE0LjMwNS9wZGYud29ya2VyLm1pbi5qcyc7XHJcblxyXG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy82MjA2NjAzNy9yZW5kZXItcGRmLWpzLXBhZ2UtbGlrZS1yZWFsLWh0bWwtZWxlbWVudHMtbm90LWNhbnZhcy1vci1zdmdcclxuLy8gaHR0cHM6Ly9qYXZhc2NyaXB0LmhvdGV4YW1wbGVzLmNvbS9leGFtcGxlcy9wZGZqcy1kaXN0L1NWR0dyYXBoaWNzL2dldFNWRy9qYXZhc2NyaXB0LXN2Z2dyYXBoaWNzLWdldHN2Zy1tZXRob2QtZXhhbXBsZXMuaHRtbFxyXG5cclxuZXhwb3J0IGNvbnN0IGxvYWRQZGZXaXRoQ2FudmFzID0gKHBkZlVybDogc3RyaW5nLCB0YXJnZXRJZDogc3RyaW5nKTogdm9pZCA9PiB7XHJcbiAgY29uc3QgbG9hZGluZ1Rhc2sgPSBwZGZqc0xpYi5nZXREb2N1bWVudChwZGZVcmwpO1xyXG4gIGxvYWRpbmdUYXNrLnByb21pc2UudGhlbihhc3luYyhwZGYpID0+IHtcclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldElkKTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBwZGYubnVtUGFnZXM7IGkrKykge1xyXG4gICAgICAvLyBHZXQgZGVzaXJlZCBwYWdlXHJcbiAgICAgIHBkZi5nZXRQYWdlKGkpLnRoZW4oZnVuY3Rpb24ocGFnZSkge1xyXG4gICAgICAgIGNvbnN0IHNjYWxlID0gMS41O1xyXG4gICAgICAgIGNvbnN0IHZpZXdwb3J0ID0gcGFnZS5nZXRWaWV3cG9ydCh7IHNjYWxlOiBzY2FsZSB9KTtcclxuICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cclxuICAgICAgICAvLyBTZXQgaWQgYXR0cmlidXRlIHdpdGggcGFnZS0je3BkZl9wYWdlX251bWJlcn0gZm9ybWF0XHJcbiAgICAgICAgZGl2LnNldEF0dHJpYnV0ZShcImlkXCIsIFwicGFnZS1cIiArIChwYWdlLl9wYWdlSW5kZXggKyAxKSk7XHJcblxyXG4gICAgICAgIC8vIFRoaXMgd2lsbCBrZWVwIHBvc2l0aW9ucyBvZiBjaGlsZCBlbGVtZW50cyBhcyBwZXIgb3VyIG5lZWRzXHJcbiAgICAgICAgZGl2LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwicG9zaXRpb246IHJlbGF0aXZlXCIpO1xyXG5cclxuICAgICAgICAvLyBBcHBlbmQgZGl2IHdpdGhpbiBkaXYjY29udGFpbmVyXHJcbiAgICAgICAgY29udGFpbmVyPy5hcHBlbmRDaGlsZChkaXYpO1xyXG5cclxuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgQ2FudmFzIGVsZW1lbnRcclxuICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG5cclxuICAgICAgICAvLyBBcHBlbmQgQ2FudmFzIHdpdGhpbiBkaXYjcGFnZS0je3BkZl9wYWdlX251bWJlcn1cclxuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoY2FudmFzKTtcclxuXHJcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSB2aWV3cG9ydC5oZWlnaHQ7XHJcbiAgICAgICAgY2FudmFzLndpZHRoID0gdmlld3BvcnQud2lkdGg7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlbmRlckNvbnRleHQgPSB7XHJcbiAgICAgICAgICBjYW52YXNDb250ZXh0OiBjb250ZXh0LFxyXG4gICAgICAgICAgdmlld3BvcnQ6IHZpZXdwb3J0XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gUmVuZGVyIFBERiBwYWdlXHJcbiAgICAgICAgcGFnZS5yZW5kZXIocmVuZGVyQ29udGV4dCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGxvYWRQZGZXaXRoU3ZnID0gKHBkZlVybDogc3RyaW5nLCB0YXJnZXRJZDogc3RyaW5nKTogdm9pZCA9PiB7XHJcbiAgY29uc3QgbG9hZGluZ1Rhc2sgPSBwZGZqc0xpYi5nZXREb2N1bWVudChwZGZVcmwpO1xyXG4gIGxvYWRpbmdUYXNrLnByb21pc2UudGhlbihhc3luYyhwZGYpID0+IHtcclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldElkKTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBwZGYubnVtUGFnZXM7IGkrKykge1xyXG4gICAgICAvLyBHZXQgZGVzaXJlZCBwYWdlXHJcbiAgICAgIHBkZi5nZXRQYWdlKGkpLnRoZW4oZnVuY3Rpb24ocGFnZSkge1xyXG4gICAgICAgIGNvbnN0IHNjYWxlID0gMS41OyBcclxuICAgICAgICBjb25zdCB2aWV3cG9ydCA9IHBhZ2UuZ2V0Vmlld3BvcnQoe3NjYWxlOiBzY2FsZX0pOyBcclxuICAgICAgICBjb25zdCBzdmdDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdmcnKTsgLy8gU2V0IGRpbWVuc2lvbnMgXHJcbiAgICAgICAgc3ZnQ29udGFpbmVyLnN0eWxlLndpZHRoID0gdmlld3BvcnQud2lkdGggKyAncHgnOyBcclxuICAgICAgICBzdmdDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gdmlld3BvcnQuaGVpZ2h0ICsgJ3B4JzsgLy8gU1ZHIHJlbmRlcmluZyBieSBQREYuanMgXHJcbiAgICAgICAgY29udGFpbmVyPy5hcHBlbmRDaGlsZChzdmdDb250YWluZXIpO1xyXG4gICAgICAgIHBhZ2UuZ2V0T3BlcmF0b3JMaXN0KCkudGhlbihmdW5jdGlvbiAob3BMaXN0KSB7IFxyXG4gICAgICAgICAgY29uc3Qgc3ZnR2Z4ID0gbmV3IFNWR0dyYXBoaWNzKHBhZ2UuY29tbW9uT2JqcywgcGFnZS5vYmpzKTsgXHJcbiAgICAgICAgICByZXR1cm4gc3ZnR2Z4LmdldFNWRyhvcExpc3QsIHZpZXdwb3J0KTsgXHJcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihzdmcpIHsgXHJcbiAgICAgICAgICBzdmdDb250YWluZXIuYXBwZW5kQ2hpbGQoc3ZnKTsgXHJcbiAgICAgICAgfSk7IFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9KTtcclxufTtcclxuXHJcbiIsICJpbXBvcnQgeyBsb2FkUGRmV2l0aENhbnZhcywgbG9hZFBkZldpdGhTdmcgfSBmcm9tIFwiLi9wZGYtdmlld2VyXCI7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcclxuICAvLyBsb2FkUGRmV2l0aENhbnZhcygnLi9zYW1wbGUxLnBkZicsICdwZGYtY29udGFpbmVyJyk7XHJcbiAgbG9hZFBkZldpdGhTdmcoJy4vc2FtcGxlMS5wZGYnLCAncGRmLWNvbnRhaW5lcicpO1xyXG59KTsiXSwKICAibWFwcGluZ3MiOiAieTVDQUFBLGtCQ0FBLGtCQ0FBLGtCQ0FBLGtCQ0FBLGtCQ0FBLCtDQ0FBLEFBQUEsVUFBQSxFQUFBLEVBQUEsQ0FDQSxBQUFBLE1BQUEsVUFBQSxVQUFBLE1BQUEsU0FBQSxTQUNBLE9BQUEsUUFBQSxFQUFBLEVBQ0EsQUFBQSxNQUFBLFNBQUEsWUFBQSxPQUFBLElBQ0EsT0FBQSx1QkFBQSxDQUFBLEVBQUEsQ0FBQSxFQUNBLEFBQUEsTUFBQSxVQUFBLFNBQ0EsUUFBQSx3QkFBQSxFQUFBLEVBRUEsRUFBQSx3QkFBQSxFQUFBLFNBQUEsRUFBQSxDQUNBLEdBQUMsUUFBQSxJQUNELEtBQUEsMnVDQ0tBLEVBQUEsQ0FBQSxFQUVBLEdBQU0sR0FBa0IsQ0FBQyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsQ0FBaEIsc0JBQ3hCLEdBQU0sR0FBdUIsQ0FBQyxLQUFPLEVBQUcsRUFBRyxLQUFPLEVBQUcsQ0FBeEIsMkJBYzdCLEdBQU0sR0FBc0IsQ0FDMUIsSUFBSyxFQUNMLFFBQVMsRUFDVCxNQUFPLEVBQ1Asa0JBQW1CLEdBQ25CLG9CQUFxQixHQUNyQixvQkFBcUIsR0FDckIsT0FBUSxHQVBrQiwwQkFVNUIsR0FBTSxHQUFpQixDQUNyQixRQUFTLEVBQ1QsT0FBUSxFQUNSLGFBQWMsRUFDZCxlQUFnQixDQUpLLHFCQVF2QixHQUFNLEdBQWlCLENBQ3JCLE1BQU8sRUFDUCxnQkFBaUIsRUFDakIsS0FBTSxHQUNOLG1CQUFvQixHQUNwQix1QkFBd0IsSUFDeEIsdUJBQXdCLElBQ3hCLFNBQVUsS0FDVixtQkFBb0IsSUFSQyxxQkFXdkIsR0FBTSxHQUFvQixDQUN4QixL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QkFBQSxDQUFBLEVBU0EsRUFBQSxvQkFBQSxDQUFBLEVBV0EsRUFBQSxvQkFBQSxFQUFBLEVBQ0EsRUFBQSxvQkFBQSxFQUFBLEVBQ0EsRUFBQSxvQkFBQSxDQUFBLEVBQ0EsRUFBQSxvQkFBQSxFQUFBLEVBQ0EsRUFBQSxvQkFBQSxFQUFBLEVBQ0EsRUFBQSxvQkFBQSxFQUFBLEVBR0EsR0FBTSxHQUM4QixXQUU5QixFQUM4QixZQWdCbEMsR0FBZ0MsRUFBQSxTQUFVLENBQ3hDLEdBQU0sQ0FBRSxpQkFBa0Isb0JBQVEsRUFBUixFQUUxQixBQUFBLEdBQUEsRUFBQSw0QkFBMkIsR0FDbEIsR0FBSSxHQUFjLENBQWxCLENBRFQsQ0FIRixLQU1PLENBQ0wsR0FBTSxDQUFFLG9CQUFxQixvQkFBUSxFQUFSLEVBQ3ZCLENBQUUsa0JBQW1CLG9CQUFRLEVBQVIsRUFFM0IsQUFBQSxHQUFBLEVBQUEsNEJBQTJCLEdBQ3JCLEdBQUEsRUFBQSxpQkFBZ0IsRUFBTyxHQUF2QixFQUNLLEdBQUksR0FBZSxDQUFuQixFQUVGLEdBQUksR0FBaUIsQ0FBckIsQ0FKVCxDQVgyQyxpQ0NyRi9DLE9BQTBCLFNBQzFCLEdBQTRCLFNBQzVCLEFBQVMsdUJBQW9CLFVBQVksMkVBZ0RsQyxHQUFNLElBQWlCLENBQUMsRUFBZ0IsSUFBMkIsQ0FFeEUsQUFEb0IsQUFBUyxlQUFZLENBQU0sRUFDbkMsUUFBUSxLQUFLLEtBQU0sSUFBUSxDQUNyQyxHQUFNLEdBQVksU0FBUyxlQUFlLENBQVEsRUFFbEQsT0FBUyxHQUFJLEVBQUcsR0FBSyxFQUFJLFNBQVUsSUFFakMsRUFBSSxRQUFRLENBQUMsRUFBRSxLQUFLLFNBQVMsRUFBTSxDQUVqQyxHQUFNLEdBQVcsRUFBSyxZQUFZLENBQUMsTUFBTyxHQUFLLENBQUMsRUFDMUMsRUFBZSxTQUFTLGNBQWMsS0FBSyxFQUNqRCxFQUFhLE1BQU0sTUFBUSxFQUFTLE1BQVEsS0FDNUMsRUFBYSxNQUFNLE9BQVMsRUFBUyxPQUFTLEtBQzlDLFdBQVcsWUFBWSxHQUN2QixFQUFLLGdCQUFnQixFQUFFLEtBQUssU0FBVSxFQUFRLENBRTVDLE1BQU8sQUFEUSxJQUFJLGdCQUFZLEVBQUssV0FBWSxFQUFLLElBQUksRUFDM0MsT0FBTyxFQUFRLENBQVEsQ0FDdkMsQ0FBQyxFQUFFLEtBQUssU0FBUyxFQUFLLENBQ3BCLEVBQWEsWUFBWSxDQUFHLENBQzlCLENBQUMsQ0FDSCxDQUFDLENBRUwsQ0FBQyxDQUNILEVDdkVBLE9BQU8saUJBQWlCLE9BQVEsSUFBTSxDQUVwQyxHQUFlLGdCQUFpQixlQUFlLENBQ2pELENBQUMiLAogICJuYW1lcyI6IFtdCn0K
